var S0=Object.defineProperty;var P0=(t,e,n)=>e in t?S0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pa=(t,e,n)=>P0(t,typeof e!="symbol"?e+"":e,n);function E0(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Um(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function C0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),n}var $m={exports:{}},So={},Fm={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=Symbol.for("react.element"),T0=Symbol.for("react.portal"),L0=Symbol.for("react.fragment"),I0=Symbol.for("react.strict_mode"),O0=Symbol.for("react.profiler"),A0=Symbol.for("react.provider"),M0=Symbol.for("react.context"),R0=Symbol.for("react.forward_ref"),z0=Symbol.for("react.suspense"),D0=Symbol.for("react.memo"),B0=Symbol.for("react.lazy"),Gh=Symbol.iterator;function U0(t){return t===null||typeof t!="object"?null:(t=Gh&&t[Gh]||t["@@iterator"],typeof t=="function"?t:null)}var Zm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qm=Object.assign,Vm={};function Ns(t,e,n){this.props=t,this.context=e,this.refs=Vm,this.updater=n||Zm}Ns.prototype.isReactComponent={};Ns.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ns.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wm(){}Wm.prototype=Ns.prototype;function ku(t,e,n){this.props=t,this.context=e,this.refs=Vm,this.updater=n||Zm}var Su=ku.prototype=new Wm;Su.constructor=ku;qm(Su,Ns.prototype);Su.isPureReactComponent=!0;var Kh=Array.isArray,Hm=Object.prototype.hasOwnProperty,Pu={current:null},Gm={key:!0,ref:!0,__self:!0,__source:!0};function Km(t,e,n){var s,a={},l=null,c=null;if(e!=null)for(s in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(l=""+e.key),e)Hm.call(e,s)&&!Gm.hasOwnProperty(s)&&(a[s]=e[s]);var f=arguments.length-2;if(f===1)a.children=n;else if(1<f){for(var d=Array(f),m=0;m<f;m++)d[m]=arguments[m+2];a.children=d}if(t&&t.defaultProps)for(s in f=t.defaultProps,f)a[s]===void 0&&(a[s]=f[s]);return{$$typeof:Bi,type:t,key:l,ref:c,props:a,_owner:Pu.current}}function $0(t,e){return{$$typeof:Bi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Eu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bi}function F0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Jh=/\/+/g;function Il(t,e){return typeof t=="object"&&t!==null&&t.key!=null?F0(""+t.key):e.toString(36)}function Ra(t,e,n,s,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(l){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case Bi:case T0:c=!0}}if(c)return c=t,a=a(c),t=s===""?"."+Il(c,0):s,Kh(a)?(n="",t!=null&&(n=t.replace(Jh,"$&/")+"/"),Ra(a,e,n,"",function(m){return m})):a!=null&&(Eu(a)&&(a=$0(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(Jh,"$&/")+"/")+t)),e.push(a)),1;if(c=0,s=s===""?".":s+":",Kh(t))for(var f=0;f<t.length;f++){l=t[f];var d=s+Il(l,f);c+=Ra(l,e,n,d,a)}else if(d=U0(t),typeof d=="function")for(t=d.call(t),f=0;!(l=t.next()).done;)l=l.value,d=s+Il(l,f++),c+=Ra(l,e,n,d,a);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function ga(t,e,n){if(t==null)return t;var s=[],a=0;return Ra(t,s,"","",function(l){return e.call(n,l,a++)}),s}function Z0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rt={current:null},za={transition:null},q0={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:za,ReactCurrentOwner:Pu};function Jm(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:ga,forEach:function(t,e,n){ga(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ga(t,function(){e++}),e},toArray:function(t){return ga(t,function(e){return e})||[]},only:function(t){if(!Eu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Ns;ue.Fragment=L0;ue.Profiler=O0;ue.PureComponent=ku;ue.StrictMode=I0;ue.Suspense=z0;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0;ue.act=Jm;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=qm({},t.props),a=t.key,l=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,c=Pu.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(d in e)Hm.call(e,d)&&!Gm.hasOwnProperty(d)&&(s[d]=e[d]===void 0&&f!==void 0?f[d]:e[d])}var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){f=Array(d);for(var m=0;m<d;m++)f[m]=arguments[m+2];s.children=f}return{$$typeof:Bi,type:t.type,key:a,ref:l,props:s,_owner:c}};ue.createContext=function(t){return t={$$typeof:M0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:A0,_context:t},t.Consumer=t};ue.createElement=Km;ue.createFactory=function(t){var e=Km.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:R0,render:t}};ue.isValidElement=Eu;ue.lazy=function(t){return{$$typeof:B0,_payload:{_status:-1,_result:t},_init:Z0}};ue.memo=function(t,e){return{$$typeof:D0,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=za.transition;za.transition={};try{t()}finally{za.transition=e}};ue.unstable_act=Jm;ue.useCallback=function(t,e){return rt.current.useCallback(t,e)};ue.useContext=function(t){return rt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return rt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return rt.current.useEffect(t,e)};ue.useId=function(){return rt.current.useId()};ue.useImperativeHandle=function(t,e,n){return rt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return rt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return rt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return rt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return rt.current.useReducer(t,e,n)};ue.useRef=function(t){return rt.current.useRef(t)};ue.useState=function(t){return rt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return rt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return rt.current.useTransition()};ue.version="18.3.1";Fm.exports=ue;var E=Fm.exports;const tn=Um(E),V0=E0({__proto__:null,default:tn},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=E,H0=Symbol.for("react.element"),G0=Symbol.for("react.fragment"),K0=Object.prototype.hasOwnProperty,J0=W0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q0={key:!0,ref:!0,__self:!0,__source:!0};function Qm(t,e,n){var s,a={},l=null,c=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(c=e.ref);for(s in e)K0.call(e,s)&&!Q0.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:H0,type:t,key:l,ref:c,props:a,_owner:J0.current}}So.Fragment=G0;So.jsx=Qm;So.jsxs=Qm;$m.exports=So;var i=$m.exports,mc={},Ym={exports:{}},bt={},Xm={exports:{}},ep={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var V=B.length;B.push(Q);e:for(;0<V;){var te=V-1>>>1,G=B[te];if(0<a(G,Q))B[te]=Q,B[V]=G,V=te;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var Q=B[0],V=B.pop();if(V!==Q){B[0]=V;e:for(var te=0,G=B.length,Ce=G>>>1;te<Ce;){var xe=2*(te+1)-1,fe=B[xe],re=xe+1,it=B[re];if(0>a(fe,V))re<G&&0>a(it,fe)?(B[te]=it,B[re]=V,te=re):(B[te]=fe,B[xe]=V,te=xe);else if(re<G&&0>a(it,V))B[te]=it,B[re]=V,te=re;else break e}}return Q}function a(B,Q){var V=B.sortIndex-Q.sortIndex;return V!==0?V:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var d=[],m=[],v=1,g=null,y=3,x=!1,P=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(B){for(var Q=n(m);Q!==null;){if(Q.callback===null)s(m);else if(Q.startTime<=B)s(m),Q.sortIndex=Q.expirationTime,e(d,Q);else break;Q=n(m)}}function T(B){if(w=!1,j(B),!P)if(n(d)!==null)P=!0,q(S);else{var Q=n(m);Q!==null&&pe(T,Q.startTime-B)}}function S(B,Q){P=!1,w&&(w=!1,N(R),R=-1),x=!0;var V=y;try{for(j(Q),g=n(d);g!==null&&(!(g.expirationTime>Q)||B&&!U());){var te=g.callback;if(typeof te=="function"){g.callback=null,y=g.priorityLevel;var G=te(g.expirationTime<=Q);Q=t.unstable_now(),typeof G=="function"?g.callback=G:g===n(d)&&s(d),j(Q)}else s(d);g=n(d)}if(g!==null)var Ce=!0;else{var xe=n(m);xe!==null&&pe(T,xe.startTime-Q),Ce=!1}return Ce}finally{g=null,y=V,x=!1}}var k=!1,O=null,R=-1,A=5,$=-1;function U(){return!(t.unstable_now()-$<A)}function D(){if(O!==null){var B=t.unstable_now();$=B;var Q=!0;try{Q=O(!0,B)}finally{Q?J():(k=!1,O=null)}}else k=!1}var J;if(typeof b=="function")J=function(){b(D)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ge=ne.port2;ne.port1.onmessage=D,J=function(){ge.postMessage(null)}}else J=function(){C(D,0)};function q(B){O=B,k||(k=!0,J())}function pe(B,Q){R=C(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){P||x||(P=!0,q(S))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var V=y;y=Q;try{return B()}finally{y=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var V=y;y=B;try{return Q()}finally{y=V}},t.unstable_scheduleCallback=function(B,Q,V){var te=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=V+G,B={id:v++,callback:Q,priorityLevel:B,startTime:V,expirationTime:G,sortIndex:-1},V>te?(B.sortIndex=V,e(m,B),n(d)===null&&B===n(m)&&(w?(N(R),R=-1):w=!0,pe(T,V-te))):(B.sortIndex=G,e(d,B),P||x||(P=!0,q(S))),B},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(B){var Q=y;return function(){var V=y;y=Q;try{return B.apply(this,arguments)}finally{y=V}}}})(ep);Xm.exports=ep;var Y0=Xm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0=E,_t=Y0;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tp=new Set,xi={};function Tr(t,e){gs(t,e),gs(t+"Capture",e)}function gs(t,e){for(xi[t]=e,t=0;t<e.length;t++)tp.add(e[t])}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pc=Object.prototype.hasOwnProperty,ey=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qh={},Yh={};function ty(t){return pc.call(Yh,t)?!0:pc.call(Qh,t)?!1:ey.test(t)?Yh[t]=!0:(Qh[t]=!0,!1)}function ny(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ry(t,e,n,s){if(e===null||typeof e>"u"||ny(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function st(t,e,n,s,a,l,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=c}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){He[t]=new st(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];He[e]=new st(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){He[t]=new st(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){He[t]=new st(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){He[t]=new st(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){He[t]=new st(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){He[t]=new st(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){He[t]=new st(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){He[t]=new st(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cu=/[\-:]([a-z])/g;function Tu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cu,Tu);He[e]=new st(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cu,Tu);He[e]=new st(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cu,Tu);He[e]=new st(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){He[t]=new st(t,1,!1,t.toLowerCase(),null,!1,!1)});He.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){He[t]=new st(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lu(t,e,n,s){var a=He.hasOwnProperty(e)?He[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ry(e,n,a,s)&&(n=null),s||a===null?ty(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,s=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var bn=X0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),Iu=Symbol.for("react.strict_mode"),gc=Symbol.for("react.profiler"),np=Symbol.for("react.provider"),rp=Symbol.for("react.context"),Ou=Symbol.for("react.forward_ref"),vc=Symbol.for("react.suspense"),xc=Symbol.for("react.suspense_list"),Au=Symbol.for("react.memo"),Tn=Symbol.for("react.lazy"),sp=Symbol.for("react.offscreen"),Xh=Symbol.iterator;function Vs(t){return t===null||typeof t!="object"?null:(t=Xh&&t[Xh]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,Ol;function ei(t){if(Ol===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ol=e&&e[1]||""}return`
`+Ol+t}var Al=!1;function Ml(t,e){if(!t||Al)return"";Al=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var s=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){s=m}t.call(e.prototype)}else{try{throw Error()}catch(m){s=m}t()}}catch(m){if(m&&s&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=s.stack.split(`
`),c=a.length-1,f=l.length-1;1<=c&&0<=f&&a[c]!==l[f];)f--;for(;1<=c&&0<=f;c--,f--)if(a[c]!==l[f]){if(c!==1||f!==1)do if(c--,f--,0>f||a[c]!==l[f]){var d=`
`+a[c].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=c&&0<=f);break}}}finally{Al=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ei(t):""}function sy(t){switch(t.tag){case 5:return ei(t.type);case 16:return ei("Lazy");case 13:return ei("Suspense");case 19:return ei("SuspenseList");case 0:case 2:case 15:return t=Ml(t.type,!1),t;case 11:return t=Ml(t.type.render,!1),t;case 1:return t=Ml(t.type,!0),t;default:return""}}function yc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xr:return"Fragment";case Yr:return"Portal";case gc:return"Profiler";case Iu:return"StrictMode";case vc:return"Suspense";case xc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rp:return(t.displayName||"Context")+".Consumer";case np:return(t._context.displayName||"Context")+".Provider";case Ou:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Au:return e=t.displayName||null,e!==null?e:yc(t.type)||"Memo";case Tn:e=t._payload,t=t._init;try{return yc(t(e))}catch{}}return null}function iy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yc(e);case 8:return e===Iu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ip(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ay(t){var e=ip(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(c){s=""+c,l.call(this,c)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(c){s=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=ay(t))}function ap(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=ip(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _c(t,e){var n=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ef(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Kn(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function op(t,e){e=e.checked,e!=null&&Lu(t,"checked",e,!1)}function wc(t,e){op(t,e);var n=Kn(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bc(t,e.type,n):e.hasOwnProperty("defaultValue")&&bc(t,e.type,Kn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bc(t,e,n){(e!=="number"||Ga(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ti=Array.isArray;function us(t,e,n,s){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Kn(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function jc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(ti(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kn(n)}}function lp(t,e){var n=Kn(e.value),s=Kn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function rf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ya,up=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ya=ya||document.createElement("div"),ya.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ya.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oy=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(t){oy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ai[e]=ai[t]})});function dp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ai.hasOwnProperty(t)&&ai[t]?(""+e).trim():e+"px"}function hp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=dp(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,a):t[n]=a}}var ly=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kc(t,e){if(e){if(ly[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Sc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=null;function Mu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ec=null,ds=null,hs=null;function sf(t){if(t=Fi(t)){if(typeof Ec!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Lo(e),Ec(t.stateNode,t.type,e))}}function fp(t){ds?hs?hs.push(t):hs=[t]:ds=t}function mp(){if(ds){var t=ds,e=hs;if(hs=ds=null,sf(t),e)for(t=0;t<e.length;t++)sf(e[t])}}function pp(t,e){return t(e)}function gp(){}var Rl=!1;function vp(t,e,n){if(Rl)return t(e,n);Rl=!0;try{return pp(t,e,n)}finally{Rl=!1,(ds!==null||hs!==null)&&(gp(),mp())}}function _i(t,e){var n=t.stateNode;if(n===null)return null;var s=Lo(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Cc=!1;if(xn)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){Cc=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{Cc=!1}function cy(t,e,n,s,a,l,c,f,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(v){this.onError(v)}}var oi=!1,Ka=null,Ja=!1,Tc=null,uy={onError:function(t){oi=!0,Ka=t}};function dy(t,e,n,s,a,l,c,f,d){oi=!1,Ka=null,cy.apply(uy,arguments)}function hy(t,e,n,s,a,l,c,f,d){if(dy.apply(this,arguments),oi){if(oi){var m=Ka;oi=!1,Ka=null}else throw Error(Z(198));Ja||(Ja=!0,Tc=m)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function af(t){if(Lr(t)!==t)throw Error(Z(188))}function fy(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,s=e;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return af(a),t;if(l===s)return af(a),e;l=l.sibling}throw Error(Z(188))}if(n.return!==s.return)n=a,s=l;else{for(var c=!1,f=a.child;f;){if(f===n){c=!0,n=a,s=l;break}if(f===s){c=!0,s=a,n=l;break}f=f.sibling}if(!c){for(f=l.child;f;){if(f===n){c=!0,n=l,s=a;break}if(f===s){c=!0,s=l,n=a;break}f=f.sibling}if(!c)throw Error(Z(189))}}if(n.alternate!==s)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function yp(t){return t=fy(t),t!==null?_p(t):null}function _p(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_p(t);if(e!==null)return e;t=t.sibling}return null}var wp=_t.unstable_scheduleCallback,of=_t.unstable_cancelCallback,my=_t.unstable_shouldYield,py=_t.unstable_requestPaint,Ie=_t.unstable_now,gy=_t.unstable_getCurrentPriorityLevel,Ru=_t.unstable_ImmediatePriority,bp=_t.unstable_UserBlockingPriority,Qa=_t.unstable_NormalPriority,vy=_t.unstable_LowPriority,jp=_t.unstable_IdlePriority,Po=null,nn=null;function xy(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Po,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:wy,yy=Math.log,_y=Math.LN2;function wy(t){return t>>>=0,t===0?32:31-(yy(t)/_y|0)|0}var _a=64,wa=4194304;function ni(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ya(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,a=t.suspendedLanes,l=t.pingedLanes,c=n&268435455;if(c!==0){var f=c&~a;f!==0?s=ni(f):(l&=c,l!==0&&(s=ni(l)))}else c=n&~a,c!==0?s=ni(c):l!==0&&(s=ni(l));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,l=e&-e,a>=l||a===16&&(l&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Ft(e),a=1<<n,s|=t[n],e&=~a;return s}function by(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jy(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var c=31-Ft(l),f=1<<c,d=a[c];d===-1?(!(f&n)||f&s)&&(a[c]=by(f,e)):d<=e&&(t.expiredLanes|=f),l&=~f}}function Lc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Np(){var t=_a;return _a<<=1,!(_a&4194240)&&(_a=64),t}function zl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ui(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function Ny(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Ft(n),l=1<<a;e[a]=0,s[a]=-1,t[a]=-1,n&=~l}}function zu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Ft(n),a=1<<s;a&e|t[s]&e&&(t[s]|=e),n&=~a}}var ve=0;function kp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sp,Du,Pp,Ep,Cp,Ic=!1,ba=[],Dn=null,Bn=null,Un=null,wi=new Map,bi=new Map,In=[],ky="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lf(t,e){switch(t){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":wi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bi.delete(e.pointerId)}}function Hs(t,e,n,s,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},e!==null&&(e=Fi(e),e!==null&&Du(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Sy(t,e,n,s,a){switch(e){case"focusin":return Dn=Hs(Dn,t,e,n,s,a),!0;case"dragenter":return Bn=Hs(Bn,t,e,n,s,a),!0;case"mouseover":return Un=Hs(Un,t,e,n,s,a),!0;case"pointerover":var l=a.pointerId;return wi.set(l,Hs(wi.get(l)||null,t,e,n,s,a)),!0;case"gotpointercapture":return l=a.pointerId,bi.set(l,Hs(bi.get(l)||null,t,e,n,s,a)),!0}return!1}function Tp(t){var e=pr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=xp(n),e!==null){t.blockedOn=e,Cp(t.priority,function(){Pp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Da(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Oc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Pc=s,n.target.dispatchEvent(s),Pc=null}else return e=Fi(n),e!==null&&Du(e),t.blockedOn=n,!1;e.shift()}return!0}function cf(t,e,n){Da(t)&&n.delete(e)}function Py(){Ic=!1,Dn!==null&&Da(Dn)&&(Dn=null),Bn!==null&&Da(Bn)&&(Bn=null),Un!==null&&Da(Un)&&(Un=null),wi.forEach(cf),bi.forEach(cf)}function Gs(t,e){t.blockedOn===e&&(t.blockedOn=null,Ic||(Ic=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,Py)))}function ji(t){function e(a){return Gs(a,t)}if(0<ba.length){Gs(ba[0],t);for(var n=1;n<ba.length;n++){var s=ba[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Dn!==null&&Gs(Dn,t),Bn!==null&&Gs(Bn,t),Un!==null&&Gs(Un,t),wi.forEach(e),bi.forEach(e),n=0;n<In.length;n++)s=In[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<In.length&&(n=In[0],n.blockedOn===null);)Tp(n),n.blockedOn===null&&In.shift()}var fs=bn.ReactCurrentBatchConfig,Xa=!0;function Ey(t,e,n,s){var a=ve,l=fs.transition;fs.transition=null;try{ve=1,Bu(t,e,n,s)}finally{ve=a,fs.transition=l}}function Cy(t,e,n,s){var a=ve,l=fs.transition;fs.transition=null;try{ve=4,Bu(t,e,n,s)}finally{ve=a,fs.transition=l}}function Bu(t,e,n,s){if(Xa){var a=Oc(t,e,n,s);if(a===null)Hl(t,e,s,eo,n),lf(t,s);else if(Sy(a,t,e,n,s))s.stopPropagation();else if(lf(t,s),e&4&&-1<ky.indexOf(t)){for(;a!==null;){var l=Fi(a);if(l!==null&&Sp(l),l=Oc(t,e,n,s),l===null&&Hl(t,e,s,eo,n),l===a)break;a=l}a!==null&&s.stopPropagation()}else Hl(t,e,s,null,n)}}var eo=null;function Oc(t,e,n,s){if(eo=null,t=Mu(s),t=pr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eo=t,null}function Lp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gy()){case Ru:return 1;case bp:return 4;case Qa:case vy:return 16;case jp:return 536870912;default:return 16}default:return 16}}var Mn=null,Uu=null,Ba=null;function Ip(){if(Ba)return Ba;var t,e=Uu,n=e.length,s,a="value"in Mn?Mn.value:Mn.textContent,l=a.length;for(t=0;t<n&&e[t]===a[t];t++);var c=n-t;for(s=1;s<=c&&e[n-s]===a[l-s];s++);return Ba=a.slice(t,1<s?1-s:void 0)}function Ua(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ja(){return!0}function uf(){return!1}function jt(t){function e(n,s,a,l,c){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(n=t[f],this[f]=n?n(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ja:uf,this.isPropagationStopped=uf,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ja)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ja)},persist:function(){},isPersistent:ja}),e}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$u=jt(ks),$i=Ee({},ks,{view:0,detail:0}),Ty=jt($i),Dl,Bl,Ks,Eo=Ee({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ks&&(Ks&&t.type==="mousemove"?(Dl=t.screenX-Ks.screenX,Bl=t.screenY-Ks.screenY):Bl=Dl=0,Ks=t),Dl)},movementY:function(t){return"movementY"in t?t.movementY:Bl}}),df=jt(Eo),Ly=Ee({},Eo,{dataTransfer:0}),Iy=jt(Ly),Oy=Ee({},$i,{relatedTarget:0}),Ul=jt(Oy),Ay=Ee({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),My=jt(Ay),Ry=Ee({},ks,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zy=jt(Ry),Dy=Ee({},ks,{data:0}),hf=jt(Dy),By={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$y[t])?!!e[t]:!1}function Fu(){return Fy}var Zy=Ee({},$i,{key:function(t){if(t.key){var e=By[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ua(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(t){return t.type==="keypress"?Ua(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ua(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qy=jt(Zy),Vy=Ee({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ff=jt(Vy),Wy=Ee({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),Hy=jt(Wy),Gy=Ee({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ky=jt(Gy),Jy=Ee({},Eo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qy=jt(Jy),Yy=[9,13,27,32],Zu=xn&&"CompositionEvent"in window,li=null;xn&&"documentMode"in document&&(li=document.documentMode);var Xy=xn&&"TextEvent"in window&&!li,Op=xn&&(!Zu||li&&8<li&&11>=li),mf=" ",pf=!1;function Ap(t,e){switch(t){case"keyup":return Yy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function e_(t,e){switch(t){case"compositionend":return Mp(e);case"keypress":return e.which!==32?null:(pf=!0,mf);case"textInput":return t=e.data,t===mf&&pf?null:t;default:return null}}function t_(t,e){if(es)return t==="compositionend"||!Zu&&Ap(t,e)?(t=Ip(),Ba=Uu=Mn=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Op&&e.locale!=="ko"?null:e.data;default:return null}}var n_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!n_[t.type]:e==="textarea"}function Rp(t,e,n,s){fp(s),e=to(e,"onChange"),0<e.length&&(n=new $u("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ci=null,Ni=null;function r_(t){Hp(t,0)}function Co(t){var e=rs(t);if(ap(e))return t}function s_(t,e){if(t==="change")return e}var zp=!1;if(xn){var $l;if(xn){var Fl="oninput"in document;if(!Fl){var vf=document.createElement("div");vf.setAttribute("oninput","return;"),Fl=typeof vf.oninput=="function"}$l=Fl}else $l=!1;zp=$l&&(!document.documentMode||9<document.documentMode)}function xf(){ci&&(ci.detachEvent("onpropertychange",Dp),Ni=ci=null)}function Dp(t){if(t.propertyName==="value"&&Co(Ni)){var e=[];Rp(e,Ni,t,Mu(t)),vp(r_,e)}}function i_(t,e,n){t==="focusin"?(xf(),ci=e,Ni=n,ci.attachEvent("onpropertychange",Dp)):t==="focusout"&&xf()}function a_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Co(Ni)}function o_(t,e){if(t==="click")return Co(e)}function l_(t,e){if(t==="input"||t==="change")return Co(e)}function c_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qt=typeof Object.is=="function"?Object.is:c_;function ki(t,e){if(qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!pc.call(e,a)||!qt(t[a],e[a]))return!1}return!0}function yf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _f(t,e){var n=yf(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yf(n)}}function Bp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Up(){for(var t=window,e=Ga();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ga(t.document)}return e}function qu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function u_(t){var e=Up(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bp(n.ownerDocument.documentElement,n)){if(s!==null&&qu(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!t.extend&&l>s&&(a=s,s=l,l=a),a=_f(n,l);var c=_f(n,s);a&&c&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),l>s?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var d_=xn&&"documentMode"in document&&11>=document.documentMode,ts=null,Ac=null,ui=null,Mc=!1;function wf(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mc||ts==null||ts!==Ga(s)||(s=ts,"selectionStart"in s&&qu(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ui&&ki(ui,s)||(ui=s,s=to(Ac,"onSelect"),0<s.length&&(e=new $u("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=ts)))}function Na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ns={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},Zl={},$p={};xn&&($p=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function To(t){if(Zl[t])return Zl[t];if(!ns[t])return t;var e=ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $p)return Zl[t]=e[n];return t}var Fp=To("animationend"),Zp=To("animationiteration"),qp=To("animationstart"),Vp=To("transitionend"),Wp=new Map,bf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(t,e){Wp.set(t,e),Tr(e,[t])}for(var ql=0;ql<bf.length;ql++){var Vl=bf[ql],h_=Vl.toLowerCase(),f_=Vl[0].toUpperCase()+Vl.slice(1);Yn(h_,"on"+f_)}Yn(Fp,"onAnimationEnd");Yn(Zp,"onAnimationIteration");Yn(qp,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(Vp,"onTransitionEnd");gs("onMouseEnter",["mouseout","mouseover"]);gs("onMouseLeave",["mouseout","mouseover"]);gs("onPointerEnter",["pointerout","pointerover"]);gs("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri));function jf(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,hy(s,e,void 0,t),t.currentTarget=null}function Hp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],a=s.event;s=s.listeners;e:{var l=void 0;if(e)for(var c=s.length-1;0<=c;c--){var f=s[c],d=f.instance,m=f.currentTarget;if(f=f.listener,d!==l&&a.isPropagationStopped())break e;jf(a,f,m),l=d}else for(c=0;c<s.length;c++){if(f=s[c],d=f.instance,m=f.currentTarget,f=f.listener,d!==l&&a.isPropagationStopped())break e;jf(a,f,m),l=d}}}if(Ja)throw t=Tc,Ja=!1,Tc=null,t}function be(t,e){var n=e[Uc];n===void 0&&(n=e[Uc]=new Set);var s=t+"__bubble";n.has(s)||(Gp(e,t,2,!1),n.add(s))}function Wl(t,e,n){var s=0;e&&(s|=4),Gp(n,t,s,e)}var ka="_reactListening"+Math.random().toString(36).slice(2);function Si(t){if(!t[ka]){t[ka]=!0,tp.forEach(function(n){n!=="selectionchange"&&(m_.has(n)||Wl(n,!1,t),Wl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ka]||(e[ka]=!0,Wl("selectionchange",!1,e))}}function Gp(t,e,n,s){switch(Lp(e)){case 1:var a=Ey;break;case 4:a=Cy;break;default:a=Bu}n=a.bind(null,e,n,t),a=void 0,!Cc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function Hl(t,e,n,s,a){var l=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var c=s.tag;if(c===3||c===4){var f=s.stateNode.containerInfo;if(f===a||f.nodeType===8&&f.parentNode===a)break;if(c===4)for(c=s.return;c!==null;){var d=c.tag;if((d===3||d===4)&&(d=c.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;c=c.return}for(;f!==null;){if(c=pr(f),c===null)return;if(d=c.tag,d===5||d===6){s=l=c;continue e}f=f.parentNode}}s=s.return}vp(function(){var m=l,v=Mu(n),g=[];e:{var y=Wp.get(t);if(y!==void 0){var x=$u,P=t;switch(t){case"keypress":if(Ua(n)===0)break e;case"keydown":case"keyup":x=qy;break;case"focusin":P="focus",x=Ul;break;case"focusout":P="blur",x=Ul;break;case"beforeblur":case"afterblur":x=Ul;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Iy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Hy;break;case Fp:case Zp:case qp:x=My;break;case Vp:x=Ky;break;case"scroll":x=Ty;break;case"wheel":x=Qy;break;case"copy":case"cut":case"paste":x=zy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=ff}var w=(e&4)!==0,C=!w&&t==="scroll",N=w?y!==null?y+"Capture":null:y;w=[];for(var b=m,j;b!==null;){j=b;var T=j.stateNode;if(j.tag===5&&T!==null&&(j=T,N!==null&&(T=_i(b,N),T!=null&&w.push(Pi(b,T,j)))),C)break;b=b.return}0<w.length&&(y=new x(y,P,null,n,v),g.push({event:y,listeners:w}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",y&&n!==Pc&&(P=n.relatedTarget||n.fromElement)&&(pr(P)||P[yn]))break e;if((x||y)&&(y=v.window===v?v:(y=v.ownerDocument)?y.defaultView||y.parentWindow:window,x?(P=n.relatedTarget||n.toElement,x=m,P=P?pr(P):null,P!==null&&(C=Lr(P),P!==C||P.tag!==5&&P.tag!==6)&&(P=null)):(x=null,P=m),x!==P)){if(w=df,T="onMouseLeave",N="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(w=ff,T="onPointerLeave",N="onPointerEnter",b="pointer"),C=x==null?y:rs(x),j=P==null?y:rs(P),y=new w(T,b+"leave",x,n,v),y.target=C,y.relatedTarget=j,T=null,pr(v)===m&&(w=new w(N,b+"enter",P,n,v),w.target=j,w.relatedTarget=C,T=w),C=T,x&&P)t:{for(w=x,N=P,b=0,j=w;j;j=qr(j))b++;for(j=0,T=N;T;T=qr(T))j++;for(;0<b-j;)w=qr(w),b--;for(;0<j-b;)N=qr(N),j--;for(;b--;){if(w===N||N!==null&&w===N.alternate)break t;w=qr(w),N=qr(N)}w=null}else w=null;x!==null&&Nf(g,y,x,w,!1),P!==null&&C!==null&&Nf(g,C,P,w,!0)}}e:{if(y=m?rs(m):window,x=y.nodeName&&y.nodeName.toLowerCase(),x==="select"||x==="input"&&y.type==="file")var S=s_;else if(gf(y))if(zp)S=l_;else{S=a_;var k=i_}else(x=y.nodeName)&&x.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(S=o_);if(S&&(S=S(t,m))){Rp(g,S,n,v);break e}k&&k(t,y,m),t==="focusout"&&(k=y._wrapperState)&&k.controlled&&y.type==="number"&&bc(y,"number",y.value)}switch(k=m?rs(m):window,t){case"focusin":(gf(k)||k.contentEditable==="true")&&(ts=k,Ac=m,ui=null);break;case"focusout":ui=Ac=ts=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,wf(g,n,v);break;case"selectionchange":if(d_)break;case"keydown":case"keyup":wf(g,n,v)}var O;if(Zu)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else es?Ap(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Op&&n.locale!=="ko"&&(es||R!=="onCompositionStart"?R==="onCompositionEnd"&&es&&(O=Ip()):(Mn=v,Uu="value"in Mn?Mn.value:Mn.textContent,es=!0)),k=to(m,R),0<k.length&&(R=new hf(R,t,null,n,v),g.push({event:R,listeners:k}),O?R.data=O:(O=Mp(n),O!==null&&(R.data=O)))),(O=Xy?e_(t,n):t_(t,n))&&(m=to(m,"onBeforeInput"),0<m.length&&(v=new hf("onBeforeInput","beforeinput",null,n,v),g.push({event:v,listeners:m}),v.data=O))}Hp(g,e)})}function Pi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function to(t,e){for(var n=e+"Capture",s=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=_i(t,n),l!=null&&s.unshift(Pi(t,l,a)),l=_i(t,e),l!=null&&s.push(Pi(t,l,a))),t=t.return}return s}function qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nf(t,e,n,s,a){for(var l=e._reactName,c=[];n!==null&&n!==s;){var f=n,d=f.alternate,m=f.stateNode;if(d!==null&&d===s)break;f.tag===5&&m!==null&&(f=m,a?(d=_i(n,l),d!=null&&c.unshift(Pi(n,d,f))):a||(d=_i(n,l),d!=null&&c.push(Pi(n,d,f)))),n=n.return}c.length!==0&&t.push({event:e,listeners:c})}var p_=/\r\n?/g,g_=/\u0000|\uFFFD/g;function kf(t){return(typeof t=="string"?t:""+t).replace(p_,`
`).replace(g_,"")}function Sa(t,e,n){if(e=kf(e),kf(t)!==e&&n)throw Error(Z(425))}function no(){}var Rc=null,zc=null;function Dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bc=typeof setTimeout=="function"?setTimeout:void 0,v_=typeof clearTimeout=="function"?clearTimeout:void 0,Sf=typeof Promise=="function"?Promise:void 0,x_=typeof queueMicrotask=="function"?queueMicrotask:typeof Sf<"u"?function(t){return Sf.resolve(null).then(t).catch(y_)}:Bc;function y_(t){setTimeout(function(){throw t})}function Gl(t,e){var n=e,s=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){t.removeChild(a),ji(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);ji(e)}function $n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ss=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Ss,Ei="__reactProps$"+Ss,yn="__reactContainer$"+Ss,Uc="__reactEvents$"+Ss,__="__reactListeners$"+Ss,w_="__reactHandles$"+Ss;function pr(t){var e=t[Xt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yn]||n[Xt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pf(t);t!==null;){if(n=t[Xt])return n;t=Pf(t)}return e}t=n,n=t.parentNode}return null}function Fi(t){return t=t[Xt]||t[yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Lo(t){return t[Ei]||null}var $c=[],ss=-1;function Xn(t){return{current:t}}function je(t){0>ss||(t.current=$c[ss],$c[ss]=null,ss--)}function we(t,e){ss++,$c[ss]=t.current,t.current=e}var Jn={},Xe=Xn(Jn),ht=Xn(!1),jr=Jn;function vs(t,e){var n=t.type.contextTypes;if(!n)return Jn;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=e[l];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function ft(t){return t=t.childContextTypes,t!=null}function ro(){je(ht),je(Xe)}function Ef(t,e,n){if(Xe.current!==Jn)throw Error(Z(168));we(Xe,e),we(ht,n)}function Kp(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(Z(108,iy(t)||"Unknown",a));return Ee({},n,s)}function so(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jn,jr=Xe.current,we(Xe,t),we(ht,ht.current),!0}function Cf(t,e,n){var s=t.stateNode;if(!s)throw Error(Z(169));n?(t=Kp(t,e,jr),s.__reactInternalMemoizedMergedChildContext=t,je(ht),je(Xe),we(Xe,t)):je(ht),we(ht,n)}var mn=null,Io=!1,Kl=!1;function Jp(t){mn===null?mn=[t]:mn.push(t)}function b_(t){Io=!0,Jp(t)}function er(){if(!Kl&&mn!==null){Kl=!0;var t=0,e=ve;try{var n=mn;for(ve=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}mn=null,Io=!1}catch(a){throw mn!==null&&(mn=mn.slice(t+1)),wp(Ru,er),a}finally{ve=e,Kl=!1}}return null}var is=[],as=0,io=null,ao=0,Pt=[],Et=0,Nr=null,pn=1,gn="";function ur(t,e){is[as++]=ao,is[as++]=io,io=t,ao=e}function Qp(t,e,n){Pt[Et++]=pn,Pt[Et++]=gn,Pt[Et++]=Nr,Nr=t;var s=pn;t=gn;var a=32-Ft(s)-1;s&=~(1<<a),n+=1;var l=32-Ft(e)+a;if(30<l){var c=a-a%5;l=(s&(1<<c)-1).toString(32),s>>=c,a-=c,pn=1<<32-Ft(e)+a|n<<a|s,gn=l+t}else pn=1<<l|n<<a|s,gn=t}function Vu(t){t.return!==null&&(ur(t,1),Qp(t,1,0))}function Wu(t){for(;t===io;)io=is[--as],is[as]=null,ao=is[--as],is[as]=null;for(;t===Nr;)Nr=Pt[--Et],Pt[Et]=null,gn=Pt[--Et],Pt[Et]=null,pn=Pt[--Et],Pt[Et]=null}var xt=null,vt=null,Ne=!1,Ut=null;function Yp(t,e){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Tf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xt=t,vt=$n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xt=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Nr!==null?{id:pn,overflow:gn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xt=t,vt=null,!0):!1;default:return!1}}function Fc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zc(t){if(Ne){var e=vt;if(e){var n=e;if(!Tf(t,e)){if(Fc(t))throw Error(Z(418));e=$n(n.nextSibling);var s=xt;e&&Tf(t,e)?Yp(s,n):(t.flags=t.flags&-4097|2,Ne=!1,xt=t)}}else{if(Fc(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Ne=!1,xt=t}}}function Lf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xt=t}function Pa(t){if(t!==xt)return!1;if(!Ne)return Lf(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dc(t.type,t.memoizedProps)),e&&(e=vt)){if(Fc(t))throw Xp(),Error(Z(418));for(;e;)Yp(t,e),e=$n(e.nextSibling)}if(Lf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=$n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=xt?$n(t.stateNode.nextSibling):null;return!0}function Xp(){for(var t=vt;t;)t=$n(t.nextSibling)}function xs(){vt=xt=null,Ne=!1}function Hu(t){Ut===null?Ut=[t]:Ut.push(t)}var j_=bn.ReactCurrentBatchConfig;function Js(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var s=n.stateNode}if(!s)throw Error(Z(147,t));var a=s,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(c){var f=a.refs;c===null?delete f[l]:f[l]=c},e._stringRef=l,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Ea(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function If(t){var e=t._init;return e(t._payload)}function eg(t){function e(N,b){if(t){var j=N.deletions;j===null?(N.deletions=[b],N.flags|=16):j.push(b)}}function n(N,b){if(!t)return null;for(;b!==null;)e(N,b),b=b.sibling;return null}function s(N,b){for(N=new Map;b!==null;)b.key!==null?N.set(b.key,b):N.set(b.index,b),b=b.sibling;return N}function a(N,b){return N=Vn(N,b),N.index=0,N.sibling=null,N}function l(N,b,j){return N.index=j,t?(j=N.alternate,j!==null?(j=j.index,j<b?(N.flags|=2,b):j):(N.flags|=2,b)):(N.flags|=1048576,b)}function c(N){return t&&N.alternate===null&&(N.flags|=2),N}function f(N,b,j,T){return b===null||b.tag!==6?(b=nc(j,N.mode,T),b.return=N,b):(b=a(b,j),b.return=N,b)}function d(N,b,j,T){var S=j.type;return S===Xr?v(N,b,j.props.children,T,j.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Tn&&If(S)===b.type)?(T=a(b,j.props),T.ref=Js(N,b,j),T.return=N,T):(T=Ha(j.type,j.key,j.props,null,N.mode,T),T.ref=Js(N,b,j),T.return=N,T)}function m(N,b,j,T){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=rc(j,N.mode,T),b.return=N,b):(b=a(b,j.children||[]),b.return=N,b)}function v(N,b,j,T,S){return b===null||b.tag!==7?(b=_r(j,N.mode,T,S),b.return=N,b):(b=a(b,j),b.return=N,b)}function g(N,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return b=nc(""+b,N.mode,j),b.return=N,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case va:return j=Ha(b.type,b.key,b.props,null,N.mode,j),j.ref=Js(N,null,b),j.return=N,j;case Yr:return b=rc(b,N.mode,j),b.return=N,b;case Tn:var T=b._init;return g(N,T(b._payload),j)}if(ti(b)||Vs(b))return b=_r(b,N.mode,j,null),b.return=N,b;Ea(N,b)}return null}function y(N,b,j,T){var S=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return S!==null?null:f(N,b,""+j,T);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case va:return j.key===S?d(N,b,j,T):null;case Yr:return j.key===S?m(N,b,j,T):null;case Tn:return S=j._init,y(N,b,S(j._payload),T)}if(ti(j)||Vs(j))return S!==null?null:v(N,b,j,T,null);Ea(N,j)}return null}function x(N,b,j,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return N=N.get(j)||null,f(b,N,""+T,S);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case va:return N=N.get(T.key===null?j:T.key)||null,d(b,N,T,S);case Yr:return N=N.get(T.key===null?j:T.key)||null,m(b,N,T,S);case Tn:var k=T._init;return x(N,b,j,k(T._payload),S)}if(ti(T)||Vs(T))return N=N.get(j)||null,v(b,N,T,S,null);Ea(b,T)}return null}function P(N,b,j,T){for(var S=null,k=null,O=b,R=b=0,A=null;O!==null&&R<j.length;R++){O.index>R?(A=O,O=null):A=O.sibling;var $=y(N,O,j[R],T);if($===null){O===null&&(O=A);break}t&&O&&$.alternate===null&&e(N,O),b=l($,b,R),k===null?S=$:k.sibling=$,k=$,O=A}if(R===j.length)return n(N,O),Ne&&ur(N,R),S;if(O===null){for(;R<j.length;R++)O=g(N,j[R],T),O!==null&&(b=l(O,b,R),k===null?S=O:k.sibling=O,k=O);return Ne&&ur(N,R),S}for(O=s(N,O);R<j.length;R++)A=x(O,N,R,j[R],T),A!==null&&(t&&A.alternate!==null&&O.delete(A.key===null?R:A.key),b=l(A,b,R),k===null?S=A:k.sibling=A,k=A);return t&&O.forEach(function(U){return e(N,U)}),Ne&&ur(N,R),S}function w(N,b,j,T){var S=Vs(j);if(typeof S!="function")throw Error(Z(150));if(j=S.call(j),j==null)throw Error(Z(151));for(var k=S=null,O=b,R=b=0,A=null,$=j.next();O!==null&&!$.done;R++,$=j.next()){O.index>R?(A=O,O=null):A=O.sibling;var U=y(N,O,$.value,T);if(U===null){O===null&&(O=A);break}t&&O&&U.alternate===null&&e(N,O),b=l(U,b,R),k===null?S=U:k.sibling=U,k=U,O=A}if($.done)return n(N,O),Ne&&ur(N,R),S;if(O===null){for(;!$.done;R++,$=j.next())$=g(N,$.value,T),$!==null&&(b=l($,b,R),k===null?S=$:k.sibling=$,k=$);return Ne&&ur(N,R),S}for(O=s(N,O);!$.done;R++,$=j.next())$=x(O,N,R,$.value,T),$!==null&&(t&&$.alternate!==null&&O.delete($.key===null?R:$.key),b=l($,b,R),k===null?S=$:k.sibling=$,k=$);return t&&O.forEach(function(D){return e(N,D)}),Ne&&ur(N,R),S}function C(N,b,j,T){if(typeof j=="object"&&j!==null&&j.type===Xr&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case va:e:{for(var S=j.key,k=b;k!==null;){if(k.key===S){if(S=j.type,S===Xr){if(k.tag===7){n(N,k.sibling),b=a(k,j.props.children),b.return=N,N=b;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Tn&&If(S)===k.type){n(N,k.sibling),b=a(k,j.props),b.ref=Js(N,k,j),b.return=N,N=b;break e}n(N,k);break}else e(N,k);k=k.sibling}j.type===Xr?(b=_r(j.props.children,N.mode,T,j.key),b.return=N,N=b):(T=Ha(j.type,j.key,j.props,null,N.mode,T),T.ref=Js(N,b,j),T.return=N,N=T)}return c(N);case Yr:e:{for(k=j.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){n(N,b.sibling),b=a(b,j.children||[]),b.return=N,N=b;break e}else{n(N,b);break}else e(N,b);b=b.sibling}b=rc(j,N.mode,T),b.return=N,N=b}return c(N);case Tn:return k=j._init,C(N,b,k(j._payload),T)}if(ti(j))return P(N,b,j,T);if(Vs(j))return w(N,b,j,T);Ea(N,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,b!==null&&b.tag===6?(n(N,b.sibling),b=a(b,j),b.return=N,N=b):(n(N,b),b=nc(j,N.mode,T),b.return=N,N=b),c(N)):n(N,b)}return C}var ys=eg(!0),tg=eg(!1),oo=Xn(null),lo=null,os=null,Gu=null;function Ku(){Gu=os=lo=null}function Ju(t){var e=oo.current;je(oo),t._currentValue=e}function qc(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function ms(t,e){lo=t,Gu=os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Lt(t){var e=t._currentValue;if(Gu!==t)if(t={context:t,memoizedValue:e,next:null},os===null){if(lo===null)throw Error(Z(308));os=t,lo.dependencies={lanes:0,firstContext:t}}else os=os.next=t;return e}var gr=null;function Qu(t){gr===null?gr=[t]:gr.push(t)}function ng(t,e,n,s){var a=e.interleaved;return a===null?(n.next=n,Qu(e)):(n.next=a.next,a.next=n),e.interleaved=n,_n(t,s)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ln=!1;function Yu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fn(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,he&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,_n(t,n)}return a=s.interleaved,a===null?(e.next=e,Qu(s)):(e.next=a.next,a.next=e),s.interleaved=e,_n(t,n)}function $a(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zu(t,n)}}function Of(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=c:l=l.next=c,n=n.next}while(n!==null);l===null?a=l=e:l=l.next=e}else a=l=e;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function co(t,e,n,s){var a=t.updateQueue;Ln=!1;var l=a.firstBaseUpdate,c=a.lastBaseUpdate,f=a.shared.pending;if(f!==null){a.shared.pending=null;var d=f,m=d.next;d.next=null,c===null?l=m:c.next=m,c=d;var v=t.alternate;v!==null&&(v=v.updateQueue,f=v.lastBaseUpdate,f!==c&&(f===null?v.firstBaseUpdate=m:f.next=m,v.lastBaseUpdate=d))}if(l!==null){var g=a.baseState;c=0,v=m=d=null,f=l;do{var y=f.lane,x=f.eventTime;if((s&y)===y){v!==null&&(v=v.next={eventTime:x,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var P=t,w=f;switch(y=e,x=n,w.tag){case 1:if(P=w.payload,typeof P=="function"){g=P.call(x,g,y);break e}g=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=w.payload,y=typeof P=="function"?P.call(x,g,y):P,y==null)break e;g=Ee({},g,y);break e;case 2:Ln=!0}}f.callback!==null&&f.lane!==0&&(t.flags|=64,y=a.effects,y===null?a.effects=[f]:y.push(f))}else x={eventTime:x,lane:y,tag:f.tag,payload:f.payload,callback:f.callback,next:null},v===null?(m=v=x,d=g):v=v.next=x,c|=y;if(f=f.next,f===null){if(f=a.shared.pending,f===null)break;y=f,f=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);if(v===null&&(d=g),a.baseState=d,a.firstBaseUpdate=m,a.lastBaseUpdate=v,e=a.shared.interleaved,e!==null){a=e;do c|=a.lane,a=a.next;while(a!==e)}else l===null&&(a.shared.lanes=0);Sr|=c,t.lanes=c,t.memoizedState=g}}function Af(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(Z(191,a));a.call(s)}}}var Zi={},rn=Xn(Zi),Ci=Xn(Zi),Ti=Xn(Zi);function vr(t){if(t===Zi)throw Error(Z(174));return t}function Xu(t,e){switch(we(Ti,e),we(Ci,t),we(rn,Zi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nc(e,t)}je(rn),we(rn,e)}function _s(){je(rn),je(Ci),je(Ti)}function sg(t){vr(Ti.current);var e=vr(rn.current),n=Nc(e,t.type);e!==n&&(we(Ci,t),we(rn,n))}function ed(t){Ci.current===t&&(je(rn),je(Ci))}var Se=Xn(0);function uo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jl=[];function td(){for(var t=0;t<Jl.length;t++)Jl[t]._workInProgressVersionPrimary=null;Jl.length=0}var Fa=bn.ReactCurrentDispatcher,Ql=bn.ReactCurrentBatchConfig,kr=0,Pe=null,De=null,Fe=null,ho=!1,di=!1,Li=0,N_=0;function Ge(){throw Error(Z(321))}function nd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qt(t[n],e[n]))return!1;return!0}function rd(t,e,n,s,a,l){if(kr=l,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fa.current=t===null||t.memoizedState===null?E_:C_,t=n(s,a),di){l=0;do{if(di=!1,Li=0,25<=l)throw Error(Z(301));l+=1,Fe=De=null,e.updateQueue=null,Fa.current=T_,t=n(s,a)}while(di)}if(Fa.current=fo,e=De!==null&&De.next!==null,kr=0,Fe=De=Pe=null,ho=!1,e)throw Error(Z(300));return t}function sd(){var t=Li!==0;return Li=0,t}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Pe.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function It(){if(De===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=Fe===null?Pe.memoizedState:Fe.next;if(e!==null)Fe=e,De=t;else{if(t===null)throw Error(Z(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Fe===null?Pe.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function Ii(t,e){return typeof e=="function"?e(t):e}function Yl(t){var e=It(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var s=De,a=s.baseQueue,l=n.pending;if(l!==null){if(a!==null){var c=a.next;a.next=l.next,l.next=c}s.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,s=s.baseState;var f=c=null,d=null,m=l;do{var v=m.lane;if((kr&v)===v)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),s=m.hasEagerState?m.eagerState:t(s,m.action);else{var g={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(f=d=g,c=s):d=d.next=g,Pe.lanes|=v,Sr|=v}m=m.next}while(m!==null&&m!==l);d===null?c=s:d.next=f,qt(s,e.memoizedState)||(dt=!0),e.memoizedState=s,e.baseState=c,e.baseQueue=d,n.lastRenderedState=s}if(t=n.interleaved,t!==null){a=t;do l=a.lane,Pe.lanes|=l,Sr|=l,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xl(t){var e=It(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var s=n.dispatch,a=n.pending,l=e.memoizedState;if(a!==null){n.pending=null;var c=a=a.next;do l=t(l,c.action),c=c.next;while(c!==a);qt(l,e.memoizedState)||(dt=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,s]}function ig(){}function ag(t,e){var n=Pe,s=It(),a=e(),l=!qt(s.memoizedState,a);if(l&&(s.memoizedState=a,dt=!0),s=s.queue,id(cg.bind(null,n,s,t),[t]),s.getSnapshot!==e||l||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,Oi(9,lg.bind(null,n,s,a,e),void 0,null),Ze===null)throw Error(Z(349));kr&30||og(n,e,a)}return a}function og(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lg(t,e,n,s){e.value=n,e.getSnapshot=s,ug(e)&&dg(t)}function cg(t,e,n){return n(function(){ug(e)&&dg(t)})}function ug(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qt(t,n)}catch{return!0}}function dg(t){var e=_n(t,1);e!==null&&Zt(e,t,1,-1)}function Mf(t){var e=Yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:t},e.queue=t,t=t.dispatch=P_.bind(null,Pe,t),[e.memoizedState,t]}function Oi(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function hg(){return It().memoizedState}function Za(t,e,n,s){var a=Yt();Pe.flags|=t,a.memoizedState=Oi(1|e,n,void 0,s===void 0?null:s)}function Oo(t,e,n,s){var a=It();s=s===void 0?null:s;var l=void 0;if(De!==null){var c=De.memoizedState;if(l=c.destroy,s!==null&&nd(s,c.deps)){a.memoizedState=Oi(e,n,l,s);return}}Pe.flags|=t,a.memoizedState=Oi(1|e,n,l,s)}function Rf(t,e){return Za(8390656,8,t,e)}function id(t,e){return Oo(2048,8,t,e)}function fg(t,e){return Oo(4,2,t,e)}function mg(t,e){return Oo(4,4,t,e)}function pg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gg(t,e,n){return n=n!=null?n.concat([t]):null,Oo(4,4,pg.bind(null,e,t),n)}function ad(){}function vg(t,e){var n=It();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&nd(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function xg(t,e){var n=It();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&nd(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function yg(t,e,n){return kr&21?(qt(n,e)||(n=Np(),Pe.lanes|=n,Sr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function k_(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var s=Ql.transition;Ql.transition={};try{t(!1),e()}finally{ve=n,Ql.transition=s}}function _g(){return It().memoizedState}function S_(t,e,n){var s=qn(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},wg(t))bg(e,n);else if(n=ng(t,e,n,s),n!==null){var a=nt();Zt(n,t,s,a),jg(n,e,s)}}function P_(t,e,n){var s=qn(t),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(wg(t))bg(e,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var c=e.lastRenderedState,f=l(c,n);if(a.hasEagerState=!0,a.eagerState=f,qt(f,c)){var d=e.interleaved;d===null?(a.next=a,Qu(e)):(a.next=d.next,d.next=a),e.interleaved=a;return}}catch{}finally{}n=ng(t,e,a,s),n!==null&&(a=nt(),Zt(n,t,s,a),jg(n,e,s))}}function wg(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function bg(t,e){di=ho=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jg(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zu(t,n)}}var fo={readContext:Lt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},E_={readContext:Lt,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:Rf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Za(4194308,4,pg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Za(4194308,4,t,e)},useInsertionEffect:function(t,e){return Za(4,2,t,e)},useMemo:function(t,e){var n=Yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Yt();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=S_.bind(null,Pe,t),[s.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:Mf,useDebugValue:ad,useDeferredValue:function(t){return Yt().memoizedState=t},useTransition:function(){var t=Mf(!1),e=t[0];return t=k_.bind(null,t[1]),Yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Pe,a=Yt();if(Ne){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Ze===null)throw Error(Z(349));kr&30||og(s,e,n)}a.memoizedState=n;var l={value:n,getSnapshot:e};return a.queue=l,Rf(cg.bind(null,s,l,t),[t]),s.flags|=2048,Oi(9,lg.bind(null,s,l,n,e),void 0,null),n},useId:function(){var t=Yt(),e=Ze.identifierPrefix;if(Ne){var n=gn,s=pn;n=(s&~(1<<32-Ft(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Li++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=N_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C_={readContext:Lt,useCallback:vg,useContext:Lt,useEffect:id,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:mg,useMemo:xg,useReducer:Yl,useRef:hg,useState:function(){return Yl(Ii)},useDebugValue:ad,useDeferredValue:function(t){var e=It();return yg(e,De.memoizedState,t)},useTransition:function(){var t=Yl(Ii)[0],e=It().memoizedState;return[t,e]},useMutableSource:ig,useSyncExternalStore:ag,useId:_g,unstable_isNewReconciler:!1},T_={readContext:Lt,useCallback:vg,useContext:Lt,useEffect:id,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:mg,useMemo:xg,useReducer:Xl,useRef:hg,useState:function(){return Xl(Ii)},useDebugValue:ad,useDeferredValue:function(t){var e=It();return De===null?e.memoizedState=t:yg(e,De.memoizedState,t)},useTransition:function(){var t=Xl(Ii)[0],e=It().memoizedState;return[t,e]},useMutableSource:ig,useSyncExternalStore:ag,useId:_g,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=Ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vc(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ao={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=nt(),a=qn(t),l=vn(s,a);l.payload=e,n!=null&&(l.callback=n),e=Fn(t,l,a),e!==null&&(Zt(e,t,a,s),$a(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=nt(),a=qn(t),l=vn(s,a);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=Fn(t,l,a),e!==null&&(Zt(e,t,a,s),$a(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nt(),s=qn(t),a=vn(n,s);a.tag=2,e!=null&&(a.callback=e),e=Fn(t,a,s),e!==null&&(Zt(e,t,s,n),$a(e,t,s))}};function zf(t,e,n,s,a,l,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,l,c):e.prototype&&e.prototype.isPureReactComponent?!ki(n,s)||!ki(a,l):!0}function Ng(t,e,n){var s=!1,a=Jn,l=e.contextType;return typeof l=="object"&&l!==null?l=Lt(l):(a=ft(e)?jr:Xe.current,s=e.contextTypes,l=(s=s!=null)?vs(t,a):Jn),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ao,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),e}function Df(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Ao.enqueueReplaceState(e,e.state,null)}function Wc(t,e,n,s){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},Yu(t);var l=e.contextType;typeof l=="object"&&l!==null?a.context=Lt(l):(l=ft(e)?jr:Xe.current,a.context=vs(t,l)),a.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Vc(t,e,l,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ao.enqueueReplaceState(a,a.state,null),co(t,n,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function ws(t,e){try{var n="",s=e;do n+=sy(s),s=s.return;while(s);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:a,digest:null}}function ec(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var L_=typeof WeakMap=="function"?WeakMap:Map;function kg(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){po||(po=!0,ru=s),Hc(t,e)},n}function Sg(t,e,n){n=vn(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;n.payload=function(){return s(a)},n.callback=function(){Hc(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Hc(t,e),typeof s!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),n}function Bf(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new L_;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(n)||(a.add(n),t=V_.bind(null,t,e,n),e.then(t,t))}function Uf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $f(t,e,n,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,Fn(n,e,1))),n.lanes|=1),t)}var I_=bn.ReactCurrentOwner,dt=!1;function tt(t,e,n,s){e.child=t===null?tg(e,null,n,s):ys(e,t.child,n,s)}function Ff(t,e,n,s,a){n=n.render;var l=e.ref;return ms(e,a),s=rd(t,e,n,s,l,a),n=sd(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,wn(t,e,a)):(Ne&&n&&Vu(e),e.flags|=1,tt(t,e,s,a),e.child)}function Zf(t,e,n,s,a){if(t===null){var l=n.type;return typeof l=="function"&&!md(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,Pg(t,e,l,s,a)):(t=Ha(n.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&a)){var c=l.memoizedProps;if(n=n.compare,n=n!==null?n:ki,n(c,s)&&t.ref===e.ref)return wn(t,e,a)}return e.flags|=1,t=Vn(l,s),t.ref=e.ref,t.return=e,e.child=t}function Pg(t,e,n,s,a){if(t!==null){var l=t.memoizedProps;if(ki(l,s)&&t.ref===e.ref)if(dt=!1,e.pendingProps=s=l,(t.lanes&a)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,wn(t,e,a)}return Gc(t,e,n,s,a)}function Eg(t,e,n){var s=e.pendingProps,a=s.children,l=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(cs,gt),gt|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(cs,gt),gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:n,we(cs,gt),gt|=s}else l!==null?(s=l.baseLanes|n,e.memoizedState=null):s=n,we(cs,gt),gt|=s;return tt(t,e,a,n),e.child}function Cg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gc(t,e,n,s,a){var l=ft(n)?jr:Xe.current;return l=vs(e,l),ms(e,a),n=rd(t,e,n,s,l,a),s=sd(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,wn(t,e,a)):(Ne&&s&&Vu(e),e.flags|=1,tt(t,e,n,a),e.child)}function qf(t,e,n,s,a){if(ft(n)){var l=!0;so(e)}else l=!1;if(ms(e,a),e.stateNode===null)qa(t,e),Ng(e,n,s),Wc(e,n,s,a),s=!0;else if(t===null){var c=e.stateNode,f=e.memoizedProps;c.props=f;var d=c.context,m=n.contextType;typeof m=="object"&&m!==null?m=Lt(m):(m=ft(n)?jr:Xe.current,m=vs(e,m));var v=n.getDerivedStateFromProps,g=typeof v=="function"||typeof c.getSnapshotBeforeUpdate=="function";g||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==s||d!==m)&&Df(e,c,s,m),Ln=!1;var y=e.memoizedState;c.state=y,co(e,s,c,a),d=e.memoizedState,f!==s||y!==d||ht.current||Ln?(typeof v=="function"&&(Vc(e,n,v,s),d=e.memoizedState),(f=Ln||zf(e,n,f,s,y,d,m))?(g||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),c.props=s,c.state=d,c.context=m,s=f):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{c=e.stateNode,rg(t,e),f=e.memoizedProps,m=e.type===e.elementType?f:zt(e.type,f),c.props=m,g=e.pendingProps,y=c.context,d=n.contextType,typeof d=="object"&&d!==null?d=Lt(d):(d=ft(n)?jr:Xe.current,d=vs(e,d));var x=n.getDerivedStateFromProps;(v=typeof x=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==g||y!==d)&&Df(e,c,s,d),Ln=!1,y=e.memoizedState,c.state=y,co(e,s,c,a);var P=e.memoizedState;f!==g||y!==P||ht.current||Ln?(typeof x=="function"&&(Vc(e,n,x,s),P=e.memoizedState),(m=Ln||zf(e,n,m,s,y,P,d)||!1)?(v||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,P,d),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,P,d)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=P),c.props=s,c.state=P,c.context=d,s=m):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),s=!1)}return Kc(t,e,n,s,l,a)}function Kc(t,e,n,s,a,l){Cg(t,e);var c=(e.flags&128)!==0;if(!s&&!c)return a&&Cf(e,n,!1),wn(t,e,l);s=e.stateNode,I_.current=e;var f=c&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&c?(e.child=ys(e,t.child,null,l),e.child=ys(e,null,f,l)):tt(t,e,f,l),e.memoizedState=s.state,a&&Cf(e,n,!0),e.child}function Tg(t){var e=t.stateNode;e.pendingContext?Ef(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ef(t,e.context,!1),Xu(t,e.containerInfo)}function Vf(t,e,n,s,a){return xs(),Hu(a),e.flags|=256,tt(t,e,n,s),e.child}var Jc={dehydrated:null,treeContext:null,retryLane:0};function Qc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lg(t,e,n){var s=e.pendingProps,a=Se.current,l=!1,c=(e.flags&128)!==0,f;if((f=c)||(f=t!==null&&t.memoizedState===null?!1:(a&2)!==0),f?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),we(Se,a&1),t===null)return Zc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=s.children,t=s.fallback,l?(s=e.mode,l=e.child,c={mode:"hidden",children:c},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=c):l=zo(c,s,0,null),t=_r(t,s,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Qc(n),e.memoizedState=Jc,t):od(e,c));if(a=t.memoizedState,a!==null&&(f=a.dehydrated,f!==null))return O_(t,e,c,s,f,a,n);if(l){l=s.fallback,c=e.mode,a=t.child,f=a.sibling;var d={mode:"hidden",children:s.children};return!(c&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=d,e.deletions=null):(s=Vn(a,d),s.subtreeFlags=a.subtreeFlags&14680064),f!==null?l=Vn(f,l):(l=_r(l,c,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,s=l,l=e.child,c=t.child.memoizedState,c=c===null?Qc(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},l.memoizedState=c,l.childLanes=t.childLanes&~n,e.memoizedState=Jc,s}return l=t.child,t=l.sibling,s=Vn(l,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function od(t,e){return e=zo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ca(t,e,n,s){return s!==null&&Hu(s),ys(e,t.child,null,n),t=od(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function O_(t,e,n,s,a,l,c){if(n)return e.flags&256?(e.flags&=-257,s=ec(Error(Z(422))),Ca(t,e,c,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=s.fallback,a=e.mode,s=zo({mode:"visible",children:s.children},a,0,null),l=_r(l,a,c,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,e.mode&1&&ys(e,t.child,null,c),e.child.memoizedState=Qc(c),e.memoizedState=Jc,l);if(!(e.mode&1))return Ca(t,e,c,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var f=s.dgst;return s=f,l=Error(Z(419)),s=ec(l,s,void 0),Ca(t,e,c,s)}if(f=(c&t.childLanes)!==0,dt||f){if(s=Ze,s!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|c)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,_n(t,a),Zt(s,t,a,-1))}return fd(),s=ec(Error(Z(421))),Ca(t,e,c,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=W_.bind(null,t),a._reactRetry=e,null):(t=l.treeContext,vt=$n(a.nextSibling),xt=e,Ne=!0,Ut=null,t!==null&&(Pt[Et++]=pn,Pt[Et++]=gn,Pt[Et++]=Nr,pn=t.id,gn=t.overflow,Nr=e),e=od(e,s.children),e.flags|=4096,e)}function Wf(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),qc(t.return,e,n)}function tc(t,e,n,s,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=n,l.tailMode=a)}function Ig(t,e,n){var s=e.pendingProps,a=s.revealOrder,l=s.tail;if(tt(t,e,s.children,n),s=Se.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wf(t,n,e);else if(t.tag===19)Wf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(we(Se,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&uo(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),tc(e,!1,a,n,l);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&uo(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}tc(e,!0,n,null,l);break;case"together":tc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function A_(t,e,n){switch(e.tag){case 3:Tg(e),xs();break;case 5:sg(e);break;case 1:ft(e.type)&&so(e);break;case 4:Xu(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;we(oo,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(we(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?Lg(t,e,n):(we(Se,Se.current&1),t=wn(t,e,n),t!==null?t.sibling:null);we(Se,Se.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Ig(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),we(Se,Se.current),s)break;return null;case 22:case 23:return e.lanes=0,Eg(t,e,n)}return wn(t,e,n)}var Og,Yc,Ag,Mg;Og=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yc=function(){};Ag=function(t,e,n,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,vr(rn.current);var l=null;switch(n){case"input":a=_c(t,a),s=_c(t,s),l=[];break;case"select":a=Ee({},a,{value:void 0}),s=Ee({},s,{value:void 0}),l=[];break;case"textarea":a=jc(t,a),s=jc(t,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=no)}kc(n,s);var c;n=null;for(m in a)if(!s.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var f=a[m];for(c in f)f.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(xi.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in s){var d=s[m];if(f=a!=null?a[m]:void 0,s.hasOwnProperty(m)&&d!==f&&(d!=null||f!=null))if(m==="style")if(f){for(c in f)!f.hasOwnProperty(c)||d&&d.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in d)d.hasOwnProperty(c)&&f[c]!==d[c]&&(n||(n={}),n[c]=d[c])}else n||(l||(l=[]),l.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,f=f?f.__html:void 0,d!=null&&f!==d&&(l=l||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(xi.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&be("scroll",t),l||f===d||(l=[])):(l=l||[]).push(m,d))}n&&(l=l||[]).push("style",n);var m=l;(e.updateQueue=m)&&(e.flags|=4)}};Mg=function(t,e,n,s){n!==s&&(e.flags|=4)};function Qs(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function M_(t,e,n){var s=e.pendingProps;switch(Wu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return ft(e.type)&&ro(),Ke(e),null;case 3:return s=e.stateNode,_s(),je(ht),je(Xe),td(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Pa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ut!==null&&(au(Ut),Ut=null))),Yc(t,e),Ke(e),null;case 5:ed(e);var a=vr(Ti.current);if(n=e.type,t!==null&&e.stateNode!=null)Ag(t,e,n,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Z(166));return Ke(e),null}if(t=vr(rn.current),Pa(e)){s=e.stateNode,n=e.type;var l=e.memoizedProps;switch(s[Xt]=e,s[Ei]=l,t=(e.mode&1)!==0,n){case"dialog":be("cancel",s),be("close",s);break;case"iframe":case"object":case"embed":be("load",s);break;case"video":case"audio":for(a=0;a<ri.length;a++)be(ri[a],s);break;case"source":be("error",s);break;case"img":case"image":case"link":be("error",s),be("load",s);break;case"details":be("toggle",s);break;case"input":ef(s,l),be("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},be("invalid",s);break;case"textarea":nf(s,l),be("invalid",s)}kc(n,l),a=null;for(var c in l)if(l.hasOwnProperty(c)){var f=l[c];c==="children"?typeof f=="string"?s.textContent!==f&&(l.suppressHydrationWarning!==!0&&Sa(s.textContent,f,t),a=["children",f]):typeof f=="number"&&s.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&Sa(s.textContent,f,t),a=["children",""+f]):xi.hasOwnProperty(c)&&f!=null&&c==="onScroll"&&be("scroll",s)}switch(n){case"input":xa(s),tf(s,l,!0);break;case"textarea":xa(s),rf(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=no)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=c.createElement(n,{is:s.is}):(t=c.createElement(n),n==="select"&&(c=t,s.multiple?c.multiple=!0:s.size&&(c.size=s.size))):t=c.createElementNS(t,n),t[Xt]=e,t[Ei]=s,Og(t,e,!1,!1),e.stateNode=t;e:{switch(c=Sc(n,s),n){case"dialog":be("cancel",t),be("close",t),a=s;break;case"iframe":case"object":case"embed":be("load",t),a=s;break;case"video":case"audio":for(a=0;a<ri.length;a++)be(ri[a],t);a=s;break;case"source":be("error",t),a=s;break;case"img":case"image":case"link":be("error",t),be("load",t),a=s;break;case"details":be("toggle",t),a=s;break;case"input":ef(t,s),a=_c(t,s),be("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=Ee({},s,{value:void 0}),be("invalid",t);break;case"textarea":nf(t,s),a=jc(t,s),be("invalid",t);break;default:a=s}kc(n,a),f=a;for(l in f)if(f.hasOwnProperty(l)){var d=f[l];l==="style"?hp(t,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&up(t,d)):l==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&yi(t,d):typeof d=="number"&&yi(t,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(xi.hasOwnProperty(l)?d!=null&&l==="onScroll"&&be("scroll",t):d!=null&&Lu(t,l,d,c))}switch(n){case"input":xa(t),tf(t,s,!1);break;case"textarea":xa(t),rf(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Kn(s.value));break;case"select":t.multiple=!!s.multiple,l=s.value,l!=null?us(t,!!s.multiple,l,!1):s.defaultValue!=null&&us(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=no)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)Mg(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Z(166));if(n=vr(Ti.current),vr(rn.current),Pa(e)){if(s=e.stateNode,n=e.memoizedProps,s[Xt]=e,(l=s.nodeValue!==n)&&(t=xt,t!==null))switch(t.tag){case 3:Sa(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sa(s.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Xt]=e,e.stateNode=s}return Ke(e),null;case 13:if(je(Se),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&vt!==null&&e.mode&1&&!(e.flags&128))Xp(),xs(),e.flags|=98560,l=!1;else if(l=Pa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!l)throw Error(Z(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Z(317));l[Xt]=e}else xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),l=!1}else Ut!==null&&(au(Ut),Ut=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?Be===0&&(Be=3):fd())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return _s(),Yc(t,e),t===null&&Si(e.stateNode.containerInfo),Ke(e),null;case 10:return Ju(e.type._context),Ke(e),null;case 17:return ft(e.type)&&ro(),Ke(e),null;case 19:if(je(Se),l=e.memoizedState,l===null)return Ke(e),null;if(s=(e.flags&128)!==0,c=l.rendering,c===null)if(s)Qs(l,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=uo(t),c!==null){for(e.flags|=128,Qs(l,!1),s=c.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)l=n,t=s,l.flags&=14680066,c=l.alternate,c===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=c.childLanes,l.lanes=c.lanes,l.child=c.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=c.memoizedProps,l.memoizedState=c.memoizedState,l.updateQueue=c.updateQueue,l.type=c.type,t=c.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Se,Se.current&1|2),e.child}t=t.sibling}l.tail!==null&&Ie()>bs&&(e.flags|=128,s=!0,Qs(l,!1),e.lanes=4194304)}else{if(!s)if(t=uo(c),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!c.alternate&&!Ne)return Ke(e),null}else 2*Ie()-l.renderingStartTime>bs&&n!==1073741824&&(e.flags|=128,s=!0,Qs(l,!1),e.lanes=4194304);l.isBackwards?(c.sibling=e.child,e.child=c):(n=l.last,n!==null?n.sibling=c:e.child=c,l.last=c)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ie(),e.sibling=null,n=Se.current,we(Se,s?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return hd(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?gt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function R_(t,e){switch(Wu(e),e.tag){case 1:return ft(e.type)&&ro(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _s(),je(ht),je(Xe),td(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ed(e),null;case 13:if(je(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Se),null;case 4:return _s(),null;case 10:return Ju(e.type._context),null;case 22:case 23:return hd(),null;case 24:return null;default:return null}}var Ta=!1,Ye=!1,z_=typeof WeakSet=="function"?WeakSet:Set,K=null;function ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Te(t,e,s)}else n.current=null}function Xc(t,e,n){try{n()}catch(s){Te(t,e,s)}}var Hf=!1;function D_(t,e){if(Rc=Xa,t=Up(),qu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var c=0,f=-1,d=-1,m=0,v=0,g=t,y=null;t:for(;;){for(var x;g!==n||a!==0&&g.nodeType!==3||(f=c+a),g!==l||s!==0&&g.nodeType!==3||(d=c+s),g.nodeType===3&&(c+=g.nodeValue.length),(x=g.firstChild)!==null;)y=g,g=x;for(;;){if(g===t)break t;if(y===n&&++m===a&&(f=c),y===l&&++v===s&&(d=c),(x=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=x}n=f===-1||d===-1?null:{start:f,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(zc={focusedElem:t,selectionRange:n},Xa=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var w=P.memoizedProps,C=P.memoizedState,N=e.stateNode,b=N.getSnapshotBeforeUpdate(e.elementType===e.type?w:zt(e.type,w),C);N.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(T){Te(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return P=Hf,Hf=!1,P}function hi(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&Xc(e,n,l)}a=a.next}while(a!==s)}}function Mo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function eu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Rg(t){var e=t.alternate;e!==null&&(t.alternate=null,Rg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xt],delete e[Ei],delete e[Uc],delete e[__],delete e[w_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zg(t){return t.tag===5||t.tag===3||t.tag===4}function Gf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=no));else if(s!==4&&(t=t.child,t!==null))for(tu(t,e,n),t=t.sibling;t!==null;)tu(t,e,n),t=t.sibling}function nu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(nu(t,e,n),t=t.sibling;t!==null;)nu(t,e,n),t=t.sibling}var Ve=null,Dt=!1;function Pn(t,e,n){for(n=n.child;n!==null;)Dg(t,e,n),n=n.sibling}function Dg(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Po,n)}catch{}switch(n.tag){case 5:Ye||ls(n,e);case 6:var s=Ve,a=Dt;Ve=null,Pn(t,e,n),Ve=s,Dt=a,Ve!==null&&(Dt?(t=Ve,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ve.removeChild(n.stateNode));break;case 18:Ve!==null&&(Dt?(t=Ve,n=n.stateNode,t.nodeType===8?Gl(t.parentNode,n):t.nodeType===1&&Gl(t,n),ji(t)):Gl(Ve,n.stateNode));break;case 4:s=Ve,a=Dt,Ve=n.stateNode.containerInfo,Dt=!0,Pn(t,e,n),Ve=s,Dt=a;break;case 0:case 11:case 14:case 15:if(!Ye&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,c=l.destroy;l=l.tag,c!==void 0&&(l&2||l&4)&&Xc(n,e,c),a=a.next}while(a!==s)}Pn(t,e,n);break;case 1:if(!Ye&&(ls(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(f){Te(n,e,f)}Pn(t,e,n);break;case 21:Pn(t,e,n);break;case 22:n.mode&1?(Ye=(s=Ye)||n.memoizedState!==null,Pn(t,e,n),Ye=s):Pn(t,e,n);break;default:Pn(t,e,n)}}function Kf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new z_),e.forEach(function(s){var a=H_.bind(null,t,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var l=t,c=e,f=c;e:for(;f!==null;){switch(f.tag){case 5:Ve=f.stateNode,Dt=!1;break e;case 3:Ve=f.stateNode.containerInfo,Dt=!0;break e;case 4:Ve=f.stateNode.containerInfo,Dt=!0;break e}f=f.return}if(Ve===null)throw Error(Z(160));Dg(l,c,a),Ve=null,Dt=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(m){Te(a,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bg(e,t),e=e.sibling}function Bg(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),Qt(t),s&4){try{hi(3,t,t.return),Mo(3,t)}catch(w){Te(t,t.return,w)}try{hi(5,t,t.return)}catch(w){Te(t,t.return,w)}}break;case 1:Mt(e,t),Qt(t),s&512&&n!==null&&ls(n,n.return);break;case 5:if(Mt(e,t),Qt(t),s&512&&n!==null&&ls(n,n.return),t.flags&32){var a=t.stateNode;try{yi(a,"")}catch(w){Te(t,t.return,w)}}if(s&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,c=n!==null?n.memoizedProps:l,f=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&op(a,l),Sc(f,c);var m=Sc(f,l);for(c=0;c<d.length;c+=2){var v=d[c],g=d[c+1];v==="style"?hp(a,g):v==="dangerouslySetInnerHTML"?up(a,g):v==="children"?yi(a,g):Lu(a,v,g,m)}switch(f){case"input":wc(a,l);break;case"textarea":lp(a,l);break;case"select":var y=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?us(a,!!l.multiple,x,!1):y!==!!l.multiple&&(l.defaultValue!=null?us(a,!!l.multiple,l.defaultValue,!0):us(a,!!l.multiple,l.multiple?[]:"",!1))}a[Ei]=l}catch(w){Te(t,t.return,w)}}break;case 6:if(Mt(e,t),Qt(t),s&4){if(t.stateNode===null)throw Error(Z(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(w){Te(t,t.return,w)}}break;case 3:if(Mt(e,t),Qt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ji(e.containerInfo)}catch(w){Te(t,t.return,w)}break;case 4:Mt(e,t),Qt(t);break;case 13:Mt(e,t),Qt(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(ud=Ie())),s&4&&Kf(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Ye=(m=Ye)||v,Mt(e,t),Ye=m):Mt(e,t),Qt(t),s&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(K=t,v=t.child;v!==null;){for(g=K=v;K!==null;){switch(y=K,x=y.child,y.tag){case 0:case 11:case 14:case 15:hi(4,y,y.return);break;case 1:ls(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){s=y,n=y.return;try{e=s,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(w){Te(s,n,w)}}break;case 5:ls(y,y.return);break;case 22:if(y.memoizedState!==null){Qf(g);continue}}x!==null?(x.return=y,K=x):Qf(g)}v=v.sibling}e:for(v=null,g=t;;){if(g.tag===5){if(v===null){v=g;try{a=g.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=g.stateNode,d=g.memoizedProps.style,c=d!=null&&d.hasOwnProperty("display")?d.display:null,f.style.display=dp("display",c))}catch(w){Te(t,t.return,w)}}}else if(g.tag===6){if(v===null)try{g.stateNode.nodeValue=m?"":g.memoizedProps}catch(w){Te(t,t.return,w)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;v===g&&(v=null),g=g.return}v===g&&(v=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Mt(e,t),Qt(t),s&4&&Kf(t);break;case 21:break;default:Mt(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zg(n)){var s=n;break e}n=n.return}throw Error(Z(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(yi(a,""),s.flags&=-33);var l=Gf(t);nu(t,l,a);break;case 3:case 4:var c=s.stateNode.containerInfo,f=Gf(t);tu(t,f,c);break;default:throw Error(Z(161))}}catch(d){Te(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function B_(t,e,n){K=t,Ug(t)}function Ug(t,e,n){for(var s=(t.mode&1)!==0;K!==null;){var a=K,l=a.child;if(a.tag===22&&s){var c=a.memoizedState!==null||Ta;if(!c){var f=a.alternate,d=f!==null&&f.memoizedState!==null||Ye;f=Ta;var m=Ye;if(Ta=c,(Ye=d)&&!m)for(K=a;K!==null;)c=K,d=c.child,c.tag===22&&c.memoizedState!==null?Yf(a):d!==null?(d.return=c,K=d):Yf(a);for(;l!==null;)K=l,Ug(l),l=l.sibling;K=a,Ta=f,Ye=m}Jf(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,K=l):Jf(t)}}function Jf(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ye||Mo(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Ye)if(n===null)s.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Af(e,l,s);break;case 3:var c=e.updateQueue;if(c!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Af(e,c,n)}break;case 5:var f=e.stateNode;if(n===null&&e.flags&4){n=f;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var g=v.dehydrated;g!==null&&ji(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Ye||e.flags&512&&eu(e)}catch(y){Te(e,e.return,y)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Qf(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Yf(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mo(4,e)}catch(d){Te(e,n,d)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(d){Te(e,a,d)}}var l=e.return;try{eu(e)}catch(d){Te(e,l,d)}break;case 5:var c=e.return;try{eu(e)}catch(d){Te(e,c,d)}}}catch(d){Te(e,e.return,d)}if(e===t){K=null;break}var f=e.sibling;if(f!==null){f.return=e.return,K=f;break}K=e.return}}var U_=Math.ceil,mo=bn.ReactCurrentDispatcher,ld=bn.ReactCurrentOwner,Tt=bn.ReactCurrentBatchConfig,he=0,Ze=null,ze=null,We=0,gt=0,cs=Xn(0),Be=0,Ai=null,Sr=0,Ro=0,cd=0,fi=null,ct=null,ud=0,bs=1/0,dn=null,po=!1,ru=null,Zn=null,La=!1,Rn=null,go=0,mi=0,su=null,Va=-1,Wa=0;function nt(){return he&6?Ie():Va!==-1?Va:Va=Ie()}function qn(t){return t.mode&1?he&2&&We!==0?We&-We:j_.transition!==null?(Wa===0&&(Wa=Np()),Wa):(t=ve,t!==0||(t=window.event,t=t===void 0?16:Lp(t.type)),t):1}function Zt(t,e,n,s){if(50<mi)throw mi=0,su=null,Error(Z(185));Ui(t,n,s),(!(he&2)||t!==Ze)&&(t===Ze&&(!(he&2)&&(Ro|=n),Be===4&&On(t,We)),mt(t,s),n===1&&he===0&&!(e.mode&1)&&(bs=Ie()+500,Io&&er()))}function mt(t,e){var n=t.callbackNode;jy(t,e);var s=Ya(t,t===Ze?We:0);if(s===0)n!==null&&of(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&of(n),e===1)t.tag===0?b_(Xf.bind(null,t)):Jp(Xf.bind(null,t)),x_(function(){!(he&6)&&er()}),n=null;else{switch(kp(s)){case 1:n=Ru;break;case 4:n=bp;break;case 16:n=Qa;break;case 536870912:n=jp;break;default:n=Qa}n=Gg(n,$g.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $g(t,e){if(Va=-1,Wa=0,he&6)throw Error(Z(327));var n=t.callbackNode;if(ps()&&t.callbackNode!==n)return null;var s=Ya(t,t===Ze?We:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=vo(t,s);else{e=s;var a=he;he|=2;var l=Zg();(Ze!==t||We!==e)&&(dn=null,bs=Ie()+500,yr(t,e));do try{Z_();break}catch(f){Fg(t,f)}while(!0);Ku(),mo.current=l,he=a,ze!==null?e=0:(Ze=null,We=0,e=Be)}if(e!==0){if(e===2&&(a=Lc(t),a!==0&&(s=a,e=iu(t,a))),e===1)throw n=Ai,yr(t,0),On(t,s),mt(t,Ie()),n;if(e===6)On(t,s);else{if(a=t.current.alternate,!(s&30)&&!$_(a)&&(e=vo(t,s),e===2&&(l=Lc(t),l!==0&&(s=l,e=iu(t,l))),e===1))throw n=Ai,yr(t,0),On(t,s),mt(t,Ie()),n;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(Z(345));case 2:dr(t,ct,dn);break;case 3:if(On(t,s),(s&130023424)===s&&(e=ud+500-Ie(),10<e)){if(Ya(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){nt(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Bc(dr.bind(null,t,ct,dn),e);break}dr(t,ct,dn);break;case 4:if(On(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var c=31-Ft(s);l=1<<c,c=e[c],c>a&&(a=c),s&=~l}if(s=a,s=Ie()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*U_(s/1960))-s,10<s){t.timeoutHandle=Bc(dr.bind(null,t,ct,dn),s);break}dr(t,ct,dn);break;case 5:dr(t,ct,dn);break;default:throw Error(Z(329))}}}return mt(t,Ie()),t.callbackNode===n?$g.bind(null,t):null}function iu(t,e){var n=fi;return t.current.memoizedState.isDehydrated&&(yr(t,e).flags|=256),t=vo(t,e),t!==2&&(e=ct,ct=n,e!==null&&au(e)),t}function au(t){ct===null?ct=t:ct.push.apply(ct,t)}function $_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],l=a.getSnapshot;a=a.value;try{if(!qt(l(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~cd,e&=~Ro,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),s=1<<n;t[n]=-1,e&=~s}}function Xf(t){if(he&6)throw Error(Z(327));ps();var e=Ya(t,0);if(!(e&1))return mt(t,Ie()),null;var n=vo(t,e);if(t.tag!==0&&n===2){var s=Lc(t);s!==0&&(e=s,n=iu(t,s))}if(n===1)throw n=Ai,yr(t,0),On(t,e),mt(t,Ie()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dr(t,ct,dn),mt(t,Ie()),null}function dd(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(bs=Ie()+500,Io&&er())}}function Pr(t){Rn!==null&&Rn.tag===0&&!(he&6)&&ps();var e=he;he|=1;var n=Tt.transition,s=ve;try{if(Tt.transition=null,ve=1,t)return t()}finally{ve=s,Tt.transition=n,he=e,!(he&6)&&er()}}function hd(){gt=cs.current,je(cs)}function yr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,v_(n)),ze!==null)for(n=ze.return;n!==null;){var s=n;switch(Wu(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ro();break;case 3:_s(),je(ht),je(Xe),td();break;case 5:ed(s);break;case 4:_s();break;case 13:je(Se);break;case 19:je(Se);break;case 10:Ju(s.type._context);break;case 22:case 23:hd()}n=n.return}if(Ze=t,ze=t=Vn(t.current,null),We=gt=e,Be=0,Ai=null,cd=Ro=Sr=0,ct=fi=null,gr!==null){for(e=0;e<gr.length;e++)if(n=gr[e],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,l=n.pending;if(l!==null){var c=l.next;l.next=a,s.next=c}n.pending=s}gr=null}return t}function Fg(t,e){do{var n=ze;try{if(Ku(),Fa.current=fo,ho){for(var s=Pe.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ho=!1}if(kr=0,Fe=De=Pe=null,di=!1,Li=0,ld.current=null,n===null||n.return===null){Be=1,Ai=e,ze=null;break}e:{var l=t,c=n.return,f=n,d=e;if(e=We,f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,v=f,g=v.tag;if(!(v.mode&1)&&(g===0||g===11||g===15)){var y=v.alternate;y?(v.updateQueue=y.updateQueue,v.memoizedState=y.memoizedState,v.lanes=y.lanes):(v.updateQueue=null,v.memoizedState=null)}var x=Uf(c);if(x!==null){x.flags&=-257,$f(x,c,f,l,e),x.mode&1&&Bf(l,m,e),e=x,d=m;var P=e.updateQueue;if(P===null){var w=new Set;w.add(d),e.updateQueue=w}else P.add(d);break e}else{if(!(e&1)){Bf(l,m,e),fd();break e}d=Error(Z(426))}}else if(Ne&&f.mode&1){var C=Uf(c);if(C!==null){!(C.flags&65536)&&(C.flags|=256),$f(C,c,f,l,e),Hu(ws(d,f));break e}}l=d=ws(d,f),Be!==4&&(Be=2),fi===null?fi=[l]:fi.push(l),l=c;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var N=kg(l,d,e);Of(l,N);break e;case 1:f=d;var b=l.type,j=l.stateNode;if(!(l.flags&128)&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Zn===null||!Zn.has(j)))){l.flags|=65536,e&=-e,l.lanes|=e;var T=Sg(l,f,e);Of(l,T);break e}}l=l.return}while(l!==null)}Vg(n)}catch(S){e=S,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function Zg(){var t=mo.current;return mo.current=fo,t===null?fo:t}function fd(){(Be===0||Be===3||Be===2)&&(Be=4),Ze===null||!(Sr&268435455)&&!(Ro&268435455)||On(Ze,We)}function vo(t,e){var n=he;he|=2;var s=Zg();(Ze!==t||We!==e)&&(dn=null,yr(t,e));do try{F_();break}catch(a){Fg(t,a)}while(!0);if(Ku(),he=n,mo.current=s,ze!==null)throw Error(Z(261));return Ze=null,We=0,Be}function F_(){for(;ze!==null;)qg(ze)}function Z_(){for(;ze!==null&&!my();)qg(ze)}function qg(t){var e=Hg(t.alternate,t,gt);t.memoizedProps=t.pendingProps,e===null?Vg(t):ze=e,ld.current=null}function Vg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=R_(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,ze=null;return}}else if(n=M_(n,e,gt),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Be===0&&(Be=5)}function dr(t,e,n){var s=ve,a=Tt.transition;try{Tt.transition=null,ve=1,q_(t,e,n,s)}finally{Tt.transition=a,ve=s}return null}function q_(t,e,n,s){do ps();while(Rn!==null);if(he&6)throw Error(Z(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(Ny(t,l),t===Ze&&(ze=Ze=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||La||(La=!0,Gg(Qa,function(){return ps(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Tt.transition,Tt.transition=null;var c=ve;ve=1;var f=he;he|=4,ld.current=null,D_(t,n),Bg(n,t),u_(zc),Xa=!!Rc,zc=Rc=null,t.current=n,B_(n),py(),he=f,ve=c,Tt.transition=l}else t.current=n;if(La&&(La=!1,Rn=t,go=a),l=t.pendingLanes,l===0&&(Zn=null),xy(n.stateNode),mt(t,Ie()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(po)throw po=!1,t=ru,ru=null,t;return go&1&&t.tag!==0&&ps(),l=t.pendingLanes,l&1?t===su?mi++:(mi=0,su=t):mi=0,er(),null}function ps(){if(Rn!==null){var t=kp(go),e=Tt.transition,n=ve;try{if(Tt.transition=null,ve=16>t?16:t,Rn===null)var s=!1;else{if(t=Rn,Rn=null,go=0,he&6)throw Error(Z(331));var a=he;for(he|=4,K=t.current;K!==null;){var l=K,c=l.child;if(K.flags&16){var f=l.deletions;if(f!==null){for(var d=0;d<f.length;d++){var m=f[d];for(K=m;K!==null;){var v=K;switch(v.tag){case 0:case 11:case 15:hi(8,v,l)}var g=v.child;if(g!==null)g.return=v,K=g;else for(;K!==null;){v=K;var y=v.sibling,x=v.return;if(Rg(v),v===m){K=null;break}if(y!==null){y.return=x,K=y;break}K=x}}}var P=l.alternate;if(P!==null){var w=P.child;if(w!==null){P.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}K=l}}if(l.subtreeFlags&2064&&c!==null)c.return=l,K=c;else e:for(;K!==null;){if(l=K,l.flags&2048)switch(l.tag){case 0:case 11:case 15:hi(9,l,l.return)}var N=l.sibling;if(N!==null){N.return=l.return,K=N;break e}K=l.return}}var b=t.current;for(K=b;K!==null;){c=K;var j=c.child;if(c.subtreeFlags&2064&&j!==null)j.return=c,K=j;else e:for(c=b;K!==null;){if(f=K,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:Mo(9,f)}}catch(S){Te(f,f.return,S)}if(f===c){K=null;break e}var T=f.sibling;if(T!==null){T.return=f.return,K=T;break e}K=f.return}}if(he=a,er(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Po,t)}catch{}s=!0}return s}finally{ve=n,Tt.transition=e}}return!1}function em(t,e,n){e=ws(n,e),e=kg(t,e,1),t=Fn(t,e,1),e=nt(),t!==null&&(Ui(t,1,e),mt(t,e))}function Te(t,e,n){if(t.tag===3)em(t,t,n);else for(;e!==null;){if(e.tag===3){em(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Zn===null||!Zn.has(s))){t=ws(n,t),t=Sg(e,t,1),e=Fn(e,t,1),t=nt(),e!==null&&(Ui(e,1,t),mt(e,t));break}}e=e.return}}function V_(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=nt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(We&n)===n&&(Be===4||Be===3&&(We&130023424)===We&&500>Ie()-ud?yr(t,0):cd|=n),mt(t,e)}function Wg(t,e){e===0&&(t.mode&1?(e=wa,wa<<=1,!(wa&130023424)&&(wa=4194304)):e=1);var n=nt();t=_n(t,e),t!==null&&(Ui(t,e,n),mt(t,n))}function W_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Wg(t,n)}function H_(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(Z(314))}s!==null&&s.delete(e),Wg(t,n)}var Hg;Hg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,A_(t,e,n);dt=!!(t.flags&131072)}else dt=!1,Ne&&e.flags&1048576&&Qp(e,ao,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;qa(t,e),t=e.pendingProps;var a=vs(e,Xe.current);ms(e,n),a=rd(null,e,s,t,a,n);var l=sd();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ft(s)?(l=!0,so(e)):l=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Yu(e),a.updater=Ao,e.stateNode=a,a._reactInternals=e,Wc(e,s,t,n),e=Kc(null,e,s,!0,l,n)):(e.tag=0,Ne&&l&&Vu(e),tt(null,e,a,n),e=e.child),e;case 16:s=e.elementType;e:{switch(qa(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=K_(s),t=zt(s,t),a){case 0:e=Gc(null,e,s,t,n);break e;case 1:e=qf(null,e,s,t,n);break e;case 11:e=Ff(null,e,s,t,n);break e;case 14:e=Zf(null,e,s,zt(s.type,t),n);break e}throw Error(Z(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:zt(s,a),Gc(t,e,s,a,n);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:zt(s,a),qf(t,e,s,a,n);case 3:e:{if(Tg(e),t===null)throw Error(Z(387));s=e.pendingProps,l=e.memoizedState,a=l.element,rg(t,e),co(e,s,null,n);var c=e.memoizedState;if(s=c.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){a=ws(Error(Z(423)),e),e=Vf(t,e,s,n,a);break e}else if(s!==a){a=ws(Error(Z(424)),e),e=Vf(t,e,s,n,a);break e}else for(vt=$n(e.stateNode.containerInfo.firstChild),xt=e,Ne=!0,Ut=null,n=tg(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),s===a){e=wn(t,e,n);break e}tt(t,e,s,n)}e=e.child}return e;case 5:return sg(e),t===null&&Zc(e),s=e.type,a=e.pendingProps,l=t!==null?t.memoizedProps:null,c=a.children,Dc(s,a)?c=null:l!==null&&Dc(s,l)&&(e.flags|=32),Cg(t,e),tt(t,e,c,n),e.child;case 6:return t===null&&Zc(e),null;case 13:return Lg(t,e,n);case 4:return Xu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=ys(e,null,s,n):tt(t,e,s,n),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:zt(s,a),Ff(t,e,s,a,n);case 7:return tt(t,e,e.pendingProps,n),e.child;case 8:return tt(t,e,e.pendingProps.children,n),e.child;case 12:return tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,l=e.memoizedProps,c=a.value,we(oo,s._currentValue),s._currentValue=c,l!==null)if(qt(l.value,c)){if(l.children===a.children&&!ht.current){e=wn(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var f=l.dependencies;if(f!==null){c=l.child;for(var d=f.firstContext;d!==null;){if(d.context===s){if(l.tag===1){d=vn(-1,n&-n),d.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?d.next=d:(d.next=v.next,v.next=d),m.pending=d}}l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),qc(l.return,n,e),f.lanes|=n;break}d=d.next}}else if(l.tag===10)c=l.type===e.type?null:l.child;else if(l.tag===18){if(c=l.return,c===null)throw Error(Z(341));c.lanes|=n,f=c.alternate,f!==null&&(f.lanes|=n),qc(c,n,e),c=l.sibling}else c=l.child;if(c!==null)c.return=l;else for(c=l;c!==null;){if(c===e){c=null;break}if(l=c.sibling,l!==null){l.return=c.return,c=l;break}c=c.return}l=c}tt(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,ms(e,n),a=Lt(a),s=s(a),e.flags|=1,tt(t,e,s,n),e.child;case 14:return s=e.type,a=zt(s,e.pendingProps),a=zt(s.type,a),Zf(t,e,s,a,n);case 15:return Pg(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:zt(s,a),qa(t,e),e.tag=1,ft(s)?(t=!0,so(e)):t=!1,ms(e,n),Ng(e,s,a),Wc(e,s,a,n),Kc(null,e,s,!0,t,n);case 19:return Ig(t,e,n);case 22:return Eg(t,e,n)}throw Error(Z(156,e.tag))};function Gg(t,e){return wp(t,e)}function G_(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(t,e,n,s){return new G_(t,e,n,s)}function md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function K_(t){if(typeof t=="function")return md(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ou)return 11;if(t===Au)return 14}return 2}function Vn(t,e){var n=t.alternate;return n===null?(n=Ct(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ha(t,e,n,s,a,l){var c=2;if(s=t,typeof t=="function")md(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case Xr:return _r(n.children,a,l,e);case Iu:c=8,a|=8;break;case gc:return t=Ct(12,n,e,a|2),t.elementType=gc,t.lanes=l,t;case vc:return t=Ct(13,n,e,a),t.elementType=vc,t.lanes=l,t;case xc:return t=Ct(19,n,e,a),t.elementType=xc,t.lanes=l,t;case sp:return zo(n,a,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case np:c=10;break e;case rp:c=9;break e;case Ou:c=11;break e;case Au:c=14;break e;case Tn:c=16,s=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Ct(c,n,e,a),e.elementType=t,e.type=s,e.lanes=l,e}function _r(t,e,n,s){return t=Ct(7,t,s,e),t.lanes=n,t}function zo(t,e,n,s){return t=Ct(22,t,s,e),t.elementType=sp,t.lanes=n,t.stateNode={isHidden:!1},t}function nc(t,e,n){return t=Ct(6,t,null,e),t.lanes=n,t}function rc(t,e,n){return e=Ct(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function J_(t,e,n,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zl(0),this.expirationTimes=zl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zl(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function pd(t,e,n,s,a,l,c,f,d){return t=new J_(t,e,n,f,d),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Ct(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(l),t}function Q_(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Kg(t){if(!t)return Jn;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(ft(n))return Kp(t,n,e)}return e}function Jg(t,e,n,s,a,l,c,f,d){return t=pd(n,s,!0,t,a,l,c,f,d),t.context=Kg(null),n=t.current,s=nt(),a=qn(n),l=vn(s,a),l.callback=e??null,Fn(n,l,a),t.current.lanes=a,Ui(t,a,s),mt(t,s),t}function Do(t,e,n,s){var a=e.current,l=nt(),c=qn(a);return n=Kg(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(l,c),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Fn(a,e,c),t!==null&&(Zt(t,a,c,l),$a(t,a,c)),c}function xo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gd(t,e){tm(t,e),(t=t.alternate)&&tm(t,e)}function Y_(){return null}var Qg=typeof reportError=="function"?reportError:function(t){console.error(t)};function vd(t){this._internalRoot=t}Bo.prototype.render=vd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));Do(t,e,null,null)};Bo.prototype.unmount=vd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pr(function(){Do(null,t,null,null)}),e[yn]=null}};function Bo(t){this._internalRoot=t}Bo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ep();t={blockedOn:null,target:t,priority:e};for(var n=0;n<In.length&&e!==0&&e<In[n].priority;n++);In.splice(n,0,t),n===0&&Tp(t)}};function xd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nm(){}function X_(t,e,n,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var m=xo(c);l.call(m)}}var c=Jg(e,s,t,0,null,!1,!1,"",nm);return t._reactRootContainer=c,t[yn]=c.current,Si(t.nodeType===8?t.parentNode:t),Pr(),c}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var f=s;s=function(){var m=xo(d);f.call(m)}}var d=pd(t,0,!1,null,null,!1,!1,"",nm);return t._reactRootContainer=d,t[yn]=d.current,Si(t.nodeType===8?t.parentNode:t),Pr(function(){Do(e,d,n,s)}),d}function $o(t,e,n,s,a){var l=n._reactRootContainer;if(l){var c=l;if(typeof a=="function"){var f=a;a=function(){var d=xo(c);f.call(d)}}Do(e,c,t,a)}else c=X_(n,e,t,a,s);return xo(c)}Sp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ni(e.pendingLanes);n!==0&&(zu(e,n|1),mt(e,Ie()),!(he&6)&&(bs=Ie()+500,er()))}break;case 13:Pr(function(){var s=_n(t,1);if(s!==null){var a=nt();Zt(s,t,1,a)}}),gd(t,1)}};Du=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=nt();Zt(e,t,134217728,n)}gd(t,134217728)}};Pp=function(t){if(t.tag===13){var e=qn(t),n=_n(t,e);if(n!==null){var s=nt();Zt(n,t,e,s)}gd(t,e)}};Ep=function(){return ve};Cp=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Ec=function(t,e,n){switch(e){case"input":if(wc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var a=Lo(s);if(!a)throw Error(Z(90));ap(s),wc(s,a)}}}break;case"textarea":lp(t,n);break;case"select":e=n.value,e!=null&&us(t,!!n.multiple,e,!1)}};pp=dd;gp=Pr;var ew={usingClientEntryPoint:!1,Events:[Fi,rs,Lo,fp,mp,dd]},Ys={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tw={bundleType:Ys.bundleType,version:Ys.version,rendererPackageName:Ys.rendererPackageName,rendererConfig:Ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yp(t),t===null?null:t.stateNode},findFiberByHostInstance:Ys.findFiberByHostInstance||Y_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ia.isDisabled&&Ia.supportsFiber)try{Po=Ia.inject(tw),nn=Ia}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ew;bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(e))throw Error(Z(200));return Q_(t,e,null,n)};bt.createRoot=function(t,e){if(!xd(t))throw Error(Z(299));var n=!1,s="",a=Qg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=pd(t,1,!1,null,null,n,!1,s,a),t[yn]=e.current,Si(t.nodeType===8?t.parentNode:t),new vd(e)};bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=yp(e),t=t===null?null:t.stateNode,t};bt.flushSync=function(t){return Pr(t)};bt.hydrate=function(t,e,n){if(!Uo(e))throw Error(Z(200));return $o(null,t,e,!0,n)};bt.hydrateRoot=function(t,e,n){if(!xd(t))throw Error(Z(405));var s=n!=null&&n.hydratedSources||null,a=!1,l="",c=Qg;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),e=Jg(e,null,t,1,n??null,a,!1,l,c),t[yn]=e.current,Si(t),s)for(t=0;t<s.length;t++)n=s[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new Bo(e)};bt.render=function(t,e,n){if(!Uo(e))throw Error(Z(200));return $o(null,t,e,!1,n)};bt.unmountComponentAtNode=function(t){if(!Uo(t))throw Error(Z(40));return t._reactRootContainer?(Pr(function(){$o(null,null,t,!1,function(){t._reactRootContainer=null,t[yn]=null})}),!0):!1};bt.unstable_batchedUpdates=dd;bt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Uo(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return $o(t,e,n,!1,s)};bt.version="18.3.1-next-f1338f8080-20240426";function Yg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yg)}catch(t){console.error(t)}}Yg(),Ym.exports=bt;var Xg=Ym.exports,rm=Xg;mc.createRoot=rm.createRoot,mc.hydrateRoot=rm.hydrateRoot;const nw="modulepreload",rw=function(t){return"/"+t},sm={},qi=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=Promise.allSettled(n.map(d=>{if(d=rw(d),d in sm)return;sm[d]=!0;const m=d.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":nw,m||(g.as="script"),g.crossOrigin="",g.href=d,f&&g.setAttribute("nonce",f),document.head.appendChild(g),m)return new Promise((y,x)=>{g.addEventListener("load",y),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return a.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},sw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qi(async()=>{const{default:s}=await Promise.resolve().then(()=>Ps);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class yd extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class iw extends yd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class im extends yd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class am extends yd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ou;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ou||(ou={}));var aw=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(v){try{m(s.next(v))}catch(g){c(g)}}function d(v){try{m(s.throw(v))}catch(g){c(g)}}function m(v){v.done?l(v.value):a(v.value).then(f,d)}m((s=s.apply(t,e||[])).next())})};class ow{constructor(e,{headers:n={},customFetch:s,region:a=ou.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=sw(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return aw(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:c}=n;let f={},{region:d}=n;d||(d=this.region);const m=new URL(`${this.url}/${e}`);d&&d!=="any"&&(f["x-region"]=d,m.searchParams.set("forceFunctionRegion",d));let v;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(f["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(f["Content-Type"]="application/json",v=JSON.stringify(c)));const g=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:v}).catch(w=>{throw new iw(w)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new im(g);if(!g.ok)throw new am(g);let x=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),P;return x==="application/json"?P=yield g.json():x==="application/octet-stream"?P=yield g.blob():x==="text/event-stream"?P=g:x==="multipart/form-data"?P=yield g.formData():P=yield g.text(),{data:P,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof am||a instanceof im?a.context:void 0}}})}}var ut={},_d={},Fo={},Vi={},Zo={},qo={},lw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},js=lw();const cw=js.fetch,ev=js.fetch.bind(js),tv=js.Headers,uw=js.Request,dw=js.Response,Ps=Object.freeze(Object.defineProperty({__proto__:null,Headers:tv,Request:uw,Response:dw,default:ev,fetch:cw},Symbol.toStringTag,{value:"Module"})),hw=C0(Ps);var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});let fw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Vo.default=fw;var nv=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qo,"__esModule",{value:!0});const mw=nv(hw),pw=nv(Vo);let gw=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=mw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,f,d;let m=null,v=null,g=null,y=l.status,x=l.statusText;if(l.ok){if(this.method!=="HEAD"){const N=await l.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=N:v=JSON.parse(N))}const w=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),C=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");w&&C&&C.length>1&&(g=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(m={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,g=null,y=406,x="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const w=await l.text();try{m=JSON.parse(w),Array.isArray(m)&&l.status===404&&(v=[],m=null,y=200,x="OK")}catch{l.status===404&&w===""?(y=204,x="No Content"):m={message:w}}if(m&&this.isMaybeSingle&&(!((d=m==null?void 0:m.details)===null||d===void 0)&&d.includes("0 rows"))&&(m=null,y=200,x="OK"),m&&this.shouldThrowOnError)throw new pw.default(m)}return{error:m,data:v,count:g,status:y,statusText:x}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,f,d;return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(f=l==null?void 0:l.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(d=l==null?void 0:l.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,n)}returns(){return this}overrideTypes(){return this}};qo.default=gw;var vw=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zo,"__esModule",{value:!0});const xw=vw(qo);let yw=class extends xw.default{select(e){let n=!1;const s=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:s,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",f=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${f?`${f},`:""}${e}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,n,{foreignTable:s,referencedTable:a=s}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(c,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:s=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var f;const d=[e?"analyze":null,n?"verbose":null,s?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${m}"; options=${d};`,c==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Zo.default=yw;var _w=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vi,"__esModule",{value:!0});const ww=_w(Zo);let bw=class extends ww.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const s=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:s,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${l}fts${c}.${n}`),this}match(e){return Object.entries(e).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(e,n,s){return this.url.searchParams.append(e,`not.${n}.${s}`),this}or(e,{foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,n,s){return this.url.searchParams.append(e,`${n}.${s}`),this}};Vi.default=bw;var jw=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fo,"__esModule",{value:!0});const Xs=jw(Vi);let Nw=class{constructor(e,{headers:n={},schema:s,fetch:a}){this.url=e,this.headers=n,this.schema=s,this.fetch=a}select(e,{head:n=!1,count:s}={}){const a=n?"HEAD":"GET";let l=!1;const c=(e??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),s&&(this.headers.Prefer=`count=${s}`),new Xs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:s=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(c.length>0){const f=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new Xs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:s=!1,count:a,defaultToNull:l=!0}={}){const c="POST",f=[`resolution=${s?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&f.push(this.headers.Prefer),a&&f.push(`count=${a}`),l||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(e)){const d=e.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(d.length>0){const m=[...new Set(d)].map(v=>`"${v}"`);this.url.searchParams.set("columns",m.join(","))}}return new Xs.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const s="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Xs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Xs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Fo.default=Nw;var Wo={},Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.version=void 0;Ho.version="0.0.0-automated";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.DEFAULT_HEADERS=void 0;const kw=Ho;Wo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${kw.version}`};var rv=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_d,"__esModule",{value:!0});const Sw=rv(Fo),Pw=rv(Vi),Ew=Wo;let Cw=class sv{constructor(e,{headers:n={},schema:s,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ew.DEFAULT_HEADERS),n),this.schemaName=s,this.fetch=a}from(e){const n=new URL(`${this.url}/${e}`);return new Sw.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new sv(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:a=!1,count:l}={}){let c;const f=new URL(`${this.url}/rpc/${e}`);let d;s||a?(c=s?"HEAD":"GET",Object.entries(n).filter(([v,g])=>g!==void 0).map(([v,g])=>[v,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([v,g])=>{f.searchParams.append(v,g)})):(c="POST",d=n);const m=Object.assign({},this.headers);return l&&(m.Prefer=`count=${l}`),new Pw.default({method:c,url:f,headers:m,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};_d.default=Cw;var Es=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ut,"__esModule",{value:!0});ut.PostgrestError=ut.PostgrestBuilder=ut.PostgrestTransformBuilder=ut.PostgrestFilterBuilder=ut.PostgrestQueryBuilder=ut.PostgrestClient=void 0;const iv=Es(_d);ut.PostgrestClient=iv.default;const av=Es(Fo);ut.PostgrestQueryBuilder=av.default;const ov=Es(Vi);ut.PostgrestFilterBuilder=ov.default;const lv=Es(Zo);ut.PostgrestTransformBuilder=lv.default;const cv=Es(qo);ut.PostgrestBuilder=cv.default;const uv=Es(Vo);ut.PostgrestError=uv.default;var Tw=ut.default={PostgrestClient:iv.default,PostgrestQueryBuilder:av.default,PostgrestFilterBuilder:ov.default,PostgrestTransformBuilder:lv.default,PostgrestBuilder:cv.default,PostgrestError:uv.default};const{PostgrestClient:Lw,PostgrestQueryBuilder:c2,PostgrestFilterBuilder:u2,PostgrestTransformBuilder:d2,PostgrestBuilder:h2,PostgrestError:f2}=Tw;function Iw(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Ow=Iw(),Aw="2.11.15",Mw=`realtime-js/${Aw}`,Rw="1.0.0",dv=1e4,zw=1e3;var pi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pi||(pi={}));var Qe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Qe||(Qe={}));var Bt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Bt||(Bt={}));var lu;(function(t){t.websocket="websocket"})(lu||(lu={}));var fr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fr||(fr={}));class Dw{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const a=n.getUint8(1),l=n.getUint8(2);let c=this.HEADER_LENGTH+2;const f=s.decode(e.slice(c,c+a));c=c+a;const d=s.decode(e.slice(c,c+l));c=c+l;const m=JSON.parse(s.decode(e.slice(c,e.byteLength)));return{ref:null,topic:f,event:d,payload:m}}}class hv{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _e;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(_e||(_e={}));const om=(t,e,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((l,c)=>(l[c]=Bw(c,t,e,a),l),{})},Bw=(t,e,n,s)=>{const a=e.find(f=>f.name===t),l=a==null?void 0:a.type,c=n[t];return l&&!s.includes(l)?fv(l,c):cu(c)},fv=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Zw(e,n)}switch(t){case _e.bool:return Uw(e);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return $w(e);case _e.json:case _e.jsonb:return Fw(e);case _e.timestamp:return qw(e);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return cu(e);default:return cu(e)}},cu=t=>t,Uw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},$w=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Fw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Zw=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,n);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>fv(e,f))}return t},qw=t=>typeof t=="string"?t.replace(" ","T"):t,mv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class sc{constructor(e,n,s={},a=dv){this.channel=e,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var lm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(lm||(lm={}));class gi{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,a,l,c),this.pendingDiffs.forEach(d=>{this.state=gi.syncDiff(this.state,d,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=gi.syncDiff(this.state,a,l,c),f())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,a){const l=this.cloneDeep(e),c=this.transformState(n),f={},d={};return this.map(l,(m,v)=>{c[m]||(d[m]=v)}),this.map(c,(m,v)=>{const g=l[m];if(g){const y=v.map(C=>C.presence_ref),x=g.map(C=>C.presence_ref),P=v.filter(C=>x.indexOf(C.presence_ref)<0),w=g.filter(C=>y.indexOf(C.presence_ref)<0);P.length>0&&(f[m]=P),w.length>0&&(d[m]=w)}else f[m]=v}),this.syncDiff(l,{joins:f,leaves:d},s,a)}static syncDiff(e,n,s,a){const{joins:l,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(f,d)=>{var m;const v=(m=e[f])!==null&&m!==void 0?m:[];if(e[f]=this.cloneDeep(d),v.length>0){const g=e[f].map(x=>x.presence_ref),y=v.filter(x=>g.indexOf(x.presence_ref)<0);e[f].unshift(...y)}s(f,v,d)}),this.map(c,(f,d)=>{let m=e[f];if(!m)return;const v=d.map(g=>g.presence_ref);m=m.filter(g=>v.indexOf(g.presence_ref)<0),e[f]=m,a(f,m,d),m.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const a=e[s];return"metas"in a?n[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(cm||(cm={}));var um;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(um||(um={}));var hn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(hn||(hn={}));class wd{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new sc(this,Bt.join,this.params,this.timeout),this.rejoinTimer=new hv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qe.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bt.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new gi(this),this.broadcastEndpointURL=mv(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Qe.closed){const{config:{broadcast:l,presence:c,private:f}}=this.params;this._onError(v=>e==null?void 0:e(hn.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(hn.CLOSED));const d={},m={broadcast:l,presence:c,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(v=>v.filter))!==null&&a!==void 0?a:[],private:f};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:m},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var g;if(this.socket.setAuth(),v===void 0){e==null||e(hn.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,P=[];for(let w=0;w<x;w++){const C=y[w],{filter:{event:N,schema:b,table:j,filter:T}}=C,S=v&&v[w];if(S&&S.event===N&&S.schema===b&&S.table===j&&S.filter===T)P.push(Object.assign(Object.assign({},C),{id:S.id}));else{this.unsubscribe(),this.state=Qe.errored,e==null||e(hn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(hn.SUBSCRIBED);return}}).receive("error",v=>{this.state=Qe.errored,e==null||e(hn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this._on(e,n,s)}async send(e,n={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:c}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,d;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||d===void 0)&&d.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new sc(this,Bt.leave,{},e),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),c}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new sc(this,e,n,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var a,l;const c=e.toLocaleLowerCase(),{close:f,error:d,leave:m,join:v}=Bt;if(s&&[f,d,m,v].indexOf(c)>=0&&s!==this._joinRef())return;let y=this._onMessage(c,n,s);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(x=>{var P,w,C;return((P=x.filter)===null||P===void 0?void 0:P.event)==="*"||((C=(w=x.filter)===null||w===void 0?void 0:w.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===c}).map(x=>x.callback(y,s)):(l=this.bindings[c])===null||l===void 0||l.filter(x=>{var P,w,C,N,b,j;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in x){const T=x.id,S=(P=x.filter)===null||P===void 0?void 0:P.event;return T&&((w=n.ids)===null||w===void 0?void 0:w.includes(T))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const T=(b=(N=x==null?void 0:x.filter)===null||N===void 0?void 0:N.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return T==="*"||T===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===c}).map(x=>{if(typeof y=="object"&&"ids"in y){const P=y.data,{schema:w,table:C,commit_timestamp:N,type:b,errors:j}=P;y=Object.assign(Object.assign({},{schema:w,table:C,commit_timestamp:N,eventType:b,new:{},old:{},errors:j}),this._getPayloadRecords(P))}x.callback(y,s)})}_isClosed(){return this.state===Qe.closed}_isJoined(){return this.state===Qe.joined}_isJoining(){return this.state===Qe.joining}_isLeaving(){return this.state===Qe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&wd.isEqual(a.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bt.close,{},e)}_onError(e){this._on(Bt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=om(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=om(e.columns,e.old_record)),n}}const dm=()=>{},Vw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ww{constructor(e,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dv,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dm,this.ref=0,this.logger=dm,this.conn=null,this.sendBuffer=[],this.serializer=new Dw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...f)=>qi(async()=>{const{default:d}=await Promise.resolve().then(()=>Ps);return{default:d}},void 0).then(({default:d})=>d(...f)):c=fetch,(...f)=>c(...f)},this.endPoint=`${e}/${lu.websocket}`,this.httpEndpoint=mv(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(l,c)=>c(JSON.stringify(l)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new hv(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Ow),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rw}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case pi.connecting:return fr.Connecting;case pi.open:return fr.Open;case pi.closing:return fr.Closing;default:return fr.Closed}}isConnected(){return this.connectionState()===fr.Open}channel(e,n={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new wd(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,f=>{var d;(d=this.conn)===null||d===void 0||d.send(f)})};this.log("push",`${n} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:Mw};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Bt.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(zw,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:s,event:a,payload:l,ref:c}=n;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),c&&c===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${s} ${a} ${c&&"("+c+")"||""}`,l),Array.from(this.channels).filter(f=>f._isMember(s)).forEach(f=>f._trigger(a,l,c)),this.stateChangeCallbacks.message.forEach(f=>f(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${s}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([Vw],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class bd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function $e(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Hw extends bd{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class uu extends bd{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Gw=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(v){try{m(s.next(v))}catch(g){c(g)}}function d(v){try{m(s.throw(v))}catch(g){c(g)}}function m(v){v.done?l(v.value):a(v.value).then(f,d)}m((s=s.apply(t,e||[])).next())})};const pv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qi(async()=>{const{default:s}=await Promise.resolve().then(()=>Ps);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},Kw=()=>Gw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qi(()=>Promise.resolve().then(()=>Ps),void 0)).Response:Response}),du=t=>{if(Array.isArray(t))return t.map(n=>du(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=du(s)}),e},Jw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ir=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(v){try{m(s.next(v))}catch(g){c(g)}}function d(v){try{m(s.throw(v))}catch(g){c(g)}}function m(v){v.done?l(v.value):a(v.value).then(f,d)}m((s=s.apply(t,e||[])).next())})};const ic=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qw=(t,e,n)=>Ir(void 0,void 0,void 0,function*(){const s=yield Kw();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(a=>{const l=t.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new Hw(ic(a),l,c))}).catch(a=>{e(new uu(ic(a),a))}):e(new uu(ic(t),t))}),Yw=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(Jw(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),n))};function Wi(t,e,n,s,a,l){return Ir(this,void 0,void 0,function*(){return new Promise((c,f)=>{t(n,Yw(e,s,a,l)).then(d=>{if(!d.ok)throw d;return s!=null&&s.noResolveJson?d:d.json()}).then(d=>c(d)).catch(d=>Qw(d,f,s))})})}function yo(t,e,n,s){return Ir(this,void 0,void 0,function*(){return Wi(t,"GET",e,n,s)})}function fn(t,e,n,s,a){return Ir(this,void 0,void 0,function*(){return Wi(t,"POST",e,s,a,n)})}function hu(t,e,n,s,a){return Ir(this,void 0,void 0,function*(){return Wi(t,"PUT",e,s,a,n)})}function Xw(t,e,n,s){return Ir(this,void 0,void 0,function*(){return Wi(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function gv(t,e,n,s,a){return Ir(this,void 0,void 0,function*(){return Wi(t,"DELETE",e,s,a,n)})}var ot=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(v){try{m(s.next(v))}catch(g){c(g)}}function d(v){try{m(s.throw(v))}catch(g){c(g)}}function m(v){v.done?l(v.value):a(v.value).then(f,d)}m((s=s.apply(t,e||[])).next())})};const eb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tb{constructor(e,n={},s,a){this.url=e,this.headers=n,this.bucketId=s,this.fetch=pv(a)}uploadOrUpdate(e,n,s,a){return ot(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},hm),a);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const d=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),d&&l.append("metadata",this.encodeMetadata(d)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl),d&&l.append("metadata",this.encodeMetadata(d))):(l=s,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,d&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(f=Object.assign(Object.assign({},f),a.headers));const m=this._removeEmptyFolders(n),v=this._getFinalPath(m),g=yield(e=="PUT"?hu:fn)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:g.Id,fullPath:g.Key},error:null}}catch(l){if($e(l))return{data:null,error:l};throw l}})}upload(e,n,s){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,a){return ot(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",n);try{let d;const m=Object.assign({upsert:hm.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",m.cacheControl)):(d=s,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const g=yield hu(this.fetch,f.toString(),d,{headers:v});return{data:{path:l,fullPath:g.Key},error:null}}catch(d){if($e(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return ot(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const l=yield fn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new bd("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}update(e,n,s){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return ot(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}copy(e,n,s){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield fn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,s){return ot(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield fn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,s){return ot(this,void 0,void 0,function*(){try{const a=yield fn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}download(e,n){return ot(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=l?`?${l}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield yo(this.fetch,`${this.url}/${a}/${f}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if($e(f))return{data:null,error:f};throw f}})}info(e){return ot(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield yo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:du(s),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}exists(e){return ot(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Xw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if($e(s)&&s instanceof uu){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),a=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const f=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&a.push(d);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${m}`)}}}remove(e){return ot(this,void 0,void 0,function*(){try{return{data:yield gv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}list(e,n,s){return ot(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},eb),n),{prefix:e||""});return{data:yield fn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const nb="2.10.4",rb={"X-Client-Info":`storage-js/${nb}`};var Vr=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(v){try{m(s.next(v))}catch(g){c(g)}}function d(v){try{m(s.throw(v))}catch(g){c(g)}}function m(v){v.done?l(v.value):a(v.value).then(f,d)}m((s=s.apply(t,e||[])).next())})};class sb{constructor(e,n={},s,a){const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},rb),n),this.fetch=pv(s)}listBuckets(){return Vr(this,void 0,void 0,function*(){try{return{data:yield yo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if($e(e))return{data:null,error:e};throw e}})}getBucket(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield yo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Vr(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Vr(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield gv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}}class ib extends sb{constructor(e,n={},s,a){super(e,n,s,a)}from(e){return new tb(this.url,this.headers,e,this.fetch)}}const ab="2.53.0";let si="";typeof Deno<"u"?si="deno":typeof document<"u"?si="web":typeof navigator<"u"&&navigator.product==="ReactNative"?si="react-native":si="node";const ob={"X-Client-Info":`supabase-js-${si}/${ab}`},lb={headers:ob},cb={schema:"public"},ub={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},db={};var hb=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(v){try{m(s.next(v))}catch(g){c(g)}}function d(v){try{m(s.throw(v))}catch(g){c(g)}}function m(v){v.done?l(v.value):a(v.value).then(f,d)}m((s=s.apply(t,e||[])).next())})};const fb=t=>{let e;return t?e=t:typeof fetch>"u"?e=ev:e=fetch,(...n)=>e(...n)},mb=()=>typeof Headers>"u"?tv:Headers,pb=(t,e,n)=>{const s=fb(n),a=mb();return(l,c)=>hb(void 0,void 0,void 0,function*(){var f;const d=(f=yield e())!==null&&f!==void 0?f:t;let m=new a(c==null?void 0:c.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),s(l,Object.assign(Object.assign({},c),{headers:m}))})};var gb=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(v){try{m(s.next(v))}catch(g){c(g)}}function d(v){try{m(s.throw(v))}catch(g){c(g)}}function m(v){v.done?l(v.value):a(v.value).then(f,d)}m((s=s.apply(t,e||[])).next())})};function vb(t){return t.endsWith("/")?t:t+"/"}function xb(t,e){var n,s;const{db:a,auth:l,realtime:c,global:f}=t,{db:d,auth:m,realtime:v,global:g}=e,y={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},m),l),realtime:Object.assign(Object.assign({},v),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),f),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>gb(this,void 0,void 0,function*(){return""})};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}const vv="2.71.1",Jr=30*1e3,fu=3,ac=fu*Jr,yb="http://localhost:9999",_b="supabase.auth.token",wb={"X-Client-Info":`gotrue-js/${vv}`},mu="X-Supabase-Api-Version",xv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jb=10*60*1e3;class jd extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Nb extends jd{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function kb(t){return ie(t)&&t.name==="AuthApiError"}class yv extends jd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class tr extends jd{constructor(e,n,s,a){super(e,s,a),this.name=n,this.status=s}}class Cn extends tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sb(t){return ie(t)&&t.name==="AuthSessionMissingError"}class Oa extends tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Aa extends tr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ma extends tr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Pb(t){return ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class fm extends tr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pu extends tr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function oc(t){return ie(t)&&t.name==="AuthRetryableFetchError"}class mm extends tr{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class gu extends tr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pm=` 	
\r=`.split(""),Eb=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<pm.length;e+=1)t[pm[e].charCodeAt(0)]=-2;for(let e=0;e<_o.length;e+=1)t[_o[e].charCodeAt(0)]=e;return t})();function gm(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(_o[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(_o[s]),e.queuedBits-=6}}function _v(t,e,n){const s=Eb[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function vm(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{Lb(c,s,n)};for(let c=0;c<t.length;c+=1)_v(t.charCodeAt(c),a,l);return e.join("")}function Cb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Tb(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}Cb(s,e)}}function Lb(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ib(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)_v(t.charCodeAt(a),n,s);return new Uint8Array(e)}function Ob(t){const e=[];return Tb(t,n=>e.push(n)),new Uint8Array(e)}function Ab(t){const e=[],n={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>gm(a,n,s)),gm(null,n,s),e.join("")}function Mb(t){return Math.round(Date.now()/1e3)+t}function Rb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Rt=()=>typeof window<"u"&&typeof document<"u",lr={tested:!1,writable:!1},wv=()=>{if(!Rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lr.tested)return lr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),lr.tested=!0,lr.writable=!0}catch{lr.tested=!0,lr.writable=!1}return lr.writable};function zb(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((s,a)=>{e[a]=s}),e}const bv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qi(async()=>{const{default:s}=await Promise.resolve().then(()=>Ps);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},Db=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Qr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},cr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},En=async(t,e)=>{await t.removeItem(e)};class Go{constructor(){this.promise=new Go.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Go.promiseConstructor=Promise;function lc(t){const e=t.split(".");if(e.length!==3)throw new gu("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!bb.test(e[s]))throw new gu("JWT not in base64url format");return{header:JSON.parse(vm(e[0])),payload:JSON.parse(vm(e[1])),signature:Ib(e[2]),raw:{header:e[0],payload:e[1]}}}async function Bb(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ub(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function $b(t){return("0"+t.toString(16)).substr(-2)}function Fb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,$b).join("")}async function Zb(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function qb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Zb(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wr(t,e,n=!1){const s=Fb();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await Qr(t,`${e}-code-verifier`,a);const l=await qb(s);return[l,s===l?"plain":"s256"]}const Vb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wb(t){const e=t.headers.get(mu);if(!e||!e.match(Vb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Hb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Gb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hr(t){if(!Kb.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xm(t){return JSON.parse(JSON.stringify(t))}var Jb=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};const hr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qb=[502,503,504];async function ym(t){var e;if(!Db(t))throw new pu(hr(t),0);if(Qb.includes(t.status))throw new pu(hr(t),t.status);let n;try{n=await t.json()}catch(l){throw new yv(hr(l),l)}let s;const a=Wb(t);if(a&&a.getTime()>=xv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new mm(hr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Cn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new mm(hr(n),t.status,n.weak_password.reasons);throw new Nb(hr(n),t.status||500,s)}const Yb=(t,e,n,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function ce(t,e,n,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[mu]||(l[mu]=xv["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",d=await Xb(t,e,n+f,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(d):{data:Object.assign({},d),error:null}}async function Xb(t,e,n,s,a,l){const c=Yb(e,s,a,l);let f;try{f=await t(n,Object.assign({},c))}catch(d){throw console.error(d),new pu(hr(d),0)}if(f.ok||await ym(f),s!=null&&s.noResolveJson)return f;try{return await f.json()}catch(d){await ym(d)}}function un(t){var e;let n=null;rj(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Mb(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function _m(t){const e=un(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function An(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function ej(t){return{data:t,error:null}}function tj(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l}=t,c=Jb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:s,redirect_to:a,verification_type:l},d=Object.assign({},c);return{data:{properties:f,user:d},error:null}}function nj(t){return t}function rj(t){return t.access_token&&t.refresh_token&&t.expires_in}const uc=["global","local","others"];var sj=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n};class ij{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=bv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=uc[0]){if(uc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uc.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:An})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=sj(e,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:tj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:An})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,a,l,c,f,d;try{const m={nextPage:null,lastPage:0,total:0},v=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:nj});if(v.error)throw v.error;const g=await v.json(),y=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,x=(d=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(P=>{const w=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(P.split(";")[1].split("=")[1]);m[`${C}Page`]=w}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(ie(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Hr(e);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:An})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Hr(e);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:An})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Hr(e);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:An})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Hr(e.userId);try{const{data:n,error:s}=await ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Hr(e.userId),Hr(e.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}}function wm(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function aj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gr={debug:!!(globalThis&&wv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class oj extends jv{}async function lj(t,e,n){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new oj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Gr.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}aj();const cj={url:yb,storageKey:_b,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bm(t,e,n){return await n()}const Kr={};class Mi{constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mi.nextInstanceID,Mi.nextInstanceID+=1,this.instanceID>0&&Rt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},cj),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new ij({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=bv(a.fetch),this.lock=a.lock||bm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Rt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=lj:this.lock=bm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:wv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wm(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=wm(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Kr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Kr[this.storageKey]=Object.assign(Object.assign({},Kr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Kr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Kr[this.storageKey]=Object.assign(Object.assign({},Kr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=zb(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),Rt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Pb(l)){const d=(e=l.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ie(n)?{error:n}:{error:new yv("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,a;try{const l=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:un}),{data:c,error:f}=l;if(f||!c)return{data:{user:null,session:null},error:f};const d=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(l){if(ie(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,s,a;try{let l;if("email"in e){const{email:v,password:g,options:y}=e;let x=null,P=null;this.flowType==="pkce"&&([x,P]=await Wr(this.storage,this.storageKey)),l=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:v,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:P},xform:un})}else if("phone"in e){const{phone:v,password:g,options:y}=e;l=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(s=y==null?void 0:y.data)!==null&&s!==void 0?s:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:un})}else throw new Aa("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return{data:{user:null,session:null},error:f};const d=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(l){if(ie(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:c,options:f}=e;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:_m})}else if("phone"in e){const{phone:l,password:c,options:f}=e;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:_m})}else throw new Aa("You must provide either an email or phone number and a password");const{data:s,error:a}=n;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Oa}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,a,l,c,f,d,m,v,g,y,x;let P,w;if("message"in e)P=e.message,w=e.signature;else{const{chain:C,wallet:N,statement:b,options:j}=e;let T;if(Rt())if(typeof N=="object")T=N;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))T=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=N}const S=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const k=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),b?{statement:b}:null));let O;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")O=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)O=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)P=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),w=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${S.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(s=j==null?void 0:j.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((m=j==null?void 0:j.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((g=(v=j==null?void 0:j.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...j.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const k=await T.signMessage(new TextEncoder().encode(P),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=k}}try{const{data:C,error:N}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:Ab(w)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:un});if(N)throw N;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Oa}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:N})}catch(C){if(ie(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const n=await cr(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:l,error:c}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:un});if(await En(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Oa}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(ie(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:a,access_token:l,nonce:c}=e,f=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:un}),{data:d,error:m}=f;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Oa}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,a,l,c;try{if("email"in e){const{email:f,options:d}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Wr(this.storage,this.storageKey));const{error:g}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:f,options:d}=e,{data:m,error:v}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(l=d==null?void 0:d.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(c=d==null?void 0:d.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v}}throw new Aa("You must provide either an email or phone number.")}catch(f){if(ie(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var n,s;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:f}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:un});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const d=c.session,m=c.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,s,a;try{let l=null,c=null;return this.flowType==="pkce"&&([l,c]=await Wr(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:ej})}catch(l){if(ie(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Cn;const{error:a}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:f}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f}}throw new Aa("You must provide either an email or phone number and a type")}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await cr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<ac:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await cr(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=cc()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,m,v)=>(!c&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,v))})}return{data:{session:e},error:null}}const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:An}):await this._useSession(async n=>{var s,a,l;const{data:c,error:f}=n;if(f)throw f;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cn}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:An})})}catch(n){if(ie(n))return Sb(n)&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Cn;const c=a.session;let f=null,d=null;this.flowType==="pkce"&&e.email!=null&&([f,d]=await Wr(this.storage,this.storageKey));const{data:m,error:v}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:d}),jwt:c.access_token,xform:An});if(v)throw v;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Cn;const n=Date.now()/1e3;let s=n,a=!0,l=null;const{payload:c}=lc(e.access_token);if(c.exp&&(s=c.exp,a=s<=n),a){const{session:f,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:d}=await this._getUser(e.access_token);if(d)throw d;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:c,error:f}=n;if(f)throw f;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Cn;const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Rt())throw new Ma("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ma(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new fm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ma("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fm("No code detected.");const{data:b,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:f,expires_at:d,token_type:m}=e;if(!l||!f||!c||!m)throw new Ma("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(f);let y=v+g;d&&(y=parseInt(d));const x=y-v;x*1e3<=Jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${g}s`);const P=y-g;v-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,y,v):v-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,y,v);const{data:w,error:C}=await this._getUser(l);if(C)throw C;const N={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:g,expires_at:y,refresh_token:c,token_type:m,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(s){if(ie(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await cr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return{error:l};const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(kb(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Rb(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,a;try{const{data:{session:l},error:c}=n;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Wr(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(ie(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:a}=await this._useSession(async l=>{var c,f,d,m,v;const{data:g,error:y}=l;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",x,{headers:this.headers,jwt:(v=(m=g.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return Rt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(ie(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)throw c;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await Ub(async a=>(a>0&&await Bb(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:un})),(a,l)=>{const c=200*Math.pow(2,a);return l&&oc(l)&&Date.now()+c-s<Jr})}catch(s){if(this._debug(n,"error",s),ie(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Rt()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await cr(this.storage,this.storageKey);if(a&&this.userStorage){let c=await cr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Qr(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:cc()}else if(a&&!a.user&&!a.user){const c=await cr(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await En(this.storage,this.storageKey+"-user"),await Qr(this.storage,this.storageKey,a)):a.user=cc()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ac;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${ac}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),oc(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(a.access_token);!f&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Cn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Go;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Cn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={session:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(a,"error",l),ie(l)){const c={session:null,error:l};return oc(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(d){l.push(d)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Qr(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const l=xm(a);await Qr(this.storage,this.storageKey,l)}else{const a=xm(n);await Qr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await En(this.storage,this.storageKey),await En(this.storage,this.storageKey+"-code-verifier"),await En(this.storage,this.storageKey+"-user"),this.userStorage&&await En(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Jr}ms, refresh threshold is ${fu} ticks`),a<=fu&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await Wr(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(f.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;return l?{data:null,error:l}:await ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,a;const{data:l,error:c}=n;if(c)return{data:null,error:c};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:m}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;if(l)return{data:null,error:l};const{data:c,error:f}=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:f})})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:l}=n;return l?{data:null,error:l}:await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],a=s.filter(c=>c.factor_type==="totp"&&c.status==="verified"),l=s.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:s,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=lc(a.access_token);let f=null;c.aal&&(f=c.aal);let d=f;((s=(n=a.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");const v=c.amr||[];return{data:{currentLevel:f,nextLevel:d,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(f=>f.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+jb>a)return s;const{data:l,error:c}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(f=>f.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:x,error:P}=await this.getSession();if(P||!x.session)return{data:null,error:P};s=x.session.access_token}const{header:a,payload:l,signature:c,raw:{header:f,payload:d}}=lc(s);n!=null&&n.allowExpired||Hb(l.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:l,header:a,signature:c},error:null}}const v=Gb(a.alg),g=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,c,Ob(`${f}.${d}`)))throw new gu("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}}Mi.nextInstanceID=0;const uj=Mi;class dj extends uj{constructor(e){super(e)}}var hj=function(t,e,n,s){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(v){try{m(s.next(v))}catch(g){c(g)}}function d(v){try{m(s.throw(v))}catch(g){c(g)}}function m(v){v.done?l(v.value):a(v.value).then(f,d)}m((s=s.apply(t,e||[])).next())})};class fj{constructor(e,n,s){var a,l,c;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const f=vb(e),d=new URL(f);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const m=`sb-${d.hostname.split(".")[0]}-auth-token`,v={db:cb,realtime:db,auth:Object.assign(Object.assign({},ub),{storageKey:m}),global:lb},g=xb(s??{},v);this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,g.global.fetch),this.fetch=pb(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new Lw(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new ib(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new ow(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return hj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,storageKey:l,flowType:c,lock:f,debug:d},m,v){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dj({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),m),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:a,flowType:c,lock:f,debug:d,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ww(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mj=(t,e,n)=>new fj(t,e,n);function pj(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}pj()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const gj="https://vxmpifukfohjafrbiqvw.supabase.co",vj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ4bXBpZnVrZm9oamFmcmJpcXZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4MDUwNDYsImV4cCI6MjA2OTM4MTA0Nn0.JPwFO4UL-LileKVD6JDVZc2RrfCFsK5KgKlS5CFkUPc",W=mj(gj,vj,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",storage:{getItem:t=>{try{return localStorage.getItem(t)}catch(e){return console.error("Error getting item from localStorage:",e),null}},setItem:(t,e)=>{try{localStorage.setItem(t,e)}catch(n){console.error("Error setting item in localStorage:",n)}},removeItem:t=>{try{localStorage.removeItem(t)}catch(e){console.error("Error removing item from localStorage:",e)}}}},global:{headers:{Accept:"application/json","Content-Type":"application/json"}},db:{schema:"public"}});W.auth.onAuthStateChange((t,e)=>{t==="TOKEN_REFRESHED"&&!e&&(console.warn("Token refresh failed, clearing storage"),localStorage.clear(),sessionStorage.clear())});const vi=()=>{try{Object.keys(localStorage).filter(n=>n.startsWith("supabase.auth.token")||n.startsWith("sb-")||n.includes("auth")).forEach(n=>{localStorage.removeItem(n)}),Object.keys(sessionStorage).filter(n=>n.startsWith("supabase.auth.token")||n.startsWith("sb-")||n.includes("auth")).forEach(n=>{sessionStorage.removeItem(n)}),console.log("Auth storage cleared successfully")}catch(t){console.error("Error clearing auth storage:",t)}},xj=t=>{var s,a;if(!t)return!1;const e=((s=t.message)==null?void 0:s.toLowerCase())||"",n=((a=t.code)==null?void 0:a.toString())||"";return e.includes("refresh")||e.includes("token")||e.includes("invalid")||e.includes("expired")||n==="400"||n==="401"||n==="403"},jm=async(t,e)=>{if(xj(t)){console.warn("Auth token error detected, cleaning up:",t),vi();try{await e.auth.signOut()}catch(n){console.error("Error during sign out:",n)}}},Nv=E.createContext(void 0);function yj({children:t}){const[e,n]=E.useState(null),[s,a]=E.useState(null),[l,c]=E.useState(!0),[f,d]=E.useState(!1),[m,v]=E.useState(!1),[g,y]=E.useState(null),[x,P]=E.useState(null);E.useEffect(()=>{(async()=>{try{const{data:{session:R},error:A}=await W.auth.getSession();A?(console.error("Error getting session:",A),await jm(A,W),a(null),n(null)):(a(R),n((R==null?void 0:R.user)??null),R!=null&&R.user&&w(R.user.id))}catch(R){console.error("Error initializing auth:",R),await jm(R,W),a(null),n(null)}finally{c(!1)}})();const{data:{subscription:O}}=W.auth.onAuthStateChange(async(R,A)=>{var $;console.log("Auth state changed:",R,($=A==null?void 0:A.user)==null?void 0:$.id),R==="TOKEN_REFRESHED"&&!A&&vi(),a(A),n((A==null?void 0:A.user)??null),A!=null&&A.user?w(A.user.id):(y(null),P(null),d(!1),v(!1)),c(!1)});return()=>O.unsubscribe()},[]);const w=async k=>{try{const{data:O,error:R}=await W.from("user_profiles").select("*").eq("id",k).maybeSingle();if(R){console.error("Error loading user profile:",R),y(null),d(!1),v(!1);return}if(O){if(y(O),d(O.role==="admin"),v(O.role==="agent"),O.role==="agent")try{const{data:A,error:$}=await W.from("agents").select("*").eq("id",k).maybeSingle();!$&&A&&P(A)}catch(A){console.error("Error loading agent profile:",A)}}else console.log("No profile found, creating one..."),await C(k)}catch(O){console.error("Error loading user profile:",O),y(null),d(!1),v(!1)}},C=async k=>{var O,R,A,$;try{const{data:U}=await W.auth.getUser();if(U!=null&&U.user){const{error:D}=await W.from("user_profiles").insert({id:k,email:U.user.email,full_name:((O=U.user.user_metadata)==null?void 0:O.full_name)||((R=U.user.email)==null?void 0:R.split("@")[0])||"Usuario",first_name:((A=U.user.user_metadata)==null?void 0:A.first_name)||"Usuario",last_name:(($=U.user.user_metadata)==null?void 0:$.last_name)||"",role:"buyer"});D||(console.log("Profile created successfully"),await w(k))}}catch(U){console.error("Error creating missing profile:",U)}},S={user:e,session:s,loading:l,signIn:async(k,O)=>{const{error:R}=await W.auth.signInWithPassword({email:k,password:O});return{error:R}},signUp:async(k,O,R,A,$)=>{const{data:U,error:D}=await W.auth.signUp({email:k,password:O,options:{data:{full_name:R,first_name:A,last_name:$}}});return!D&&U.user&&await W.from("user_profiles").insert({id:U.user.id,email:U.user.email,full_name:R,first_name:A,last_name:$,role:"buyer"}),{error:D}},signOut:async()=>{await W.auth.signOut(),d(!1),v(!1),y(null),P(null)},isAdmin:f,isAgent:m,userProfile:g,agentProfile:x,refreshProfile:async()=>{e!=null&&e.id&&await w(e.id)}};return i.jsx(Nv.Provider,{value:S,children:t})}function pt(){const t=E.useContext(Nv);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ri(){return Ri=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ri.apply(this,arguments)}var zn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zn||(zn={}));const Nm="popstate";function _j(t){t===void 0&&(t={});function e(s,a){let{pathname:l,search:c,hash:f}=s.location;return vu("",{pathname:l,search:c,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:wo(a)}return bj(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wj(){return Math.random().toString(36).substr(2,8)}function km(t,e){return{usr:t.state,key:t.key,idx:e}}function vu(t,e,n,s){return n===void 0&&(n=null),Ri({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Cs(e):e,{state:n,key:e&&e.key||s||wj()})}function wo(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Cs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function bj(t,e,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,f=zn.Pop,d=null,m=v();m==null&&(m=0,c.replaceState(Ri({},c.state,{idx:m}),""));function v(){return(c.state||{idx:null}).idx}function g(){f=zn.Pop;let C=v(),N=C==null?null:C-m;m=C,d&&d({action:f,location:w.location,delta:N})}function y(C,N){f=zn.Push;let b=vu(w.location,C,N);m=v()+1;let j=km(b,m),T=w.createHref(b);try{c.pushState(j,"",T)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(T)}l&&d&&d({action:f,location:w.location,delta:1})}function x(C,N){f=zn.Replace;let b=vu(w.location,C,N);m=v();let j=km(b,m),T=w.createHref(b);c.replaceState(j,"",T),l&&d&&d({action:f,location:w.location,delta:0})}function P(C){let N=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof C=="string"?C:wo(C);return b=b.replace(/ $/,"%20"),Oe(N,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,N)}let w={get action(){return f},get location(){return t(a,c)},listen(C){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Nm,g),d=C,()=>{a.removeEventListener(Nm,g),d=null}},createHref(C){return e(a,C)},createURL:P,encodeLocation(C){let N=P(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:x,go(C){return c.go(C)}};return w}var Sm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sm||(Sm={}));function jj(t,e,n){return n===void 0&&(n="/"),Nj(t,e,n)}function Nj(t,e,n,s){let a=typeof e=="string"?Cs(e):e,l=Nd(a.pathname||"/",n);if(l==null)return null;let c=Sv(t);kj(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let m=zj(l);f=Aj(c[d],m)}return f}function Sv(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(l,c,f)=>{let d={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};d.relativePath.startsWith("/")&&(Oe(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let m=Wn([s,d.relativePath]),v=n.concat(d);l.children&&l.children.length>0&&(Oe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Sv(l.children,e,v,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:Ij(m,l.index),routesMeta:v})};return t.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,c);else for(let d of Pv(l.path))a(l,c,d)}),e}function Pv(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=Pv(s.join("/")),f=[];return f.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&f.push(...c),f.map(d=>t.startsWith("/")&&d===""?"/":d)}function kj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Oj(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Sj=/^:[\w-]+$/,Pj=3,Ej=2,Cj=1,Tj=10,Lj=-2,Pm=t=>t==="*";function Ij(t,e){let n=t.split("/"),s=n.length;return n.some(Pm)&&(s+=Lj),e&&(s+=Ej),n.filter(a=>!Pm(a)).reduce((a,l)=>a+(Sj.test(l)?Pj:l===""?Cj:Tj),s)}function Oj(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function Aj(t,e,n){let{routesMeta:s}=t,a={},l="/",c=[];for(let f=0;f<s.length;++f){let d=s[f],m=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",g=Mj({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},v),y=d.route;if(!g)return null;Object.assign(a,g.params),c.push({params:a,pathname:Wn([l,g.pathname]),pathnameBase:$j(Wn([l,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(l=Wn([l,g.pathnameBase]))}return c}function Mj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=Rj(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:s.reduce((m,v,g)=>{let{paramName:y,isOptional:x}=v;if(y==="*"){let w=f[g]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const P=f[g];return x&&!P?m[y]=void 0:m[y]=(P||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:t}}function Rj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),kv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(s.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function zj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Nd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function Dj(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Cs(t):t;return{pathname:n?n.startsWith("/")?n:Bj(n,e):e,search:Fj(s),hash:Zj(a)}}function Bj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function dc(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kd(t,e){let n=Uj(t);return e?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Sd(t,e,n,s){s===void 0&&(s=!1);let a;typeof t=="string"?a=Cs(t):(a=Ri({},t),Oe(!a.pathname||!a.pathname.includes("?"),dc("?","pathname","search",a)),Oe(!a.pathname||!a.pathname.includes("#"),dc("#","pathname","hash",a)),Oe(!a.search||!a.search.includes("#"),dc("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=n;else{let g=e.length-1;if(!s&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;a.pathname=y.join("/")}f=g>=0?e[g]:"/"}let d=Dj(a,f),m=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(m||v)&&(d.pathname+="/"),d}const Wn=t=>t.join("/").replace(/\/\/+/g,"/"),$j=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Fj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Zj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ev=["post","put","patch","delete"];new Set(Ev);const Vj=["get",...Ev];new Set(Vj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zi(){return zi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zi.apply(this,arguments)}const Pd=E.createContext(null),Wj=E.createContext(null),nr=E.createContext(null),Ko=E.createContext(null),jn=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Cv=E.createContext(null);function Hj(t,e){let{relative:n}=e===void 0?{}:e;Ts()||Oe(!1);let{basename:s,navigator:a}=E.useContext(nr),{hash:l,pathname:c,search:f}=Iv(t,{relative:n}),d=c;return s!=="/"&&(d=c==="/"?s:Wn([s,c])),a.createHref({pathname:d,search:f,hash:l})}function Ts(){return E.useContext(Ko)!=null}function Hi(){return Ts()||Oe(!1),E.useContext(Ko).location}function Tv(t){E.useContext(nr).static||E.useLayoutEffect(t)}function Jo(){let{isDataRoute:t}=E.useContext(jn);return t?a1():Gj()}function Gj(){Ts()||Oe(!1);let t=E.useContext(Pd),{basename:e,future:n,navigator:s}=E.useContext(nr),{matches:a}=E.useContext(jn),{pathname:l}=Hi(),c=JSON.stringify(kd(a,n.v7_relativeSplatPath)),f=E.useRef(!1);return Tv(()=>{f.current=!0}),E.useCallback(function(m,v){if(v===void 0&&(v={}),!f.current)return;if(typeof m=="number"){s.go(m);return}let g=Sd(m,JSON.parse(c),l,v.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Wn([e,g.pathname])),(v.replace?s.replace:s.push)(g,v.state,v)},[e,s,c,l,t])}function Lv(){let{matches:t}=E.useContext(jn),e=t[t.length-1];return e?e.params:{}}function Iv(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=E.useContext(nr),{matches:a}=E.useContext(jn),{pathname:l}=Hi(),c=JSON.stringify(kd(a,s.v7_relativeSplatPath));return E.useMemo(()=>Sd(t,JSON.parse(c),l,n==="path"),[t,c,l,n])}function Kj(t,e){return Jj(t,e)}function Jj(t,e,n,s){Ts()||Oe(!1);let{navigator:a}=E.useContext(nr),{matches:l}=E.useContext(jn),c=l[l.length-1],f=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let m=Hi(),v;if(e){var g;let C=typeof e=="string"?Cs(e):e;d==="/"||(g=C.pathname)!=null&&g.startsWith(d)||Oe(!1),v=C}else v=m;let y=v.pathname||"/",x=y;if(d!=="/"){let C=d.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let P=jj(t,{pathname:x}),w=t1(P&&P.map(C=>Object.assign({},C,{params:Object.assign({},f,C.params),pathname:Wn([d,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Wn([d,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,n,s);return e&&w?E.createElement(Ko.Provider,{value:{location:zi({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:zn.Pop}},w):w}function Qj(){let t=i1(),e=qj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:a},n):null,null)}const Yj=E.createElement(Qj,null);class Xj extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(jn.Provider,{value:this.props.routeContext},E.createElement(Cv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e1(t){let{routeContext:e,match:n,children:s}=t,a=E.useContext(Pd);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(jn.Provider,{value:e},s)}function t1(t,e,n,s){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,f=(a=n)==null?void 0:a.errors;if(f!=null){let v=c.findIndex(g=>g.route.id&&(f==null?void 0:f[g.route.id])!==void 0);v>=0||Oe(!1),c=c.slice(0,Math.min(c.length,v+1))}let d=!1,m=-1;if(n&&s&&s.v7_partialHydration)for(let v=0;v<c.length;v++){let g=c[v];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=v),g.route.id){let{loaderData:y,errors:x}=n,P=g.route.loader&&y[g.route.id]===void 0&&(!x||x[g.route.id]===void 0);if(g.route.lazy||P){d=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((v,g,y)=>{let x,P=!1,w=null,C=null;n&&(x=f&&g.route.id?f[g.route.id]:void 0,w=g.route.errorElement||Yj,d&&(m<0&&y===0?(o1("route-fallback"),P=!0,C=null):m===y&&(P=!0,C=g.route.hydrateFallbackElement||null)));let N=e.concat(c.slice(0,y+1)),b=()=>{let j;return x?j=w:P?j=C:g.route.Component?j=E.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=v,E.createElement(e1,{match:g,routeContext:{outlet:v,matches:N,isDataRoute:n!=null},children:j})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?E.createElement(Xj,{location:n.location,revalidation:n.revalidation,component:w,error:x,children:b(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):b()},null)}var Ov=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ov||{}),Av=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Av||{});function n1(t){let e=E.useContext(Pd);return e||Oe(!1),e}function r1(t){let e=E.useContext(Wj);return e||Oe(!1),e}function s1(t){let e=E.useContext(jn);return e||Oe(!1),e}function Mv(t){let e=s1(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function i1(){var t;let e=E.useContext(Cv),n=r1(),s=Mv();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function a1(){let{router:t}=n1(Ov.UseNavigateStable),e=Mv(Av.UseNavigateStable),n=E.useRef(!1);return Tv(()=>{n.current=!0}),E.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,zi({fromRouteId:e},l)))},[t,e])}const Em={};function o1(t,e,n){Em[t]||(Em[t]=!0)}function l1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function sn(t){let{to:e,replace:n,state:s,relative:a}=t;Ts()||Oe(!1);let{future:l,static:c}=E.useContext(nr),{matches:f}=E.useContext(jn),{pathname:d}=Hi(),m=Jo(),v=Sd(e,kd(f,l.v7_relativeSplatPath),d,a==="path"),g=JSON.stringify(v);return E.useEffect(()=>m(JSON.parse(g),{replace:n,state:s,relative:a}),[m,g,a,n,s]),null}function Je(t){Oe(!1)}function c1(t){let{basename:e="/",children:n=null,location:s,navigationType:a=zn.Pop,navigator:l,static:c=!1,future:f}=t;Ts()&&Oe(!1);let d=e.replace(/^\/*/,"/"),m=E.useMemo(()=>({basename:d,navigator:l,static:c,future:zi({v7_relativeSplatPath:!1},f)}),[d,f,l,c]);typeof s=="string"&&(s=Cs(s));let{pathname:v="/",search:g="",hash:y="",state:x=null,key:P="default"}=s,w=E.useMemo(()=>{let C=Nd(v,d);return C==null?null:{location:{pathname:C,search:g,hash:y,state:x,key:P},navigationType:a}},[d,v,g,y,x,P,a]);return w==null?null:E.createElement(nr.Provider,{value:m},E.createElement(Ko.Provider,{children:n,value:w}))}function u1(t){let{children:e,location:n}=t;return Kj(xu(e),n)}new Promise(()=>{});function xu(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(s,a)=>{if(!E.isValidElement(s))return;let l=[...e,a];if(s.type===E.Fragment){n.push.apply(n,xu(s.props.children,l));return}s.type!==Je&&Oe(!1),!s.props.index||!s.props.children||Oe(!1);let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=xu(s.props.children,l)),n.push(c)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yu(){return yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},yu.apply(this,arguments)}function d1(t,e){if(t==null)return{};var n={},s=Object.keys(t),a,l;for(l=0;l<s.length;l++)a=s[l],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function h1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function f1(t,e){return t.button===0&&(!e||e==="_self")&&!h1(t)}const m1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p1="6";try{window.__reactRouterVersion=p1}catch{}const g1="startTransition",Cm=V0[g1];function v1(t){let{basename:e,children:n,future:s,window:a}=t,l=E.useRef();l.current==null&&(l.current=_j({window:a,v5Compat:!0}));let c=l.current,[f,d]=E.useState({action:c.action,location:c.location}),{v7_startTransition:m}=s||{},v=E.useCallback(g=>{m&&Cm?Cm(()=>d(g)):d(g)},[d,m]);return E.useLayoutEffect(()=>c.listen(v),[c,v]),E.useEffect(()=>l1(s),[s]),E.createElement(c1,{basename:e,children:n,location:f.location,navigationType:f.action,navigator:c,future:s})}const x1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oe=E.forwardRef(function(e,n){let{onClick:s,relative:a,reloadDocument:l,replace:c,state:f,target:d,to:m,preventScrollReset:v,viewTransition:g}=e,y=d1(e,m1),{basename:x}=E.useContext(nr),P,w=!1;if(typeof m=="string"&&y1.test(m)&&(P=m,x1))try{let j=new URL(window.location.href),T=m.startsWith("//")?new URL(j.protocol+m):new URL(m),S=Nd(T.pathname,x);T.origin===j.origin&&S!=null?m=S+T.search+T.hash:w=!0}catch{}let C=Hj(m,{relative:a}),N=_1(m,{replace:c,state:f,target:d,preventScrollReset:v,relative:a,viewTransition:g});function b(j){s&&s(j),j.defaultPrevented||N(j)}return E.createElement("a",yu({},y,{href:P||C,onClick:w||l?s:b,ref:n,target:d}))});var Tm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Tm||(Tm={}));var Lm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lm||(Lm={}));function _1(t,e){let{target:n,replace:s,state:a,preventScrollReset:l,relative:c,viewTransition:f}=e===void 0?{}:e,d=Jo(),m=Hi(),v=Iv(t,{relative:c});return E.useCallback(g=>{if(f1(g,n)){g.preventDefault();let y=s!==void 0?s:wo(m)===wo(v);d(t,{replace:y,state:a,preventScrollReset:l,relative:c,viewTransition:f})}},[m,d,v,s,a,n,t,l,c,f])}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),X=(t,e)=>{const n=E.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:f="",children:d,...m},v)=>E.createElement("svg",{ref:v,...w1,width:a,height:a,stroke:s,strokeWidth:c?Number(l)*24/Number(a):l,className:["lucide",`lucide-${b1(t)}`,f].join(" "),...m},[...e.map(([g,y])=>E.createElement(g,y)),...Array.isArray(d)?d:[d]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=X("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=X("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=X("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=X("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=X("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=X("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=X("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=X("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=X("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=X("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=X("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=X("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=X("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=X("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=X("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=X("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=X("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=X("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=X("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=X("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=X("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=X("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=X("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=X("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Od=t=>{const[e,n]=E.useState([]),[s,a]=E.useState(null),[l,c]=E.useState([]),[f,d]=E.useState(!1),[m,v]=E.useState(!1),{user:g,isAgent:y}=pt(),x=E.useRef(null),P=E.useRef(null),w=E.useCallback(async()=>{if(g){d(!0);try{let S=W.from("chat_conversations").select(`
          *
        `);y?S=S.eq("agent_id",g.id):S=S.eq("user_id",g.id),t&&(S=S.eq("property_id",t));const{data:k,error:O}=await S.eq("status","active").order("last_message_at",{ascending:!1});if(O)throw O;const R=await Promise.all((k||[]).map(async A=>{const{data:$}=await W.from("properties").select("id, title, price, transaction_type, images").eq("id",A.property_id).single(),{data:U}=await W.from("user_profiles").select("id, full_name, avatar_url").eq("id",A.user_id).single(),{data:D}=await W.from("user_profiles").select("id, full_name, avatar_url").eq("id",A.agent_id).single(),{count:J}=await W.from("chat_messages").select("*",{count:"exact",head:!0}).eq("conversation_id",A.id).eq("is_read",!1).neq("sender_id",g.id);return{...A,property:$,buyer:U,agent:D,unread_count:J||0}}));n(R)}catch(S){console.error("Error fetching chat sessions:",S)}finally{d(!1)}}},[g,t]),C=E.useCallback(async S=>{if(!g)return null;try{const{data:k}=await W.from("chat_conversations").select("*").eq("property_id",S.property_id).eq("user_id",g.id).eq("agent_id",S.agent_id).single();if(k){if(k.status!=="active"){const{data:A}=await W.from("chat_conversations").update({status:"active",last_message_at:new Date().toISOString()}).eq("id",k.id).select().single();return A}return k}const{data:O,error:R}=await W.from("chat_conversations").insert({property_id:S.property_id,user_id:g.id,agent_id:S.agent_id}).select().single();if(R)throw R;return S.initial_message&&O&&await b({conversation_id:O.id,message_text:S.initial_message}),w(),O}catch(k){return console.error("Error creating chat session:",k),null}},[g,w]),N=E.useCallback(async S=>{d(!0);try{const{data:k,error:O}=await W.from("chat_messages").select("*").eq("conversation_id",S).order("created_at",{ascending:!0});if(O)throw O;const R=await Promise.all((k||[]).map(async A=>{const{data:$}=await W.from("user_profiles").select("id, full_name, avatar_url, role").eq("id",A.sender_id).single();return{...A,sender:$}}));c(R),g&&await W.from("chat_messages").update({is_read:!0}).eq("conversation_id",S).neq("sender_id",g.id).eq("is_read",!1)}catch(k){console.error("Error fetching messages:",k)}finally{d(!1)}},[g]),b=E.useCallback(async S=>{if(g){v(!0);try{const{error:k}=await W.from("chat_messages").insert({conversation_id:S.conversation_id,sender_id:g.id,sender_type:y?"agent":"user",message_text:S.message_text,message_type:S.message_type||"text"});if(k)throw k;await W.from("chat_conversations").update({last_message_at:new Date().toISOString()}).eq("id",S.conversation_id)}catch(k){console.error("Error sending message:",k)}finally{v(!1)}}},[g]),j=E.useCallback(async S=>{try{const{error:k}=await W.from("chat_conversations").update({status:"closed"}).eq("id",S);if(k)throw k;await b({conversation_id:S,message_text:"El chat ha sido cerrado por el agente.",message_type:"system"}),w()}catch(k){console.error("Error closing chat session:",k)}},[b,w]);E.useEffect(()=>{if(s)return x.current&&x.current.unsubscribe(),x.current=W.channel(`chat_messages:${s.id}`).on("postgres_changes",{event:"*",schema:"public",table:"chat_messages",filter:`conversation_id=eq.${s.id}`},S=>{S.eventType==="INSERT"&&T(S.new.id)}).subscribe(),()=>{x.current&&x.current.unsubscribe()}},[s]);const T=async S=>{try{const{data:k,error:O}=await W.from("chat_messages").select("*").eq("id",S).single();if(O)throw O;const{data:R}=await W.from("user_profiles").select("id, full_name, avatar_url, role").eq("id",k.sender_id).single(),A={...k,sender:R};c($=>$.find(D=>D.id===A.id)?$:[...$,A])}catch(k){console.error("Error fetching message details:",k)}};return E.useEffect(()=>{if(g)return P.current&&P.current.unsubscribe(),P.current=W.channel(`chat_conversations:${g.id}`).on("postgres_changes",{event:"*",schema:"public",table:"chat_conversations"},()=>{w()}).subscribe(),()=>{P.current&&P.current.unsubscribe()}},[g,w]),E.useEffect(()=>{g&&w()},[g,w]),E.useEffect(()=>()=>{x.current&&x.current.unsubscribe(),P.current&&P.current.unsubscribe()},[]),{sessions:e,activeSession:s,messages:l,loading:f,sending:m,currentUser:g,createChatSession:C,fetchMessages:N,sendMessage:b,closeChatSession:j,setActiveSession:a,fetchChatSessions:w}};function Om({children:t}){const{sessions:e}=Od(),[n,s]=E.useState(0);return E.useEffect(()=>{if(e){const a=e.reduce((l,c)=>l+(c.unread_count||0),0);s(a)}},[e]),i.jsxs("div",{className:"relative",children:[t,n>0&&i.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:n>99?"99+":n})]})}function D1(){const{user:t,signOut:e,isAdmin:n,isAgent:s}=pt(),a=async()=>{await e()};return i.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsxs(oe,{to:"/",className:"flex items-center space-x-2",children:[i.jsx(br,{className:"h-8 w-8 text-primary-600"}),i.jsx("span",{className:"font-bold text-xl text-gray-900",children:"PropFinder"})]}),i.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[i.jsx(oe,{to:"/",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Inicio"}),i.jsx(oe,{to:"/properties",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Propiedades"}),i.jsx(oe,{to:"/properties?transaction_type=sale",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Comprar"}),i.jsx(oe,{to:"/properties?transaction_type=rent",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Rentar"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{className:"p-2 text-gray-600 hover:text-primary-600 transition-colors",children:i.jsx(Td,{className:"h-5 w-5"})}),t?i.jsxs("div",{className:"flex items-center space-x-3",children:[n&&i.jsxs(oe,{to:"/admin",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(Ld,{className:"h-4 w-4 mr-1"}),"Admin"]}),s&&i.jsxs(oe,{to:"/agent-dashboard",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[i.jsx(wr,{className:"h-4 w-4 mr-1"}),"Agente"]}),!s&&!n&&i.jsxs(i.Fragment,{children:[i.jsxs(oe,{to:"/my-visits",className:"inline-flex items-center px-3 py-2 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(Hn,{className:"h-4 w-4 mr-1"}),"Mis Visitas"]}),i.jsx(Om,{children:i.jsxs(oe,{to:"/chat",className:"inline-flex items-center px-3 py-2 border border-purple-300 text-sm font-medium rounded-md text-purple-700 bg-purple-50 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[i.jsx(en,{className:"h-4 w-4 mr-1"}),"Mensajes"]})}),i.jsxs(oe,{to:"/become-agent",className:"inline-flex items-center px-3 py-2 border border-green-300 text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[i.jsx(wr,{className:"h-4 w-4 mr-1"}),"Ser Agente"]})]}),s&&i.jsx(Om,{children:i.jsxs(oe,{to:"/chat",className:"inline-flex items-center px-3 py-2 border border-purple-300 text-sm font-medium rounded-md text-purple-700 bg-purple-50 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[i.jsx(en,{className:"h-4 w-4 mr-1"}),"Mensajes"]})}),i.jsx("span",{className:"text-sm text-gray-700",children:t.email}),i.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:text-red-600 transition-colors",title:"Cerrar sesión",children:i.jsx(Bv,{className:"h-5 w-5"})})]}):i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(oe,{to:"/register",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Registrarse"}),i.jsxs(oe,{to:"/login",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(Wt,{className:"h-4 w-4 mr-1"}),"Iniciar Sesión"]})]}),i.jsx("button",{className:"btn-primary hidden md:block",children:"Publicar Propiedad"}),i.jsx("button",{className:"md:hidden p-2 text-gray-600 hover:text-primary-600 transition-colors",children:i.jsx(T1,{className:"h-5 w-5"})})]})]})})})}function B1(){return i.jsx("footer",{className:"bg-gray-900 text-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsxs(oe,{to:"/",className:"flex items-center space-x-2 mb-4",children:[i.jsx(br,{className:"h-8 w-8 text-primary-400"}),i.jsx("span",{className:"font-bold text-xl",children:"PropFinder"})]}),i.jsx("p",{className:"text-gray-300 mb-4",children:"La plataforma líder en bienes raíces para encontrar, comprar y vender propiedades en todo Ecuador. Conectamos compradores, vendedores y arrendadores de manera fácil y segura."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.566-1.35 2.14-2.21z"})})}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:i.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Enlaces Rápidos"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsx(oe,{to:"/properties",className:"text-gray-300 hover:text-white transition-colors",children:"Todas las Propiedades"})}),i.jsx("li",{children:i.jsx(oe,{to:"/properties?transaction_type=sale",className:"text-gray-300 hover:text-white transition-colors",children:"Comprar"})}),i.jsx("li",{children:i.jsx(oe,{to:"/properties?transaction_type=rent",className:"text-gray-300 hover:text-white transition-colors",children:"Rentar"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Vender"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Sobre Nosotros"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Contacto"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsxs("li",{className:"flex items-center space-x-2",children:[i.jsx(Or,{className:"h-4 w-4 text-primary-400"}),i.jsx("span",{className:"text-gray-300",children:"contacto@propfinder.ec"})]}),i.jsxs("li",{className:"flex items-center space-x-2",children:[i.jsx(Ar,{className:"h-4 w-4 text-primary-400"}),i.jsx("span",{className:"text-gray-300",children:"+593 2 234 5678"})]}),i.jsxs("li",{className:"flex items-center space-x-2",children:[i.jsx(wt,{className:"h-4 w-4 text-primary-400"}),i.jsx("span",{className:"text-gray-300",children:"Quito, Ecuador"})]})]})]})]}),i.jsx("hr",{className:"border-gray-700 my-8"}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"© 2024 PropFinder. Todos los derechos reservados."}),i.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Términos de Servicio"}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Política de Privacidad"}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Cookies"})]})]})]})})}class U1 extends tn.Component{constructor(n){super(n);pa(this,"handleRetry",()=>{vi(),window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){var s,a,l;return(s=n.message)!=null&&s.includes("refresh")||(a=n.message)!=null&&a.includes("token")||(l=n.message)!=null&&l.includes("auth")?(vi(),{hasError:!0,error:n}):{hasError:!1,error:null}}componentDidCatch(n,s){var a,l,c;((a=n.message)!=null&&a.includes("refresh")||(l=n.message)!=null&&l.includes("token")||(c=n.message)!=null&&c.includes("auth"))&&(console.error("Auth error caught:",n,s),vi())}render(){return this.state.hasError&&this.state.error?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[i.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsxs("div",{className:"mt-3 text-center",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Error de Sesión"}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Tu sesión ha expirado. Por favor, recarga la página para continuar."})}),i.jsx("div",{className:"mt-6",children:i.jsx("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:this.handleRetry,children:"Recargar Página"})})]})]})}):this.props.children}}function $1({children:t}){return i.jsx(v1,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:t})}function F1(){const[t,e]=E.useState([]),[n,s]=E.useState([]),[a,l]=E.useState([]),[c,f]=E.useState(!0),[d,m]=E.useState({location:"",transaction_type:"",property_type:"",min_price:"",max_price:""});E.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:x}=await W.from("properties").select("*").eq("status","published").eq("is_featured",!0).order("created_at",{ascending:!1}).limit(6),{data:P}=await W.from("properties").select("*").eq("status","published").eq("is_urgent",!0).order("created_at",{ascending:!1}).limit(4),{data:w}=await W.from("properties").select("*").eq("status","published").order("created_at",{ascending:!1}).limit(8);e(x||[]),s(P||[]),l(w||[])}catch(x){console.error("Error loading home data:",x)}finally{f(!1)}},g=()=>{const x=new URLSearchParams;Object.entries(d).forEach(([P,w])=>{w&&x.append(P,w)}),window.location.href=`/properties?${x.toString()}`},y=({property:x})=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[i.jsxs("div",{className:"relative h-48",children:[x.images.length>0?i.jsx("img",{src:x.images[0],alt:x.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:i.jsx(br,{className:"h-12 w-12 text-gray-400"})}),i.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-1",children:[x.is_featured&&i.jsxs("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded text-xs font-medium",children:[i.jsx(Qn,{className:"inline h-3 w-3 mr-1"}),"Destacada"]}),x.is_urgent&&i.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-xs font-medium",children:"⚡ Urgente"})]}),i.jsx("div",{className:"absolute bottom-3 left-3",children:i.jsxs("span",{className:"bg-black bg-opacity-75 text-white px-3 py-1 rounded-full text-sm font-bold",children:[x.currency," ",x.price.toLocaleString()]})}),i.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 text-white text-xs",children:[i.jsxs("div",{className:"flex items-center bg-black bg-opacity-50 px-2 py-1 rounded",children:[i.jsx(Cr,{className:"h-3 w-3 mr-1"}),x.views_count]}),i.jsxs("div",{className:"flex items-center bg-black bg-opacity-50 px-2 py-1 rounded",children:[i.jsx(jo,{className:"h-3 w-3 mr-1"}),x.favorites_count]})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:x.title}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{className:"truncate",children:[x.neighborhood,", ",x.city]})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3 space-x-4",children:[x.bedrooms&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Cd,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:x.bedrooms})]}),x.bathrooms&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ed,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:x.bathrooms})]}),x.area_total&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Id,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:[x.area_total,"m²"]})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs text-gray-500 capitalize",children:[x.property_type," • ",x.transaction_type]}),i.jsx(oe,{to:`/properties/${x.id}`,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Ver detalles"})]})]})]});return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("section",{className:"relative bg-gradient-to-r from-blue-700 to-blue-900 text-white",children:[i.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),i.jsx("div",{className:"relative bg-cover bg-center py-24",style:{backgroundImage:"url('https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80')"},children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Encuentra tu hogar ideal en Ecuador"}),i.jsx("p",{className:"text-xl md:text-2xl mb-8 text-blue-100",children:"Miles de propiedades verificadas por agentes profesionales"})]}),i.jsx("div",{className:"bg-white rounded-xl p-6 shadow-2xl max-w-5xl mx-auto",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(wt,{className:"inline h-4 w-4 mr-1"}),"Ubicación"]}),i.jsx("input",{type:"text",placeholder:"Ciudad, barrio o dirección",value:d.location,onChange:x=>m(P=>({...P,location:x.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operación"}),i.jsxs("select",{value:d.transaction_type,onChange:x=>m(P=>({...P,transaction_type:x.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",children:[i.jsx("option",{value:"",children:"Cualquiera"}),i.jsx("option",{value:"venta",children:"Venta"}),i.jsx("option",{value:"alquiler",children:"Alquiler"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),i.jsxs("select",{value:d.property_type,onChange:x=>m(P=>({...P,property_type:x.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",children:[i.jsx("option",{value:"",children:"Cualquiera"}),i.jsx("option",{value:"casa",children:"Casa"}),i.jsx("option",{value:"departamento",children:"Departamento"}),i.jsx("option",{value:"oficina",children:"Oficina"}),i.jsx("option",{value:"local_comercial",children:"Local Comercial"}),i.jsx("option",{value:"terreno",children:"Terreno"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(Dv,{className:"inline h-4 w-4 mr-1"}),"Búsqueda"]}),i.jsxs("button",{onClick:g,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium",children:[i.jsx(Td,{className:"inline h-4 w-4 mr-2"}),"Buscar"]})]})]})})]})})]}),c?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 space-y-16",children:[n.length>0&&i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:"⚡ Oportunidades Urgentes"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Propiedades que requieren decisión rápida"})]}),i.jsxs(oe,{to:"/properties?is_urgent=true",className:"flex items-center text-blue-600 hover:text-blue-700 font-medium",children:["Ver todas ",i.jsx(hc,{className:"h-4 w-4 ml-1"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(x=>i.jsx(y,{property:x},x.id))})]}),t.length>0&&i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[i.jsx(Qn,{className:"h-8 w-8 text-yellow-500 mr-2"}),"Propiedades Destacadas"]}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Selección especial de nuestros mejores inmuebles"})]}),i.jsxs(oe,{to:"/properties?is_featured=true",className:"flex items-center text-blue-600 hover:text-blue-700 font-medium",children:["Ver todas ",i.jsx(hc,{className:"h-4 w-4 ml-1"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(x=>i.jsx(y,{property:x},x.id))})]}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Últimas Propiedades"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Recién publicadas por nuestros agentes"})]}),i.jsxs(oe,{to:"/properties",className:"flex items-center text-blue-600 hover:text-blue-700 font-medium",children:["Ver todas ",i.jsx(hc,{className:"h-4 w-4 ml-1"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map(x=>i.jsx(y,{property:x},x.id))})]}),i.jsxs("section",{className:"bg-gradient-to-r from-blue-600 to-blue-800 rounded-2xl p-8 md:p-12 text-white text-center",children:[i.jsx(wr,{className:"h-16 w-16 mx-auto mb-6 text-blue-200"}),i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"¿Eres agente inmobiliario?"}),i.jsx("p",{className:"text-xl text-blue-100 mb-8 max-w-2xl mx-auto",children:"Únete a nuestra plataforma y llega a miles de compradores potenciales. Gestiona tus propiedades de forma profesional."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(oe,{to:"/become-agent",className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-blue-50 transition-colors",children:"Ser Agente"}),i.jsx(oe,{to:"/properties",className:"border border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors",children:"Explorar Propiedades"})]})]}),i.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[i.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:[a.length+t.length,"+"]}),i.jsx("div",{className:"text-gray-600",children:"Propiedades Activas"})]}),i.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md",children:[i.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:"50+"}),i.jsx("div",{className:"text-gray-600",children:"Agentes Verificados"})]}),i.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md",children:[i.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:"200+"}),i.jsx("div",{className:"text-gray-600",children:"Clientes Satisfechos"})]})]})]})]})}const Z1=()=>{const[t,e]=E.useState(!1),[n,s]=E.useState(null),a=E.useCallback(async d=>{var m,v,g,y,x;e(!0),s(null);try{const P=encodeURIComponent(d),w=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${P}&limit=1&addressdetails=1`,{headers:{"User-Agent":"PropFinder/1.0 (Real Estate App)"}});if(!w.ok)throw new Error("Error en el servicio de geocodificación");const C=await w.json();if(C&&C.length>0){const N=C[0];return{latitude:parseFloat(N.lat),longitude:parseFloat(N.lon),address:N.display_name,city:((m=N.address)==null?void 0:m.city)||((v=N.address)==null?void 0:v.town)||((g=N.address)==null?void 0:g.village),state:(y=N.address)==null?void 0:y.state,country:(x=N.address)==null?void 0:x.country}}throw new Error("No se encontraron resultados para la dirección")}catch(P){const w=P instanceof Error?P.message:"Error desconocido";return s(w),null}finally{e(!1)}},[]),l=E.useCallback(async(d,m)=>{var v,g,y,x,P;e(!0),s(null);try{const w=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${d}&lon=${m}&addressdetails=1`,{headers:{"User-Agent":"PropFinder/1.0 (Real Estate App)"}});if(!w.ok)throw new Error("Error en el servicio de geocodificación inversa");const C=await w.json();if(C)return{address:C.display_name,city:((v=C.address)==null?void 0:v.city)||((g=C.address)==null?void 0:g.town)||((y=C.address)==null?void 0:y.village),state:(x=C.address)==null?void 0:x.state,country:(P=C.address)==null?void 0:P.country};throw new Error("No se pudo obtener la dirección")}catch(w){const C=w instanceof Error?w.message:"Error desconocido";return s(C),null}finally{e(!1)}},[]),c=E.useCallback(async()=>{e(!0),s(null);try{if(!navigator.geolocation)throw new Error("La geolocalización no está soportada en este navegador");const d=await new Promise((y,x)=>{navigator.geolocation.getCurrentPosition(y,x,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),{latitude:m,longitude:v}=d.coords,g=await l(m,v);return{latitude:m,longitude:v,address:(g==null?void 0:g.address)||`${m}, ${v}`,city:g==null?void 0:g.city,state:g==null?void 0:g.state,country:g==null?void 0:g.country}}catch(d){let m="Error obteniendo ubicación";if(d instanceof GeolocationPositionError)switch(d.code){case d.PERMISSION_DENIED:m="Permisos de ubicación denegados";break;case d.POSITION_UNAVAILABLE:m="Información de ubicación no disponible";break;case d.TIMEOUT:m="Tiempo de espera agotado obteniendo ubicación";break}else d instanceof Error&&(m=d.message);return s(m),null}finally{e(!1)}},[l]),f=E.useCallback((d,m,v,g)=>{const x=(v-d)*Math.PI/180,P=(g-m)*Math.PI/180,w=Math.sin(x/2)*Math.sin(x/2)+Math.cos(d*Math.PI/180)*Math.cos(v*Math.PI/180)*Math.sin(P/2)*Math.sin(P/2);return 6371*(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)))},[]);return{loading:t,error:n,geocodeAddress:a,reverseGeocode:l,getCurrentLocation:c,calculateDistance:f}},q1=({onLocationSearch:t,onClearLocation:e,isLoading:n=!1,className:s=""})=>{const[a,l]=E.useState(""),[c,f]=E.useState(5),[d,m]=E.useState(null),{loading:v,error:g,geocodeAddress:y,getCurrentLocation:x}=Z1(),P=[{value:1,label:"1 km"},{value:2,label:"2 km"},{value:5,label:"5 km"},{value:10,label:"10 km"},{value:25,label:"25 km"},{value:50,label:"50 km"}],w=async()=>{if(!a.trim())return;const T=await y(a);T&&(m({lat:T.latitude,lng:T.longitude,address:T.address}),t(T.latitude,T.longitude,c,T.address))},C=async()=>{const T=await x();T&&(m({lat:T.latitude,lng:T.longitude,address:T.address}),l(T.city||T.address.split(",")[0]||""),t(T.latitude,T.longitude,c,T.address))},N=T=>{f(T),d&&t(d.lat,d.lng,T,d.address)},b=()=>{l(""),m(null),e()},j=v||n;return i.jsx("div",{className:`bg-white rounded-lg border shadow-sm p-4 ${s}`,children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[i.jsx(wt,{className:"h-5 w-5 mr-2"}),"Búsqueda por Ubicación"]}),d&&i.jsx("button",{onClick:b,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Limpiar"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("div",{className:"flex-1",children:i.jsx("input",{type:"text",placeholder:"Buscar por dirección, ciudad o código postal...",value:a,onChange:T=>l(T.target.value),onKeyPress:T=>T.key==="Enter"&&w(),className:"input-field w-full",disabled:j})}),i.jsx("button",{onClick:w,disabled:!a.trim()||j,className:"btn-primary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:j?i.jsx(Im,{className:"h-5 w-5 animate-spin"}):i.jsx(Td,{className:"h-5 w-5"})}),i.jsx("button",{onClick:C,disabled:j,className:"btn-secondary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Usar mi ubicación actual",children:j?i.jsx(Im,{className:"h-5 w-5 animate-spin"}):i.jsx(Uv,{className:"h-5 w-5"})})]}),g&&i.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded border border-red-200",children:g}),d&&i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(wt,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Ubicación seleccionada:"}),i.jsx("p",{className:"text-sm text-blue-700 truncate",children:d.address}),i.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[d.lat.toFixed(4),", ",d.lng.toFixed(4)]})]})]})}),d&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Radio de búsqueda:"}),i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2",children:P.map(T=>i.jsx("button",{onClick:()=>N(T.value),className:`px-3 py-2 text-sm rounded border transition-colors ${c===T.value?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:T.label},T.value))}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Se mostrarán propiedades dentro de ",c," km de la ubicación seleccionada"]})]})]})})},V1=()=>{const[t,e]=E.useState([]),[n,s]=E.useState(!1),[a,l]=E.useState(null),[c,f]=E.useState(0),d=E.useCallback((g,y,x,P)=>{const C=(x-g)*Math.PI/180,N=(P-y)*Math.PI/180,b=Math.sin(C/2)*Math.sin(C/2)+Math.cos(g*Math.PI/180)*Math.cos(x*Math.PI/180)*Math.sin(N/2)*Math.sin(N/2);return 6371*(2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)))},[]),m=E.useCallback(async g=>{s(!0),l(null);try{let y=W.from("properties").select("*").eq("status","published").order("created_at",{ascending:!1});g.property_type&&(y=y.eq("property_type",g.property_type)),g.transaction_type&&(y=y.eq("transaction_type",g.transaction_type)),g.city&&(y=y.ilike("city",`%${g.city}%`)),g.min_price&&(y=y.gte("price",g.min_price)),g.max_price&&(y=y.lte("price",g.max_price)),g.bedrooms&&(y=y.eq("bedrooms",g.bedrooms));const{data:x,error:P}=await y;if(P)throw P;let w=x||[];g.latitude&&g.longitude&&g.radius&&(w=w.map(C=>{if(!C.latitude||!C.longitude)return null;const N=d(g.latitude,g.longitude,C.latitude,C.longitude);return N<=g.radius?{...C,distance:N}:null}).filter(C=>C!==null).sort((C,N)=>(C.distance||0)-(N.distance||0))),e(w),f(w.length)}catch(y){const x=y instanceof Error?y.message:"Error en la búsqueda";l(x),console.error("Error searching properties:",y)}finally{s(!1)}},[d]),v=E.useCallback(()=>{e([]),f(0),l(null)},[]);return{properties:t,loading:n,error:a,totalFound:c,searchProperties:m,clearSearch:v}};function W1(){const[t,e]=E.useState([]),[n,s]=E.useState(!0),[a,l]=E.useState("grid"),[c,f]=E.useState("traditional"),[d,m]=E.useState({property_type:"",transaction_type:"",city:"",min_price:"",max_price:"",bedrooms:""}),{properties:v,loading:g,error:y,totalFound:x,searchProperties:P,clearSearch:w}=V1(),C=c==="geospatial"?v:t,N=c==="geospatial"?g:n,b=c==="geospatial"?x:t.length;E.useEffect(()=>{j()},[d]);const j=async()=>{s(!0);try{let A=W.from("properties").select("*").eq("status","published").order("created_at",{ascending:!1});d.property_type&&(A=A.eq("property_type",d.property_type)),d.transaction_type&&(A=A.eq("transaction_type",d.transaction_type)),d.city&&(A=A.ilike("city",`%${d.city}%`)),d.min_price&&(A=A.gte("price",parseFloat(d.min_price))),d.max_price&&(A=A.lte("price",parseFloat(d.max_price))),d.bedrooms&&(A=A.eq("bedrooms",parseInt(d.bedrooms)));const{data:$,error:U}=await A;if(U)throw U;e($||[])}catch(A){console.error("Error fetching properties:",A)}s(!1)},T=(A,$)=>{m(U=>({...U,[A]:$}))},S=async(A,$,U,D)=>{f("geospatial");const J={latitude:A,longitude:$,radius:U,property_type:d.property_type||void 0,transaction_type:d.transaction_type||void 0,min_price:d.min_price?parseFloat(d.min_price):void 0,max_price:d.max_price?parseFloat(d.max_price):void 0,bedrooms:d.bedrooms?parseInt(d.bedrooms):void 0,city:d.city||void 0};await P(J)},k=()=>{f("traditional"),w(),j()},O=(A,$)=>{const U=new Intl.NumberFormat("es-MX",{style:"currency",currency:"USD"});return $==="alquiler"?`${U.format(A)}/mes`:U.format(A)},R=A=>({casa:"Casa",departamento:"Departamento",oficina:"Oficina",local_comercial:"Local Comercial",terreno:"Terreno",bodega:"Bodega",quinta:"Quinta",penthouse:"Penthouse"})[A]||A;return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white border-b",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx(q1,{onLocationSearch:S,onClearLocation:k,isLoading:g}),y&&i.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-2 rounded border border-red-200",children:y})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de operación"}),i.jsxs("select",{className:"input-field",value:d.transaction_type,onChange:A=>T("transaction_type",A.target.value),children:[i.jsx("option",{value:"",children:"Cualquiera"}),i.jsx("option",{value:"venta",children:"Comprar"}),i.jsx("option",{value:"alquiler",children:"Rentar"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de propiedad"}),i.jsxs("select",{className:"input-field",value:d.property_type,onChange:A=>T("property_type",A.target.value),children:[i.jsx("option",{value:"",children:"Cualquiera"}),i.jsx("option",{value:"casa",children:"Casa"}),i.jsx("option",{value:"departamento",children:"Departamento"}),i.jsx("option",{value:"oficina",children:"Oficina"}),i.jsx("option",{value:"local_comercial",children:"Local Comercial"}),i.jsx("option",{value:"terreno",children:"Terreno"}),i.jsx("option",{value:"bodega",children:"Bodega"}),i.jsx("option",{value:"quinta",children:"Quinta"}),i.jsx("option",{value:"penthouse",children:"Penthouse"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),i.jsx("input",{type:"text",placeholder:"Cualquier ciudad",className:"input-field",value:d.city,onChange:A=>T("city",A.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio mínimo"}),i.jsx("input",{type:"number",placeholder:"$ Min",className:"input-field",value:d.min_price,onChange:A=>T("min_price",A.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio máximo"}),i.jsx("input",{type:"number",placeholder:"$ Max",className:"input-field",value:d.max_price,onChange:A=>T("max_price",A.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Habitaciones"}),i.jsxs("select",{className:"input-field",value:d.bedrooms,onChange:A=>T("bedrooms",A.target.value),children:[i.jsx("option",{value:"",children:"Cualquiera"}),i.jsx("option",{value:"1",children:"1+"}),i.jsx("option",{value:"2",children:"2+"}),i.jsx("option",{value:"3",children:"3+"}),i.jsx("option",{value:"4",children:"4+"})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:`p-2 rounded ${a==="grid"?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100"}`,onClick:()=>l("grid"),children:i.jsx(P1,{className:"h-5 w-5"})}),i.jsx("button",{className:`p-2 rounded ${a==="list"?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100"}`,onClick:()=>l("list"),children:i.jsx(E1,{className:"h-5 w-5"})})]})]})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[b," propiedades encontradas"]}),c==="geospatial"&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Resultados ordenados por distancia"})]})}),N?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):i.jsx("div",{className:`${a==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6"}`,children:C.map(A=>i.jsxs("div",{className:`card ${a==="list"?"flex":""}`,children:[i.jsxs("div",{className:`relative ${a==="list"?"w-80 flex-shrink-0":""}`,children:[i.jsx("img",{src:A.images[0]||"/placeholder-property.jpg",alt:A.title,className:`${a==="list"?"w-full h-64 object-cover":"w-full h-48 object-cover"}`}),i.jsx("div",{className:"absolute top-4 left-4 bg-primary-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:A.transaction_type==="venta"?"Venta":"Alquiler"})]}),i.jsxs("div",{className:`p-6 ${a==="list"?"flex-1":""}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:A.title}),i.jsx("span",{className:"text-sm bg-gray-100 text-gray-700 px-2 py-1 rounded",children:R(A.property_type)})]}),i.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{className:"text-sm",children:[A.city,", ",A.province]}),c==="geospatial"&&A.distance&&i.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:[A.distance.toFixed(1)," km"]})]}),i.jsx("p",{className:`text-gray-600 mb-4 ${a==="list"?"line-clamp-2":"line-clamp-3"}`,children:A.description}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("span",{className:"text-2xl font-bold text-primary-600",children:O(A.price,A.transaction_type)}),A.bedrooms&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[i.jsxs("span",{children:[A.bedrooms," hab"]}),A.bathrooms&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"•"}),i.jsxs("span",{children:[A.bathrooms," baños"]})]}),A.area_total&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"•"}),i.jsxs("span",{children:[A.area_total,"m²"]})]})]})]}),i.jsx(oe,{to:`/properties/${A.id}`,className:"btn-primary w-full text-center block",children:"Ver Detalles"})]})]},A.id))}),!N&&C.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-gray-500 text-lg",children:c==="geospatial"?"No se encontraron propiedades en el área seleccionada":"No se encontraron propiedades con los filtros seleccionados"}),i.jsxs("div",{className:"mt-4 space-x-2",children:[i.jsx("button",{onClick:()=>m({property_type:"",transaction_type:"",city:"",min_price:"",max_price:"",bedrooms:""}),className:"btn-secondary",children:"Limpiar Filtros"}),c==="geospatial"&&i.jsx("button",{onClick:k,className:"btn-secondary",children:"Quitar Búsqueda por Ubicación"})]})]})]})]})}const mr=class mr{constructor(){pa(this,"sessions",new Map)}static getInstance(){return mr.instance||(mr.instance=new mr),mr.instance}async startTracking(e,n="direct"){const s=crypto.randomUUID(),{data:{user:a}}=await W.auth.getUser(),l=await this.checkIfAgentView(e,a==null?void 0:a.id),c={sessionId:s,propertyId:e,userId:a==null?void 0:a.id,startTime:Date.now(),isAgentView:l,hasTrackedView:!1,hasTrackedContact:!1};return this.sessions.set(s,c),l||await this.trackView(s,n),s}async checkIfAgentView(e,n){if(!n)return!1;try{const{data:s,error:a}=await W.from("properties").select("agent_id").eq("id",e).single();return a||!s?!1:s.agent_id===n}catch{return!1}}async trackView(e,n){const s=this.sessions.get(e);if(!(!s||s.hasTrackedView||s.isAgentView))try{const a=new Date().toISOString().split("T")[0],{data:l}=await W.from("tracking_events").select("id").eq("property_id",s.propertyId).eq("event_type","view").gte("created_at",`${a}T00:00:00.000Z`).lt("created_at",`${a}T23:59:59.999Z`),c=!l||l.length===0;await W.from("tracking_events").insert({property_id:s.propertyId,user_id:s.userId||null,session_id:e,event_type:"view",source:n,user_agent:navigator.userAgent,ip_address:null,is_unique_view:c,additional_data:{viewport:{width:window.innerWidth,height:window.innerHeight},timestamp:Date.now()}}),s.hasTrackedView=!0}catch(a){console.error("Error tracking view:",a)}}async trackContact(e){const n=this.sessions.get(e);if(!(!n||n.hasTrackedContact||n.isAgentView))try{await W.from("tracking_events").insert({property_id:n.propertyId,user_id:n.userId||null,session_id:e,event_type:"contact",source:"property_detail",user_agent:navigator.userAgent,additional_data:{contact_method:"chat",timestamp:Date.now()}}),n.hasTrackedContact=!0}catch(s){console.error("Error tracking contact:",s)}}async trackAction(e,n,s){const a=this.sessions.get(e);if(!(!a||a.isAgentView))try{await W.from("tracking_events").insert({property_id:a.propertyId,user_id:a.userId||null,session_id:e,event_type:n,source:"property_detail",user_agent:navigator.userAgent,additional_data:{...s,timestamp:Date.now()}})}catch(l){console.error(`Error tracking action ${n}:`,l)}}async endTracking(e){const n=this.sessions.get(e);if(!n||n.isAgentView)return;const s=Math.floor((Date.now()-n.startTime)/1e3);if(s>=10)try{await W.from("tracking_events").insert({property_id:n.propertyId,user_id:n.userId||null,session_id:e,event_type:"exit",source:"property_detail",user_agent:navigator.userAgent,duration:s,additional_data:{valid_session:!0,timestamp:Date.now()}})}catch(a){console.error("Error tracking exit:",a)}this.sessions.delete(e)}cleanupOldSessions(){const e=Date.now(),n=30*60*1e3;for(const[s,a]of this.sessions.entries())e-a.startTime>n&&this.sessions.delete(s)}};pa(mr,"instance");let bu=mr;function H1(t,e="direct"){const n=bu.getInstance();let s=null;return{startTracking:async()=>(s=await n.startTracking(t,e),s),trackContact:async()=>{s&&await n.trackContact(s)},trackAction:async(d,m)=>{s&&await n.trackAction(s,d,m)},endTracking:async()=>{s&&(await n.endTracking(s),s=null)}}}function Fv(t,e){const n=E.useRef(e);E.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const G1=1;function K1(t){return Object.freeze({__version:G1,map:t})}function J1(t,e){return Object.freeze({...t,...e})}const Zv=E.createContext(null),qv=Zv.Provider;function Vv(){const t=E.useContext(Zv);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Q1(t){function e(n,s){const{instance:a,context:l}=t(n).current;return E.useImperativeHandle(s,()=>a),n.children==null?null:tn.createElement(qv,{value:l},n.children)}return E.forwardRef(e)}function Y1(t){function e(n,s){const[a,l]=E.useState(!1),{instance:c}=t(n,l).current;E.useImperativeHandle(s,()=>c),E.useEffect(function(){a&&c.update()},[c,a,n.children]);const f=c._contentNode;return f?Xg.createPortal(n.children,f):null}return E.forwardRef(e)}function X1(t){function e(n,s){const{instance:a}=t(n).current;return E.useImperativeHandle(s,()=>a),null}return E.forwardRef(e)}function Wv(t,e){const n=E.useRef();E.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Ad(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function eN(t,e){return function(s,a){const l=Vv(),c=t(Ad(s,l),l);return Fv(l.map,s.attribution),Wv(c.current,s.eventHandlers),e(c.current,l,s,a),c}}var ju={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,s){s(e)})(yt,function(n){var s="1.9.4";function a(r){var o,u,h,p;for(u=1,h=arguments.length;u<h;u++){p=arguments[u];for(o in p)r[o]=p[o]}return r}var l=Object.create||function(){function r(){}return function(o){return r.prototype=o,new r}}();function c(r,o){var u=Array.prototype.slice;if(r.bind)return r.bind.apply(r,u.call(arguments,1));var h=u.call(arguments,2);return function(){return r.apply(o,h.length?h.concat(u.call(arguments)):arguments)}}var f=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++f),r._leaflet_id}function m(r,o,u){var h,p,_,I;return I=function(){h=!1,p&&(_.apply(u,p),p=!1)},_=function(){h?p=arguments:(r.apply(u,arguments),setTimeout(I,o),h=!0)},_}function v(r,o,u){var h=o[1],p=o[0],_=h-p;return r===h&&u?r:((r-p)%_+_)%_+p}function g(){return!1}function y(r,o){if(o===!1)return r;var u=Math.pow(10,o===void 0?6:o);return Math.round(r*u)/u}function x(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function P(r){return x(r).split(/\s+/)}function w(r,o){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?l(r.options):{});for(var u in o)r.options[u]=o[u];return r.options}function C(r,o,u){var h=[];for(var p in r)h.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(r[p]));return(!o||o.indexOf("?")===-1?"?":"&")+h.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function b(r,o){return r.replace(N,function(u,h){var p=o[h];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(o)),p})}var j=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function T(r,o){for(var u=0;u<r.length;u++)if(r[u]===o)return u;return-1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function k(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var O=0;function R(r){var o=+new Date,u=Math.max(0,16-(o-O));return O=o+u,window.setTimeout(r,u)}var A=window.requestAnimationFrame||k("RequestAnimationFrame")||R,$=window.cancelAnimationFrame||k("CancelAnimationFrame")||k("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function U(r,o,u){if(u&&A===R)r.call(o);else return A.call(window,c(r,o))}function D(r){r&&$.call(window,r)}var J={__proto__:null,extend:a,create:l,bind:c,get lastId(){return f},stamp:d,throttle:m,wrapNum:v,falseFn:g,formatNum:y,trim:x,splitWords:P,setOptions:w,getParamString:C,template:b,isArray:j,indexOf:T,emptyImageUrl:S,requestFn:A,cancelFn:$,requestAnimFrame:U,cancelAnimFrame:D};function ne(){}ne.extend=function(r){var o=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,h=l(u);h.constructor=o,o.prototype=h;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(o[p]=this[p]);return r.statics&&a(o,r.statics),r.includes&&(ge(r.includes),a.apply(null,[h].concat(r.includes))),a(h,r),delete h.statics,delete h.includes,h.options&&(h.options=u.options?l(u.options):{},a(h.options,r.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,I=h._initHooks.length;_<I;_++)h._initHooks[_].call(this)}},o},ne.include=function(r){var o=this.prototype.options;return a(this.prototype,r),r.options&&(this.prototype.options=o,this.mergeOptions(r.options)),this},ne.mergeOptions=function(r){return a(this.prototype.options,r),this},ne.addInitHook=function(r){var o=Array.prototype.slice.call(arguments,1),u=typeof r=="function"?r:function(){this[r].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function ge(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=j(r)?r:[r];for(var o=0;o<r.length;o++)r[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var q={on:function(r,o,u){if(typeof r=="object")for(var h in r)this._on(h,r[h],o);else{r=P(r);for(var p=0,_=r.length;p<_;p++)this._on(r[p],o,u)}return this},off:function(r,o,u){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var h in r)this._off(h,r[h],o);else{r=P(r);for(var p=arguments.length===1,_=0,I=r.length;_<I;_++)p?this._off(r[_]):this._off(r[_],o,u)}return this},_on:function(r,o,u,h){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(r,o,u)===!1){u===this&&(u=void 0);var p={fn:o,ctx:u};h&&(p.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(p)}},_off:function(r,o,u){var h,p,_;if(this._events&&(h=this._events[r],!!h)){if(arguments.length===1){if(this._firingCount)for(p=0,_=h.length;p<_;p++)h[p].fn=g;delete this._events[r];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var I=this._listens(r,o,u);if(I!==!1){var M=h[I];this._firingCount&&(M.fn=g,this._events[r]=h=h.slice()),h.splice(I,1)}}},fire:function(r,o,u){if(!this.listens(r,u))return this;var h=a({},o,{type:r,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var p=this._events[r];if(p){this._firingCount=this._firingCount+1||1;for(var _=0,I=p.length;_<I;_++){var M=p[_],z=M.fn;M.once&&this.off(r,z,M.ctx),z.call(M.ctx||this,h)}this._firingCount--}}return u&&this._propagateEvent(h),this},listens:function(r,o,u,h){typeof r!="string"&&console.warn('"string" type argument expected');var p=o;typeof o!="function"&&(h=!!o,p=void 0,u=void 0);var _=this._events&&this._events[r];if(_&&_.length&&this._listens(r,p,u)!==!1)return!0;if(h){for(var I in this._eventParents)if(this._eventParents[I].listens(r,o,u,h))return!0}return!1},_listens:function(r,o,u){if(!this._events)return!1;var h=this._events[r]||[];if(!o)return!!h.length;u===this&&(u=void 0);for(var p=0,_=h.length;p<_;p++)if(h[p].fn===o&&h[p].ctx===u)return p;return!1},once:function(r,o,u){if(typeof r=="object")for(var h in r)this._on(h,r[h],o,!0);else{r=P(r);for(var p=0,_=r.length;p<_;p++)this._on(r[p],o,u,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var o in this._eventParents)this._eventParents[o].fire(r.type,a({layer:r.target,propagatedFrom:r.target},r),!0)}};q.addEventListener=q.on,q.removeEventListener=q.clearAllEventListeners=q.off,q.addOneTimeEventListener=q.once,q.fireEvent=q.fire,q.hasEventListeners=q.listens;var pe=ne.extend(q);function B(r,o,u){this.x=u?Math.round(r):r,this.y=u?Math.round(o):o}var Q=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(r){return this.clone()._add(V(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(V(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new B(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new B(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(r){r=V(r);var o=r.x-this.x,u=r.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(r){return r=V(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=V(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function V(r,o,u){return r instanceof B?r:j(r)?new B(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new B(r.x,r.y):new B(r,o,u)}function te(r,o){if(r)for(var u=o?[r,o]:r,h=0,p=u.length;h<p;h++)this.extend(u[h])}te.prototype={extend:function(r){var o,u;if(!r)return this;if(r instanceof B||typeof r[0]=="number"||"x"in r)o=u=V(r);else if(r=G(r),o=r.min,u=r.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(r){return V((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return V(this.min.x,this.max.y)},getTopRight:function(){return V(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var o,u;return typeof r[0]=="number"||r instanceof B?r=V(r):r=G(r),r instanceof te?(o=r.min,u=r.max):o=u=r,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(r){r=G(r);var o=this.min,u=this.max,h=r.min,p=r.max,_=p.x>=o.x&&h.x<=u.x,I=p.y>=o.y&&h.y<=u.y;return _&&I},overlaps:function(r){r=G(r);var o=this.min,u=this.max,h=r.min,p=r.max,_=p.x>o.x&&h.x<u.x,I=p.y>o.y&&h.y<u.y;return _&&I},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var o=this.min,u=this.max,h=Math.abs(o.x-u.x)*r,p=Math.abs(o.y-u.y)*r;return G(V(o.x-h,o.y-p),V(u.x+h,u.y+p))},equals:function(r){return r?(r=G(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function G(r,o){return!r||r instanceof te?r:new te(r,o)}function Ce(r,o){if(r)for(var u=o?[r,o]:r,h=0,p=u.length;h<p;h++)this.extend(u[h])}Ce.prototype={extend:function(r){var o=this._southWest,u=this._northEast,h,p;if(r instanceof fe)h=r,p=r;else if(r instanceof Ce){if(h=r._southWest,p=r._northEast,!h||!p)return this}else return r?this.extend(re(r)||xe(r)):this;return!o&&!u?(this._southWest=new fe(h.lat,h.lng),this._northEast=new fe(p.lat,p.lng)):(o.lat=Math.min(h.lat,o.lat),o.lng=Math.min(h.lng,o.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(r){var o=this._southWest,u=this._northEast,h=Math.abs(o.lat-u.lat)*r,p=Math.abs(o.lng-u.lng)*r;return new Ce(new fe(o.lat-h,o.lng-p),new fe(u.lat+h,u.lng+p))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof fe||"lat"in r?r=re(r):r=xe(r);var o=this._southWest,u=this._northEast,h,p;return r instanceof Ce?(h=r.getSouthWest(),p=r.getNorthEast()):h=p=r,h.lat>=o.lat&&p.lat<=u.lat&&h.lng>=o.lng&&p.lng<=u.lng},intersects:function(r){r=xe(r);var o=this._southWest,u=this._northEast,h=r.getSouthWest(),p=r.getNorthEast(),_=p.lat>=o.lat&&h.lat<=u.lat,I=p.lng>=o.lng&&h.lng<=u.lng;return _&&I},overlaps:function(r){r=xe(r);var o=this._southWest,u=this._northEast,h=r.getSouthWest(),p=r.getNorthEast(),_=p.lat>o.lat&&h.lat<u.lat,I=p.lng>o.lng&&h.lng<u.lng;return _&&I},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,o){return r?(r=xe(r),this._southWest.equals(r.getSouthWest(),o)&&this._northEast.equals(r.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function xe(r,o){return r instanceof Ce?r:new Ce(r,o)}function fe(r,o,u){if(isNaN(r)||isNaN(o))throw new Error("Invalid LatLng object: ("+r+", "+o+")");this.lat=+r,this.lng=+o,u!==void 0&&(this.alt=+u)}fe.prototype={equals:function(r,o){if(!r)return!1;r=re(r);var u=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return u<=(o===void 0?1e-9:o)},toString:function(r){return"LatLng("+y(this.lat,r)+", "+y(this.lng,r)+")"},distanceTo:function(r){return Nn.distance(this,re(r))},wrap:function(){return Nn.wrapLatLng(this)},toBounds:function(r){var o=180*r/40075017,u=o/Math.cos(Math.PI/180*this.lat);return xe([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function re(r,o,u){return r instanceof fe?r:j(r)&&typeof r[0]!="object"?r.length===3?new fe(r[0],r[1],r[2]):r.length===2?new fe(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new fe(r.lat,"lng"in r?r.lng:r.lon,r.alt):o===void 0?null:new fe(r,o,u)}var it={latLngToPoint:function(r,o){var u=this.projection.project(r),h=this.scale(o);return this.transformation._transform(u,h)},pointToLatLng:function(r,o){var u=this.scale(o),h=this.transformation.untransform(r,u);return this.projection.unproject(h)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(r),h=this.transformation.transform(o.min,u),p=this.transformation.transform(o.max,u);return new te(h,p)},infinite:!1,wrapLatLng:function(r){var o=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,u=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,h=r.alt;return new fe(u,o,h)},wrapLatLngBounds:function(r){var o=r.getCenter(),u=this.wrapLatLng(o),h=o.lat-u.lat,p=o.lng-u.lng;if(h===0&&p===0)return r;var _=r.getSouthWest(),I=r.getNorthEast(),M=new fe(_.lat-h,_.lng-p),z=new fe(I.lat-h,I.lng-p);return new Ce(M,z)}},Nn=a({},it,{wrapLng:[-180,180],R:6371e3,distance:function(r,o){var u=Math.PI/180,h=r.lat*u,p=o.lat*u,_=Math.sin((o.lat-r.lat)*u/2),I=Math.sin((o.lng-r.lng)*u/2),M=_*_+Math.cos(h)*Math.cos(p)*I*I,z=2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M));return this.R*z}}),Dd=6378137,Yo={R:Dd,MAX_LATITUDE:85.0511287798,project:function(r){var o=Math.PI/180,u=this.MAX_LATITUDE,h=Math.max(Math.min(u,r.lat),-u),p=Math.sin(h*o);return new B(this.R*r.lng*o,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(r){var o=180/Math.PI;return new fe((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*o,r.x*o/this.R)},bounds:function(){var r=Dd*Math.PI;return new te([-r,-r],[r,r])}()};function Xo(r,o,u,h){if(j(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=o,this._c=u,this._d=h}Xo.prototype={transform:function(r,o){return this._transform(r.clone(),o)},_transform:function(r,o){return o=o||1,r.x=o*(this._a*r.x+this._b),r.y=o*(this._c*r.y+this._d),r},untransform:function(r,o){return o=o||1,new B((r.x/o-this._b)/this._a,(r.y/o-this._d)/this._c)}};function Ls(r,o,u,h){return new Xo(r,o,u,h)}var el=a({},Nn,{code:"EPSG:3857",projection:Yo,transformation:function(){var r=.5/(Math.PI*Yo.R);return Ls(r,.5,-r,.5)}()}),nx=a({},el,{code:"EPSG:900913"});function Bd(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Ud(r,o){var u="",h,p,_,I,M,z;for(h=0,_=r.length;h<_;h++){for(M=r[h],p=0,I=M.length;p<I;p++)z=M[p],u+=(p?"L":"M")+z.x+" "+z.y;u+=o?Y.svg?"z":"x":""}return u||"M0 0"}var tl=document.documentElement.style,Ji="ActiveXObject"in window,rx=Ji&&!document.addEventListener,$d="msLaunchUri"in navigator&&!("documentMode"in document),nl=Ht("webkit"),Fd=Ht("android"),Zd=Ht("android 2")||Ht("android 3"),sx=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ix=Fd&&Ht("Google")&&sx<537&&!("AudioNode"in window),rl=!!window.opera,qd=!$d&&Ht("chrome"),Vd=Ht("gecko")&&!nl&&!rl&&!Ji,ax=!qd&&Ht("safari"),Wd=Ht("phantom"),Hd="OTransition"in tl,ox=navigator.platform.indexOf("Win")===0,Gd=Ji&&"transition"in tl,sl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zd,Kd="MozPerspective"in tl,lx=!window.L_DISABLE_3D&&(Gd||sl||Kd)&&!Hd&&!Wd,Is=typeof orientation<"u"||Ht("mobile"),cx=Is&&nl,ux=Is&&sl,Jd=!window.PointerEvent&&window.MSPointerEvent,Qd=!!(window.PointerEvent||Jd),Yd="ontouchstart"in window||!!window.TouchEvent,dx=!window.L_NO_TOUCH&&(Yd||Qd),hx=Is&&rl,fx=Is&&Vd,mx=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,px=function(){var r=!1;try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",g,o),window.removeEventListener("testPassiveEventSupport",g,o)}catch{}return r}(),gx=function(){return!!document.createElement("canvas").getContext}(),il=!!(document.createElementNS&&Bd("svg").createSVGRect),vx=!!il&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),xx=!il&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var o=r.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),yx=navigator.platform.indexOf("Mac")===0,_x=navigator.platform.indexOf("Linux")===0;function Ht(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var Y={ie:Ji,ielt9:rx,edge:$d,webkit:nl,android:Fd,android23:Zd,androidStock:ix,opera:rl,chrome:qd,gecko:Vd,safari:ax,phantom:Wd,opera12:Hd,win:ox,ie3d:Gd,webkit3d:sl,gecko3d:Kd,any3d:lx,mobile:Is,mobileWebkit:cx,mobileWebkit3d:ux,msPointer:Jd,pointer:Qd,touch:dx,touchNative:Yd,mobileOpera:hx,mobileGecko:fx,retina:mx,passiveEvents:px,canvas:gx,svg:il,vml:xx,inlineSvg:vx,mac:yx,linux:_x},Xd=Y.msPointer?"MSPointerDown":"pointerdown",eh=Y.msPointer?"MSPointerMove":"pointermove",th=Y.msPointer?"MSPointerUp":"pointerup",nh=Y.msPointer?"MSPointerCancel":"pointercancel",al={touchstart:Xd,touchmove:eh,touchend:th,touchcancel:nh},rh={touchstart:Sx,touchmove:Qi,touchend:Qi,touchcancel:Qi},Mr={},sh=!1;function wx(r,o,u){return o==="touchstart"&&kx(),rh[o]?(u=rh[o].bind(this,u),r.addEventListener(al[o],u,!1),u):(console.warn("wrong event specified:",o),g)}function bx(r,o,u){if(!al[o]){console.warn("wrong event specified:",o);return}r.removeEventListener(al[o],u,!1)}function jx(r){Mr[r.pointerId]=r}function Nx(r){Mr[r.pointerId]&&(Mr[r.pointerId]=r)}function ih(r){delete Mr[r.pointerId]}function kx(){sh||(document.addEventListener(Xd,jx,!0),document.addEventListener(eh,Nx,!0),document.addEventListener(th,ih,!0),document.addEventListener(nh,ih,!0),sh=!0)}function Qi(r,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in Mr)o.touches.push(Mr[u]);o.changedTouches=[o],r(o)}}function Sx(r,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&qe(o),Qi(r,o)}function Px(r){var o={},u,h;for(h in r)u=r[h],o[h]=u&&u.bind?u.bind(r):u;return r=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Ex=200;function Cx(r,o){r.addEventListener("dblclick",o);var u=0,h;function p(_){if(_.detail!==1){h=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var I=uh(_);if(!(I.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!I.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var M=Date.now();M-u<=Ex?(h++,h===2&&o(Px(_))):h=1,u=M}}}return r.addEventListener("click",p),{dblclick:o,simDblclick:p}}function Tx(r,o){r.removeEventListener("dblclick",o.dblclick),r.removeEventListener("click",o.simDblclick)}var ol=ea(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Os=ea(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ah=Os==="webkitTransition"||Os==="OTransition"?Os+"End":"transitionend";function oh(r){return typeof r=="string"?document.getElementById(r):r}function As(r,o){var u=r.style[o]||r.currentStyle&&r.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(r,null);u=h?h[o]:null}return u==="auto"?null:u}function me(r,o,u){var h=document.createElement(r);return h.className=o||"",u&&u.appendChild(h),h}function ke(r){var o=r.parentNode;o&&o.removeChild(r)}function Yi(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Rr(r){var o=r.parentNode;o&&o.lastChild!==r&&o.appendChild(r)}function zr(r){var o=r.parentNode;o&&o.firstChild!==r&&o.insertBefore(r,o.firstChild)}function ll(r,o){if(r.classList!==void 0)return r.classList.contains(o);var u=Xi(r);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function ae(r,o){if(r.classList!==void 0)for(var u=P(o),h=0,p=u.length;h<p;h++)r.classList.add(u[h]);else if(!ll(r,o)){var _=Xi(r);cl(r,(_?_+" ":"")+o)}}function Le(r,o){r.classList!==void 0?r.classList.remove(o):cl(r,x((" "+Xi(r)+" ").replace(" "+o+" "," ")))}function cl(r,o){r.className.baseVal===void 0?r.className=o:r.className.baseVal=o}function Xi(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Nt(r,o){"opacity"in r.style?r.style.opacity=o:"filter"in r.style&&Lx(r,o)}function Lx(r,o){var u=!1,h="DXImageTransform.Microsoft.Alpha";try{u=r.filters.item(h)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):r.style.filter+=" progid:"+h+"(opacity="+o+")"}function ea(r){for(var o=document.documentElement.style,u=0;u<r.length;u++)if(r[u]in o)return r[u];return!1}function rr(r,o,u){var h=o||new B(0,0);r.style[ol]=(Y.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(u?" scale("+u+")":"")}function Ae(r,o){r._leaflet_pos=o,Y.any3d?rr(r,o):(r.style.left=o.x+"px",r.style.top=o.y+"px")}function sr(r){return r._leaflet_pos||new B(0,0)}var Ms,Rs,ul;if("onselectstart"in document)Ms=function(){se(window,"selectstart",qe)},Rs=function(){ye(window,"selectstart",qe)};else{var zs=ea(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ms=function(){if(zs){var r=document.documentElement.style;ul=r[zs],r[zs]="none"}},Rs=function(){zs&&(document.documentElement.style[zs]=ul,ul=void 0)}}function dl(){se(window,"dragstart",qe)}function hl(){ye(window,"dragstart",qe)}var ta,fl;function ml(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(na(),ta=r,fl=r.style.outlineStyle,r.style.outlineStyle="none",se(window,"keydown",na))}function na(){ta&&(ta.style.outlineStyle=fl,ta=void 0,fl=void 0,ye(window,"keydown",na))}function lh(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function pl(r){var o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}var Ix={__proto__:null,TRANSFORM:ol,TRANSITION:Os,TRANSITION_END:ah,get:oh,getStyle:As,create:me,remove:ke,empty:Yi,toFront:Rr,toBack:zr,hasClass:ll,addClass:ae,removeClass:Le,setClass:cl,getClass:Xi,setOpacity:Nt,testProp:ea,setTransform:rr,setPosition:Ae,getPosition:sr,get disableTextSelection(){return Ms},get enableTextSelection(){return Rs},disableImageDrag:dl,enableImageDrag:hl,preventOutline:ml,restoreOutline:na,getSizedParentNode:lh,getScale:pl};function se(r,o,u,h){if(o&&typeof o=="object")for(var p in o)vl(r,p,o[p],u);else{o=P(o);for(var _=0,I=o.length;_<I;_++)vl(r,o[_],u,h)}return this}var Gt="_leaflet_events";function ye(r,o,u,h){if(arguments.length===1)ch(r),delete r[Gt];else if(o&&typeof o=="object")for(var p in o)xl(r,p,o[p],u);else if(o=P(o),arguments.length===2)ch(r,function(M){return T(o,M)!==-1});else for(var _=0,I=o.length;_<I;_++)xl(r,o[_],u,h);return this}function ch(r,o){for(var u in r[Gt]){var h=u.split(/\d/)[0];(!o||o(h))&&xl(r,h,null,null,u)}}var gl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function vl(r,o,u,h){var p=o+d(u)+(h?"_"+d(h):"");if(r[Gt]&&r[Gt][p])return this;var _=function(M){return u.call(h||r,M||window.event)},I=_;!Y.touchNative&&Y.pointer&&o.indexOf("touch")===0?_=wx(r,o,_):Y.touch&&o==="dblclick"?_=Cx(r,_):"addEventListener"in r?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?r.addEventListener(gl[o]||o,_,Y.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(_=function(M){M=M||window.event,_l(r,M)&&I(M)},r.addEventListener(gl[o],_,!1)):r.addEventListener(o,I,!1):r.attachEvent("on"+o,_),r[Gt]=r[Gt]||{},r[Gt][p]=_}function xl(r,o,u,h,p){p=p||o+d(u)+(h?"_"+d(h):"");var _=r[Gt]&&r[Gt][p];if(!_)return this;!Y.touchNative&&Y.pointer&&o.indexOf("touch")===0?bx(r,o,_):Y.touch&&o==="dblclick"?Tx(r,_):"removeEventListener"in r?r.removeEventListener(gl[o]||o,_,!1):r.detachEvent("on"+o,_),r[Gt][p]=null}function ir(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function yl(r){return vl(r,"wheel",ir),this}function Ds(r){return se(r,"mousedown touchstart dblclick contextmenu",ir),r._leaflet_disable_click=!0,this}function qe(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function ar(r){return qe(r),ir(r),this}function uh(r){if(r.composedPath)return r.composedPath();for(var o=[],u=r.target;u;)o.push(u),u=u.parentNode;return o}function dh(r,o){if(!o)return new B(r.clientX,r.clientY);var u=pl(o),h=u.boundingClientRect;return new B((r.clientX-h.left)/u.x-o.clientLeft,(r.clientY-h.top)/u.y-o.clientTop)}var Ox=Y.linux&&Y.chrome?window.devicePixelRatio:Y.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function hh(r){return Y.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Ox:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function _l(r,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==r;)u=u.parentNode}catch{return!1}return u!==r}var Ax={__proto__:null,on:se,off:ye,stopPropagation:ir,disableScrollPropagation:yl,disableClickPropagation:Ds,preventDefault:qe,stop:ar,getPropagationPath:uh,getMousePosition:dh,getWheelDelta:hh,isExternalTarget:_l,addListener:se,removeListener:ye},fh=pe.extend({run:function(r,o,u,h){this.stop(),this._el=r,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=sr(r),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(r){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),r):(this._runFrame(1),this._complete())},_runFrame:function(r,o){var u=this._startPos.add(this._offset.multiplyBy(r));o&&u._round(),Ae(this._el,u),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),de=pe.extend({options:{crs:el,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,o){o=w(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(re(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Os&&Y.any3d&&!Y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),se(this._proxy,ah,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),r=this._limitCenter(re(r),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=a({animate:u.animate},u.zoom),u.pan=a({animate:u.animate,duration:u.duration},u.pan));var h=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,o,u.zoom):this._tryAnimatedPan(r,u.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(r,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(r,o){return this._loaded?this.setView(this.getCenter(),r,{zoom:o}):(this._zoom=r,this)},zoomIn:function(r,o){return r=r||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,o)},zoomOut:function(r,o){return r=r||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,o)},setZoomAround:function(r,o,u){var h=this.getZoomScale(o),p=this.getSize().divideBy(2),_=r instanceof B?r:this.latLngToContainerPoint(r),I=_.subtract(p).multiplyBy(1-1/h),M=this.containerPointToLatLng(p.add(I));return this.setView(M,o,{zoom:u})},_getBoundsCenterZoom:function(r,o){o=o||{},r=r.getBounds?r.getBounds():xe(r);var u=V(o.paddingTopLeft||o.padding||[0,0]),h=V(o.paddingBottomRight||o.padding||[0,0]),p=this.getBoundsZoom(r,!1,u.add(h));if(p=typeof o.maxZoom=="number"?Math.min(o.maxZoom,p):p,p===1/0)return{center:r.getCenter(),zoom:p};var _=h.subtract(u).divideBy(2),I=this.project(r.getSouthWest(),p),M=this.project(r.getNorthEast(),p),z=this.unproject(I.add(M).divideBy(2).add(_),p);return{center:z,zoom:p}},fitBounds:function(r,o){if(r=xe(r),!r.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(r,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,o){return this.setView(r,this._zoom,{pan:o})},panBy:function(r,o){if(r=V(r).round(),o=o||{},!r.x&&!r.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new fh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){ae(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,o,u){if(u=u||{},u.animate===!1||!Y.any3d)return this.setView(r,o,u);this._stop();var h=this.project(this.getCenter()),p=this.project(r),_=this.getSize(),I=this._zoom;r=re(r),o=o===void 0?I:o;var M=Math.max(_.x,_.y),z=M*this.getZoomScale(I,o),F=p.distanceTo(h)||1,H=1.42,ee=H*H;function le(Me){var ma=Me?-1:1,b0=Me?z:M,j0=z*z-M*M+ma*ee*ee*F*F,N0=2*b0*ee*F,Ll=j0/N0,Hh=Math.sqrt(Ll*Ll+1)-Ll,k0=Hh<1e-9?-18:Math.log(Hh);return k0}function et(Me){return(Math.exp(Me)-Math.exp(-Me))/2}function Ue(Me){return(Math.exp(Me)+Math.exp(-Me))/2}function St(Me){return et(Me)/Ue(Me)}var at=le(0);function Zr(Me){return M*(Ue(at)/Ue(at+H*Me))}function x0(Me){return M*(Ue(at)*St(at+H*Me)-et(at))/ee}function y0(Me){return 1-Math.pow(1-Me,1.5)}var _0=Date.now(),Vh=(le(1)-at)/H,w0=u.duration?1e3*u.duration:1e3*Vh*.8;function Wh(){var Me=(Date.now()-_0)/w0,ma=y0(Me)*Vh;Me<=1?(this._flyToFrame=U(Wh,this),this._move(this.unproject(h.add(p.subtract(h).multiplyBy(x0(ma)/F)),I),this.getScaleZoom(M/Zr(ma),I),{flyTo:!0})):this._move(r,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Wh.call(this),this},flyToBounds:function(r,o){var u=this._getBoundsCenterZoom(r,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(r){return r=xe(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var o=this.options.minZoom;return this.options.minZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var o=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,o){this._enforcingBounds=!0;var u=this.getCenter(),h=this._limitCenter(u,this._zoom,xe(r));return u.equals(h)||this.panTo(h,o),this._enforcingBounds=!1,this},panInside:function(r,o){o=o||{};var u=V(o.paddingTopLeft||o.padding||[0,0]),h=V(o.paddingBottomRight||o.padding||[0,0]),p=this.project(this.getCenter()),_=this.project(r),I=this.getPixelBounds(),M=G([I.min.add(u),I.max.subtract(h)]),z=M.getSize();if(!M.contains(_)){this._enforcingBounds=!0;var F=_.subtract(M.getCenter()),H=M.extend(_).getSize().subtract(z);p.x+=F.x<0?-H.x:H.x,p.y+=F.y<0?-H.y:H.y,this.panTo(this.unproject(p),o),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=a({animate:!1,pan:!0},r===!0?{animate:!0}:r);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),h=o.divideBy(2).round(),p=u.divideBy(2).round(),_=h.subtract(p);return!_.x&&!_.y?this:(r.animate&&r.pan?this.panBy(_):(r.pan&&this._rawPanBy(_),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=a({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=c(this._handleGeolocationResponse,this),u=c(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,r):navigator.geolocation.getCurrentPosition(o,u,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var o=r.code,u=r.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var o=r.coords.latitude,u=r.coords.longitude,h=new fe(o,u),p=h.toBounds(r.coords.accuracy*2),_=this._locateOptions;if(_.setView){var I=this.getBoundsZoom(p);this.setView(h,_.maxZoom?Math.min(I,_.maxZoom):I)}var M={latlng:h,bounds:p,timestamp:r.timestamp};for(var z in r.coords)typeof r.coords[z]=="number"&&(M[z]=r.coords[z]);this.fire("locationfound",M)}},addHandler:function(r,o){if(!o)return this;var u=this[r]=new o(this);return this._handlers.push(u),this.options[r]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)ke(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,o){var u="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),h=me("div",u,o||this._mapPane);return r&&(this._panes[r]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),o=this.unproject(r.getBottomLeft()),u=this.unproject(r.getTopRight());return new Ce(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,o,u){r=xe(r),u=V(u||[0,0]);var h=this.getZoom()||0,p=this.getMinZoom(),_=this.getMaxZoom(),I=r.getNorthWest(),M=r.getSouthEast(),z=this.getSize().subtract(u),F=G(this.project(M,h),this.project(I,h)).getSize(),H=Y.any3d?this.options.zoomSnap:1,ee=z.x/F.x,le=z.y/F.y,et=o?Math.max(ee,le):Math.min(ee,le);return h=this.getScaleZoom(et,h),H&&(h=Math.round(h/(H/100))*(H/100),h=o?Math.ceil(h/H)*H:Math.floor(h/H)*H),Math.max(p,Math.min(_,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,o){var u=this._getTopLeftPoint(r,o);return new te(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(r)/u.scale(o)},getScaleZoom:function(r,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var h=u.zoom(r*u.scale(o));return isNaN(h)?1/0:h},project:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(re(r),o)},unproject:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(V(r),o)},layerPointToLatLng:function(r){var o=V(r).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(r){var o=this.project(re(r))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(re(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(xe(r))},distance:function(r,o){return this.options.crs.distance(re(r),re(o))},containerPointToLayerPoint:function(r){return V(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return V(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var o=this.containerPointToLayerPoint(V(r));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(r)))},mouseEventToContainerPoint:function(r){return dh(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var o=this._container=oh(r);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");se(o,"scroll",this._onScroll,this),this._containerId=d(o)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&Y.any3d,ae(r,"leaflet-container"+(Y.touch?" leaflet-touch":"")+(Y.retina?" leaflet-retina":"")+(Y.ielt9?" leaflet-oldie":"")+(Y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=As(r,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ae(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ae(r.markerPane,"leaflet-zoom-hide"),ae(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,o,u){Ae(this._mapPane,new B(0,0));var h=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var p=this._zoom!==o;this._moveStart(p,u)._move(r,o)._moveEnd(p),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(r,o){return r&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(r,o,u,h){o===void 0&&(o=this._zoom);var p=this._zoom!==o;return this._zoom=o,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),h?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Ae(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var o=r?ye:se;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Y.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,o){for(var u=[],h,p=o==="mouseout"||o==="mouseover",_=r.target||r.srcElement,I=!1;_;){if(h=this._targets[d(_)],h&&(o==="click"||o==="preclick")&&this._draggableMoved(h)){I=!0;break}if(h&&h.listens(o,!0)&&(p&&!_l(_,r)||(u.push(h),p))||_===this._container)break;_=_.parentNode}return!u.length&&!I&&!p&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var o=r.target||r.srcElement;if(!(!this._loaded||o._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(o))){var u=r.type;u==="mousedown"&&ml(o),this._fireDOMEvent(r,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,o,u){if(r.type==="click"){var h=a({},r);h.type="preclick",this._fireDOMEvent(h,h.type,u)}var p=this._findEventTargets(r,o);if(u){for(var _=[],I=0;I<u.length;I++)u[I].listens(o,!0)&&_.push(u[I]);p=_.concat(p)}if(p.length){o==="contextmenu"&&qe(r);var M=p[0],z={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var F=M.getLatLng&&(!M._radius||M._radius<=10);z.containerPoint=F?this.latLngToContainerPoint(M.getLatLng()):this.mouseEventToContainerPoint(r),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=F?M.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(I=0;I<p.length;I++)if(p[I].fire(o,z,!0),z.originalEvent._stopped||p[I].options.bubblingMouseEvents===!1&&T(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,o=this._handlers.length;r<o;r++)this._handlers[r].disable()},whenReady:function(r,o){return this._loaded?r.call(o||this,{target:this}):this.on("load",r,o),this},_getMapPanePos:function(){return sr(this._mapPane)||new B(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,o){var u=r&&o!==void 0?this._getNewPixelOrigin(r,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,o){var u=this.getSize()._divideBy(2);return this.project(r,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,o,u){var h=this._getNewPixelOrigin(u,o);return this.project(r,o)._subtract(h)},_latLngBoundsToNewLayerBounds:function(r,o,u){var h=this._getNewPixelOrigin(u,o);return G([this.project(r.getSouthWest(),o)._subtract(h),this.project(r.getNorthWest(),o)._subtract(h),this.project(r.getSouthEast(),o)._subtract(h),this.project(r.getNorthEast(),o)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,o,u){if(!u)return r;var h=this.project(r,o),p=this.getSize().divideBy(2),_=new te(h.subtract(p),h.add(p)),I=this._getBoundsOffset(_,u,o);return Math.abs(I.x)<=1&&Math.abs(I.y)<=1?r:this.unproject(h.add(I),o)},_limitOffset:function(r,o){if(!o)return r;var u=this.getPixelBounds(),h=new te(u.min.add(r),u.max.add(r));return r.add(this._getBoundsOffset(h,o))},_getBoundsOffset:function(r,o,u){var h=G(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),p=h.min.subtract(r.min),_=h.max.subtract(r.max),I=this._rebound(p.x,-_.x),M=this._rebound(p.y,-_.y);return new B(I,M)},_rebound:function(r,o){return r+o>0?Math.round(r-o)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(o))},_limitZoom:function(r){var o=this.getMinZoom(),u=this.getMaxZoom(),h=Y.any3d?this.options.zoomSnap:1;return h&&(r=Math.round(r/h)*h),Math.max(o,Math.min(u,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Le(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,o){var u=this._getCenterOffset(r)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var r=this._proxy=me("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(o){var u=ol,h=this._proxy.style[u];rr(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),h===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),o=this.getZoom();rr(this._proxy,this.project(r,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(o),p=this._getCenterOffset(r)._divideBy(1-1/h);return u.animate!==!0&&!this.getSize().contains(p)?!1:(U(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(r,o,!0)},this),!0)},_animateZoom:function(r,o,u,h){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=o,ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:o,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Le(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mx(r,o){return new de(r,o)}var Ot=ne.extend({options:{position:"topright"},initialize:function(r){w(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var o=this._map;return o&&o.removeControl(this),this.options.position=r,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var o=this._container=this.onAdd(r),u=this.getPosition(),h=r._controlCorners[u];return ae(o,"leaflet-control"),u.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Bs=function(r){return new Ot(r)};de.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},o="leaflet-",u=this._controlContainer=me("div",o+"control-container",this._container);function h(p,_){var I=o+p+" "+o+_;r[p+_]=me("div",I,u)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)ke(this._controlCorners[r]);ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mh=Ot.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,o,u,h){return u<h?-1:h<u?1:0}},initialize:function(r,o,u){w(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in r)this._addLayer(r[h],h);for(h in o)this._addLayer(o[h],h,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Ot.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,o){return this._addLayer(r,o),this._map?this._update():this},addOverlay:function(r,o){return this._addLayer(r,o,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var o=this._getLayer(d(r));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Le(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Le(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",o=this._container=me("div",r),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Ds(o),yl(o);var h=this._section=me("section",r+"-list");u&&(this._map.on("click",this.collapse,this),se(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=me("a",r+"-toggle",o);p.href="#",p.title="Layers",p.setAttribute("role","button"),se(p,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){qe(_),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=me("div",r+"-base",h),this._separator=me("div",r+"-separator",h),this._overlaysList=me("div",r+"-overlays",h),o.appendChild(h)},_getLayer:function(r){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&d(this._layers[o].layer)===r)return this._layers[o]},_addLayer:function(r,o,u){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(c(function(h,p){return this.options.sortFunction(h.layer,p.layer,h.name,p.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Yi(this._baseLayersList),Yi(this._overlaysList),this._layerControlInputs=[];var r,o,u,h,p=0;for(u=0;u<this._layers.length;u++)h=this._layers[u],this._addItem(h),o=o||h.overlay,r=r||!h.overlay,p+=h.overlay?0:1;return this.options.hideSingleBase&&(r=r&&p>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=o&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var o=this._getLayer(d(r.target)),u=o.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(r,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(o?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=u,h.firstChild},_addItem:function(r){var o=document.createElement("label"),u=this._map.hasLayer(r.layer),h;r.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=u):h=this._createRadioElement("leaflet-base-layers_"+d(this),u),this._layerControlInputs.push(h),h.layerId=d(r.layer),se(h,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+r.name;var _=document.createElement("span");o.appendChild(_),_.appendChild(h),_.appendChild(p);var I=r.overlay?this._overlaysList:this._baseLayersList;return I.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,o,u,h=[],p=[];this._handlingClick=!0;for(var _=r.length-1;_>=0;_--)o=r[_],u=this._getLayer(o.layerId).layer,o.checked?h.push(u):o.checked||p.push(u);for(_=0;_<p.length;_++)this._map.hasLayer(p[_])&&this._map.removeLayer(p[_]);for(_=0;_<h.length;_++)this._map.hasLayer(h[_])||this._map.addLayer(h[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,o,u,h=this._map.getZoom(),p=r.length-1;p>=0;p--)o=r[p],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&h<u.options.minZoom||u.options.maxZoom!==void 0&&h>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,se(r,"click",qe),this.expand();var o=this;setTimeout(function(){ye(r,"click",qe),o._preventClick=!1})}}),Rx=function(r,o,u){return new mh(r,o,u)},wl=Ot.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var o="leaflet-control-zoom",u=me("div",o+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,o,u,h,p){var _=me("a",u,h);return _.innerHTML=r,_.href="#",_.title=o,_.setAttribute("role","button"),_.setAttribute("aria-label",o),Ds(_),se(_,"click",ar),se(_,"click",p,this),se(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var r=this._map,o="leaflet-disabled";Le(this._zoomInButton,o),Le(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(ae(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(ae(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});de.mergeOptions({zoomControl:!0}),de.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wl,this.addControl(this.zoomControl))});var zx=function(r){return new wl(r)},ph=Ot.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var o="leaflet-control-scale",u=me("div",o),h=this.options;return this._addScales(h,o+"-line",u),r.on(h.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),u},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,o,u){r.metric&&(this._mScale=me("div",o,u)),r.imperial&&(this._iScale=me("div",o,u))},_update:function(){var r=this._map,o=r.getSize().y/2,u=r.distance(r.containerPointToLatLng([0,o]),r.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var o=this._getRoundNum(r),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/r)},_updateImperial:function(r){var o=r*3.2808399,u,h,p;o>5280?(u=o/5280,h=this._getRoundNum(u),this._updateScale(this._iScale,h+" mi",h/u)):(p=this._getRoundNum(o),this._updateScale(this._iScale,p+" ft",p/o))},_updateScale:function(r,o,u){r.style.width=Math.round(this.options.maxWidth*u)+"px",r.innerHTML=o},_getRoundNum:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),u=r/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),Dx=function(r){return new ph(r)},Bx='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',bl=Ot.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Y.inlineSvg?Bx+" ":"")+"Leaflet</a>"},initialize:function(r){w(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=me("div","leaflet-control-attribution"),Ds(this._container);for(var o in r._layers)r._layers[o].getAttribution&&this.addAttribution(r._layers[o].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var o in this._attributions)this._attributions[o]&&r.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),r.length&&u.push(r.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});de.mergeOptions({attributionControl:!0}),de.addInitHook(function(){this.options.attributionControl&&new bl().addTo(this)});var Ux=function(r){return new bl(r)};Ot.Layers=mh,Ot.Zoom=wl,Ot.Scale=ph,Ot.Attribution=bl,Bs.layers=Rx,Bs.zoom=zx,Bs.scale=Dx,Bs.attribution=Ux;var Kt=ne.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Kt.addTo=function(r,o){return r.addHandler(o,this),this};var $x={Events:q},gh=Y.touch?"touchstart mousedown":"mousedown",kn=pe.extend({options:{clickTolerance:3},initialize:function(r,o,u,h){w(this,h),this._element=r,this._dragStartTarget=o||r,this._preventOutline=u},enable:function(){this._enabled||(se(this._dragStartTarget,gh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(kn._dragging===this&&this.finishDrag(!0),ye(this._dragStartTarget,gh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!ll(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){kn._dragging===this&&this.finishDrag();return}if(!(kn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(kn._dragging=this,this._preventOutline&&ml(this._element),dl(),Ms(),!this._moving)){this.fire("down");var o=r.touches?r.touches[0]:r,u=lh(this._element);this._startPoint=new B(o.clientX,o.clientY),this._startPos=sr(this._element),this._parentScale=pl(u);var h=r.type==="mousedown";se(document,h?"mousemove":"touchmove",this._onMove,this),se(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var o=r.touches&&r.touches.length===1?r.touches[0]:r,u=new B(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,qe(r),this._moved||(this.fire("dragstart"),this._moved=!0,ae(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Ae(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Le(document.body,"leaflet-dragging"),this._lastTarget&&(Le(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ye(document,"mousemove touchmove",this._onMove,this),ye(document,"mouseup touchend touchcancel",this._onUp,this),hl(),Rs();var o=this._moved&&this._moving;this._moving=!1,kn._dragging=!1,o&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function vh(r,o,u){var h,p=[1,4,2,8],_,I,M,z,F,H,ee,le;for(_=0,H=r.length;_<H;_++)r[_]._code=or(r[_],o);for(M=0;M<4;M++){for(ee=p[M],h=[],_=0,H=r.length,I=H-1;_<H;I=_++)z=r[_],F=r[I],z._code&ee?F._code&ee||(le=ra(F,z,ee,o,u),le._code=or(le,o),h.push(le)):(F._code&ee&&(le=ra(F,z,ee,o,u),le._code=or(le,o),h.push(le)),h.push(z));r=h}return r}function xh(r,o){var u,h,p,_,I,M,z,F,H;if(!r||r.length===0)throw new Error("latlngs not passed");kt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ee=re([0,0]),le=xe(r),et=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());et<1700&&(ee=jl(r));var Ue=r.length,St=[];for(u=0;u<Ue;u++){var at=re(r[u]);St.push(o.project(re([at.lat-ee.lat,at.lng-ee.lng])))}for(M=z=F=0,u=0,h=Ue-1;u<Ue;h=u++)p=St[u],_=St[h],I=p.y*_.x-_.y*p.x,z+=(p.x+_.x)*I,F+=(p.y+_.y)*I,M+=I*3;M===0?H=St[0]:H=[z/M,F/M];var Zr=o.unproject(V(H));return re([Zr.lat+ee.lat,Zr.lng+ee.lng])}function jl(r){for(var o=0,u=0,h=0,p=0;p<r.length;p++){var _=re(r[p]);o+=_.lat,u+=_.lng,h++}return re([o/h,u/h])}var Fx={__proto__:null,clipPolygon:vh,polygonCenter:xh,centroid:jl};function yh(r,o){if(!o||!r.length)return r.slice();var u=o*o;return r=Vx(r,u),r=qx(r,u),r}function _h(r,o,u){return Math.sqrt(Us(r,o,u,!0))}function Zx(r,o,u){return Us(r,o,u)}function qx(r,o){var u=r.length,h=typeof Uint8Array<"u"?Uint8Array:Array,p=new h(u);p[0]=p[u-1]=1,Nl(r,p,o,0,u-1);var _,I=[];for(_=0;_<u;_++)p[_]&&I.push(r[_]);return I}function Nl(r,o,u,h,p){var _=0,I,M,z;for(M=h+1;M<=p-1;M++)z=Us(r[M],r[h],r[p],!0),z>_&&(I=M,_=z);_>u&&(o[I]=1,Nl(r,o,u,h,I),Nl(r,o,u,I,p))}function Vx(r,o){for(var u=[r[0]],h=1,p=0,_=r.length;h<_;h++)Wx(r[h],r[p])>o&&(u.push(r[h]),p=h);return p<_-1&&u.push(r[_-1]),u}var wh;function bh(r,o,u,h,p){var _=h?wh:or(r,u),I=or(o,u),M,z,F;for(wh=I;;){if(!(_|I))return[r,o];if(_&I)return!1;M=_||I,z=ra(r,o,M,u,p),F=or(z,u),M===_?(r=z,_=F):(o=z,I=F)}}function ra(r,o,u,h,p){var _=o.x-r.x,I=o.y-r.y,M=h.min,z=h.max,F,H;return u&8?(F=r.x+_*(z.y-r.y)/I,H=z.y):u&4?(F=r.x+_*(M.y-r.y)/I,H=M.y):u&2?(F=z.x,H=r.y+I*(z.x-r.x)/_):u&1&&(F=M.x,H=r.y+I*(M.x-r.x)/_),new B(F,H,p)}function or(r,o){var u=0;return r.x<o.min.x?u|=1:r.x>o.max.x&&(u|=2),r.y<o.min.y?u|=4:r.y>o.max.y&&(u|=8),u}function Wx(r,o){var u=o.x-r.x,h=o.y-r.y;return u*u+h*h}function Us(r,o,u,h){var p=o.x,_=o.y,I=u.x-p,M=u.y-_,z=I*I+M*M,F;return z>0&&(F=((r.x-p)*I+(r.y-_)*M)/z,F>1?(p=u.x,_=u.y):F>0&&(p+=I*F,_+=M*F)),I=r.x-p,M=r.y-_,h?I*I+M*M:new B(p,_)}function kt(r){return!j(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function jh(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),kt(r)}function Nh(r,o){var u,h,p,_,I,M,z,F;if(!r||r.length===0)throw new Error("latlngs not passed");kt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var H=re([0,0]),ee=xe(r),le=ee.getNorthWest().distanceTo(ee.getSouthWest())*ee.getNorthEast().distanceTo(ee.getNorthWest());le<1700&&(H=jl(r));var et=r.length,Ue=[];for(u=0;u<et;u++){var St=re(r[u]);Ue.push(o.project(re([St.lat-H.lat,St.lng-H.lng])))}for(u=0,h=0;u<et-1;u++)h+=Ue[u].distanceTo(Ue[u+1])/2;if(h===0)F=Ue[0];else for(u=0,_=0;u<et-1;u++)if(I=Ue[u],M=Ue[u+1],p=I.distanceTo(M),_+=p,_>h){z=(_-h)/p,F=[M.x-z*(M.x-I.x),M.y-z*(M.y-I.y)];break}var at=o.unproject(V(F));return re([at.lat+H.lat,at.lng+H.lng])}var Hx={__proto__:null,simplify:yh,pointToSegmentDistance:_h,closestPointOnSegment:Zx,clipSegment:bh,_getEdgeIntersection:ra,_getBitCode:or,_sqClosestPointOnSegment:Us,isFlat:kt,_flat:jh,polylineCenter:Nh},kl={project:function(r){return new B(r.lng,r.lat)},unproject:function(r){return new fe(r.y,r.x)},bounds:new te([-180,-90],[180,90])},Sl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var o=Math.PI/180,u=this.R,h=r.lat*o,p=this.R_MINOR/u,_=Math.sqrt(1-p*p),I=_*Math.sin(h),M=Math.tan(Math.PI/4-h/2)/Math.pow((1-I)/(1+I),_/2);return h=-u*Math.log(Math.max(M,1e-10)),new B(r.lng*o*u,h)},unproject:function(r){for(var o=180/Math.PI,u=this.R,h=this.R_MINOR/u,p=Math.sqrt(1-h*h),_=Math.exp(-r.y/u),I=Math.PI/2-2*Math.atan(_),M=0,z=.1,F;M<15&&Math.abs(z)>1e-7;M++)F=p*Math.sin(I),F=Math.pow((1-F)/(1+F),p/2),z=Math.PI/2-2*Math.atan(_*F)-I,I+=z;return new fe(I*o,r.x*o/u)}},Gx={__proto__:null,LonLat:kl,Mercator:Sl,SphericalMercator:Yo},Kx=a({},Nn,{code:"EPSG:3395",projection:Sl,transformation:function(){var r=.5/(Math.PI*Sl.R);return Ls(r,.5,-r,.5)}()}),kh=a({},Nn,{code:"EPSG:4326",projection:kl,transformation:Ls(1/180,1,-1/180,.5)}),Jx=a({},it,{projection:kl,transformation:Ls(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,o){var u=o.lng-r.lng,h=o.lat-r.lat;return Math.sqrt(u*u+h*h)},infinite:!0});it.Earth=Nn,it.EPSG3395=Kx,it.EPSG3857=el,it.EPSG900913=nx,it.EPSG4326=kh,it.Simple=Jx;var At=pe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var o=r.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});de.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var o=d(r);return this._layers[o]?this:(this._layers[o]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var o=d(r);return this._layers[o]?(this._loaded&&r.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},_addLayers:function(r){r=r?j(r)?r:[r]:[];for(var o=0,u=r.length;o<u;o++)this.addLayer(r[o])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var o=d(r);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,o=-1/0,u=this._getZoomSpan();for(var h in this._zoomBoundLayers){var p=this._zoomBoundLayers[h].options;r=p.minZoom===void 0?r:Math.min(r,p.minZoom),o=p.maxZoom===void 0?o:Math.max(o,p.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=r===1/0?void 0:r,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Dr=At.extend({initialize:function(r,o){w(this,o),this._layers={};var u,h;if(r)for(u=0,h=r.length;u<h;u++)this.addLayer(r[u])},addLayer:function(r){var o=this.getLayerId(r);return this._layers[o]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var o=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(r){var o=typeof r=="number"?r:this.getLayerId(r);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var o=Array.prototype.slice.call(arguments,1),u,h;for(u in this._layers)h=this._layers[u],h[r]&&h[r].apply(h,o);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),Qx=function(r,o){return new Dr(r,o)},an=Dr.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Dr.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Dr.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ce;for(var o in this._layers){var u=this._layers[o];r.extend(u.getBounds?u.getBounds():u.getLatLng())}return r}}),Yx=function(r,o){return new an(r,o)},Br=ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){w(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,o){var u=this._getIconUrl(r);if(!u){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(h,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(r,o){var u=this.options,h=u[o+"Size"];typeof h=="number"&&(h=[h,h]);var p=V(h),_=V(o==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));r.className="leaflet-marker-"+o+" "+(u.className||""),_&&(r.style.marginLeft=-_.x+"px",r.style.marginTop=-_.y+"px"),p&&(r.style.width=p.x+"px",r.style.height=p.y+"px")},_createImg:function(r,o){return o=o||document.createElement("img"),o.src=r,o},_getIconUrl:function(r){return Y.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Xx(r){return new Br(r)}var $s=Br.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof $s.imagePath!="string"&&($s.imagePath=this._detectIconPath()),(this.options.imagePath||$s.imagePath)+Br.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var o=function(u,h,p){var _=h.exec(u);return _&&_[p]};return r=o(r,/^url\((['"])?(.+)\1\)$/,2),r&&o(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=me("div","leaflet-default-icon-path",document.body),o=As(r,"background-image")||As(r,"backgroundImage");if(document.body.removeChild(r),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Sh=Kt.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new kn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ae(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Le(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var o=this._marker,u=o._map,h=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,_=sr(o._icon),I=u.getPixelBounds(),M=u.getPixelOrigin(),z=G(I.min._subtract(M).add(p),I.max._subtract(M).subtract(p));if(!z.contains(_)){var F=V((Math.max(z.max.x,_.x)-z.max.x)/(I.max.x-z.max.x)-(Math.min(z.min.x,_.x)-z.min.x)/(I.min.x-z.min.x),(Math.max(z.max.y,_.y)-z.max.y)/(I.max.y-z.max.y)-(Math.min(z.min.y,_.y)-z.min.y)/(I.min.y-z.min.y)).multiplyBy(h);u.panBy(F,{animate:!1}),this._draggable._newPos._add(F),this._draggable._startPos._add(F),Ae(o._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=U(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,r)))},_onDrag:function(r){var o=this._marker,u=o._shadow,h=sr(o._icon),p=o._map.layerPointToLatLng(h);u&&Ae(u,h),o._latlng=p,r.latlng=p,r.oldLatLng=this._oldLatLng,o.fire("move",r).fire("drag",r)},_onDragEnd:function(r){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),sa=At.extend({options:{icon:new $s,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,o){w(this,o),this._latlng=re(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var o=this._latlng;return this._latlng=re(r),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=r.icon.createIcon(this._icon),h=!1;u!==this._icon&&(this._icon&&this._removeIcon(),h=!0,r.title&&(u.title=r.title),u.tagName==="IMG"&&(u.alt=r.alt||"")),ae(u,o),r.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&se(u,"focus",this._panOnFocus,this);var p=r.icon.createShadow(this._shadow),_=!1;p!==this._shadow&&(this._removeShadow(),_=!0),p&&(ae(p,o),p.alt=""),this._shadow=p,r.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&_&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(this._icon,"focus",this._panOnFocus,this),ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ke(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Ae(this._icon,r),this._shadow&&Ae(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Sh)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Sh(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Nt(this._icon,r),this._shadow&&Nt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var o=this.options.icon.options,u=o.iconSize?V(o.iconSize):V(0,0),h=o.iconAnchor?V(o.iconAnchor):V(0,0);r.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:u.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function e0(r,o){return new sa(r,o)}var Sn=At.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return w(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ia=Sn.extend({options:{fill:!0,radius:10},initialize:function(r,o){w(this,o),this._latlng=re(r),this._radius=this.options.radius},setLatLng:function(r){var o=this._latlng;return this._latlng=re(r),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var o=r&&r.radius||this._radius;return Sn.prototype.setStyle.call(this,r),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,o=this._radiusY||r,u=this._clickTolerance(),h=[r+u,o+u];this._pxBounds=new te(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function t0(r,o){return new ia(r,o)}var Pl=ia.extend({initialize:function(r,o,u){if(typeof o=="number"&&(o=a({},u,{radius:o})),w(this,o),this._latlng=re(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ce(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Sn.prototype.setStyle,_project:function(){var r=this._latlng.lng,o=this._latlng.lat,u=this._map,h=u.options.crs;if(h.distance===Nn.distance){var p=Math.PI/180,_=this._mRadius/Nn.R/p,I=u.project([o+_,r]),M=u.project([o-_,r]),z=I.add(M).divideBy(2),F=u.unproject(z).lat,H=Math.acos((Math.cos(_*p)-Math.sin(o*p)*Math.sin(F*p))/(Math.cos(o*p)*Math.cos(F*p)))/p;(isNaN(H)||H===0)&&(H=_/Math.cos(Math.PI/180*o)),this._point=z.subtract(u.getPixelOrigin()),this._radius=isNaN(H)?0:z.x-u.project([F,r-H]).x,this._radiusY=z.y-I.y}else{var ee=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(ee).x}this._updateBounds()}});function n0(r,o,u){return new Pl(r,o,u)}var on=Sn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,o){w(this,o),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var o=1/0,u=null,h=Us,p,_,I=0,M=this._parts.length;I<M;I++)for(var z=this._parts[I],F=1,H=z.length;F<H;F++){p=z[F-1],_=z[F];var ee=h(r,p,_,!0);ee<o&&(o=ee,u=h(r,p,_))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,o){return o=o||this._defaultShape(),r=re(r),o.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ce,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return kt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var o=[],u=kt(r),h=0,p=r.length;h<p;h++)u?(o[h]=re(r[h]),this._bounds.extend(o[h])):o[h]=this._convertLatLngs(r[h]);return o},_project:function(){var r=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),o=new B(r,r);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(r,o,u){var h=r[0]instanceof fe,p=r.length,_,I;if(h){for(I=[],_=0;_<p;_++)I[_]=this._map.latLngToLayerPoint(r[_]),u.extend(I[_]);o.push(I)}else for(_=0;_<p;_++)this._projectLatlngs(r[_],o,u)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,h,p,_,I,M,z;for(u=0,p=0,_=this._rings.length;u<_;u++)for(z=this._rings[u],h=0,I=z.length;h<I-1;h++)M=bh(z[h],z[h+1],r,h,!0),M&&(o[p]=o[p]||[],o[p].push(M[0]),(M[1]!==z[h+1]||h===I-2)&&(o[p].push(M[1]),p++))}},_simplifyPoints:function(){for(var r=this._parts,o=this.options.smoothFactor,u=0,h=r.length;u<h;u++)r[u]=yh(r[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,o){var u,h,p,_,I,M,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(u=0,_=this._parts.length;u<_;u++)for(M=this._parts[u],h=0,I=M.length,p=I-1;h<I;p=h++)if(!(!o&&h===0)&&_h(r,M[p],M[h])<=z)return!0;return!1}});function r0(r,o){return new on(r,o)}on._flat=jh;var Ur=on.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var o=on.prototype._convertLatLngs.call(this,r),u=o.length;return u>=2&&o[0]instanceof fe&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(r){on.prototype._setLatLngs.call(this,r),kt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return kt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,o=this.options.weight,u=new B(o,o);if(r=new te(r.min.subtract(u),r.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,p=this._rings.length,_;h<p;h++)_=vh(this._rings[h],r,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var o=!1,u,h,p,_,I,M,z,F;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(_=0,z=this._parts.length;_<z;_++)for(u=this._parts[_],I=0,F=u.length,M=F-1;I<F;M=I++)h=u[I],p=u[M],h.y>r.y!=p.y>r.y&&r.x<(p.x-h.x)*(r.y-h.y)/(p.y-h.y)+h.x&&(o=!o);return o||on.prototype._containsPoint.call(this,r,!0)}});function s0(r,o){return new Ur(r,o)}var ln=an.extend({initialize:function(r,o){w(this,o),this._layers={},r&&this.addData(r)},addData:function(r){var o=j(r)?r:r.features,u,h,p;if(o){for(u=0,h=o.length;u<h;u++)p=o[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var _=this.options;if(_.filter&&!_.filter(r))return this;var I=aa(r,_);return I?(I.feature=ca(r),I.defaultOptions=I.options,this.resetStyle(I),_.onEachFeature&&_.onEachFeature(r,I),this.addLayer(I)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=a({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(o){this._setLayerStyle(o,r)},this)},_setLayerStyle:function(r,o){r.setStyle&&(typeof o=="function"&&(o=o(r.feature)),r.setStyle(o))}});function aa(r,o){var u=r.type==="Feature"?r.geometry:r,h=u?u.coordinates:null,p=[],_=o&&o.pointToLayer,I=o&&o.coordsToLatLng||El,M,z,F,H;if(!h&&!u)return null;switch(u.type){case"Point":return M=I(h),Ph(_,r,M,o);case"MultiPoint":for(F=0,H=h.length;F<H;F++)M=I(h[F]),p.push(Ph(_,r,M,o));return new an(p);case"LineString":case"MultiLineString":return z=oa(h,u.type==="LineString"?0:1,I),new on(z,o);case"Polygon":case"MultiPolygon":return z=oa(h,u.type==="Polygon"?1:2,I),new Ur(z,o);case"GeometryCollection":for(F=0,H=u.geometries.length;F<H;F++){var ee=aa({geometry:u.geometries[F],type:"Feature",properties:r.properties},o);ee&&p.push(ee)}return new an(p);case"FeatureCollection":for(F=0,H=u.features.length;F<H;F++){var le=aa(u.features[F],o);le&&p.push(le)}return new an(p);default:throw new Error("Invalid GeoJSON object.")}}function Ph(r,o,u,h){return r?r(o,u):new sa(u,h&&h.markersInheritOptions&&h)}function El(r){return new fe(r[1],r[0],r[2])}function oa(r,o,u){for(var h=[],p=0,_=r.length,I;p<_;p++)I=o?oa(r[p],o-1,u):(u||El)(r[p]),h.push(I);return h}function Cl(r,o){return r=re(r),r.alt!==void 0?[y(r.lng,o),y(r.lat,o),y(r.alt,o)]:[y(r.lng,o),y(r.lat,o)]}function la(r,o,u,h){for(var p=[],_=0,I=r.length;_<I;_++)p.push(o?la(r[_],kt(r[_])?0:o-1,u,h):Cl(r[_],h));return!o&&u&&p.length>0&&p.push(p[0].slice()),p}function $r(r,o){return r.feature?a({},r.feature,{geometry:o}):ca(o)}function ca(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Tl={toGeoJSON:function(r){return $r(this,{type:"Point",coordinates:Cl(this.getLatLng(),r)})}};sa.include(Tl),Pl.include(Tl),ia.include(Tl),on.include({toGeoJSON:function(r){var o=!kt(this._latlngs),u=la(this._latlngs,o?1:0,!1,r);return $r(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),Ur.include({toGeoJSON:function(r){var o=!kt(this._latlngs),u=o&&!kt(this._latlngs[0]),h=la(this._latlngs,u?2:o?1:0,!0,r);return o||(h=[h]),$r(this,{type:(u?"Multi":"")+"Polygon",coordinates:h})}}),Dr.include({toMultiPoint:function(r){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(r).geometry.coordinates)}),$r(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(r){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(r);var u=o==="GeometryCollection",h=[];return this.eachLayer(function(p){if(p.toGeoJSON){var _=p.toGeoJSON(r);if(u)h.push(_.geometry);else{var I=ca(_);I.type==="FeatureCollection"?h.push.apply(h,I.features):h.push(I)}}}),u?$r(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function Eh(r,o){return new ln(r,o)}var i0=Eh,ua=At.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,o,u){this._url=r,this._bounds=xe(o),w(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Rr(this._image),this},bringToBack:function(){return this._map&&zr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=xe(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",o=this._image=r?this._url:me("img");if(ae(o,"leaflet-image-layer"),this._zoomAnimated&&ae(o,"leaflet-zoom-animated"),this.options.className&&ae(o,this.options.className),o.onselectstart=g,o.onmousemove=g,o.onload=c(this.fire,this,"load"),o.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(r){var o=this._map.getZoomScale(r.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;rr(this._image,u,o)},_reset:function(){var r=this._image,o=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();Ae(r,o.min),r.style.width=u.x+"px",r.style.height=u.y+"px"},_updateOpacity:function(){Nt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),a0=function(r,o,u){return new ua(r,o,u)},Ch=ua.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",o=this._image=r?this._url:me("video");if(ae(o,"leaflet-image-layer"),this._zoomAnimated&&ae(o,"leaflet-zoom-animated"),this.options.className&&ae(o,this.options.className),o.onselectstart=g,o.onmousemove=g,o.onloadeddata=c(this.fire,this,"load"),r){for(var u=o.getElementsByTagName("source"),h=[],p=0;p<u.length;p++)h.push(u[p].src);this._url=u.length>0?h:[o.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var I=me("source");I.src=this._url[_],o.appendChild(I)}}});function o0(r,o,u){return new Ch(r,o,u)}var Th=ua.extend({_initImage:function(){var r=this._image=this._url;ae(r,"leaflet-image-layer"),this._zoomAnimated&&ae(r,"leaflet-zoom-animated"),this.options.className&&ae(r,this.options.className),r.onselectstart=g,r.onmousemove=g}});function l0(r,o,u){return new Th(r,o,u)}var Jt=At.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,o){r&&(r instanceof fe||j(r))?(this._latlng=re(r),w(this,o)):(w(this,r),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Nt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Nt(this._container,1),this.bringToFront(),this.options.interactive&&(ae(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Nt(this._container,0),this._removeTimeout=setTimeout(c(ke,void 0,this._container),200)):ke(this._container),this.options.interactive&&(Le(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=re(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Rr(this._container),this},bringToBack:function(){return this._map&&zr(this._container),this},_prepareOpen:function(r){var o=this._source;if(!o._map)return!1;if(o instanceof an){o=null;var u=this._source._layers;for(var h in u)if(u[h]._map){o=u[h];break}if(!o)return!1;this._source=o}if(!r)if(o.getCenter)r=o.getCenter();else if(o.getLatLng)r=o.getLatLng();else if(o.getBounds)r=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),o=V(this.options.offset),u=this._getAnchor();this._zoomAnimated?Ae(this._container,r.add(u)):o=o.add(r).add(u);var h=this._containerBottom=-o.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=h+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});de.include({_initOverlay:function(r,o,u,h){var p=o;return p instanceof r||(p=new r(h).setContent(o)),u&&p.setLatLng(u),p}}),At.include({_initOverlay:function(r,o,u,h){var p=u;return p instanceof r?(w(p,h),p._source=this):(p=o&&!h?o:new r(h,this),p.setContent(u)),p}});var da=Jt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Jt.prototype.openOn.call(this,r)},onAdd:function(r){Jt.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Sn||this._source.on("preclick",ir))},onRemove:function(r){Jt.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Sn||this._source.off("preclick",ir))},getEvents:function(){var r=Jt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",o=this._container=me("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=me("div",r+"-content-wrapper",o);if(this._contentNode=me("div",r+"-content",u),Ds(o),yl(this._contentNode),se(o,"contextmenu",ir),this._tipContainer=me("div",r+"-tip-container",o),this._tip=me("div",r+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=me("a",r+"-close-button",o);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',se(h,"click",function(p){qe(p),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,o=r.style;o.width="",o.whiteSpace="nowrap";var u=r.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var h=r.offsetHeight,p=this.options.maxHeight,_="leaflet-popup-scrolled";p&&h>p?(o.height=p+"px",ae(r,_)):Le(r,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),u=this._getAnchor();Ae(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,o=parseInt(As(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,h=this._containerWidth,p=new B(this._containerLeft,-u-this._containerBottom);p._add(sr(this._container));var _=r.layerPointToContainerPoint(p),I=V(this.options.autoPanPadding),M=V(this.options.autoPanPaddingTopLeft||I),z=V(this.options.autoPanPaddingBottomRight||I),F=r.getSize(),H=0,ee=0;_.x+h+z.x>F.x&&(H=_.x+h-F.x+z.x),_.x-H-M.x<0&&(H=_.x-M.x),_.y+u+z.y>F.y&&(ee=_.y+u-F.y+z.y),_.y-ee-M.y<0&&(ee=_.y-M.y),(H||ee)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([H,ee]))}},_getAnchor:function(){return V(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),c0=function(r,o){return new da(r,o)};de.mergeOptions({closePopupOnClick:!0}),de.include({openPopup:function(r,o,u){return this._initOverlay(da,r,o,u).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),At.include({bindPopup:function(r,o){return this._popup=this._initOverlay(da,this._popup,r,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof an||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){ar(r);var o=r.layer||r.target;if(this._popup._source===o&&!(o instanceof Sn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=o,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var ha=Jt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Jt.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Jt.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Jt.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",o=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=me("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var o,u,h=this._map,p=this._container,_=h.latLngToContainerPoint(h.getCenter()),I=h.layerPointToContainerPoint(r),M=this.options.direction,z=p.offsetWidth,F=p.offsetHeight,H=V(this.options.offset),ee=this._getAnchor();M==="top"?(o=z/2,u=F):M==="bottom"?(o=z/2,u=0):M==="center"?(o=z/2,u=F/2):M==="right"?(o=0,u=F/2):M==="left"?(o=z,u=F/2):I.x<_.x?(M="right",o=0,u=F/2):(M="left",o=z+(H.x+ee.x)*2,u=F/2),r=r.subtract(V(o,u,!0)).add(H).add(ee),Le(p,"leaflet-tooltip-right"),Le(p,"leaflet-tooltip-left"),Le(p,"leaflet-tooltip-top"),Le(p,"leaflet-tooltip-bottom"),ae(p,"leaflet-tooltip-"+M),Ae(p,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Nt(this._container,r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(o)},_getAnchor:function(){return V(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),u0=function(r,o){return new ha(r,o)};de.include({openTooltip:function(r,o,u){return this._initOverlay(ha,r,o,u).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),At.include({bindTooltip:function(r,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ha,this._tooltip,r,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var o=r?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof an||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&(se(o,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),se(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var o=r.latlng,u,h;this._tooltip.options.sticky&&r.originalEvent&&(u=this._map.mouseEventToContainerPoint(r.originalEvent),h=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(o)}});var Lh=Br.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var o=r&&r.tagName==="DIV"?r:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Yi(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var h=V(u.bgPos);o.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function d0(r){return new Lh(r)}Br.Default=$s;var Fs=At.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){w(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),ke(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Rr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(zr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof B?r:new B(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var o=this.getPane().children,u=-r(-1/0,1/0),h=0,p=o.length,_;h<p;h++)_=o[h].style.zIndex,o[h]!==this._container&&_&&(u=r(u,+_));isFinite(u)&&(this.options.zIndex=u+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Y.ielt9){Nt(this._container,this.options.opacity);var r=+new Date,o=!1,u=!1;for(var h in this._tiles){var p=this._tiles[h];if(!(!p.current||!p.loaded)){var _=Math.min(1,(r-p.loaded)/200);Nt(p.el,_),_<1?o=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(D(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=me("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,o=this.options.maxZoom;if(r!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===r?(this._levels[u].el.style.zIndex=o-Math.abs(r-u),this._onUpdateLevel(u)):(ke(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var h=this._levels[r],p=this._map;return h||(h=this._levels[r]={},h.el=me("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=p.project(p.unproject(p.getPixelOrigin()),r).round(),h.zoom=r,this._setZoomTransform(h,p.getCenter(),p.getZoom()),g(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var r,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)o=this._tiles[r],o.retain=o.current;for(r in this._tiles)if(o=this._tiles[r],o.current&&!o.active){var h=o.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var o in this._tiles)this._tiles[o].coords.z===r&&this._removeTile(o)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)ke(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,o,u,h){var p=Math.floor(r/2),_=Math.floor(o/2),I=u-1,M=new B(+p,+_);M.z=+I;var z=this._tileCoordsToKey(M),F=this._tiles[z];return F&&F.active?(F.retain=!0,!0):(F&&F.loaded&&(F.retain=!0),I>h?this._retainParent(p,_,I,h):!1)},_retainChildren:function(r,o,u,h){for(var p=2*r;p<2*r+2;p++)for(var _=2*o;_<2*o+2;_++){var I=new B(p,_);I.z=u+1;var M=this._tileCoordsToKey(I),z=this._tiles[M];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);u+1<h&&this._retainChildren(p,_,u+1,h)}},_resetView:function(r){var o=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var o=this.options;return o.minNativeZoom!==void 0&&r<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<r?o.maxNativeZoom:r},_setView:function(r,o,u,h){var p=Math.round(o);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var _=this.options.updateWhenZooming&&p!==this._tileZoom;(!h||_)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(r),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(r,o)},_setZoomTransforms:function(r,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],r,o)},_setZoomTransform:function(r,o,u){var h=this._map.getZoomScale(u,r.zoom),p=r.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(o,u)).round();Y.any3d?rr(r.el,p,h):Ae(r.el,p)},_resetGrid:function(){var r=this._map,o=r.options.crs,u=this._tileSize=this.getTileSize(),h=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,o.wrapLng[0]],h).x/u.x),Math.ceil(r.project([0,o.wrapLng[1]],h).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([o.wrapLat[0],0],h).y/u.x),Math.ceil(r.project([o.wrapLat[1],0],h).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),h=o.getZoomScale(u,this._tileZoom),p=o.project(r,this._tileZoom).floor(),_=o.getSize().divideBy(h*2);return new te(p.subtract(_),p.add(_))},_update:function(r){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(r===void 0&&(r=o.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(r),p=this._pxBoundsToTileRange(h),_=p.getCenter(),I=[],M=this.options.keepBuffer,z=new te(p.getBottomLeft().subtract([M,-M]),p.getTopRight().add([M,-M]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var F in this._tiles){var H=this._tiles[F].coords;(H.z!==this._tileZoom||!z.contains(new B(H.x,H.y)))&&(this._tiles[F].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(r,u);return}for(var ee=p.min.y;ee<=p.max.y;ee++)for(var le=p.min.x;le<=p.max.x;le++){var et=new B(le,ee);if(et.z=this._tileZoom,!!this._isValidTile(et)){var Ue=this._tiles[this._tileCoordsToKey(et)];Ue?Ue.current=!0:I.push(et)}}if(I.sort(function(at,Zr){return at.distanceTo(_)-Zr.distanceTo(_)}),I.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var St=document.createDocumentFragment();for(le=0;le<I.length;le++)this._addTile(I[le],St);this._level.el.appendChild(St)}}}},_isValidTile:function(r){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(r.x<u.min.x||r.x>u.max.x)||!o.wrapLat&&(r.y<u.min.y||r.y>u.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(r);return xe(this.options.bounds).overlaps(h)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var o=this._map,u=this.getTileSize(),h=r.scaleBy(u),p=h.add(u),_=o.unproject(h,r.z),I=o.unproject(p,r.z);return[_,I]},_tileCoordsToBounds:function(r){var o=this._tileCoordsToNwSe(r),u=new Ce(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var o=r.split(":"),u=new B(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(r){var o=this._tiles[r];o&&(ke(o.el),delete this._tiles[r],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){ae(r,"leaflet-tile");var o=this.getTileSize();r.style.width=o.x+"px",r.style.height=o.y+"px",r.onselectstart=g,r.onmousemove=g,Y.ielt9&&this.options.opacity<1&&Nt(r,this.options.opacity)},_addTile:function(r,o){var u=this._getTilePos(r),h=this._tileCoordsToKey(r),p=this.createTile(this._wrapCoords(r),c(this._tileReady,this,r));this._initTile(p),this.createTile.length<2&&U(c(this._tileReady,this,r,null,p)),Ae(p,u),this._tiles[h]={el:p,coords:r,current:!0},o.appendChild(p),this.fire("tileloadstart",{tile:p,coords:r})},_tileReady:function(r,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:r});var h=this._tileCoordsToKey(r);u=this._tiles[h],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Nt(u.el,0),D(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(ae(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Y.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var o=new B(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return o.z=r.z,o},_pxBoundsToTileRange:function(r){var o=this.getTileSize();return new te(r.min.unscaleBy(o).floor(),r.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function h0(r){return new Fs(r)}var Fr=Fs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,o){this._url=r,o=w(this,o),o.detectRetina&&Y.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,o){return this._url===r&&o===void 0&&(o=!0),this._url=r,o||this.redraw(),this},createTile:function(r,o){var u=document.createElement("img");return se(u,"load",c(this._tileOnLoad,this,o,u)),se(u,"error",c(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(r),u},getTileUrl:function(r){var o={r:Y.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-r.y;this.options.tms&&(o.y=u),o["-y"]=u}return b(this._url,a(o,this.options))},_tileOnLoad:function(r,o){Y.ielt9?setTimeout(c(r,this,null,o),0):r(null,o)},_tileOnError:function(r,o,u){var h=this.options.errorTileUrl;h&&o.getAttribute("src")!==h&&(o.src=h),r(u,o)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,h=this.options.zoomOffset;return u&&(r=o-r),r+h},_getSubdomain:function(r){var o=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var r,o;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(o=this._tiles[r].el,o.onload=g,o.onerror=g,!o.complete)){o.src=S;var u=this._tiles[r].coords;ke(o),delete this._tiles[r],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(r){var o=this._tiles[r];if(o)return o.el.setAttribute("src",S),Fs.prototype._removeTile.call(this,r)},_tileReady:function(r,o,u){if(!(!this._map||u&&u.getAttribute("src")===S))return Fs.prototype._tileReady.call(this,r,o,u)}});function Ih(r,o){return new Fr(r,o)}var Oh=Fr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,o){this._url=r;var u=a({},this.defaultWmsParams);for(var h in o)h in this.options||(u[h]=o[h]);o=w(this,o);var p=o.detectRetina&&Y.retina?2:1,_=this.getTileSize();u.width=_.x*p,u.height=_.y*p,this.wmsParams=u},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Fr.prototype.onAdd.call(this,r)},getTileUrl:function(r){var o=this._tileCoordsToNwSe(r),u=this._crs,h=G(u.project(o[0]),u.project(o[1])),p=h.min,_=h.max,I=(this._wmsVersion>=1.3&&this._crs===kh?[p.y,p.x,_.y,_.x]:[p.x,p.y,_.x,_.y]).join(","),M=Fr.prototype.getTileUrl.call(this,r);return M+C(this.wmsParams,M,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+I},setParams:function(r,o){return a(this.wmsParams,r),o||this.redraw(),this}});function f0(r,o){return new Oh(r,o)}Fr.WMS=Oh,Ih.wms=f0;var cn=At.extend({options:{padding:.1},initialize:function(r){w(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,o){var u=this._map.getZoomScale(o,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,o),_=h.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(r,o));Y.any3d?rr(this._container,_,u):Ae(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-r)).round();this._bounds=new te(u,u.add(o.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ah=cn.extend({options:{tolerance:0},getEvents:function(){var r=cn.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");se(r,"mousemove",this._onMouseMove,this),se(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),se(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,ke(this._container),ye(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var o in this._layers)r=this._layers[o],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cn.prototype._update.call(this);var r=this._bounds,o=this._container,u=r.getSize(),h=Y.retina?2:1;Ae(o,r.min),o.width=h*u.x,o.height=h*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",Y.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){cn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var o=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var o=r._order,u=o.next,h=o.prev;u?u.prev=h:this._drawLast=h,h?h.next=u:this._drawFirst=u,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var o=r.options.dashArray.split(/[, ]+/),u=[],h,p;for(p=0;p<o.length;p++){if(h=Number(o[p]),isNaN(h))return;u.push(h)}r.options._dashArray=u}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var o=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(r._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(r._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var o=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)r=h.layer,(!o||r._pxBounds&&r._pxBounds.intersects(o))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,o){if(this._drawing){var u,h,p,_,I=r._parts,M=I.length,z=this._ctx;if(M){for(z.beginPath(),u=0;u<M;u++){for(h=0,p=I[u].length;h<p;h++)_=I[u][h],z[h?"lineTo":"moveTo"](_.x,_.y);o&&z.closePath()}this._fillStroke(z,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var o=r._point,u=this._ctx,h=Math.max(Math.round(r._radius),1),p=(Math.max(Math.round(r._radiusY),1)||h)/h;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(o.x,o.y/p,h,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,r)}},_fillStroke:function(r,o){var u=o.options;u.fill&&(r.globalAlpha=u.fillOpacity,r.fillStyle=u.fillColor||u.color,r.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(r.setLineDash&&r.setLineDash(o.options&&o.options._dashArray||[]),r.globalAlpha=u.opacity,r.lineWidth=u.weight,r.strokeStyle=u.color,r.lineCap=u.lineCap,r.lineJoin=u.lineJoin,r.stroke())},_onClick:function(r){for(var o=this._map.mouseEventToLayerPoint(r),u,h,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(o)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(u))&&(h=u);this._fireEvent(h?[h]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,o)}},_handleMouseOut:function(r){var o=this._hoveredLayer;o&&(Le(this._container,"leaflet-interactive"),this._fireEvent([o],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,o){if(!this._mouseHoverThrottled){for(var u,h,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(o)&&(h=u);h!==this._hoveredLayer&&(this._handleMouseOut(r),h&&(ae(this._container,"leaflet-interactive"),this._fireEvent([h],r,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,o,u){this._map._fireDOMEvent(o,u||o.type,r)},_bringToFront:function(r){var o=r._order;if(o){var u=o.next,h=o.prev;if(u)u.prev=h;else return;h?h.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(r)}},_bringToBack:function(r){var o=r._order;if(o){var u=o.next,h=o.prev;if(h)h.next=u;else return;u?u.prev=h:h&&(this._drawLast=h),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(r)}}});function Mh(r){return Y.canvas?new Ah(r):null}var Zs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),m0={_initContainer:function(){this._container=me("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cn.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var o=r._container=Zs("shape");ae(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",r._path=Zs("path"),o.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var o=r._container;this._container.appendChild(o),r.options.interactive&&r.addInteractiveTarget(o)},_removePath:function(r){var o=r._container;ke(o),r.removeInteractiveTarget(o),delete this._layers[d(r)]},_updateStyle:function(r){var o=r._stroke,u=r._fill,h=r.options,p=r._container;p.stroked=!!h.stroke,p.filled=!!h.fill,h.stroke?(o||(o=r._stroke=Zs("stroke")),p.appendChild(o),o.weight=h.weight+"px",o.color=h.color,o.opacity=h.opacity,h.dashArray?o.dashStyle=j(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=h.lineCap.replace("butt","flat"),o.joinstyle=h.lineJoin):o&&(p.removeChild(o),r._stroke=null),h.fill?(u||(u=r._fill=Zs("fill")),p.appendChild(u),u.color=h.fillColor||h.color,u.opacity=h.fillOpacity):u&&(p.removeChild(u),r._fill=null)},_updateCircle:function(r){var o=r._point.round(),u=Math.round(r._radius),h=Math.round(r._radiusY||u);this._setPath(r,r._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+h+" 0,"+65535*360)},_setPath:function(r,o){r._path.v=o},_bringToFront:function(r){Rr(r._container)},_bringToBack:function(r){zr(r._container)}},fa=Y.vml?Zs:Bd,qs=cn.extend({_initContainer:function(){this._container=fa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ke(this._container),ye(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){cn.prototype._update.call(this);var r=this._bounds,o=r.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),Ae(u,r.min),u.setAttribute("viewBox",[r.min.x,r.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(r){var o=r._path=fa("path");r.options.className&&ae(o,r.options.className),r.options.interactive&&ae(o,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){ke(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var o=r._path,u=r.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(r,o){this._setPath(r,Ud(r._parts,o))},_updateCircle:function(r){var o=r._point,u=Math.max(Math.round(r._radius),1),h=Math.max(Math.round(r._radiusY),1)||u,p="a"+u+","+h+" 0 1,0 ",_=r._empty()?"M0 0":"M"+(o.x-u)+","+o.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(r,_)},_setPath:function(r,o){r._path.setAttribute("d",o)},_bringToFront:function(r){Rr(r._path)},_bringToBack:function(r){zr(r._path)}});Y.vml&&qs.include(m0);function Rh(r){return Y.svg||Y.vml?new qs(r):null}de.include({getRenderer:function(r){var o=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var o=this._paneRenderers[r];return o===void 0&&(o=this._createRenderer({pane:r}),this._paneRenderers[r]=o),o},_createRenderer:function(r){return this.options.preferCanvas&&Mh(r)||Rh(r)}});var zh=Ur.extend({initialize:function(r,o){Ur.prototype.initialize.call(this,this._boundsToLatLngs(r),o)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=xe(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function p0(r,o){return new zh(r,o)}qs.create=fa,qs.pointsToPath=Ud,ln.geometryToLayer=aa,ln.coordsToLatLng=El,ln.coordsToLatLngs=oa,ln.latLngToCoords=Cl,ln.latLngsToCoords=la,ln.getFeature=$r,ln.asFeature=ca,de.mergeOptions({boxZoom:!0});var Dh=Kt.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ms(),dl(),this._startPoint=this._map.mouseEventToContainerPoint(r),se(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=me("div","leaflet-zoom-box",this._container),ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var o=new te(this._point,this._startPoint),u=o.getSize();Ae(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(ke(this._box),Le(this._container,"leaflet-crosshair")),Rs(),hl(),ye(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var o=new Ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});de.addInitHook("addHandler","boxZoom",Dh),de.mergeOptions({doubleClickZoom:!0});var Bh=Kt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var o=this._map,u=o.getZoom(),h=o.options.zoomDelta,p=r.originalEvent.shiftKey?u-h:u+h;o.options.doubleClickZoom==="center"?o.setZoom(p):o.setZoomAround(r.containerPoint,p)}});de.addInitHook("addHandler","doubleClickZoom",Bh),de.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Uh=Kt.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new kn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Le(this._map._container,"leaflet-grab"),Le(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=xe(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,o){return r-(r-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;r.x<o.min.x&&(r.x=this._viscousLimit(r.x,o.min.x)),r.y<o.min.y&&(r.y=this._viscousLimit(r.y,o.min.y)),r.x>o.max.x&&(r.x=this._viscousLimit(r.x,o.max.x)),r.y>o.max.y&&(r.y=this._viscousLimit(r.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,o=Math.round(r/2),u=this._initialWorldOffset,h=this._draggable._newPos.x,p=(h-o+u)%r+o-u,_=(h+o+u)%r-o-u,I=Math.abs(p+u)<Math.abs(_+u)?p:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=I},_onDragEnd:function(r){var o=this._map,u=o.options,h=!u.inertia||r.noInertia||this._times.length<2;if(o.fire("dragend",r),h)o.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,I=u.easeLinearity,M=p.multiplyBy(I/_),z=M.distanceTo([0,0]),F=Math.min(u.inertiaMaxSpeed,z),H=M.multiplyBy(F/z),ee=F/(u.inertiaDeceleration*I),le=H.multiplyBy(-ee/2).round();!le.x&&!le.y?o.fire("moveend"):(le=o._limitOffset(le,o.options.maxBounds),U(function(){o.panBy(le,{duration:ee,easeLinearity:I,noMoveStart:!0,animate:!0})}))}}});de.addInitHook("addHandler","dragging",Uh),de.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $h=Kt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),se(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ye(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,o=document.documentElement,u=r.scrollTop||o.scrollTop,h=r.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(h,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var o=this._panKeys={},u=this.keyCodes,h,p;for(h=0,p=u.left.length;h<p;h++)o[u.left[h]]=[-1*r,0];for(h=0,p=u.right.length;h<p;h++)o[u.right[h]]=[r,0];for(h=0,p=u.down.length;h<p;h++)o[u.down[h]]=[0,r];for(h=0,p=u.up.length;h<p;h++)o[u.up[h]]=[0,-1*r]},_setZoomDelta:function(r){var o=this._zoomKeys={},u=this.keyCodes,h,p;for(h=0,p=u.zoomIn.length;h<p;h++)o[u.zoomIn[h]]=r;for(h=0,p=u.zoomOut.length;h<p;h++)o[u.zoomOut[h]]=-r},_addHooks:function(){se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=r.keyCode,u=this._map,h;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(h=this._panKeys[o],r.shiftKey&&(h=V(h).multiplyBy(3)),u.options.maxBounds&&(h=u._limitOffset(V(h),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(h)));u.panTo(p)}else u.panBy(h)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;ar(r)}}});de.addInitHook("addHandler","keyboard",$h),de.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fh=Kt.extend({addHooks:function(){se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var o=hh(r),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var h=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),h),ar(r)},_performZoom:function(){var r=this._map,o=r.getZoom(),u=this._map.options.zoomSnap||0;r._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,_=u?Math.ceil(p/u)*u:p,I=r._limitZoom(o+(this._delta>0?_:-_))-o;this._delta=0,this._startTime=null,I&&(r.options.scrollWheelZoom==="center"?r.setZoom(o+I):r.setZoomAround(this._lastMousePos,o+I))}});de.addInitHook("addHandler","scrollWheelZoom",Fh);var g0=600;de.mergeOptions({tapHold:Y.touchNative&&Y.safari&&Y.mobile,tapTolerance:15});var Zh=Kt.extend({addHooks:function(){se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var o=r.touches[0];this._startPos=this._newPos=new B(o.clientX,o.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(se(document,"touchend",qe),se(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),g0),se(document,"touchend touchcancel contextmenu",this._cancel,this),se(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){ye(document,"touchend",qe),ye(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)},_onMove:function(r){var o=r.touches[0];this._newPos=new B(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,o){var u=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});de.addInitHook("addHandler","tapHold",Zh),de.mergeOptions({touchZoom:Y.touch,bounceAtZoomLimits:!0});var qh=Kt.extend({addHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Le(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var o=this._map;if(!(!r.touches||r.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(r.touches[0]),h=o.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(h)._divideBy(2))),this._startDist=u.distanceTo(h),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),se(document,"touchmove",this._onTouchMove,this),se(document,"touchend touchcancel",this._onTouchEnd,this),qe(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(r.touches[0]),h=o.mouseEventToContainerPoint(r.touches[1]),p=u.distanceTo(h)/this._startDist;if(this._zoom=o.getScaleZoom(p,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&p<1||this._zoom>o.getMaxZoom()&&p>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var _=u._add(h)._divideBy(2)._subtract(this._centerPoint);if(p===1&&_.x===0&&_.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var I=c(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(I,this,!0),qe(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});de.addInitHook("addHandler","touchZoom",qh),de.BoxZoom=Dh,de.DoubleClickZoom=Bh,de.Drag=Uh,de.Keyboard=$h,de.ScrollWheelZoom=Fh,de.TapHold=Zh,de.TouchZoom=qh,n.Bounds=te,n.Browser=Y,n.CRS=it,n.Canvas=Ah,n.Circle=Pl,n.CircleMarker=ia,n.Class=ne,n.Control=Ot,n.DivIcon=Lh,n.DivOverlay=Jt,n.DomEvent=Ax,n.DomUtil=Ix,n.Draggable=kn,n.Evented=pe,n.FeatureGroup=an,n.GeoJSON=ln,n.GridLayer=Fs,n.Handler=Kt,n.Icon=Br,n.ImageOverlay=ua,n.LatLng=fe,n.LatLngBounds=Ce,n.Layer=At,n.LayerGroup=Dr,n.LineUtil=Hx,n.Map=de,n.Marker=sa,n.Mixin=$x,n.Path=Sn,n.Point=B,n.PolyUtil=Fx,n.Polygon=Ur,n.Polyline=on,n.Popup=da,n.PosAnimation=fh,n.Projection=Gx,n.Rectangle=zh,n.Renderer=cn,n.SVG=qs,n.SVGOverlay=Th,n.TileLayer=Fr,n.Tooltip=ha,n.Transformation=Xo,n.Util=J,n.VideoOverlay=Ch,n.bind=c,n.bounds=G,n.canvas=Mh,n.circle=n0,n.circleMarker=t0,n.control=Bs,n.divIcon=d0,n.extend=a,n.featureGroup=Yx,n.geoJSON=Eh,n.geoJson=i0,n.gridLayer=h0,n.icon=Xx,n.imageOverlay=a0,n.latLng=re,n.latLngBounds=xe,n.layerGroup=Qx,n.map=Mx,n.marker=e0,n.point=V,n.polygon=s0,n.polyline=r0,n.popup=c0,n.rectangle=p0,n.setOptions=w,n.stamp=d,n.svg=Rh,n.svgOverlay=l0,n.tileLayer=Ih,n.tooltip=u0,n.transformation=Ls,n.version=s,n.videoOverlay=o0;var v0=window.L;n.noConflict=function(){return window.L=v0,this},window.L=n})})(ju,ju.exports);var Ki=ju.exports;const Hv=Um(Ki);function Md(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Rd(t,e){return e==null?function(s,a){const l=E.useRef();return l.current||(l.current=t(s,a)),l}:function(s,a){const l=E.useRef();l.current||(l.current=t(s,a));const c=E.useRef(s),{instance:f}=l.current;return E.useEffect(function(){c.current!==s&&(e(f,s,c.current),c.current=s)},[f,s,a]),l}}function tN(t,e){E.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var l;(l=e.layerContainer)==null||l.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Gv(t){return function(n){const s=Vv(),a=t(Ad(n,s),s);return Fv(s.map,n.attribution),Wv(a.current,n.eventHandlers),tN(a.current,s),a}}function nN(t,e){const n=Rd(t,e),s=Gv(n);return Q1(s)}function rN(t,e){const n=Rd(t),s=eN(n,e);return Y1(s)}function sN(t,e){const n=Rd(t,e),s=Gv(n);return X1(s)}function iN(t,e,n){const{opacity:s,zIndex:a}=e;s!=null&&s!==n.opacity&&t.setOpacity(s),a!=null&&a!==n.zIndex&&t.setZIndex(a)}function Nu(){return Nu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Nu.apply(this,arguments)}function aN({bounds:t,boundsOptions:e,center:n,children:s,className:a,id:l,placeholder:c,style:f,whenReady:d,zoom:m,...v},g){const[y]=E.useState({className:a,id:l,style:f}),[x,P]=E.useState(null);E.useImperativeHandle(g,()=>(x==null?void 0:x.map)??null,[x]);const w=E.useCallback(N=>{if(N!==null&&x===null){const b=new Ki.Map(N,v);n!=null&&m!=null?b.setView(n,m):t!=null&&b.fitBounds(t,e),d!=null&&b.whenReady(d),P(K1(b))}},[]);E.useEffect(()=>()=>{x==null||x.map.remove()},[x]);const C=x?tn.createElement(qv,{value:x},s):c??null;return tn.createElement("div",Nu({},y,{ref:w}),C)}const oN=E.forwardRef(aN),lN=nN(function({position:e,...n},s){const a=new Ki.Marker(e,n);return Md(a,J1(s,{overlayContainer:a}))},function(e,n,s){n.position!==s.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==s.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==s.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==s.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),cN=rN(function(e,n){const s=new Ki.Popup(e,n.overlayContainer);return Md(s,n)},function(e,n,{position:s},a){E.useEffect(function(){const{instance:c}=e;function f(m){m.popup===c&&(c.update(),a(!0))}function d(m){m.popup===c&&a(!1)}return n.map.on({popupopen:f,popupclose:d}),n.overlayContainer==null?(s!=null&&c.setLatLng(s),c.openOn(n.map)):n.overlayContainer.bindPopup(c),function(){var v;n.map.off({popupopen:f,popupclose:d}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(c)}},[e,n,a,s])}),uN=sN(function({url:e,...n},s){const a=new Ki.TileLayer(e,Ad(n,s));return Md(a,s)},function(e,n,s){iN(e,n,s);const{url:a}=n;a!=null&&a!==s.url&&e.setUrl(a)});delete Hv.Icon.Default.prototype._getIconUrl;Hv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const dN=({latitude:t,longitude:e,title:n="Ubicación de la propiedad",address:s,height:a="300px",zoom:l=15,showMarker:c=!0,className:f=""})=>{const d=19.432608,m=-99.133209,v=t||d,g=e||m,y=t&&e;return i.jsxs("div",{className:`relative ${f}`,children:[i.jsxs(oN,{center:[v,g],zoom:l,style:{height:a,width:"100%"},className:"rounded-lg",children:[i.jsx(uN,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),c&&y&&i.jsx(lN,{position:[v,g],children:i.jsx(cN,{children:i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:n}),s&&i.jsx("p",{className:"text-sm text-gray-600",children:s}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Lat: ",v.toFixed(6),", Lng: ",g.toFixed(6)]})]})})})]}),!y&&i.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-75 flex items-center justify-center rounded-lg",children:i.jsxs("div",{className:"text-center p-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsxs("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),i.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Ubicación no disponible"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"La propiedad no tiene coordenadas de ubicación"})]})})]})},hN=({propertyId:t,propertyTitle:e,propertyAddress:n,agentId:s,isOpen:a,onClose:l,onScheduled:c})=>{var U;const{user:f}=pt(),[d,m]=E.useState(!1),[v,g]=E.useState(1),[y,x]=E.useState(""),[P,w]=E.useState(""),[C,N]=E.useState({name:((U=f==null?void 0:f.user_metadata)==null?void 0:U.full_name)||"",email:(f==null?void 0:f.email)||"",phone:"",message:""}),b=()=>{const D=[],J=new Date;for(let ne=1;ne<=30;ne++){const ge=new Date(J);ge.setDate(J.getDate()+ne),ge.getDay()!==0&&ge.getDay()!==6&&D.push(ge.toISOString().split("T")[0])}return D},j=()=>{const D=[];for(let ge=9;ge<18;ge++)D.push({time:`${ge.toString().padStart(2,"0")}:00`,available:!0}),D.push({time:`${ge.toString().padStart(2,"0")}:30`,available:!0});return D},T=b(),S=j(),k=async()=>{if(!y||!P||!C.name||!C.email){alert("Por favor completa todos los campos requeridos");return}m(!0);try{const D={property_id:t,agent_id:s,visitor_name:C.name,visitor_email:C.email,visitor_phone:C.phone,preferred_date:y,preferred_time:P,message:C.message,status:"pending"},{data:J,error:ne}=await W.from("property_visits").insert([D]).select().single();if(ne)throw ne;await O(J),c==null||c(),g(3)}catch(D){console.error("Error scheduling visit:",D),alert("Error al agendar la visita. Por favor intenta nuevamente.")}finally{m(!1)}},O=async D=>{try{console.log("Notification sent to agent:",D)}catch(J){console.error("Error sending notification:",J)}},R=D=>new Date(D).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),A=()=>{var D;g(1),x(""),w(""),N({name:((D=f==null?void 0:f.user_metadata)==null?void 0:D.full_name)||"",email:(f==null?void 0:f.email)||"",phone:"",message:""})},$=()=>{A(),l()};return a?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Agendar Visita"}),i.jsx("button",{onClick:$,className:"text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx(Gi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:e}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:n})]})]}),i.jsx("div",{className:"flex items-center justify-center mb-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${v>=1?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"}`,children:"1"}),i.jsx("div",{className:`w-12 h-1 ${v>=2?"bg-primary-600":"bg-gray-200"}`}),i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${v>=2?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"}`,children:"2"}),i.jsx("div",{className:`w-12 h-1 ${v>=3?"bg-primary-600":"bg-gray-200"}`}),i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${v>=3?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"}`,children:"3"})]})}),v===1&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[i.jsx(Hn,{className:"h-5 w-5 mr-2"}),"Selecciona una fecha"]}),i.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-64 overflow-y-auto",children:T.map(D=>i.jsx("button",{onClick:()=>x(D),className:`p-3 text-left rounded-lg border transition-colors ${y===D?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:R(D)},D))}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{onClick:()=>g(2),disabled:!y,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Continuar"})})]}),v===2&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[i.jsx(Vt,{className:"h-5 w-5 mr-2"}),"Horario y datos de contacto"]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:i.jsxs("p",{className:"text-sm text-blue-700",children:[i.jsx("strong",{children:"Fecha seleccionada:"})," ",R(y)]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horario preferido"}),i.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto",children:S.map(D=>i.jsx("button",{onClick:()=>w(D.time),disabled:!D.available,className:`p-2 text-sm rounded border transition-colors ${P===D.time?"border-primary-600 bg-primary-50 text-primary-700":D.available?"border-gray-200 hover:border-gray-300 text-gray-700":"border-gray-100 bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:D.time},D.time))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",value:C.name,onChange:D=>N(J=>({...J,name:D.target.value})),className:"input-field pl-10",placeholder:"Tu nombre completo",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"email",value:C.email,onChange:D=>N(J=>({...J,email:D.target.value})),className:"input-field pl-10",placeholder:"tu@email.com",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"tel",value:C.phone,onChange:D=>N(J=>({...J,phone:D.target.value})),className:"input-field pl-10",placeholder:"+1 234 567 8900"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje adicional"}),i.jsx("textarea",{value:C.message,onChange:D=>N(J=>({...J,message:D.target.value})),className:"input-field resize-none",rows:3,placeholder:"Información adicional o preguntas específicas..."})]})]}),i.jsxs("div",{className:"mt-6 flex justify-between",children:[i.jsx("button",{onClick:()=>g(1),className:"btn-secondary",children:"Volver"}),i.jsx("button",{onClick:k,disabled:d||!P||!C.name||!C.email,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Agendando...":"Agendar Visita"})]})]}),v===3&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(bo,{className:"h-8 w-8 text-green-600"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"¡Visita Agendada!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Tu solicitud de visita ha sido enviada al agente. Te contactarán pronto para confirmar los detalles."}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Resumen de tu visita:"}),i.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Fecha:"})," ",R(y)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Hora:"})," ",P]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Contacto:"})," ",C.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",C.email]}),C.phone&&i.jsxs("p",{children:[i.jsx("strong",{children:"Teléfono:"})," ",C.phone]})]})]}),i.jsx("button",{onClick:$,className:"btn-primary w-full",children:"Cerrar"})]})]})]})}):null};function fN({propertyId:t,agentId:e,agentName:n,propertyTitle:s,onClose:a,isOpen:l}){const{sessions:c,activeSession:f,messages:d,loading:m,sending:v,currentUser:g,createChatSession:y,fetchMessages:x,sendMessage:P,setActiveSession:w}=Od(t),[C,N]=E.useState(""),b=E.useRef(null);E.useEffect(()=>{var k;(k=b.current)==null||k.scrollIntoView({behavior:"smooth"})},[d]),E.useEffect(()=>{if(l&&c.length>0){const k=c.find(O=>O.property_id===t);k&&(w(k),x(k.id))}},[l,c,t,w,x]);const j=async()=>{if(!g)return;const k=await y({property_id:t,agent_id:e,initial_message:`Hola, estoy interesado en la propiedad "${s}". ¿Podrías brindarme más información?`});k&&(w(k),x(k.id))},T=async k=>{k.preventDefault(),!(!C.trim()||!f||v)&&(await P({conversation_id:f.id,message_text:C.trim()}),N(""))},S=k=>{const O=new Date(k),A=Math.floor((new Date().getTime()-O.getTime())/6e4);return A<1?"Ahora":A<60?`${A}m`:A<1440?`${Math.floor(A/60)}h`:O.toLocaleDateString("es-ES",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return l?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md h-[600px] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50 rounded-t-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(Wt,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:n}),i.jsx("p",{className:"text-sm text-gray-500 truncate max-w-48",children:s})]})]}),i.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:i.jsx(Gi,{className:"w-5 h-5 text-gray-500"})})]}),f?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:m?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):i.jsxs(i.Fragment,{children:[d.map(k=>{const O=k.sender_id===(g==null?void 0:g.id);return k.message_type==="system"?i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"bg-gray-100 px-4 py-2 rounded-full text-xs text-gray-600 flex items-center space-x-1",children:[i.jsx(Er,{className:"w-3 h-3"}),i.jsx("span",{children:k.message_text})]})},k.id):i.jsx("div",{className:`flex ${O?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${O?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[i.jsx("p",{className:"text-sm",children:k.message_text}),i.jsxs("div",{className:`flex items-center justify-between mt-1 text-xs ${O?"text-blue-100":"text-gray-500"}`,children:[i.jsx("span",{children:S(k.created_at)}),O&&i.jsx(j1,{className:`w-3 h-3 ml-2 ${k.is_read?"text-blue-200":"text-blue-300"}`})]})]})},k.id)}),i.jsx("div",{ref:b})]})}),i.jsx("form",{onSubmit:T,className:"p-4 border-t bg-gray-50",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("input",{type:"text",value:C,onChange:k=>N(k.target.value),placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:v}),i.jsx("button",{type:"submit",disabled:!C.trim()||v,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(A1,{className:"w-5 h-5"})})]})})]}):i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(en,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Contactar al agente"}),i.jsxs("p",{className:"text-gray-600 mb-6 text-sm",children:["Inicia una conversación con ",n," sobre esta propiedad. Podrás obtener información detallada y agendar una visita."]}),i.jsxs("button",{onClick:j,disabled:m,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[i.jsx(en,{className:"w-4 h-4"}),i.jsx("span",{children:m?"Iniciando...":"Iniciar chat"})]})]})]})}):null}function mN({propertyId:t,agentId:e,agentName:n,propertyTitle:s,className:a=""}){const[l,c]=E.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>c(!0),className:`bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2 ${a}`,children:[i.jsx(en,{className:"w-4 h-4"}),i.jsx("span",{children:"Contactar"})]}),i.jsx(fN,{propertyId:t,agentId:e,agentName:n,propertyTitle:s,isOpen:l,onClose:()=>c(!1)})]})}function pN(){var S;const{id:t}=Lv(),[e,n]=E.useState(null),[s,a]=E.useState(!0),[l,c]=E.useState(0),[f,d]=E.useState(!1),[m,v]=E.useState(!1),{startTracking:g,trackContact:y,trackAction:x,endTracking:P}=H1(t||"","direct"),w=E.useRef(null);E.useEffect(()=>(t&&(N(t),C()),()=>{w.current&&P()}),[t]);const C=async()=>{w.current=await g()},N=async k=>{a(!0);try{const{data:O,error:R}=await W.from("properties").select("*").eq("id",k).single();if(R)throw R;if(O){const{data:A}=await W.from("user_profiles").select("full_name, phone, email").eq("id",O.agent_id).single();n({...O,agents:A})}}catch(O){console.error("Error fetching property:",O),n(null)}a(!1)},b=(k,O)=>{const R=new Intl.NumberFormat("es-MX",{style:"currency",currency:"USD"});return O==="alquiler"?`${R.format(k)}/mes`:R.format(k)},j=k=>({casa:"Casa",departamento:"Departamento",oficina:"Oficina",local_comercial:"Local Comercial",terreno:"Terreno",bodega:"Bodega",quinta:"Quinta",penthouse:"Penthouse"})[k]||k,T=k=>({draft:"Borrador",active:"Activa",paused:"Pausada",expired:"Expirada",sold:"Vendida",rented:"Alquilada"})[k]||k;return s?i.jsx("div",{className:"min-h-screen flex justify-center items-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e?i.jsxs("div",{className:"min-h-screen bg-white",children:[i.jsx("div",{className:"bg-white border-b",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(oe,{to:"/properties",className:"flex items-center space-x-2 text-primary-600 hover:text-primary-700 transition-colors",children:[i.jsx(Rv,{className:"h-5 w-5"}),i.jsx("span",{children:"Volver a propiedades"})]}),i.jsx("button",{onClick:()=>{const k=!f;d(k),x(k?"favorite":"unfavorite",{action:k?"add":"remove"})},className:`p-2 rounded-full transition-colors ${f?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:i.jsx(jo,{className:`h-6 w-6 ${f?"fill-current":""}`})})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8 p-6 bg-green-50 border-2 border-green-200 rounded-lg",children:[i.jsx("h2",{className:"text-lg font-bold text-green-800 mb-2",children:"✅ SISTEMA DE IMÁGENES FUNCIONANDO"}),i.jsx("p",{className:"text-green-700",children:"El problema de las imágenes ha sido resuelto. Ahora puedes:"}),i.jsxs("ul",{className:"text-green-700 mt-2 ml-4 list-disc",children:[i.jsx("li",{children:'Subir imágenes desde "Agregar Propiedad" sin errores'}),i.jsx("li",{children:"Ver las imágenes correctamente en los listados"}),i.jsx("li",{children:"Disfrutar de un sistema de storage optimizado"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:e.images&&e.images.length>0?e.images[l]:"https://via.placeholder.com/800x400/f3f4f6/9ca3af?text=Sin+Imagen",alt:e.title,className:"w-full h-96 object-cover rounded-lg",onError:k=>{console.log("Error loading image:",e.images[l]),k.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzljYTNhZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkVycm9yIGNhcmdhbmRvIGltYWdlbjwvdGV4dD48L3N2Zz4=",k.currentTarget.onerror=null}}),e.images&&e.images.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>c(l>0?l-1:e.images.length-1),className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:"←"}),i.jsx("button",{onClick:()=>c(l<e.images.length-1?l+1:0),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:"→"})]})]}),e.images&&e.images.length>1&&i.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:e.images.map((k,O)=>i.jsx("button",{onClick:()=>c(O),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${O===l?"border-primary-600":"border-gray-200 hover:border-gray-300"}`,children:i.jsx("img",{src:k,alt:`${e.title} - imagen ${O+1}`,className:"w-full h-full object-cover",onError:R=>{console.log("Error loading thumbnail:",k),R.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5FcnJvcjwvdGV4dD48L3N2Zz4=",R.currentTarget.onerror=null}})},O))})]}),i.jsxs("div",{className:"mt-8 space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e.title}),i.jsx("span",{className:"text-sm bg-gray-100 text-gray-700 px-3 py-1 rounded-full",children:j(e.property_type)})]}),e.status&&e.status!=="active"&&i.jsx("div",{className:"mb-4 p-3 rounded-lg border-l-4 border-yellow-400 bg-yellow-50",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-yellow-600",children:"⚠️"})}),i.jsx("div",{className:"ml-2",children:i.jsxs("p",{className:"text-sm text-yellow-700",children:["Esta propiedad está en estado:"," ",i.jsx("strong",{children:T(e.status)}),e.status==="draft"&&" - No es visible para el público",e.status==="paused"&&" - Temporalmente oculta",e.status==="expired"&&" - El período de publicación ha expirado",e.status==="sold"&&" - Ya ha sido vendida",e.status==="rented"&&" - Ya ha sido alquilada"]})})]})}),i.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[i.jsx(wt,{className:"h-5 w-5 mr-2"}),i.jsxs("span",{children:[e.address,", ",e.city,e.state?`, ${e.state}`:""]})]}),i.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-6",children:b(e.price,e.transaction_type)})]}),(e.bedrooms||e.bathrooms||e.area_total||e.parking_spaces&&e.parking_spaces>0)&&i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Características"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.bedrooms&&e.bedrooms>0&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Cd,{className:"h-5 w-5 text-gray-600"}),i.jsxs("span",{className:"text-gray-700",children:[e.bedrooms," habitaciones"]})]}),e.bathrooms&&e.bathrooms>0&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ed,{className:"h-5 w-5 text-gray-600"}),i.jsxs("span",{className:"text-gray-700",children:[e.bathrooms," baños"]})]}),e.area_total&&e.area_total>0&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Id,{className:"h-5 w-5 text-gray-600"}),i.jsxs("span",{className:"text-gray-700",children:[e.area_total," m²"]})]}),e.parking_spaces&&e.parking_spaces>0&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zv,{className:"h-5 w-5 text-gray-600"}),i.jsxs("span",{className:"text-gray-700",children:[e.parking_spaces," estacionamientos"]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Descripción"}),i.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:e.description})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información de la propiedad"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Tipo de operación:"}),i.jsx("p",{className:"font-medium",children:e.transaction_type==="venta"?"Venta":"Alquiler"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Estado:"}),i.jsx("p",{className:"font-medium",children:e.status==="published"?"Disponible":"No disponible"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Publicado:"}),i.jsx("p",{className:"font-medium",children:new Date(e.created_at).toLocaleDateString("es-MX")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Actualizado:"}),i.jsx("p",{className:"font-medium",children:new Date(e.updated_at).toLocaleDateString("es-MX")})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ubicación"}),e.latitude&&e.longitude&&i.jsxs("button",{onClick:()=>{const k=`https://www.google.com/maps/dir/?api=1&destination=${e.latitude},${e.longitude}`;window.open(k,"_blank"),x("directions_request",{method:"google_maps",destination:`${e.latitude},${e.longitude}`})},className:"flex items-center space-x-1 text-primary-600 hover:text-primary-700 text-sm font-medium transition-colors",children:[i.jsx(Uv,{className:"h-4 w-4"}),i.jsx("span",{children:"Cómo llegar"})]})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"flex items-start space-x-2 text-gray-600",children:[i.jsx(wt,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm",children:e.address}),i.jsxs("p",{className:"text-sm",children:[e.city,e.state?`, ${e.state}`:"",e.country?`, ${e.country}`:""]}),e.postal_code&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["CP: ",e.postal_code]})]})]})}),i.jsx(dN,{latitude:e.latitude,longitude:e.longitude,title:e.title,address:e.address,height:"400px",zoom:16,className:"mt-4"}),e.latitude&&e.longitude&&i.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[i.jsxs("span",{children:["Coordenadas: ",e.latitude.toFixed(6),","," ",e.longitude.toFixed(6)]}),i.jsx("span",{children:"Mapa interactivo - Arrastra para explorar"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contactar al agente"}),i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary-600 text-white rounded-full flex items-center justify-center",children:i.jsx(Wt,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Agente PropFinder"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Agente certificado"})]})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[i.jsx(Ar,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"+52 55 1234 5678"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[i.jsx(Or,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"contacto@propfinder.com"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"btn-primary w-full",onClick:()=>{y(),x("phone_contact",{method:"call"})},children:"Llamar ahora"}),i.jsx(mN,{propertyId:e.id,agentId:e.agent_id,agentName:((S=e.agents)==null?void 0:S.full_name)||"Agente",propertyTitle:e.title,className:"w-full"}),i.jsx("button",{className:"btn-secondary w-full",onClick:()=>{x("visit_request",{method:"schedule"}),v(!0)},children:"Agendar visita"})]})]})}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Calculadora de hipoteca"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enganche (%)"}),i.jsx("input",{type:"number",defaultValue:"20",className:"input-field",min:"0",max:"100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plazo (años)"}),i.jsx("input",{type:"number",defaultValue:"20",className:"input-field",min:"1",max:"30"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tasa de interés (%)"}),i.jsx("input",{type:"number",defaultValue:"8.5",step:"0.1",className:"input-field"})]}),i.jsx("button",{className:"btn-secondary w-full",children:"Calcular mensualidad"})]})]})})]})]})]}),e&&i.jsx(hN,{propertyId:e.id,propertyTitle:e.title,propertyAddress:e.address,agentId:e.agent_id,isOpen:m,onClose:()=>v(!1),onScheduled:()=>{console.log("Visit scheduled successfully")}})]}):i.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Propiedad no encontrada"}),i.jsx(oe,{to:"/properties",className:"btn-primary",children:"Ver todas las propiedades"})]})}function gN(){const[t,e]=E.useState(""),[n,s]=E.useState(""),[a,l]=E.useState(!1),[c,f]=E.useState(""),{signIn:d,user:m,isAdmin:v,loading:g}=pt();if(g)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(m&&v)return i.jsx(sn,{to:"/admin",replace:!0});if(m&&!v)return i.jsx(sn,{to:"/",replace:!0});const y=async x=>{x.preventDefault(),l(!0),f("");try{const{error:P}=await d(t,n);P&&f(P.message||"Error al iniciar sesión")}catch{f("Error inesperado al iniciar sesión")}finally{l(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:i.jsx(C1,{className:"h-6 w-6 text-blue-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Iniciar Sesión - Admin"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Acceso exclusivo para administradores"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[c&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Er,{className:"h-5 w-5 text-red-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error de autenticación"}),i.jsx("div",{className:"mt-2 text-sm text-red-700",children:c})]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Wt,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email del administrador",value:t,onChange:x=>e(x.target.value)})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(_u,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:n,onChange:x=>s(x.target.value)})]})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Iniciando sesión..."]}):"Iniciar Sesión"})})]}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-gray-500",children:"Demo: admin@propfinder.com / admin123"})})]})})}function vN(){const[t,e]=E.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[n,s]=E.useState(!1),[a,l]=E.useState(""),[c,f]=E.useState(!1),{signUp:d,user:m}=pt();if(m)return i.jsx(sn,{to:"/",replace:!0});const v=y=>{e({...t,[y.target.name]:y.target.value})},g=async y=>{if(y.preventDefault(),s(!0),l(""),!t.firstName.trim()||!t.lastName.trim()){l("El nombre y apellido son obligatorios"),s(!1);return}if(t.password!==t.confirmPassword){l("Las contraseñas no coinciden"),s(!1);return}if(t.password.length<6){l("La contraseña debe tener al menos 6 caracteres"),s(!1);return}try{const x=`${t.firstName.trim()} ${t.lastName.trim()}`,{error:P}=await d(t.email,t.password,x,t.firstName.trim(),t.lastName.trim());P?l(P.message||"Error al crear la cuenta"):f(!0)}catch{l("Error inesperado al crear la cuenta")}finally{s(!1)}};return c?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-md w-full space-y-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-green-100",children:i.jsx($t,{className:"h-6 w-6 text-green-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"¡Cuenta Creada Exitosamente!"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Tu cuenta ha sido creada como comprador. Revisa tu email para confirmar tu cuenta."}),i.jsx("div",{className:"mt-6",children:i.jsx(oe,{to:"/login",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Iniciar Sesión"})})]})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:i.jsx(z1,{className:"h-6 w-6 text-blue-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear Cuenta"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Únete a PropFinder como comprador"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[a&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Er,{className:"h-5 w-5 text-red-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),i.jsx("div",{className:"mt-2 text-sm text-red-700",children:a})]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"firstName",className:"sr-only",children:"Nombre"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Wt,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nombre",value:t.firstName,onChange:v})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"lastName",className:"sr-only",children:"Apellido"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Wt,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Apellido",value:t.lastName,onChange:v})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Or,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email",value:t.email,onChange:v})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(_u,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:t.password,onChange:v})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirmar contraseña"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(_u,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirmar contraseña",value:t.confirmPassword,onChange:v})]})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creando cuenta..."]}):"Crear Cuenta"})}),i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["¿Ya tienes cuenta?"," ",i.jsx(oe,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Iniciar sesión"})]})})]})]})})}function xN(){const{user:t,signOut:e,isAdmin:n,loading:s}=pt(),[a,l]=E.useState([]),[c,f]=E.useState(!0),[d,m]=E.useState(null),[v,g]=E.useState(""),[y,x]=E.useState(null),P=async()=>{try{f(!0);const{data:S,error:k}=await W.from("agents").select("*").order("applied_at",{ascending:!1});if(k){console.error("Error cargando aplicaciones:",k);return}l(S||[])}catch(S){console.error("Error cargando aplicaciones:",S)}finally{f(!1)}},w=async(S,k)=>{try{x(S);const{error:O}=await W.from("agents").update({approval_status:k,approval_notes:v,approved_by:t==null?void 0:t.id,publicaciones_disponibles:k==="approved"?2:0,is_verified:k==="approved"}).eq("id",S);if(O)throw O;if(k==="approved"){const{error:R}=await W.from("user_profiles").update({role:"agent"}).eq("id",S);if(R)throw R}await P(),m(null),g("")}catch(O){console.error("Error procesando aplicación:",O),alert("Error al procesar la aplicación")}finally{x(null)}};if(E.useEffect(()=>{t&&n&&P()},[t,n]),s)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!t||!n)return i.jsx(sn,{to:"/login",replace:!0});const C=async()=>{await e()},N=a.filter(S=>S.approval_status==="pending"),b=a.filter(S=>S.approval_status==="approved"),j=a.filter(S=>S.approval_status==="rejected"),T=S=>{switch(S){case"pending":return i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pendiente"});case"approved":return i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Aprobado"});case"rejected":return i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Rechazado"});default:return i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Desconocido"})}};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center py-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Wt,{className:"h-8 w-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Panel de Administrador"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Gestión de Aplicaciones de Agentes"})]})]}),i.jsxs("button",{onClick:C,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[i.jsx(Bv,{className:"h-4 w-4 mr-2"}),"Cerrar Sesión"]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Vt,{className:"h-8 w-8 text-yellow-600"})}),i.jsxs("div",{className:"ml-5",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pendientes"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:N.length})]})]})})}),i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx($t,{className:"h-8 w-8 text-green-600"})}),i.jsxs("div",{className:"ml-5",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Aprobados"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.length})]})]})})}),i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Qo,{className:"h-8 w-8 text-red-600"})}),i.jsxs("div",{className:"ml-5",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Rechazados"}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:j.length})]})]})})}),i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(fc,{className:"h-8 w-8 text-blue-600"})}),i.jsxs("div",{className:"ml-5",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Total"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.length})]})]})})})]}),i.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Aplicaciones de Agentes"})}),c?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(fc,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay aplicaciones"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No se han enviado aplicaciones para ser agente aún."})]}):i.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(S=>i.jsx("li",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(fc,{className:"h-10 w-10 text-gray-400"})}),i.jsxs("div",{className:"ml-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.full_name||S.email}),i.jsx("div",{className:"ml-2",children:T(S.approval_status)})]}),i.jsx("p",{className:"text-sm text-gray-500",children:S.email}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Aplicado:"," ",new Date(S.applied_at).toLocaleDateString()]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{onClick:()=>m(S),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(Cr,{className:"h-4 w-4 mr-1"}),"Ver Detalles"]}),S.approval_status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>{m(S),g("Aplicación aprobada. Bienvenido al equipo de agentes.")},disabled:y===S.id,className:"inline-flex items-center px-3 py-1 border border-transparent rounded-md text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:y===S.id?"Procesando...":"Aprobar"}),i.jsx("button",{onClick:()=>{m(S),g("Aplicación rechazada. Por favor revisa los requisitos.")},disabled:y===S.id,className:"inline-flex items-center px-3 py-1 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:y===S.id?"Procesando...":"Rechazar"})]})]})]})},S.id))})]})]}),d&&i.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:i.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles de la Aplicación"}),i.jsx("button",{onClick:()=>{m(null),g("")},className:"text-gray-400 hover:text-gray-600",children:i.jsx(Gi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.full_name||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.email})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.phone||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Número de Licencia"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.license_number||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Empresa"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.company_name||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sitio Web"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.website_url||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripción"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.description||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),i.jsx("div",{className:"mt-1",children:T(d.approval_status)})]}),d.approval_status==="pending"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notas de Aprobación"}),i.jsx("textarea",{value:v,onChange:S=>g(S.target.value),rows:3,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingresa notas para el aplicante..."})]}),d.approval_notes&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notas del Administrador"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.approval_notes})]})]}),d.approval_status==="pending"&&i.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[i.jsx("button",{onClick:()=>w(d.id,"rejected"),disabled:y===d.id,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:y===d.id?"Procesando...":"Rechazar"}),i.jsx("button",{onClick:()=>w(d.id,"approved"),disabled:y===d.id,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:y===d.id?"Procesando...":"Aprobar"})]})]})})]})}function yN(){const{user:t,isAgent:e,userProfile:n,refreshProfile:s}=pt(),[a,l]=E.useState({phone:"",licenseNumber:"",companyName:"",websiteUrl:"",description:""}),[c,f]=E.useState(!1),[d,m]=E.useState(""),[v,g]=E.useState(!1),[y,x]=E.useState(null),[P,w]=E.useState(!0);if(E.useEffect(()=>{(async()=>{if(t)try{const{data:j,error:T}=await W.from("agents").select("id, approval_status, approval_notes").eq("id",t.id).single();!T&&j&&x(j)}catch{}finally{w(!1)}})()},[t]),!t)return i.jsx(sn,{to:"/login",replace:!0});if(e||(y==null?void 0:y.approval_status)==="approved")return i.jsx(sn,{to:"/agent-dashboard",replace:!0});if(P)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if((y==null?void 0:y.approval_status)==="pending")return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-md w-full space-y-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-yellow-100",children:i.jsx(Vt,{className:"h-8 w-8 text-yellow-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Aplicación Pendiente"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Tu solicitud para ser agente está siendo revisada por un administrador."}),i.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-md p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Er,{className:"h-5 w-5 text-yellow-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"¿Qué sigue?"}),i.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Un administrador revisará tu aplicación"}),i.jsx("li",{children:"Recibirás una notificación cuando sea aprobada"}),i.jsx("li",{children:"Una vez aprobada, tendrás acceso completo como agente"})]})})]})]})}),i.jsx("button",{onClick:()=>window.location.href="/",className:"mt-6 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al Inicio"})]})})});if((y==null?void 0:y.approval_status)==="rejected")return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-md w-full space-y-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-red-100",children:i.jsx(Qo,{className:"h-8 w-8 text-red-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Aplicación Rechazada"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Tu solicitud para ser agente fue rechazada."}),y.approval_notes&&i.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:i.jsxs("p",{className:"text-sm text-red-700",children:[i.jsx("strong",{children:"Motivo:"})," ",y.approval_notes]})}),i.jsxs("div",{className:"mt-6 space-y-3",children:[i.jsx("button",{onClick:()=>{x(null),m("")},className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Aplicar Nuevamente"}),i.jsx("button",{onClick:()=>window.location.href="/",className:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al Inicio"})]})]})})});const C=b=>{l({...a,[b.target.name]:b.target.value})},N=async b=>{var j,T,S,k,O;b.preventDefault(),f(!0),m("");try{const{data:R}=await W.from("agents").select("id, approval_status, approval_notes").eq("id",t.id).single();if(R){if(R.approval_status==="pending"){m("Ya tienes una aplicación pendiente de aprobación. Espera la respuesta del administrador."),f(!1);return}else if(R.approval_status==="approved"){m("Ya eres un agente aprobado."),f(!1);return}else if(R.approval_status==="rejected"){m(`Tu aplicación fue rechazada. Motivo: ${R.approval_notes||"Contacta al administrador"}`),f(!1);return}}const A=(n==null?void 0:n.full_name)||`${(n==null?void 0:n.first_name)||""} ${(n==null?void 0:n.last_name)||""}`.trim()||((j=t.user_metadata)==null?void 0:j.full_name)||((T=t.user_metadata)==null?void 0:T.name)||((S=t.email)==null?void 0:S.split("@")[0])||"Usuario",{error:$}=await W.from("agents").insert({id:t.id,full_name:A,first_name:(n==null?void 0:n.first_name)||((k=t.user_metadata)==null?void 0:k.first_name)||"",last_name:(n==null?void 0:n.last_name)||((O=t.user_metadata)==null?void 0:O.last_name)||"",email:t.email,phone:a.phone,license_number:a.licenseNumber||null,company_name:a.companyName||null,website_url:a.websiteUrl||null,description:a.description||null,publicaciones_disponibles:0,is_verified:!1,rating:0,total_ratings:0,approval_status:"pending",applied_at:new Date().toISOString()});if($)throw $;const{error:U}=await W.from("user_profiles").update({phone:a.phone,updated_at:new Date().toISOString()}).eq("id",t.id);if(U)throw U;await s(),g(!0)}catch(R){R.code==="23505"?m("Ya tienes una aplicación registrada. Contacta al administrador."):m(R.message||"Error al enviar aplicación")}finally{f(!1)}};return v?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-md w-full space-y-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-yellow-100",children:i.jsx($t,{className:"h-8 w-8 text-yellow-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"¡Aplicación Enviada!"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Tu solicitud para ser agente ha sido enviada y está pendiente de aprobación"}),i.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-md p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Qn,{className:"h-5 w-5 text-yellow-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"¿Qué sigue?"}),i.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:i.jsxs("ul",{className:"list-disc space-y-1 ml-5",children:[i.jsx("li",{children:"Un administrador revisará tu aplicación"}),i.jsx("li",{children:"Recibirás una notificación cuando sea aprobada"}),i.jsx("li",{children:"Una vez aprobada, tendrás acceso completo como agente"}),i.jsx("li",{children:"Incluirá 2 publicaciones iniciales para subir propiedades"})]})})]})]})}),i.jsx("div",{className:"mt-6",children:i.jsx("button",{onClick:()=>window.location.href="/",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al Inicio"})})]})})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsx("div",{className:"bg-white shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Ld,{className:"h-8 w-8 text-blue-600"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Convertirse en Agente"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Completa tu perfil para comenzar a vender propiedades"})]})]}),d&&i.jsx("div",{className:"mb-6 rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Er,{className:"h-5 w-5 text-red-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),i.jsx("div",{className:"mt-2 text-sm text-red-700",children:d})]})]})}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Teléfono *"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Ar,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{type:"tel",name:"phone",id:"phone",required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ej: +57 300 123 4567",value:a.phone,onChange:C})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"licenseNumber",className:"block text-sm font-medium text-gray-700",children:"Número de Licencia"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(k1,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{type:"text",name:"licenseNumber",id:"licenseNumber",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ej: LIC-2024-001",value:a.licenseNumber,onChange:C})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700",children:"Empresa/Inmobiliaria"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(wr,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{type:"text",name:"companyName",id:"companyName",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ej: Inmobiliaria XYZ",value:a.companyName,onChange:C})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"websiteUrl",className:"block text-sm font-medium text-gray-700",children:"Sitio Web"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{type:"url",name:"websiteUrl",id:"websiteUrl",className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"https://mi-sitio-web.com",value:a.websiteUrl,onChange:C})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descripción Profesional"}),i.jsx("div",{className:"mt-1",children:i.jsx("textarea",{name:"description",id:"description",rows:4,className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Describe tu experiencia, especialización y qué te hace único como agente inmobiliario...",value:a.description,onChange:C})})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Qn,{className:"h-5 w-5 text-blue-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Beneficios de ser agente"}),i.jsx("div",{className:"mt-2 text-sm text-blue-700",children:i.jsxs("ul",{className:"list-disc space-y-1 ml-5",children:[i.jsx("li",{children:"2 publicaciones iniciales gratuitas"}),i.jsx("li",{children:"Publica propiedades ilimitadas"}),i.jsx("li",{children:"Panel de control personalizado"}),i.jsx("li",{children:"Gestión de leads y contactos"}),i.jsx("li",{children:"Estadísticas de rendimiento"})]})})]})]})}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:c,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Procesando..."]}):"Convertirse en Agente"})]})]})]})})})})}function _N(t){const[e,n]=E.useState([]),[s,a]=E.useState(!0),[l,c]=E.useState(null);E.useEffect(()=>{if(!t){a(!1);return}f()},[t]);const f=async()=>{try{a(!0),c(null);const{data:m,error:v}=await W.from("properties").select("*").eq("agent_id",t).eq("status","active").order("published_at",{ascending:!1});if(v)throw v;n(m||[])}catch(m){console.error("Error loading active properties:",m),c(m instanceof Error?m.message:"Error desconocido")}finally{a(!1)}},d=()=>{t&&f()};return{activeProperties:e,activePropertiesCount:e.length,loading:s,error:l,refreshActiveProperties:d}}const Kv=()=>{const[t,e]=E.useState([]),[n,s]=E.useState(!1),[a,l]=E.useState(null),c=E.useCallback(async w=>{s(!0),l(null);try{const{data:C,error:N}=await W.from("property_visits").insert([{...w,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(N)throw N;return e(b=>[C,...b]),C}catch(C){const N=C instanceof Error?C.message:"Error creando visita";return l(N),console.error("Error creating visit:",C),null}finally{s(!1)}},[]),f=E.useCallback(async(w,C,N)=>{s(!0),l(null);try{const b={status:C,updated_at:new Date().toISOString()};N&&(b.agent_notes=N);const{error:j}=await W.from("property_visits").update(b).eq("id",w);if(j)throw j.code==="42501"||j.message.includes("permission denied")||j.message.includes("forbidden")?new Error("No tienes permisos para realizar esta acción. Verifica que seas el propietario de la visita."):j;return e(T=>T.map(S=>S.id===w?{...S,status:C,agent_notes:N||S.agent_notes,updated_at:b.updated_at}:S)),!0}catch(b){const j=b instanceof Error?b.message:"Error actualizando visita";return l(j),console.error("Error updating visit status:",b),(j.includes("permisos")||j.includes("forbidden"))&&alert("Error de permisos: "+j),!1}finally{s(!1)}},[]),d=E.useCallback(async(w,C,N,b)=>{s(!0),l(null);try{const j={status:"confirmed",confirmed_date:C,confirmed_time:N,agent_notes:b,updated_at:new Date().toISOString()},{error:T}=await W.from("property_visits").update(j).eq("id",w);if(T)throw T;return e(S=>S.map(k=>k.id===w?{...k,...j}:k)),!0}catch(j){const T=j instanceof Error?j.message:"Error confirmando visita";return l(T),console.error("Error confirming visit:",j),!1}finally{s(!1)}},[]),m=E.useCallback(async(w,C)=>f(w,"rejected",C),[f]),v=E.useCallback(async w=>f(w,"cancelled"),[f]),g=E.useCallback(async w=>{s(!0),l(null);try{const{data:C,error:N}=await W.from("property_visits").select("*").eq("property_id",w).order("created_at",{ascending:!1});if(N)throw N;e(C||[])}catch(C){const N=C instanceof Error?C.message:"Error obteniendo visitas";l(N),console.error("Error fetching visits by property:",C)}finally{s(!1)}},[]),y=E.useCallback(async w=>{s(!0),l(null);try{const{data:C,error:N}=await W.from("property_visits").select(`
          *,
          properties (
            title,
            address,
            city,
            images
          )
        `).eq("agent_id",w).order("created_at",{ascending:!1});if(N)throw N;e(C||[])}catch(C){const N=C instanceof Error?C.message:"Error obteniendo visitas";l(N),console.error("Error fetching visits by agent:",C)}finally{s(!1)}},[]),x=E.useCallback(async w=>{s(!0),l(null);try{const{data:C,error:N}=await W.from("property_visits").select(`
          *,
          properties (
            title,
            address,
            city,
            images
          )
        `).eq("visitor_email",w).order("created_at",{ascending:!1});if(N)throw N;e(C||[])}catch(C){const N=C instanceof Error?C.message:"Error obteniendo visitas";l(N),console.error("Error fetching visits by user:",C)}finally{s(!1)}},[]),P=E.useCallback(async()=>{},[]);return{visits:t,loading:n,error:a,createVisit:c,updateVisitStatus:f,getVisitsByProperty:g,getVisitsByAgent:y,getVisitsByUser:x,confirmVisit:d,rejectVisit:m,cancelVisit:v,refreshVisits:P}},wN=({className:t=""})=>{const{agentProfile:e}=pt(),{visits:n,loading:s,error:a,getVisitsByAgent:l,confirmVisit:c,rejectVisit:f,updateVisitStatus:d}=Kv(),[m,v]=E.useState("all"),[g,y]=E.useState(null),[x,P]=E.useState({visitId:"",date:"",time:"",notes:""}),[w,C]=E.useState(!1),[N,b]=E.useState(!1),[j,T]=E.useState(""),[S,k]=E.useState("");E.useEffect(()=>{e!=null&&e.id&&l(e.id)},[e==null?void 0:e.id,l]);const O=n.filter(q=>m==="all"?!0:q.status===m),R=q=>{const pe={pending:"bg-yellow-100 text-yellow-800 border-yellow-200",confirmed:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",completed:"bg-blue-100 text-blue-800 border-blue-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200"};return pe[q]||pe.pending},A=q=>({pending:"Pendiente",confirmed:"Confirmada",rejected:"Rechazada",completed:"Completada",cancelled:"Cancelada"})[q]||q,$=q=>new Date(q).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),U=async()=>{if(!x.visitId||!x.date||!x.time){alert("Por favor completa todos los campos requeridos");return}await c(x.visitId,x.date,x.time,x.notes)&&(C(!1),P({visitId:"",date:"",time:"",notes:""}))},D=async()=>{if(!S)return;await f(S,j)&&(b(!1),T(""),k(""))},J=async q=>{await d(q,"completed")},ne=q=>{P({visitId:q.id,date:q.preferred_date,time:q.preferred_time,notes:""}),C(!0)},ge=q=>{k(q),b(!0)};return e?i.jsxs("div",{className:`bg-white rounded-lg shadow-sm border ${t}`,children:[i.jsx("div",{className:"p-6 border-b",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestión de Visitas"}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Dv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsxs("select",{value:m,onChange:q=>v(q.target.value),className:"input-field pl-10 pr-8 py-2",children:[i.jsx("option",{value:"all",children:"Todas las visitas"}),i.jsx("option",{value:"pending",children:"Pendientes"}),i.jsx("option",{value:"confirmed",children:"Confirmadas"}),i.jsx("option",{value:"completed",children:"Completadas"}),i.jsx("option",{value:"rejected",children:"Rechazadas"}),i.jsx("option",{value:"cancelled",children:"Canceladas"})]})]})})]})}),i.jsx("div",{className:"p-6",children:s?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):a?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-red-600",children:a})}):O.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Hn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:m==="all"?"No tienes visitas programadas aún":`No hay visitas ${A(m).toLowerCase()}`})]}):i.jsx("div",{className:"space-y-4",children:O.map(q=>{var pe,B;return i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:((pe=q.properties)==null?void 0:pe.title)||"Propiedad"}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${R(q.status)}`,children:A(q.status)})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:((B=q.properties)==null?void 0:B.address)||"Dirección no disponible"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(Hn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:$(q.preferred_date)})]}),i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(Vt,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:q.preferred_time})]}),i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(Wt,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:q.visitor_name})]})]})]}),i.jsx("div",{className:"flex items-center space-x-2 ml-4",children:i.jsx("button",{onClick:()=>y(g===q.id?null:q.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx(N1,{className:`h-5 w-5 transform transition-transform ${g===q.id?"rotate-180":""}`})})})]}),g===q.id&&i.jsxs("div",{className:"mt-4 pt-4 border-t",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Información de contacto"}),i.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:q.visitor_email})]}),q.visitor_phone&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ar,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:q.visitor_phone})]})]})]}),q.message&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Mensaje del visitante"}),i.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:q.message})]})]}),q.agent_notes&&i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Notas del agente"}),i.jsx("p",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded",children:q.agent_notes})]}),q.status==="pending"&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{onClick:()=>ne(q),className:"btn-primary flex items-center space-x-2",children:[i.jsx(bo,{className:"h-4 w-4"}),i.jsx("span",{children:"Confirmar"})]}),i.jsxs("button",{onClick:()=>ge(q.id),className:"btn-secondary text-red-600 border-red-200 hover:bg-red-50 flex items-center space-x-2",children:[i.jsx(Gi,{className:"h-4 w-4"}),i.jsx("span",{children:"Rechazar"})]})]}),q.status==="confirmed"&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{onClick:()=>J(q.id),className:"btn-primary flex items-center space-x-2",children:[i.jsx(bo,{className:"h-4 w-4"}),i.jsx("span",{children:"Marcar como completada"})]}),i.jsx("div",{className:"text-sm text-gray-600",children:q.confirmed_date&&q.confirmed_time&&i.jsxs("span",{children:["Confirmada para: ",$(q.confirmed_date)," a las ",q.confirmed_time]})})]})]})]})},q.id)})})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmar Visita"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha confirmada"}),i.jsx("input",{type:"date",value:x.date,onChange:q=>P(pe=>({...pe,date:q.target.value})),className:"input-field"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora confirmada"}),i.jsx("input",{type:"time",value:x.time,onChange:q=>P(pe=>({...pe,time:q.target.value})),className:"input-field"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas adicionales"}),i.jsx("textarea",{value:x.notes,onChange:q=>P(pe=>({...pe,notes:q.target.value})),className:"input-field resize-none",rows:3,placeholder:"Instrucciones especiales, punto de encuentro, etc."})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>C(!1),className:"btn-secondary",children:"Cancelar"}),i.jsx("button",{onClick:U,className:"btn-primary",children:"Confirmar Visita"})]})]})})}),N&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rechazar Visita"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo del rechazo"}),i.jsx("textarea",{value:j,onChange:q=>T(q.target.value),className:"input-field resize-none",rows:3,placeholder:"Explica el motivo del rechazo (opcional)"})]}),i.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>b(!1),className:"btn-secondary",children:"Cancelar"}),i.jsx("button",{onClick:D,className:"btn-primary bg-red-600 hover:bg-red-700",children:"Rechazar Visita"})]})]})})})]}):i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-600",children:"Solo los agentes pueden gestionar visitas."})})};function Am(){var d;const{user:t,isAgent:e,agentProfile:n,userProfile:s,loading:a}=pt(),{activePropertiesCount:l,loading:c}=_N(t==null?void 0:t.id);if(a)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!t||!e)return i.jsx(sn,{to:"/become-agent",replace:!0});const f=[{name:"Propiedades Activas",value:c?"...":l.toString(),icon:wr,color:"bg-blue-500"},{name:"Créditos Disponibles",value:(n==null?void 0:n.credits)||"0",icon:wu,color:"bg-green-500"},{name:"Publicaciones Gratuitas",value:`${(n==null?void 0:n.free_publications_used)||0}/2`,icon:ii,color:"bg-blue-500"},{name:"Rating Promedio",value:((d=n==null?void 0:n.rating)==null?void 0:d.toFixed(1))||"0.0",icon:Qn,color:"bg-yellow-500"},{name:"Vistas Totales",value:"0",icon:Cr,color:"bg-purple-500"}];return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center py-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(wr,{className:"h-8 w-8 text-blue-600 mr-3"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Panel de Agente"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Bienvenido, ",s==null?void 0:s.full_name]})]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[n!=null&&n.is_verified?i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✓ Verificado"}):i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"⏳ Pendiente de verificación"}),i.jsxs(oe,{to:"/add-property",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(No,{className:"h-4 w-4 mr-2"}),"Nueva Propiedad"]}),i.jsxs(oe,{to:"/payment-plans",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[i.jsx(ii,{className:"h-4 w-4 mr-2"}),"Comprar Planes"]})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(n==null?void 0:n.publicaciones_disponibles)>0&&(n==null?void 0:n.credits)===0&&i.jsx("div",{className:"mb-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(ii,{className:"h-5 w-5 text-blue-400"})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm text-blue-700",children:[i.jsx("strong",{children:"📢 Nuevo Sistema de Pagos Implementado:"}),'Ahora usamos PayPal para comprar créditos. Las publicaciones mostradas son datos de prueba. Usa el botón "Comprar Créditos" para acceder al nuevo sistema PayPal.',(n==null?void 0:n.is_new_agent)&&i.jsx("span",{className:"block mt-1 font-medium",children:"🎁 Como agente nuevo, tienes 2 publicaciones gratuitas disponibles."})]})})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:f.map(m=>i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-5",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:`h-8 w-8 rounded-md ${m.color} flex items-center justify-center`,children:i.jsx(m.icon,{className:"h-4 w-4 text-white"})})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:m.name}),i.jsx("dd",{className:"text-lg font-medium text-gray-900",children:m.value})]})})]})})},m.name))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsx("div",{className:"bg-white shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información del Agente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Información Personal"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[i.jsx(Or,{className:"h-4 w-4 text-gray-400 mr-2"}),s==null?void 0:s.email]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[i.jsx(Ar,{className:"h-4 w-4 text-gray-400 mr-2"}),(s==null?void 0:s.phone)||"No especificado"]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Información Profesional"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-sm text-gray-900",children:[i.jsx("span",{className:"font-medium",children:"Empresa:"})," ",(n==null?void 0:n.company_name)||"No especificada"]}),i.jsxs("div",{className:"text-sm text-gray-900",children:[i.jsx("span",{className:"font-medium",children:"Licencia:"})," ",(n==null?void 0:n.license_number)||"No especificada"]}),(n==null?void 0:n.website_url)&&i.jsxs("div",{className:"text-sm text-gray-900",children:[i.jsx("span",{className:"font-medium",children:"Web:"})," ",i.jsx("a",{href:n.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-500",children:n.website_url})]})]})]})]}),(n==null?void 0:n.description)&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Descripción"}),i.jsx("p",{className:"text-sm text-gray-900",children:n.description})]}),i.jsxs("div",{className:"mt-6 flex space-x-3",children:[i.jsxs(oe,{to:"/my-properties",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(wr,{className:"h-4 w-4 mr-2"}),"Mis Propiedades"]}),i.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(M1,{className:"h-4 w-4 mr-2"}),"Editar Perfil"]})]})]})})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado de Verificación"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full mr-3"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Cuenta creada"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full mr-3"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Información completada"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-2 w-2 bg-yellow-500 rounded-full mr-3"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Verificación pendiente"})]})]})]})}),i.jsx("div",{className:"bg-white shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sistema de Créditos"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Créditos Disponibles"}),i.jsx("span",{className:"font-medium text-green-600",children:(n==null?void 0:n.credits)||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Créditos Usados"}),i.jsx("span",{className:"font-medium text-gray-900",children:(n==null?void 0:n.total_credits_used)||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Publicaciones Gratuitas"}),i.jsxs("span",{className:"font-medium text-blue-600",children:[(n==null?void 0:n.free_publications_used)||0,"/2 usadas"]})]}),i.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[i.jsxs(oe,{to:"/add-property",className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mb-2",children:[i.jsx(No,{className:"h-4 w-4 mr-2"}),"Nueva Propiedad"]}),i.jsxs(oe,{to:"/payment-plans",className:"w-full inline-flex justify-center items-center px-4 py-2 border border-green-300 text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[i.jsx(ii,{className:"h-4 w-4 mr-2"}),"Comprar Créditos"]})]})]})]})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx(wN,{})}),i.jsx("div",{className:"bg-white shadow rounded-lg",children:i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Actividad Reciente"}),i.jsxs("div",{className:"text-center py-6",children:[i.jsx($v,{className:"mx-auto h-8 w-8 text-gray-400"}),i.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No hay actividad reciente"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Publica tu primera propiedad para comenzar"})]})]})})]})]})]})]})}async function bN({file:t,userId:e,bucketName:n="property-images"}){try{if(!t.type.startsWith("image/"))throw new Error("El archivo debe ser una imagen");const s=["image/jpeg","image/png","image/webp"];if(!s.includes(t.type))throw new Error(`Tipo de archivo no permitido. Usa: ${s.join(", ")}`);const a=n==="property-images"?10*1024*1024:5*1024*1024;if(t.size>a){const P=a/1048576;throw new Error(`El archivo es demasiado grande. Máximo: ${P}MB`)}const l=t.name.split(".").pop(),c=`${e}/${Date.now()}-${Math.random().toString(36).substring(2)}.${l}`,f="https://vxmpifukfohjafrbiqvw.supabase.co",d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ4bXBpZnVrZm9oamFmcmJpcXZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4MDUwNDYsImV4cCI6MjA2OTM4MTA0Nn0.JPwFO4UL-LileKVD6JDVZc2RrfCFsK5KgKlS5CFkUPc",m=new FormData;m.append("file",t,c);const v={Authorization:`Bearer ${d}`,"x-upsert":"false"},g=`${f}/storage/v1/object/${n}/${c}`,y=await fetch(g,{method:"POST",headers:v,body:m});if(!y.ok){const P=await y.text();throw console.error("❌ Error response:",P),new Error(`Upload failed: ${y.status} - ${P}`)}const{data:x}=W.storage.from(n).getPublicUrl(c);return{url:x.publicUrl,path:c}}catch(s){return console.error(`💥 Error en uploadImageDirect (${n}):`,s),{url:"",path:"",error:s instanceof Error?s.message:"Error desconocido"}}}async function jN({file:t,userId:e}){return bN({file:t,userId:e,bucketName:"property-images"})}const NN=[{value:"casa",label:"Casa"},{value:"departamento",label:"Departamento"},{value:"oficina",label:"Oficina"},{value:"local_comercial",label:"Local Comercial"},{value:"terreno",label:"Terreno"},{value:"bodega",label:"Bodega"},{value:"quinta",label:"Quinta"},{value:"penthouse",label:"Penthouse"}],kN=["Piscina","Gimnasio","Seguridad 24h","Ascensor","Balcón","Terraza","Jardín","BBQ","Salón comunal","Cancha deportiva","Área de juegos","Portero"],SN=[{key:"amueblado",label:"Amueblado"},{key:"mascotas_permitidas",label:"Mascotas Permitidas"},{key:"aire_acondicionado",label:"Aire Acondicionado"},{key:"calefaccion",label:"Calefacción"},{key:"internet_incluido",label:"Internet Incluido"},{key:"servicios_incluidos",label:"Servicios Incluidos"},{key:"cocina_equipada",label:"Cocina Equipada"},{key:"lavanderia",label:"Lavandería"}];function PN(){const{user:t,agentProfile:e,refreshProfile:n}=pt(),s=Jo(),a=E.useRef(null),[l,c]=E.useState(!1),[f,d]=E.useState(!1),[m,v]=E.useState([]),[g,y]=E.useState([]),[x,P]=E.useState({title:"",description:"",price:"",currency:"USD",property_type:"casa",transaction_type:"venta",bedrooms:"",bathrooms:"",area_total:"",area_constructed:"",parking_spaces:"0",floor_number:"",total_floors:"",year_built:"",address:"",neighborhood:"",city:"",province:"",postal_code:"",latitude:"",longitude:"",amenities:[],features:{},is_featured:!1,is_urgent:!1});if(!t||(e==null?void 0:e.approval_status)!=="approved")return i.jsx(sn,{to:"/dashboard",replace:!0});const w=k=>{const{name:O,value:R,type:A}=k.target;if(A==="checkbox"){const $=k.target.checked;P(U=>({...U,[O]:$}))}else P($=>({...$,[O]:R}))},C=k=>{P(O=>({...O,amenities:O.amenities.includes(k)?O.amenities.filter(R=>R!==k):[...O.amenities,k]}))},N=k=>{P(O=>({...O,features:{...O.features,[k]:!O.features[k]}}))},b=k=>{const O=Array.from(k.target.files||[]);if(O.length===0)return;const R=10,A=m.length,$=R-A,U=O.slice(0,$);v(D=>[...D,...U]),U.forEach(D=>{const J=new FileReader;J.onload=ne=>{y(ge=>{var q;return[...ge,(q=ne.target)==null?void 0:q.result]})},J.readAsDataURL(D)})},j=k=>{v(O=>O.filter((R,A)=>A!==k)),y(O=>O.filter((R,A)=>A!==k))},T=async()=>{if(m.length===0)return[];d(!0);try{const k=m.map(async A=>{try{const $=await jN({file:A,userId:t.id});return $.error?(console.error("Error subiendo imagen:",$.error),null):$.url}catch($){return console.error("Error inesperado subiendo imagen:",$),null}}),R=(await Promise.all(k)).filter(A=>A!==null);if(R.length===0)throw new Error("No se pudo subir ninguna imagen");return R}catch(k){throw console.error("Error uploading images:",k),k}finally{d(!1)}},S=async(k,O="draft")=>{k.preventDefault(),c(!0);try{if(O==="published"&&(e==null?void 0:e.publicaciones_disponibles)<=0){alert("No tienes publicaciones disponibles");return}const R=await T(),A={agent_id:t.id,title:x.title,description:x.description,price:parseFloat(x.price),currency:x.currency,property_type:x.property_type,transaction_type:x.transaction_type,bedrooms:x.bedrooms?parseInt(x.bedrooms):null,bathrooms:x.bathrooms?parseFloat(x.bathrooms):null,area_total:x.area_total?parseFloat(x.area_total):null,area_constructed:x.area_constructed?parseFloat(x.area_constructed):null,parking_spaces:parseInt(x.parking_spaces),floor_number:x.floor_number?parseInt(x.floor_number):null,total_floors:x.total_floors?parseInt(x.total_floors):null,year_built:x.year_built?parseInt(x.year_built):null,address:x.address,neighborhood:x.neighborhood||null,city:x.city,province:x.province,country:"Ecuador",postal_code:x.postal_code||null,latitude:x.latitude?parseFloat(x.latitude):null,longitude:x.longitude?parseFloat(x.longitude):null,amenities:x.amenities,features:x.features,images:R,status:O,is_featured:x.is_featured,is_urgent:x.is_urgent,published_at:O==="published"?new Date().toISOString():null},{data:$,error:U}=await W.from("properties").insert(A).select().single();if(U)throw U;if(O==="published"){const{data:D,error:J}=await W.rpc("consume_publication",{agent_uuid:t.id});if(J||!D)throw console.error("Error consumiendo publicación:",J),await W.from("properties").delete().eq("id",$.id),new Error("No tienes créditos suficientes para publicar esta propiedad");alert("¡Propiedad publicada exitosamente!"),await n()}alert(O==="published"?"¡Propiedad publicada exitosamente!":"¡Propiedad guardada como borrador!"),s("/dashboard")}catch(R){console.error("Error creating property:",R),alert("Error al crear la propiedad: "+R.message)}finally{c(!1)}};return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Agregar Nueva Propiedad"}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(ko,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Publicaciones disponibles:"," ",e==null?void 0:e.publicaciones_disponibles]})]})]}),i.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("h2",{className:"text-lg font-semibold text-blue-800 mb-2",children:"ℹ️ Información sobre Publicaciones"}),i.jsxs("p",{className:"text-blue-700 text-sm",children:['Si aparece "0 publicaciones disponibles", ejecuta el script SQL'," ",i.jsx("code",{children:"fix-publicaciones-disponibles.sql"})," en Supabase para restablecer tus publicaciones.",i.jsx("br",{}),i.jsx("strong",{children:"Verificación temporal deshabilitada"})," - Puedes crear propiedades normalmente."]})]}),i.jsxs("form",{onSubmit:k=>S(k,"published"),className:"space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[i.jsx(br,{className:"h-5 w-5 mr-2"}),"Información Básica"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Título de la Propiedad *"}),i.jsx("input",{type:"text",name:"title",value:x.title,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Casa moderna con piscina en La Kennedy"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),i.jsx("textarea",{name:"description",value:x.description,onChange:w,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe las características principales de la propiedad..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Propiedad *"}),i.jsx("select",{name:"property_type",value:x.property_type,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:NN.map(k=>i.jsx("option",{value:k.value,children:k.label},k.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Transacción *"}),i.jsxs("select",{name:"transaction_type",value:x.transaction_type,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"venta",children:"Venta"}),i.jsx("option",{value:"alquiler",children:"Alquiler"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio *"}),i.jsxs("div",{className:"flex",children:[i.jsxs("select",{name:"currency",value:x.currency,onChange:w,className:"px-3 py-2 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"USD",children:"USD"}),i.jsx("option",{value:"EUR",children:"EUR"})]}),i.jsx("input",{type:"number",name:"price",value:x.price,onChange:w,required:!0,min:"0",step:"0.01",className:"flex-1 px-4 py-2 border border-gray-300 rounded-r-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"150000"})]})]}),i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"is_featured",checked:x.is_featured,onChange:w,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsxs("span",{className:"ml-2 text-sm text-gray-700 flex items-center",children:[i.jsx(Qn,{className:"h-4 w-4 mr-1"}),"Destacar"]})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",name:"is_urgent",checked:x.is_urgent,onChange:w,className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),i.jsxs("span",{className:"ml-2 text-sm text-gray-700 flex items-center",children:[i.jsx(ko,{className:"h-4 w-4 mr-1"}),"Urgente"]})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[i.jsx(Id,{className:"h-5 w-5 mr-2"}),"Características"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(Cd,{className:"inline h-4 w-4 mr-1"}),"Dormitorios"]}),i.jsx("input",{type:"number",name:"bedrooms",value:x.bedrooms,onChange:w,min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(Ed,{className:"inline h-4 w-4 mr-1"}),"Baños"]}),i.jsx("input",{type:"number",name:"bathrooms",value:x.bathrooms,onChange:w,min:"0",step:"0.5",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(zv,{className:"inline h-4 w-4 mr-1"}),"Estacionamientos"]}),i.jsx("input",{type:"number",name:"parking_spaces",value:x.parking_spaces,onChange:w,min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Área Total (m²)"}),i.jsx("input",{type:"number",name:"area_total",value:x.area_total,onChange:w,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Área Construida (m²)"}),i.jsx("input",{type:"number",name:"area_constructed",value:x.area_constructed,onChange:w,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(Hn,{className:"inline h-4 w-4 mr-1"}),"Año de Construcción"]}),i.jsx("input",{type:"number",name:"year_built",value:x.year_built,onChange:w,min:"1900",max:new Date().getFullYear(),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Piso"}),i.jsx("input",{type:"number",name:"floor_number",value:x.floor_number,onChange:w,min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total de Pisos"}),i.jsx("input",{type:"number",name:"total_floors",value:x.total_floors,onChange:w,min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[i.jsx(wt,{className:"h-5 w-5 mr-2"}),"Ubicación"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección Completa *"}),i.jsx("input",{type:"text",name:"address",value:x.address,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Av. 9 de Octubre y Malecón"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barrio/Sector"}),i.jsx("input",{type:"text",name:"neighborhood",value:x.neighborhood,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: La Kennedy"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad *"}),i.jsx("input",{type:"text",name:"city",value:x.city,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Guayaquil"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provincia *"}),i.jsx("input",{type:"text",name:"province",value:x.province,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Guayas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código Postal"}),i.jsx("input",{type:"text",name:"postal_code",value:x.postal_code,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"090150"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitud"}),i.jsx("input",{type:"number",name:"latitude",value:x.latitude,onChange:w,step:"any",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"-2.1709"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitud"}),i.jsx("input",{type:"number",name:"longitude",value:x.longitude,onChange:w,step:"any",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"-79.9224"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Amenidades"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:kN.map(k=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:x.amenities.includes(k),onChange:()=>C(k),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("span",{className:"ml-2 text-sm text-gray-700",children:k})]},k))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Características Adicionales"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:SN.map(k=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:x.features[k.key]||!1,onChange:()=>N(k.key),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("span",{className:"ml-2 text-sm text-gray-700",children:k.label})]},k.key))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[i.jsx(wu,{className:"h-5 w-5 mr-2"}),"Imágenes de la Propiedad"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("input",{ref:a,type:"file",multiple:!0,accept:"image/*",onChange:b,className:"hidden"}),i.jsxs("button",{type:"button",onClick:()=>{var k;return(k=a.current)==null?void 0:k.click()},disabled:m.length>=10,className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(wu,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-sm text-gray-600",children:m.length>=10?"Máximo 10 imágenes alcanzado":"Haz clic para subir imágenes (máximo 10)"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Formatos: JPG, PNG, WebP"})]})]}),g.length>0&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g.map((k,O)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:k,alt:`Preview ${O+1}`,className:"w-full h-32 object-cover rounded-lg"}),i.jsx("button",{type:"button",onClick:()=>j(O),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},O))})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[i.jsx("button",{type:"button",onClick:k=>S(k,"draft"),disabled:l||f,className:"flex items-center justify-center px-6 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:l?i.jsxs(i.Fragment,{children:[i.jsx(Vt,{className:"animate-spin h-4 w-4 mr-2"}),"Guardando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(O1,{className:"h-4 w-4 mr-2"}),"Guardar Borrador"]})}),i.jsx("button",{type:"submit",disabled:l||f||!x.title||!x.price||!x.address,className:"flex items-center justify-center px-6 py-3 border border-transparent rounded-lg text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?i.jsxs(i.Fragment,{children:[i.jsx(Vt,{className:"animate-spin h-4 w-4 mr-2"}),f?"Subiendo imágenes...":"Publicando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Publicar Propiedad"]})})]})]})]})})}function EN(){const{user:t,agentProfile:e,refreshProfile:n}=pt(),[s,a]=E.useState([]),[l,c]=E.useState(!0),[f,d]=E.useState("all");if(!t||(e==null?void 0:e.approval_status)!=="approved")return i.jsx(sn,{to:"/dashboard",replace:!0});E.useEffect(()=>{m()},[f]);const m=async()=>{try{let x=W.from("properties").select("*").eq("agent_id",t.id).order("created_at",{ascending:!1});f!=="all"&&(x=x.eq("status",f));const{data:P,error:w}=await x;if(w)throw w;a(P||[])}catch(x){console.error("Error loading properties:",x)}finally{c(!1)}},v=async x=>{if(confirm("¿Estás seguro de eliminar esta propiedad?"))try{const{error:P}=await W.from("properties").delete().eq("id",x);if(P)throw P;a(w=>w.filter(C=>C.id!==x)),alert("Propiedad eliminada exitosamente")}catch(P){console.error("Error deleting property:",P),alert("Error al eliminar la propiedad")}},g=async(x,P)=>{try{const w=s.find(b=>b.id===x);if(!w)return;if(P==="published"&&w.status==="draft"&&(e==null?void 0:e.publicaciones_disponibles)<=0){alert("No tienes publicaciones disponibles");return}const C={status:P,updated_at:new Date().toISOString()};P==="published"&&w.status==="draft"&&(C.published_at=new Date().toISOString());const{error:N}=await W.from("properties").update(C).eq("id",x);if(N)throw N;if(P==="published"&&w.status==="draft"){const{data:b,error:j}=await W.rpc("consume_publication",{agent_uuid:t.id});if(j||!b){console.error("Error consumiendo publicación:",j),await W.from("properties").update({status:"draft",published_at:null}).eq("id",x),alert("No tienes créditos suficientes para publicar esta propiedad");return}await n()}m(),alert(`Propiedad ${P==="published"?"publicada":"suspendida"} exitosamente`)}catch(w){console.error("Error updating property status:",w),alert("Error al cambiar el estado de la propiedad")}},y=(x,P,w)=>{const C=[];switch(x){case"published":C.push(i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx($t,{className:"h-3 w-3 mr-1"}),"Publicada"]},"published"));break;case"draft":C.push(i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[i.jsx(Vt,{className:"h-3 w-3 mr-1"}),"Borrador"]},"draft"));break;case"sold":C.push(i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx($t,{className:"h-3 w-3 mr-1"}),"Vendida"]},"sold"));break;case"rented":C.push(i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[i.jsx($t,{className:"h-3 w-3 mr-1"}),"Alquilada"]},"rented"));break;case"suspended":C.push(i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[i.jsx(Qo,{className:"h-3 w-3 mr-1"}),"Suspendida"]},"suspended"));break}return w&&C.push(i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[i.jsx(Qn,{className:"h-3 w-3 mr-1"}),"Destacada"]},"featured")),P&&C.push(i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[i.jsx(ko,{className:"h-3 w-3 mr-1"}),"Urgente"]},"urgent")),i.jsx("div",{className:"flex flex-wrap gap-1",children:C})};return l?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando propiedades..."})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Propiedades"}),i.jsx("p",{className:"text-gray-600",children:"Gestiona tus propiedades publicadas"})]}),i.jsx("div",{className:"mt-4 sm:mt-0",children:i.jsxs(oe,{to:"/add-property",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[i.jsx(No,{className:"h-4 w-4 mr-2"}),"Nueva Propiedad"]})})]}),i.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-5",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(br,{className:"h-6 w-6 text-gray-400"})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Propiedades"}),i.jsx("dd",{className:"text-lg font-medium text-gray-900",children:s.length})]})})]})})}),i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-5",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx($t,{className:"h-6 w-6 text-green-400"})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Publicadas"}),i.jsx("dd",{className:"text-lg font-medium text-gray-900",children:s.filter(x=>x.status==="published").length})]})})]})})}),i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-5",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Cr,{className:"h-6 w-6 text-blue-400"})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Vistas"}),i.jsx("dd",{className:"text-lg font-medium text-gray-900",children:s.reduce((x,P)=>x+P.views_count,0)})]})})]})})}),i.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:i.jsx("div",{className:"p-5",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(jo,{className:"h-6 w-6 text-red-400"})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Favoritos"}),i.jsx("dd",{className:"text-lg font-medium text-gray-900",children:s.reduce((x,P)=>x+P.favorites_count,0)})]})})]})})})]})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"border-b border-gray-200",children:i.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"all",label:"Todas",count:s.length},{key:"published",label:"Publicadas",count:s.filter(x=>x.status==="published").length},{key:"draft",label:"Borradores",count:s.filter(x=>x.status==="draft").length},{key:"sold",label:"Vendidas",count:s.filter(x=>x.status==="sold").length},{key:"rented",label:"Alquiladas",count:s.filter(x=>x.status==="rented").length}].map(x=>i.jsxs("button",{onClick:()=>d(x.key),className:`${f===x.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`,children:[x.label," (",x.count,")"]},x.key))})})}),s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(br,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay propiedades"}),i.jsx("p",{className:"text-gray-600 mb-6",children:f==="all"?"Aún no has creado ninguna propiedad.":`No tienes propiedades con estado "${f}".`}),i.jsxs(oe,{to:"/add-property",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[i.jsx(No,{className:"h-4 w-4 mr-2"}),"Crear Primera Propiedad"]})]}):i.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:s.map(x=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[i.jsxs("div",{className:"relative h-48 bg-gray-200",children:[x.images.length>0?i.jsx("img",{src:x.images[0],alt:x.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:i.jsx(br,{className:"h-12 w-12 text-gray-400"})}),i.jsx("div",{className:"absolute top-3 left-3",children:y(x.status,x.is_urgent,x.is_featured)}),i.jsx("div",{className:"absolute bottom-3 left-3",children:i.jsxs("span",{className:"bg-black bg-opacity-75 text-white px-2 py-1 rounded text-sm font-medium",children:[x.currency," ",x.price.toLocaleString()]})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex justify-between items-start mb-2",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:x.title})}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{className:"truncate",children:[x.city,", ",x.province]})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3 space-x-4",children:[x.bedrooms&&i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"font-medium",children:x.bedrooms}),i.jsx("span",{className:"ml-1",children:"hab"})]}),x.bathrooms&&i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"font-medium",children:x.bathrooms}),i.jsx("span",{className:"ml-1",children:"baños"})]}),x.area_total&&i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"font-medium",children:x.area_total}),i.jsx("span",{className:"ml-1",children:"m²"})]})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4 space-x-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Cr,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:x.views_count})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(jo,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:x.favorites_count})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(L1,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:x.inquiries_count})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(oe,{to:`/edit-property/${x.id}`,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar",children:i.jsx(I1,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>v(x.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Eliminar",children:i.jsx(R1,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[x.status==="published"&&i.jsx("button",{onClick:()=>g(x.id,"suspended"),className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-full hover:bg-red-200",children:"Suspender"}),(x.status==="draft"||x.status==="suspended")&&i.jsx("button",{onClick:()=>g(x.id,"published"),disabled:x.status==="draft"&&(e==null?void 0:e.publicaciones_disponibles)<=0,className:"px-3 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed",title:x.status==="draft"&&(e==null?void 0:e.publicaciones_disponibles)<=0?"Sin publicaciones disponibles":"",children:"Publicar"})]})]})]})]},x.id))})]})})}const CN=()=>{const{id:t}=Lv(),e=Jo(),{user:n}=pt(),[s,a]=E.useState(!0),[l,c]=E.useState(!1),[f,d]=E.useState(null),[m,v]=E.useState([]),[g,y]=E.useState([]),[x,P]=E.useState([]),[w,C]=E.useState({title:"",description:"",price:"",currency:"USD",property_type:"casa",transaction_type:"venta",bedrooms:"",bathrooms:"",area_total:"",area_constructed:"",parking_spaces:"",floor_number:"",total_floors:"",year_built:"",address:"",neighborhood:"",city:"",province:"",country:"Ecuador",postal_code:"",latitude:"",longitude:"",amenities:[],features:{},virtual_tour_url:"",video_url:"",status:"published",is_featured:!1,is_urgent:!1});E.useEffect(()=>{t&&N()},[t]);const N=async()=>{var U,D,J,ne,ge,q,pe,B,Q,V,te;try{const{data:G,error:Ce}=await W.from("properties").select("*").eq("id",t).eq("agent_id",n==null?void 0:n.id).single();if(Ce)throw Ce;G&&(d(G),y(G.images||[]),C({title:G.title||"",description:G.description||"",price:((U=G.price)==null?void 0:U.toString())||"",currency:G.currency||"USD",property_type:G.property_type||"casa",transaction_type:G.transaction_type||"venta",bedrooms:((D=G.bedrooms)==null?void 0:D.toString())||"",bathrooms:((J=G.bathrooms)==null?void 0:J.toString())||"",area_total:((ne=G.area_total)==null?void 0:ne.toString())||"",area_constructed:((ge=G.area_constructed)==null?void 0:ge.toString())||"",parking_spaces:((q=G.parking_spaces)==null?void 0:q.toString())||"",floor_number:((pe=G.floor_number)==null?void 0:pe.toString())||"",total_floors:((B=G.total_floors)==null?void 0:B.toString())||"",year_built:((Q=G.year_built)==null?void 0:Q.toString())||"",address:G.address||"",neighborhood:G.neighborhood||"",city:G.city||"",province:G.province||"",country:G.country||"Ecuador",postal_code:G.postal_code||"",latitude:((V=G.latitude)==null?void 0:V.toString())||"",longitude:((te=G.longitude)==null?void 0:te.toString())||"",amenities:G.amenities||[],features:G.features||{},virtual_tour_url:G.virtual_tour_url||"",video_url:G.video_url||"",status:G.status||"published",is_featured:G.is_featured||!1,is_urgent:G.is_urgent||!1}))}catch(G){console.error("Error fetching property:",G),alert("Error al cargar la propiedad"),e("/my-properties")}finally{a(!1)}},b=U=>{const{name:D,value:J,type:ne}=U.target;C(ge=>({...ge,[D]:ne==="checkbox"?U.target.checked:J}))},j=U=>{if(U.target.files){const D=Array.from(U.target.files);v(J=>[...J,...D])}},T=U=>{v(D=>D.filter((J,ne)=>ne!==U))},S=U=>{y(D=>D.filter(J=>J!==U)),P(D=>[...D,U])},k=async()=>{const U=[];for(const D of m){const J=D.name.split(".").pop(),ne=`${Date.now()}-${Math.random().toString(36).substring(2)}.${J}`,ge=`${n==null?void 0:n.id}/${ne}`,{error:q}=await W.storage.from("property-images").upload(ge,D,{contentType:D.type||`image/${J}`,cacheControl:"3600",upsert:!1});if(q)throw q;const{data:{publicUrl:pe}}=W.storage.from("property-images").getPublicUrl(ge);U.push(pe)}return U},O=async U=>{for(const D of U){const J=D.split("/").slice(-2).join("/");await W.storage.from("property-images").remove([J])}},R=async U=>{U.preventDefault(),c(!0);try{const D=await k();x.length>0&&await O(x);const J=[...g,...D],{error:ne}=await W.from("properties").update({title:w.title,description:w.description,price:parseFloat(w.price),currency:w.currency,property_type:w.property_type,transaction_type:w.transaction_type,bedrooms:w.bedrooms?parseInt(w.bedrooms):null,bathrooms:w.bathrooms?parseFloat(w.bathrooms):null,area_total:w.area_total?parseFloat(w.area_total):null,area_constructed:w.area_constructed?parseFloat(w.area_constructed):null,parking_spaces:w.parking_spaces?parseInt(w.parking_spaces):0,floor_number:w.floor_number?parseInt(w.floor_number):null,total_floors:w.total_floors?parseInt(w.total_floors):null,year_built:w.year_built?parseInt(w.year_built):null,address:w.address,neighborhood:w.neighborhood,city:w.city,province:w.province,country:w.country,postal_code:w.postal_code,latitude:w.latitude?parseFloat(w.latitude):null,longitude:w.longitude?parseFloat(w.longitude):null,amenities:w.amenities,features:w.features,images:J,virtual_tour_url:w.virtual_tour_url,video_url:w.video_url,status:w.status,is_featured:w.is_featured,is_urgent:w.is_urgent,updated_at:new Date().toISOString()}).eq("id",t);if(ne)throw ne;alert("Propiedad actualizada exitosamente"),e("/my-properties")}catch(D){console.error("Error updating property:",D),alert("Error al actualizar la propiedad")}finally{c(!1)}},A=U=>{C(D=>({...D,amenities:D.amenities.includes(U)?D.amenities.filter(J=>J!==U):[...D.amenities,U]}))},$=["piscina","gimnasio","seguridad_24h","ascensor","terraza","balcon","jardin","garage","aire_acondicionado","calefaccion","chimenea","lavanderia","deposito","portero","salon_eventos"];return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando propiedad..."})]})}):f?i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Propiedad"}),i.jsx("button",{onClick:()=>e("/my-properties"),className:"text-gray-600 hover:text-gray-800",children:"← Volver"})]}),i.jsxs("form",{onSubmit:R,className:"space-y-6",children:[i.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Información Básica"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),i.jsx("input",{type:"text",name:"title",value:w.title,onChange:b,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Casa moderna en excelente ubicación"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio *"}),i.jsxs("div",{className:"flex",children:[i.jsxs("select",{name:"currency",value:w.currency,onChange:b,className:"border border-gray-300 rounded-l-lg px-3 py-2 bg-gray-50",children:[i.jsx("option",{value:"USD",children:"USD"}),i.jsx("option",{value:"EUR",children:"EUR"})]}),i.jsx("input",{type:"number",name:"price",value:w.price,onChange:b,required:!0,className:"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.01"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Propiedad *"}),i.jsxs("select",{name:"property_type",value:w.property_type,onChange:b,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"casa",children:"Casa"}),i.jsx("option",{value:"departamento",children:"Departamento"}),i.jsx("option",{value:"oficina",children:"Oficina"}),i.jsx("option",{value:"local_comercial",children:"Local Comercial"}),i.jsx("option",{value:"terreno",children:"Terreno"}),i.jsx("option",{value:"bodega",children:"Bodega"}),i.jsx("option",{value:"quinta",children:"Quinta"}),i.jsx("option",{value:"penthouse",children:"Penthouse"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Transacción *"}),i.jsxs("select",{name:"transaction_type",value:w.transaction_type,onChange:b,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"venta",children:"Venta"}),i.jsx("option",{value:"alquiler",children:"Alquiler"})]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),i.jsx("textarea",{name:"description",value:w.description,onChange:b,rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe las características principales de la propiedad..."})]})]}),i.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Características"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dormitorios"}),i.jsx("input",{type:"number",name:"bedrooms",value:w.bedrooms,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Baños"}),i.jsx("input",{type:"number",name:"bathrooms",value:w.bathrooms,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Área Total (m²)"}),i.jsx("input",{type:"number",name:"area_total",value:w.area_total,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Área Construida (m²)"}),i.jsx("input",{type:"number",name:"area_constructed",value:w.area_constructed,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estacionamientos"}),i.jsx("input",{type:"number",name:"parking_spaces",value:w.parking_spaces,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Piso"}),i.jsx("input",{type:"number",name:"floor_number",value:w.floor_number,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Pisos"}),i.jsx("input",{type:"number",name:"total_floors",value:w.total_floors,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Año de Construcción"}),i.jsx("input",{type:"number",name:"year_built",value:w.year_built,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1900",max:new Date().getFullYear()})]})]})]}),i.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Ubicación"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección *"}),i.jsx("input",{type:"text",name:"address",value:w.address,onChange:b,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Dirección completa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sector/Barrio"}),i.jsx("input",{type:"text",name:"neighborhood",value:w.neighborhood,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad *"}),i.jsx("input",{type:"text",name:"city",value:w.city,onChange:b,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provincia *"}),i.jsx("input",{type:"text",name:"province",value:w.province,onChange:b,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"País"}),i.jsx("input",{type:"text",name:"country",value:w.country,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitud"}),i.jsx("input",{type:"number",name:"latitude",value:w.latitude,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",step:"any"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud"}),i.jsx("input",{type:"number",name:"longitude",value:w.longitude,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",step:"any"})]})]})]}),i.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Imágenes"}),g.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Imágenes actuales:"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:g.map((U,D)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:U,alt:`Imagen ${D+1}`,className:"w-full h-32 object-cover rounded-lg"}),i.jsx("button",{type:"button",onClick:()=>S(U),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"×"})]},D))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agregar nuevas imágenes"}),i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),m.length>0&&i.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:m.map((U,D)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:URL.createObjectURL(U),alt:`Nueva imagen ${D+1}`,className:"w-full h-32 object-cover rounded-lg"}),i.jsx("button",{type:"button",onClick:()=>T(D),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"×"})]},D))})]})]}),i.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Amenidades"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:$.map(U=>i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:w.amenities.includes(U),onChange:()=>A(U),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-gray-700 capitalize",children:U.replace("_"," ")})]},U))})]}),i.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Estado y Opciones"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),i.jsxs("select",{name:"status",value:w.status,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"draft",children:"Borrador"}),i.jsx("option",{value:"published",children:"Publicada"}),i.jsx("option",{value:"suspended",children:"Suspendida"})]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",name:"is_featured",checked:w.is_featured,onChange:b,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Destacada"})]}),i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",name:"is_urgent",checked:w.is_urgent,onChange:b,className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Urgente"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx("button",{type:"button",onClick:()=>e("/my-properties"),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:l?"Guardando...":"Actualizar Propiedad"})]})]})]})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Propiedad no encontrada"}),i.jsx("button",{onClick:()=>e("/my-properties"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Volver a Mis Propiedades"})]})})};/*!
 * react-paypal-js v8.8.3 (2025-04-11T19:50:46.506Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t.INITIAL="initial",t.PENDING="pending",t.REJECTED="rejected",t.RESOLVED="resolved"})(lt||(lt={}));var Gn;(function(t){t.LOADING_STATUS="setLoadingStatus",t.RESET_OPTIONS="resetOptions",t.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Gn||(Gn={}));var Mm;(function(t){t.NUMBER="number",t.CVV="cvv",t.EXPIRATION_DATE="expirationDate",t.EXPIRATION_MONTH="expirationMonth",t.EXPIRATION_YEAR="expirationYear",t.POSTAL_CODE="postalCode"})(Mm||(Mm={}));var Re=function(){return Re=Object.assign||function(e){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Re.apply(this,arguments)};function Jv(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function Rm(t,e,n){if(n||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}var Di="data-react-paypal-script-id",xr={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},TN="Failed to load the PayPal JS SDK script.",Qv="paypal",LN="usePayPalScriptReducer must be used within a PayPalScriptProvider";function IN(t){return t===void 0&&(t=Qv),window[t]}function ON(t){for(var e="",n=0;n<t.length;n++){var s=t[n].charCodeAt(0)*n;t[n+1]&&(s+=t[n+1].charCodeAt(0)*(n-1)),e+=String.fromCharCode(97+Math.abs(s)%26)}return e}function AN(t){var e=t.reactComponentName,n=t.sdkComponentKey,s=t.sdkRequestedComponents,a=s===void 0?"":s,l=t.sdkDataNamespace,c=l===void 0?Qv:l,f=n.charAt(0).toUpperCase().concat(n.substring(1)),d="Unable to render <".concat(e," /> because window.").concat(c,".").concat(f," is undefined."),m=typeof a=="string"?a:a.join(",");if(!m.includes(n)){var v=[m,n].filter(Boolean).join();d+=`
To fix the issue, add '`.concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(v,"'}}>`.")}return d}function Yv(t){var e=t,n=Di;e[n];var s=Jv(e,[n+""]);return"react-paypal-js-".concat(ON(JSON.stringify(s)))}function MN(t){var e=self.document.querySelector("script[".concat(Di,'="').concat(t,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function RN(t,e){var n,s;switch(e.type){case Gn.LOADING_STATUS:return typeof e.value=="object"?Re(Re({},t),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):Re(Re({},t),{loadingStatus:e.value});case Gn.RESET_OPTIONS:return MN(t.options[Di]),Re(Re({},t),{loadingStatus:lt.PENDING,options:Re(Re((n={},n[xr.DATA_SDK_INTEGRATION_SOURCE]=xr.DATA_LIBRARY_VALUE,n),e.value),(s={},s[Di]="".concat(Yv(e.value)),s))});case Gn.SET_BRAINTREE_INSTANCE:return Re(Re({},t),{braintreePayPalCheckoutInstance:e.value});default:return t}}var Xv=E.createContext(null);function zN(t){if(typeof(t==null?void 0:t.dispatch)=="function"&&t.dispatch.length!==0)return t;throw new Error(LN)}function DN(){var t=zN(E.useContext(Xv)),e=Re(Re({},t),{isInitial:t.loadingStatus===lt.INITIAL,isPending:t.loadingStatus===lt.PENDING,isResolved:t.loadingStatus===lt.RESOLVED,isRejected:t.loadingStatus===lt.REJECTED});return[e,t.dispatch]}E.createContext({});function BN(t){var e=E.useRef(new Proxy({},{get:function(n,s,a){return typeof n[s]=="function"?function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return n[s].apply(n,l)}:Reflect.get(n,s,a)}}));return e.current=Object.assign(e.current,t),e.current}var zd=function(t){var e,n=t.className,s=n===void 0?"":n,a=t.disabled,l=a===void 0?!1:a,c=t.children,f=t.forceReRender,d=f===void 0?[]:f,m=Jv(t,["className","disabled","children","forceReRender"]),v=l?{opacity:.38}:{},g="".concat(s," ").concat(l?"paypal-buttons-disabled":"").trim(),y=E.useRef(null),x=E.useRef(null),P=BN(m),w=DN()[0],C=w.isResolved,N=w.options,b=E.useState(null),j=b[0],T=b[1],S=E.useState(!0),k=S[0],O=S[1],R=E.useState(null),A=R[1];function $(){x.current!==null&&x.current.close().catch(function(){})}return!((e=x.current)===null||e===void 0)&&e.updateProps&&x.current.updateProps({message:m.message}),E.useEffect(function(){if(C===!1)return $;var U=IN(N.dataNamespace);if(U===void 0||U.Buttons===void 0)return A(function(){throw new Error(AN({reactComponentName:zd.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:N.components,sdkDataNamespace:N[xr.DATA_NAMESPACE]}))}),$;var D=function(J,ne){T(ne),typeof m.onInit=="function"&&m.onInit(J,ne)};try{x.current=U.Buttons(Re(Re({},P),{onInit:D}))}catch(J){return A(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(J))})}return x.current.isEligible()===!1?(O(!1),$):(y.current&&x.current.render(y.current).catch(function(J){y.current===null||y.current.children.length===0||A(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(J))})}),$)},Rm(Rm([C],d,!0),[m.fundingSource],!1)),E.useEffect(function(){j!==null&&(l===!0?j.disable().catch(function(){}):j.enable().catch(function(){}))},[l,j]),tn.createElement(tn.Fragment,null,k?tn.createElement("div",{ref:y,style:v,className:g}):c)};zd.displayName="PayPalButtons";function UN(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function $N(t,e){var n=document.querySelector('script[src="'.concat(t,'"]'));if(n===null)return null;var s=ex(t,e),a=n.cloneNode();if(delete a.dataset.uidAuto,Object.keys(a.dataset).length!==Object.keys(s.dataset).length)return null;var l=!0;return Object.keys(a.dataset).forEach(function(c){a.dataset[c]!==s.dataset[c]&&(l=!1)}),l?n:null}function FN(t){var e=t.url,n=t.attributes,s=t.onSuccess,a=t.onError,l=ex(e,n);l.onerror=a,l.onload=s,document.head.insertBefore(l,document.head.firstElementChild)}function ZN(t){var e=t.sdkBaseUrl,n=t.environment,s=UN(t,["sdkBaseUrl","environment"]),a=e||WN(n),l=s,c=Object.keys(l).filter(function(m){return typeof l[m]<"u"&&l[m]!==null&&l[m]!==""}).reduce(function(m,v){var g=l[v].toString();return v=qN(v),v.substring(0,4)==="data"||v==="crossorigin"?m.attributes[v]=g:m.queryParams[v]=g,m},{queryParams:{},attributes:{}}),f=c.queryParams,d=c.attributes;return f["merchant-id"]&&f["merchant-id"].indexOf(",")!==-1&&(d["data-merchant-id"]=f["merchant-id"],f["merchant-id"]="*"),{url:"".concat(a,"?").concat(VN(f)),attributes:d}}function qN(t){var e=function(n,s){return(s?"-":"")+n.toLowerCase()};return t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function VN(t){var e="";return Object.keys(t).forEach(function(n){e.length!==0&&(e+="&"),e+=n+"="+t[n]}),e}function WN(t){return t==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function ex(t,e){e===void 0&&(e={});var n=document.createElement("script");return n.src=t,Object.keys(e).forEach(function(s){n.setAttribute(s,e[s]),s==="data-csp-nonce"&&n.setAttribute("nonce",e["data-csp-nonce"])}),n}function HN(t,e){if(e===void 0&&(e=Promise),tx(t,e),typeof document>"u")return e.resolve(null);var n=ZN(t),s=n.url,a=n.attributes,l=a["data-namespace"]||"paypal",c=zm(l);return a["data-js-sdk-library"]||(a["data-js-sdk-library"]="paypal-js"),$N(s,a)&&c?e.resolve(c):GN({url:s,attributes:a},e).then(function(){var f=zm(l);if(f)return f;throw new Error("The window.".concat(l," global variable is not available."))})}function GN(t,e){e===void 0&&(e=Promise),tx(t,e);var n=t.url,s=t.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof s<"u"&&typeof s!="object")throw new Error("Expected attributes to be an object.");return new e(function(a,l){if(typeof document>"u")return a();FN({url:n,attributes:s,onSuccess:function(){return a()},onError:function(){var c=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return l(c)}})})}function zm(t){return window[t]}function tx(t,e){if(typeof t!="object"||t===null)throw new Error("Expected an options object.");var n=t.environment;if(n&&n!=="production"&&n!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var KN=function(t){var e,n=t.options,s=n===void 0?{clientId:"test"}:n,a=t.children,l=t.deferLoading,c=l===void 0?!1:l,f=E.useReducer(RN,{options:Re(Re({},s),(e={},e[xr.DATA_JS_SDK_LIBRARY]=xr.DATA_LIBRARY_VALUE,e[xr.DATA_SDK_INTEGRATION_SOURCE]=xr.DATA_LIBRARY_VALUE,e[Di]="".concat(Yv(s)),e)),loadingStatus:c?lt.INITIAL:lt.PENDING}),d=f[0],m=f[1];return E.useEffect(function(){if(c===!1&&d.loadingStatus===lt.INITIAL)return m({type:Gn.LOADING_STATUS,value:lt.PENDING});if(d.loadingStatus===lt.PENDING){var v=!0;return HN(d.options).then(function(){v&&m({type:Gn.LOADING_STATUS,value:lt.RESOLVED})}).catch(function(g){console.error("".concat(TN," ").concat(g)),v&&m({type:Gn.LOADING_STATUS,value:{state:lt.REJECTED,message:String(g)}})}),function(){v=!1}}},[d.options,c,d.loadingStatus]),tn.createElement(Xv.Provider,{value:Re(Re({},d),{dispatch:m})},a)};function Dm(){}E.createContext({cardFieldsForm:null,fields:{},registerField:Dm,unregisterField:Dm});const Bm=[{id:"starter",name:"Starter",price:10,credits:5,duration:90,features:["5 propiedades","90 días de duración c/u","Analytics básicos","Chat con compradores"]},{id:"professional",name:"Professional",price:18,credits:10,duration:90,features:["10 propiedades","90 días de duración c/u","Analytics avanzados","Chat prioritario","Soporte por email"],popular:!0},{id:"premium",name:"Premium",price:30,credits:20,duration:120,features:["20 propiedades","120 días de duración c/u","Analytics completos","Chat prioritario","Soporte telefónico","Destacar propiedades"]},{id:"enterprise",name:"Enterprise",price:50,credits:50,duration:120,features:["50 propiedades","120 días de duración c/u","Analytics premium","Gerente de cuenta","API personalizada","Branding personalizado"]}],JN="AbYKlb2RXOBy0HDMyt1cB76UTSN3cX8_28MZpLYEaqnATydf3zLrB8Ig550fQDB1aUFeo_Uz3f-s4Us5";function QN({onPurchaseComplete:t}){var b,j;const[e,n]=E.useState(null),[s,a]=E.useState(null),[l,c]=E.useState(!0),[f,d]=E.useState(null),[m,v]=E.useState(0),[g,y]=E.useState(!1),[x,P]=E.useState(null);E.useEffect(()=>{w()},[]);const w=async()=>{try{const{data:{user:T}}=await W.auth.getUser();if(!T){window.location.href="/login";return}n(T);const{data:S,error:k}=await W.from("user_profiles").select("*").eq("id",T.id).maybeSingle();k&&console.error("Error loading user profile:",k);let{data:O,error:R}=await W.from("agents").select("*").eq("id",T.id).maybeSingle();if(!O&&!R){console.log("Creating agent record for user:",T.id);const{data:A,error:$}=await W.from("agents").insert({id:T.id,credits:0,total_credits_used:0,free_publications_used:0,is_new_agent:!0,is_verified:!1,publicaciones_disponibles:0}).select().single();!$&&A&&(O=A)}if(O){const A={...S,agents:O};a(A);const{data:$}=await W.rpc("can_use_free_publication",{agent_uuid:T.id});y($||!1),v(O.free_publications_used||0)}}catch(T){console.error("Error loading user data:",T)}finally{c(!1)}},C=async(T,S)=>{var k,O,R,A,$,U;d(S);try{const D=Bm.find(Q=>Q.id===S);if(!D)throw new Error("Plan no encontrado");const{data:J,error:ne}=await W.from("user_profiles").select("id, role").eq("id",e.id).maybeSingle();if(ne&&console.error("Error checking user profile:",ne),J)J.role!=="agent"&&await W.from("user_profiles").update({role:"agent",updated_at:new Date().toISOString()}).eq("id",e.id);else{const{error:Q}=await W.from("user_profiles").insert({id:e.id,email:e.email,full_name:((k=e.user_metadata)==null?void 0:k.full_name)||e.email,role:"agent",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(Q)throw console.error("Error creating user profile:",Q),new Error("Error creando perfil de usuario")}try{const{error:Q}=await W.from("payments").insert({agent_id:e.id,plan:S,amount:D.price,credits_awarded:D.credits,payment_method:"paypal",transaction_id:T.id,status:"completed",paypal_details:T});Q&&console.warn("Tabla payments no existe o error:",Q)}catch(Q){console.warn("Error registrando pago, continuando:",Q)}console.log("🔄 Actualizando créditos para usuario:",e.id),console.log("💰 Créditos actuales:",((O=s==null?void 0:s.agents)==null?void 0:O.credits)||0),console.log("➕ Créditos a añadir:",D.credits);const{error:ge}=await W.from("agents").upsert({id:e.id,credits:(((R=s==null?void 0:s.agents)==null?void 0:R.credits)||0)+D.credits,total_credits_used:((A=s==null?void 0:s.agents)==null?void 0:A.total_credits_used)||0,is_verified:!0,publicaciones_disponibles:((($=s==null?void 0:s.agents)==null?void 0:$.publicaciones_disponibles)||0)+D.credits,updated_at:new Date().toISOString()},{onConflict:"id"});if(ge)throw console.error("❌ Error updating agent credits:",ge),new Error(`Error actualizando créditos: ${ge.message}`);console.log("✅ Créditos actualizados exitosamente en la base de datos");const q=((U=s==null?void 0:s.agents)==null?void 0:U.credits)||0,pe=q+D.credits,B=`🎉 ¡Pago exitoso!

📊 Resumen:
• Plan: ${D.name}
• Créditos añadidos: ${D.credits}
• Créditos antes: ${q}
• Créditos ahora: ${pe}

Los créditos ya están disponibles en tu cuenta. ¡Puedes empezar a publicar!`;P(B),setTimeout(()=>{P(null)},8e3),s!=null&&s.agents&&a({...s,agents:{...s.agents,credits:pe,publicaciones_disponibles:(s.agents.publicaciones_disponibles||0)+D.credits,is_verified:!0}}),setTimeout(async()=>{console.log("Recargando datos desde la base de datos..."),await w()},2e3),t==null||t()}catch(D){console.error("Error processing payment:",D),alert("Error al procesar el pago. Contacta soporte.")}finally{d(null)}},N=T=>{console.error("PayPal Error:",T),alert("Error en el pago con PayPal. Intenta nuevamente."),d(null)};return l?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx(KN,{options:{clientId:JN,currency:"USD",intent:"capture"},children:i.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[x&&i.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx($t,{className:"h-5 w-5 text-green-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("pre",{className:"text-sm text-green-800 whitespace-pre-wrap",children:x}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:()=>P(null),className:"text-xs text-green-600 hover:text-green-800 underline",children:"Cerrar"})})]})]})})}),i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Planes de Publicación"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Elige el plan perfecto para publicar tus propiedades y hacer crecer tu negocio inmobiliario"})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tu cuenta"}),i.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[i.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Créditos disponibles"}),i.jsx("p",{className:"text-2xl font-bold text-blue-800",children:((b=s==null?void 0:s.agents)==null?void 0:b.credits)||0})]}),i.jsxs("div",{className:"bg-gray-50 px-4 py-2 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Publicaciones totales"}),i.jsx("p",{className:"text-lg font-semibold text-gray-800",children:((j=s==null?void 0:s.agents)==null?void 0:j.publicaciones_disponibles)||0})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[i.jsxs("button",{onClick:()=>{c(!0),w()},disabled:l,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:[l?"⟳":"🔄"," Actualizar"]}),g&&m<2&&i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(S1,{className:"h-4 w-4 text-green-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-green-800",children:"¡Publicaciones Gratis!"}),i.jsxs("p",{className:"text-xs text-green-600",children:["Te quedan ",2-m," de 60 días"]})]})]})})]})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:Bm.map(T=>i.jsxs("div",{className:`relative bg-white rounded-2xl shadow-lg overflow-hidden transition-transform hover:scale-105 ${T.popular?"ring-2 ring-blue-500":""}`,children:[T.popular&&i.jsx("div",{className:"absolute top-0 left-0 right-0 bg-blue-500 text-white text-center py-2",children:i.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[i.jsx(Qn,{className:"h-4 w-4 fill-current"}),i.jsx("span",{className:"text-sm font-medium",children:"Más Popular"})]})}),i.jsxs("div",{className:`p-6 ${T.popular?"pt-16":""}`,children:[i.jsxs("div",{className:"mb-4",children:[T.id==="starter"&&i.jsx(ko,{className:"h-8 w-8 text-blue-600"}),T.id==="professional"&&i.jsx($v,{className:"h-8 w-8 text-blue-600"}),T.id==="premium"&&i.jsx(Ld,{className:"h-8 w-8 text-blue-600"}),T.id==="enterprise"&&i.jsx(ii,{className:"h-8 w-8 text-blue-600"})]}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:T.name}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["$",T.price]}),i.jsx("span",{className:"text-gray-600 ml-1",children:"USD"})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-6",children:[i.jsx(Vt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:[T.duration," días por propiedad"]})]}),i.jsx("ul",{className:"space-y-3 mb-8",children:T.features.map((S,k)=>i.jsxs("li",{className:"flex items-center text-sm",children:[i.jsx(bo,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),i.jsx("span",{className:"text-gray-700",children:S})]},k))}),i.jsx("div",{className:"w-full",children:f===T.id?i.jsxs("div",{className:"w-full bg-gray-100 rounded-lg py-3 flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-2"}),i.jsx("span",{className:"text-gray-700",children:"Procesando..."})]}):i.jsx(zd,{style:{layout:"vertical",color:"blue",shape:"rect"},createOrder:(S,k)=>k.order.create({intent:"CAPTURE",purchase_units:[{amount:{value:T.price.toString(),currency_code:"USD"},description:`PropFinder - Plan ${T.name} (${T.credits} créditos)`}],application_context:{brand_name:"PropFinder",landing_page:"BILLING",user_action:"PAY_NOW"}}),onApprove:async(S,k)=>{if(k.order){const O=await k.order.capture();await C(O,T.id)}},onError:N,onCancel:()=>{console.log("PayPal payment cancelled"),d(null)}})})]})]},T.id))}),i.jsxs("div",{className:"mt-12 bg-blue-50 rounded-lg p-8",children:[i.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"¿Cómo funcionan los créditos?"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:i.jsx("span",{className:"text-blue-600 font-bold",children:"1"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-blue-900",children:"Compra créditos"}),i.jsx("p",{className:"text-sm text-blue-700",children:"Elige el plan que mejor se adapte a tus necesidades"})]})]}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:i.jsx("span",{className:"text-blue-600 font-bold",children:"2"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-blue-900",children:"Publica propiedades"}),i.jsx("p",{className:"text-sm text-blue-700",children:"Usa 1 crédito por cada propiedad que publiques"})]})]}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:i.jsx("span",{className:"text-blue-600 font-bold",children:"3"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-blue-900",children:"Recibe leads"}),i.jsx("p",{className:"text-sm text-blue-700",children:"Conecta con compradores interesados en tus propiedades"})]})]})]})]})]})})})}function YN(){const{user:t,loading:e}=pt(),{visits:n,loading:s,error:a,getVisitsByUser:l,cancelVisit:c}=Kv(),[f,d]=E.useState("all"),[m,v]=E.useState(!1),[g,y]=E.useState("");E.useEffect(()=>{t!=null&&t.email&&l(t.email)},[t==null?void 0:t.email,l]);const x=n.filter(S=>f==="all"?!0:S.status===f),P=S=>{const k={pending:i.jsx(Er,{className:"h-5 w-5 text-yellow-600"}),confirmed:i.jsx($t,{className:"h-5 w-5 text-green-600"}),rejected:i.jsx(Qo,{className:"h-5 w-5 text-red-600"}),completed:i.jsx($t,{className:"h-5 w-5 text-blue-600"}),cancelled:i.jsx(Gi,{className:"h-5 w-5 text-gray-600"})};return k[S]||k.pending},w=S=>{const k={pending:"bg-yellow-100 text-yellow-800 border-yellow-200",confirmed:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",completed:"bg-blue-100 text-blue-800 border-blue-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200"};return k[S]||k.pending},C=S=>({pending:"Pendiente de confirmación",confirmed:"Confirmada",rejected:"Rechazada",completed:"Completada",cancelled:"Cancelada"})[S]||S,N=S=>({pending:"El agente revisará tu solicitud y te contactará pronto",confirmed:"Tu visita ha sido confirmada por el agente",rejected:"El agente no pudo aceptar esta visita",completed:"La visita se realizó exitosamente",cancelled:"Esta visita fue cancelada"})[S]||"",b=S=>new Date(S).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),j=async()=>{if(!g)return;await c(g)&&(v(!1),y(""))},T=S=>{y(S),v(!0)};return e?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Visitas"}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona todas tus visitas programadas a propiedades"})]}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("select",{value:f,onChange:S=>d(S.target.value),className:"input-field py-2",children:[i.jsx("option",{value:"all",children:"Todas las visitas"}),i.jsx("option",{value:"pending",children:"Pendientes"}),i.jsx("option",{value:"confirmed",children:"Confirmadas"}),i.jsx("option",{value:"completed",children:"Completadas"}),i.jsx("option",{value:"rejected",children:"Rechazadas"}),i.jsx("option",{value:"cancelled",children:"Canceladas"})]})})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:s?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):a?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-red-600",children:a})}):x.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Hn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:f==="all"?"No tienes visitas programadas":`No tienes visitas ${C(f).toLowerCase()}`}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Explora propiedades y agenda tu primera visita"}),i.jsx(oe,{to:"/properties",className:"btn-primary",children:"Explorar Propiedades"})]}):i.jsx("div",{className:"divide-y divide-gray-200",children:x.map(S=>{var k,O,R,A;return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[((O=(k=S.properties)==null?void 0:k.images)==null?void 0:O[0])&&i.jsx("img",{src:S.properties.images[0],alt:S.properties.title,className:"w-16 h-16 rounded-lg object-cover"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:((R=S.properties)==null?void 0:R.title)||"Propiedad"}),i.jsx(oe,{to:`/properties/${S.property_id}`,className:"text-primary-600 hover:text-primary-700 transition-colors",children:i.jsx(Cr,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:((A=S.properties)==null?void 0:A.address)||"Dirección no disponible"})]}),i.jsx("div",{className:"flex items-center space-x-3 mb-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[P(S.status),i.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${w(S.status)}`,children:C(S.status)})]})}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:N(S.status)}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Fecha solicitada"}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(Hn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:b(S.preferred_date)})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[i.jsx(Vt,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:S.preferred_time})]})]}),S.status==="confirmed"&&S.confirmed_date&&S.confirmed_time&&i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[i.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Fecha confirmada"}),i.jsxs("div",{className:"flex items-center text-sm text-green-700",children:[i.jsx(Hn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:b(S.confirmed_date)})]}),i.jsxs("div",{className:"flex items-center text-sm text-green-700 mt-1",children:[i.jsx(Vt,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:S.confirmed_time})]})]})]}),S.message&&i.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200 mb-4",children:[i.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Tu mensaje"}),i.jsx("p",{className:"text-sm text-blue-700",children:S.message})]}),S.agent_notes&&i.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200 mb-4",children:[i.jsx("h4",{className:"font-medium text-yellow-900 mb-1",children:"Notas del agente"}),i.jsx("p",{className:"text-sm text-yellow-700",children:S.agent_notes})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Or,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:S.visitor_email})]}),S.visitor_phone&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ar,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:S.visitor_phone})]})]})]})]})}),i.jsxs("div",{className:"ml-6 flex flex-col space-y-2",children:[(S.status==="pending"||S.status==="confirmed")&&i.jsx("button",{onClick:()=>T(S.id),className:"btn-secondary text-red-600 border-red-200 hover:bg-red-50 text-sm px-3 py-1",children:"Cancelar"}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Creada: ",new Date(S.created_at).toLocaleDateString("es-ES")]})]})]})},S.id)})})})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cancelar Visita"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"¿Estás seguro de que quieres cancelar esta visita? Esta acción no se puede deshacer."}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:()=>v(!1),className:"btn-secondary",children:"Mantener visita"}),i.jsx("button",{onClick:j,className:"btn-primary bg-red-600 hover:bg-red-700",children:"Cancelar visita"})]})]})})})]}):i.jsx(sn,{to:"/login",replace:!0})}function XN(){var b,j,T;const{sessions:t,messages:e,loading:n,sending:s,fetchMessages:a,sendMessage:l,closeChatSession:c,setActiveSession:f}=Od(),{user:d,isAgent:m}=pt(),[v,g]=E.useState(""),[y,x]=E.useState(null),P=S=>{x(S),f(S),a(S.id)},w=async S=>{S.preventDefault(),!(!v.trim()||!y||s)&&(await l({conversation_id:y.id,message_text:v.trim()}),g(""))},C=async S=>{window.confirm("¿Estás seguro de que quieres cerrar este chat?")&&(await c(S),(y==null?void 0:y.id)===S&&(x(null),f(null)))},N=S=>{const k=new Date(S),R=Math.floor((new Date().getTime()-k.getTime())/6e4);return R<1?"Ahora":R<60?`${R}m`:R<1440?`${Math.floor(R/60)}h`:k.toLocaleDateString("es-ES",{month:"short",day:"numeric"})};return d?i.jsxs("div",{className:"bg-white rounded-lg shadow-lg h-[600px] flex",children:[i.jsxs("div",{className:"w-1/3 border-r border-gray-200 flex flex-col",children:[i.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:i.jsxs("h2",{className:"font-semibold text-gray-900 flex items-center space-x-2",children:[i.jsx(en,{className:"w-5 h-5 text-blue-600"}),i.jsx("span",{children:"Mis Chats"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:n?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):t.length===0?i.jsxs("div",{className:"p-6 text-center text-gray-500",children:[i.jsx(en,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),i.jsx("p",{className:"text-sm",children:"No tienes chats activos"})]}):i.jsx("div",{className:"divide-y divide-gray-100",children:t.map(S=>{var R;const k=m?S.buyer:S.agent,O=S.property;return i.jsx("div",{onClick:()=>P(S),className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${(y==null?void 0:y.id)===S.id?"bg-blue-50 border-r-2 border-blue-600":""}`,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:k!=null&&k.avatar_url?i.jsx("img",{src:k.avatar_url,alt:k.full_name,className:"w-10 h-10 rounded-full object-cover"}):i.jsx(Wt,{className:"w-5 h-5 text-gray-500"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-medium text-gray-900 truncate",children:(k==null?void 0:k.full_name)||"Usuario"}),i.jsxs("div",{className:"flex items-center space-x-1",children:[S.unread_count&&S.unread_count>0&&i.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:S.unread_count}),i.jsx("span",{className:"text-xs text-gray-500",children:N(S.last_message_at)})]})]}),i.jsx("p",{className:"text-sm text-gray-600 truncate mt-1",children:(O==null?void 0:O.title)||"Propiedad"}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("span",{className:"text-sm font-medium text-green-600",children:["$",(R=O==null?void 0:O.price)==null?void 0:R.toLocaleString("es-MX")]}),m&&i.jsx("button",{onClick:A=>{A.stopPropagation(),C(S.id)},className:"text-xs text-red-600 hover:text-red-800 px-2 py-1 rounded hover:bg-red-50",children:"Cerrar"})]})]})]})},S.id)})})})]}),i.jsx("div",{className:"flex-1 flex flex-col",children:y?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:i.jsx(Wt,{className:"w-5 h-5 text-gray-500"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:m?(b=y.buyer)==null?void 0:b.full_name:(j=y.agent)==null?void 0:j.full_name}),i.jsx("p",{className:"text-sm text-gray-600 truncate max-w-64",children:(T=y.property)==null?void 0:T.title})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("span",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[i.jsx(Vt,{className:"w-3 h-3"}),i.jsx("span",{children:"Activo"})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:e.map(S=>{const k=S.sender_id===(d==null?void 0:d.id);return S.message_type==="system"?i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"bg-gray-100 px-4 py-2 rounded-full text-xs text-gray-600 flex items-center space-x-1",children:[i.jsx(Er,{className:"w-3 h-3"}),i.jsx("span",{children:S.message_text})]})},S.id):i.jsx("div",{className:`flex ${k?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${k?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[i.jsx("p",{className:"text-sm",children:S.message_text}),i.jsxs("div",{className:`flex items-center justify-between mt-1 text-xs ${k?"text-blue-100":"text-gray-500"}`,children:[i.jsx("span",{children:N(S.created_at)}),k&&i.jsx($t,{className:`w-3 h-3 ml-2 ${S.is_read?"text-blue-200":"text-blue-300"}`})]})]})},S.id)})}),i.jsx("form",{onSubmit:w,className:"p-4 border-t border-gray-200 bg-gray-50",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("input",{type:"text",value:v,onChange:S=>g(S.target.value),placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s}),i.jsxs("button",{type:"submit",disabled:!v.trim()||s,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[i.jsx(en,{className:"w-4 h-4"}),i.jsx("span",{children:s?"Enviando...":"Enviar"})]})]})})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:i.jsxs("div",{className:"text-center",children:[i.jsx(en,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Selecciona un chat"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Elige una conversación de la lista para comenzar a chatear"})]})})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}function e2(){return i.jsx("div",{className:"min-h-screen bg-gray-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("div",{className:"flex items-center space-x-4 mb-4",children:i.jsxs(oe,{to:"/dashboard",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[i.jsx(Rv,{className:"w-5 h-5 mr-2"}),"Volver al dashboard"]})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(en,{className:"w-6 h-6 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Centro de Mensajes"}),i.jsx("p",{className:"text-gray-600",children:"Gestiona todas tus conversaciones en un solo lugar"})]})]})]}),i.jsx(XN,{}),i.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"¿Cómo funciona el sistema de chat?"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Para compradores:"}),i.jsxs("ul",{className:"space-y-1",children:[i.jsx("li",{children:"• Contacta directamente con agentes desde cualquier propiedad"}),i.jsx("li",{children:"• Recibe respuestas en tiempo real"}),i.jsx("li",{children:"• Programa visitas fácilmente"}),i.jsx("li",{children:"• Mantén un historial de todas tus consultas"})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Para agentes:"}),i.jsxs("ul",{className:"space-y-1",children:[i.jsx("li",{children:"• Responde a consultas de manera inmediata"}),i.jsx("li",{children:"• Gestiona múltiples conversaciones"}),i.jsx("li",{children:"• Cierra chats cuando completes la atención"}),i.jsx("li",{children:"• Mantén un seguimiento de tus leads"})]})]})]})]})]})})}function t2(){return i.jsxs(u1,{children:[i.jsx(Je,{path:"/",element:i.jsx(F1,{})}),i.jsx(Je,{path:"/properties",element:i.jsx(W1,{})}),i.jsx(Je,{path:"/properties/:id",element:i.jsx(pN,{})}),i.jsx(Je,{path:"/login",element:i.jsx(gN,{})}),i.jsx(Je,{path:"/register",element:i.jsx(vN,{})}),i.jsx(Je,{path:"/admin",element:i.jsx(xN,{})}),i.jsx(Je,{path:"/become-agent",element:i.jsx(yN,{})}),i.jsx(Je,{path:"/dashboard",element:i.jsx(Am,{})}),i.jsx(Je,{path:"/agent-dashboard",element:i.jsx(Am,{})}),i.jsx(Je,{path:"/add-property",element:i.jsx(PN,{})}),i.jsx(Je,{path:"/my-properties",element:i.jsx(EN,{})}),i.jsx(Je,{path:"/edit-property/:id",element:i.jsx(CN,{})}),i.jsx(Je,{path:"/payment-plans",element:i.jsx(QN,{})}),i.jsx(Je,{path:"/my-visits",element:i.jsx(YN,{})}),i.jsx(Je,{path:"/chat",element:i.jsx(e2,{})})]})}function n2(){return i.jsx(U1,{children:i.jsx(yj,{children:i.jsx($1,{children:i.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[i.jsx(D1,{}),i.jsx("main",{className:"flex-1",children:i.jsx(t2,{})}),i.jsx(B1,{})]})})})})}mc.createRoot(document.getElementById("root")).render(i.jsx(tn.StrictMode,{children:i.jsx(n2,{})}));
//# sourceMappingURL=index-D4Nbrftl.js.map
