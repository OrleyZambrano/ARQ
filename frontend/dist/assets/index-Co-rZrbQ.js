var vy=Object.defineProperty;var yy=(t,e,n)=>e in t?vy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ca=(t,e,n)=>yy(t,typeof e!="symbol"?e+"":e,n);function xy(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const l=Object.getOwnPropertyDescriptor(i,s);l&&Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();var yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Am(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _y(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var Mm={exports:{}},_o={},Rm={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=Symbol.for("react.element"),wy=Symbol.for("react.portal"),by=Symbol.for("react.fragment"),jy=Symbol.for("react.strict_mode"),Ny=Symbol.for("react.profiler"),ky=Symbol.for("react.provider"),Sy=Symbol.for("react.context"),Py=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),Cy=Symbol.for("react.memo"),Ty=Symbol.for("react.lazy"),Zh=Symbol.iterator;function Ly(t){return t===null||typeof t!="object"?null:(t=Zh&&t[Zh]||t["@@iterator"],typeof t=="function"?t:null)}var zm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dm=Object.assign,Bm={};function xi(t,e,n){this.props=t,this.context=e,this.refs=Bm,this.updater=n||zm}xi.prototype.isReactComponent={};xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Um(){}Um.prototype=xi.prototype;function _u(t,e,n){this.props=t,this.context=e,this.refs=Bm,this.updater=n||zm}var wu=_u.prototype=new Um;wu.constructor=_u;Dm(wu,xi.prototype);wu.isPureReactComponent=!0;var Wh=Array.isArray,$m=Object.prototype.hasOwnProperty,bu={current:null},Fm={key:!0,ref:!0,__self:!0,__source:!0};function Zm(t,e,n){var i,s={},l=null,u=null;if(e!=null)for(i in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(l=""+e.key),e)$m.call(e,i)&&!Fm.hasOwnProperty(i)&&(s[i]=e[i]);var f=arguments.length-2;if(f===1)s.children=n;else if(1<f){for(var d=Array(f),p=0;p<f;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(i in f=t.defaultProps,f)s[i]===void 0&&(s[i]=f[i]);return{$$typeof:As,type:t,key:l,ref:u,props:s,_owner:bu.current}}function Oy(t,e){return{$$typeof:As,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ju(t){return typeof t=="object"&&t!==null&&t.$$typeof===As}function Iy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qh=/\/+/g;function Pl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Iy(""+t.key):e.toString(36)}function Ta(t,e,n,i,s){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case As:case wy:u=!0}}if(u)return u=t,s=s(u),t=i===""?"."+Pl(u,0):i,Wh(s)?(n="",t!=null&&(n=t.replace(qh,"$&/")+"/"),Ta(s,e,n,"",function(p){return p})):s!=null&&(ju(s)&&(s=Oy(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(qh,"$&/")+"/")+t)),e.push(s)),1;if(u=0,i=i===""?".":i+":",Wh(t))for(var f=0;f<t.length;f++){l=t[f];var d=i+Pl(l,f);u+=Ta(l,e,n,d,s)}else if(d=Ly(t),typeof d=="function")for(t=d.call(t),f=0;!(l=t.next()).done;)l=l.value,d=i+Pl(l,f++),u+=Ta(l,e,n,d,s);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function ua(t,e,n){if(t==null)return t;var i=[],s=0;return Ta(t,i,"","",function(l){return e.call(n,l,s++)}),i}function Ay(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nt={current:null},La={transition:null},My={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:La,ReactCurrentOwner:bu};function Wm(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:ua,forEach:function(t,e,n){ua(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ua(t,function(){e++}),e},toArray:function(t){return ua(t,function(e){return e})||[]},only:function(t){if(!ju(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=xi;oe.Fragment=by;oe.Profiler=Ny;oe.PureComponent=_u;oe.StrictMode=jy;oe.Suspense=Ey;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=My;oe.act=Wm;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Dm({},t.props),s=t.key,l=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,u=bu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(d in e)$m.call(e,d)&&!Fm.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&f!==void 0?f[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){f=Array(d);for(var p=0;p<d;p++)f[p]=arguments[p+2];i.children=f}return{$$typeof:As,type:t.type,key:s,ref:l,props:i,_owner:u}};oe.createContext=function(t){return t={$$typeof:Sy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ky,_context:t},t.Consumer=t};oe.createElement=Zm;oe.createFactory=function(t){var e=Zm.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:Py,render:t}};oe.isValidElement=ju;oe.lazy=function(t){return{$$typeof:Ty,_payload:{_status:-1,_result:t},_init:Ay}};oe.memo=function(t,e){return{$$typeof:Cy,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=La.transition;La.transition={};try{t()}finally{La.transition=e}};oe.unstable_act=Wm;oe.useCallback=function(t,e){return nt.current.useCallback(t,e)};oe.useContext=function(t){return nt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return nt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return nt.current.useEffect(t,e)};oe.useId=function(){return nt.current.useId()};oe.useImperativeHandle=function(t,e,n){return nt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return nt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return nt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return nt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return nt.current.useReducer(t,e,n)};oe.useRef=function(t){return nt.current.useRef(t)};oe.useState=function(t){return nt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return nt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return nt.current.useTransition()};oe.version="18.3.1";Rm.exports=oe;var E=Rm.exports;const Kt=Am(E),Ry=xy({__proto__:null,default:Kt},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy=E,Dy=Symbol.for("react.element"),By=Symbol.for("react.fragment"),Uy=Object.prototype.hasOwnProperty,$y=zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fy={key:!0,ref:!0,__self:!0,__source:!0};function qm(t,e,n){var i,s={},l=null,u=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(u=e.ref);for(i in e)Uy.call(e,i)&&!Fy.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:Dy,type:t,key:l,ref:u,props:s,_owner:$y.current}}_o.Fragment=By;_o.jsx=qm;_o.jsxs=qm;Mm.exports=_o;var o=Mm.exports,cc={},Hm={exports:{}},_t={},Vm={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,K){var Z=D.length;D.push(K);e:for(;0<Z;){var Y=Z-1>>>1,H=D[Y];if(0<s(H,K))D[Y]=K,D[Z]=H,Z=Y;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var K=D[0],Z=D.pop();if(Z!==K){D[0]=Z;e:for(var Y=0,H=D.length,Pe=H>>>1;Y<Pe;){var ge=2*(Y+1)-1,he=D[ge],te=ge+1,it=D[te];if(0>s(he,Z))te<H&&0>s(it,he)?(D[Y]=it,D[te]=Z,Y=te):(D[Y]=he,D[ge]=Z,Y=ge);else if(te<H&&0>s(it,Z))D[Y]=it,D[te]=Z,Y=te;else break e}}return K}function s(D,K){var Z=D.sortIndex-K.sortIndex;return Z!==0?Z:D.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var d=[],p=[],v=1,g=null,_=3,y=!1,S=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var K=n(p);K!==null;){if(K.callback===null)i(p);else if(K.startTime<=D)i(p),K.sortIndex=K.expirationTime,e(d,K);else break;K=n(p)}}function k(D){if(w=!1,b(D),!S)if(n(d)!==null)S=!0,me(I);else{var K=n(p);K!==null&&Ze(k,K.startTime-D)}}function I(D,K){S=!1,w&&(w=!1,N(z),z=-1),y=!0;var Z=_;try{for(b(K),g=n(d);g!==null&&(!(g.expirationTime>K)||D&&!B());){var Y=g.callback;if(typeof Y=="function"){g.callback=null,_=g.priorityLevel;var H=Y(g.expirationTime<=K);K=t.unstable_now(),typeof H=="function"?g.callback=H:g===n(d)&&i(d),b(K)}else i(d);g=n(d)}if(g!==null)var Pe=!0;else{var ge=n(p);ge!==null&&Ze(k,ge.startTime-K),Pe=!1}return Pe}finally{g=null,_=Z,y=!1}}var T=!1,A=null,z=-1,R=5,F=-1;function B(){return!(t.unstable_now()-F<R)}function W(){if(A!==null){var D=t.unstable_now();F=D;var K=!0;try{K=A(!0,D)}finally{K?ee():(T=!1,A=null)}}else T=!1}var ee;if(typeof j=="function")ee=function(){j(W)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Fe=de.port2;de.port1.onmessage=W,ee=function(){Fe.postMessage(null)}}else ee=function(){C(W,0)};function me(D){A=D,T||(T=!0,ee())}function Ze(D,K){z=C(function(){D(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,me(I))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(D){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var Z=_;_=K;try{return D()}finally{_=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,K){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var Z=_;_=D;try{return K()}finally{_=Z}},t.unstable_scheduleCallback=function(D,K,Z){var Y=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Y+Z:Y):Z=Y,D){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Z+H,D={id:v++,callback:K,priorityLevel:D,startTime:Z,expirationTime:H,sortIndex:-1},Z>Y?(D.sortIndex=Z,e(p,D),n(d)===null&&D===n(p)&&(w?(N(z),z=-1):w=!0,Ze(k,Z-Y))):(D.sortIndex=H,e(d,D),S||y||(S=!0,me(I))),D},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(D){var K=_;return function(){var Z=_;_=K;try{return D.apply(this,arguments)}finally{_=Z}}}})(Gm);Vm.exports=Gm;var Zy=Vm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy=E,xt=Zy;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Km=new Set,fs={};function Nr(t,e){li(t,e),li(t+"Capture",e)}function li(t,e){for(fs[t]=e,t=0;t<e.length;t++)Km.add(e[t])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=Object.prototype.hasOwnProperty,qy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hh={},Vh={};function Hy(t){return uc.call(Vh,t)?!0:uc.call(Hh,t)?!1:qy.test(t)?Vh[t]=!0:(Hh[t]=!0,!1)}function Vy(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gy(t,e,n,i){if(e===null||typeof e>"u"||Vy(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rt(t,e,n,i,s,l,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=u}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nu=/[\-:]([a-z])/g;function ku(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nu,ku);Ve[e]=new rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nu,ku);Ve[e]=new rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nu,ku);Ve[e]=new rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new rt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Su(t,e,n,i){var s=Ve.hasOwnProperty(e)?Ve[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gy(e,n,s,i)&&(n=null),i||s===null?Hy(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var vn=Wy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,da=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),Pu=Symbol.for("react.strict_mode"),dc=Symbol.for("react.profiler"),Jm=Symbol.for("react.provider"),Qm=Symbol.for("react.context"),Eu=Symbol.for("react.forward_ref"),hc=Symbol.for("react.suspense"),fc=Symbol.for("react.suspense_list"),Cu=Symbol.for("react.memo"),Sn=Symbol.for("react.lazy"),Ym=Symbol.for("react.offscreen"),Gh=Symbol.iterator;function Ui(t){return t===null||typeof t!="object"?null:(t=Gh&&t[Gh]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,El;function Ki(t){if(El===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);El=e&&e[1]||""}return`
`+El+t}var Cl=!1;function Tl(t,e){if(!t||Cl)return"";Cl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),l=i.stack.split(`
`),u=s.length-1,f=l.length-1;1<=u&&0<=f&&s[u]!==l[f];)f--;for(;1<=u&&0<=f;u--,f--)if(s[u]!==l[f]){if(u!==1||f!==1)do if(u--,f--,0>f||s[u]!==l[f]){var d=`
`+s[u].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=u&&0<=f);break}}}finally{Cl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ki(t):""}function Ky(t){switch(t.tag){case 5:return Ki(t.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 2:case 15:return t=Tl(t.type,!1),t;case 11:return t=Tl(t.type.render,!1),t;case 1:return t=Tl(t.type,!0),t;default:return""}}function mc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qr:return"Fragment";case Wr:return"Portal";case dc:return"Profiler";case Pu:return"StrictMode";case hc:return"Suspense";case fc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qm:return(t.displayName||"Context")+".Consumer";case Jm:return(t._context.displayName||"Context")+".Provider";case Eu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cu:return e=t.displayName||null,e!==null?e:mc(t.type)||"Memo";case Sn:e=t._payload,t=t._init;try{return mc(t(e))}catch{}}return null}function Jy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mc(e);case 8:return e===Pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qy(t){var e=Xm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(u){i=""+u,l.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ha(t){t._valueTracker||(t._valueTracker=Qy(t))}function ep(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Xm(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Fa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pc(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Kh(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=qn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tp(t,e){e=e.checked,e!=null&&Su(t,"checked",e,!1)}function gc(t,e){tp(t,e);var n=qn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vc(t,e.type,n):e.hasOwnProperty("defaultValue")&&vc(t,e.type,qn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vc(t,e,n){(e!=="number"||Fa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ji=Array.isArray;function ni(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+qn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Ji(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qn(n)}}function np(t,e){var n=qn(e.value),i=qn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Yh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fa,ip=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fa=fa||document.createElement("div"),fa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ms(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yy=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(t){Yy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ts[e]=ts[t]})});function sp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ts.hasOwnProperty(t)&&ts[t]?(""+e).trim():e+"px"}function ap(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=sp(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var Xy=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _c(t,e){if(e){if(Xy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function wc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bc=null;function Tu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jc=null,ri=null,ii=null;function Xh(t){if(t=zs(t)){if(typeof jc!="function")throw Error($(280));var e=t.stateNode;e&&(e=ko(e),jc(t.stateNode,t.type,e))}}function op(t){ri?ii?ii.push(t):ii=[t]:ri=t}function lp(){if(ri){var t=ri,e=ii;if(ii=ri=null,Xh(t),e)for(t=0;t<e.length;t++)Xh(e[t])}}function cp(t,e){return t(e)}function up(){}var Ll=!1;function dp(t,e,n){if(Ll)return t(e,n);Ll=!0;try{return cp(t,e,n)}finally{Ll=!1,(ri!==null||ii!==null)&&(up(),lp())}}function ps(t,e){var n=t.stateNode;if(n===null)return null;var i=ko(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Nc=!1;if(hn)try{var $i={};Object.defineProperty($i,"passive",{get:function(){Nc=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{Nc=!1}function ex(t,e,n,i,s,l,u,f,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(v){this.onError(v)}}var ns=!1,Za=null,Wa=!1,kc=null,tx={onError:function(t){ns=!0,Za=t}};function nx(t,e,n,i,s,l,u,f,d){ns=!1,Za=null,ex.apply(tx,arguments)}function rx(t,e,n,i,s,l,u,f,d){if(nx.apply(this,arguments),ns){if(ns){var p=Za;ns=!1,Za=null}else throw Error($(198));Wa||(Wa=!0,kc=p)}}function kr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ef(t){if(kr(t)!==t)throw Error($(188))}function ix(t){var e=t.alternate;if(!e){if(e=kr(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return ef(s),t;if(l===i)return ef(s),e;l=l.sibling}throw Error($(188))}if(n.return!==i.return)n=s,i=l;else{for(var u=!1,f=s.child;f;){if(f===n){u=!0,n=s,i=l;break}if(f===i){u=!0,i=s,n=l;break}f=f.sibling}if(!u){for(f=l.child;f;){if(f===n){u=!0,n=l,i=s;break}if(f===i){u=!0,i=l,n=s;break}f=f.sibling}if(!u)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function fp(t){return t=ix(t),t!==null?mp(t):null}function mp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mp(t);if(e!==null)return e;t=t.sibling}return null}var pp=xt.unstable_scheduleCallback,tf=xt.unstable_cancelCallback,sx=xt.unstable_shouldYield,ax=xt.unstable_requestPaint,Te=xt.unstable_now,ox=xt.unstable_getCurrentPriorityLevel,Lu=xt.unstable_ImmediatePriority,gp=xt.unstable_UserBlockingPriority,qa=xt.unstable_NormalPriority,lx=xt.unstable_LowPriority,vp=xt.unstable_IdlePriority,wo=null,Jt=null;function cx(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(wo,t,void 0,(t.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:hx,ux=Math.log,dx=Math.LN2;function hx(t){return t>>>=0,t===0?32:31-(ux(t)/dx|0)|0}var ma=64,pa=4194304;function Qi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ha(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,l=t.pingedLanes,u=n&268435455;if(u!==0){var f=u&~s;f!==0?i=Qi(f):(l&=u,l!==0&&(i=Qi(l)))}else u=n&~s,u!==0?i=Qi(u):l!==0&&(i=Qi(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,l=e&-e,s>=l||s===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Bt(e),s=1<<n,i|=t[n],e&=~s;return i}function fx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mx(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,l=t.pendingLanes;0<l;){var u=31-Bt(l),f=1<<u,d=s[u];d===-1?(!(f&n)||f&i)&&(s[u]=fx(f,e)):d<=e&&(t.expiredLanes|=f),l&=~f}}function Sc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yp(){var t=ma;return ma<<=1,!(ma&4194240)&&(ma=64),t}function Ol(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ms(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bt(e),t[e]=n}function px(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bt(n),l=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~l}}function Ou(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Bt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var pe=0;function xp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _p,Iu,wp,bp,jp,Pc=!1,ga=[],Mn=null,Rn=null,zn=null,gs=new Map,vs=new Map,En=[],gx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nf(t,e){switch(t){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":gs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vs.delete(e.pointerId)}}function Fi(t,e,n,i,s,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[s]},e!==null&&(e=zs(e),e!==null&&Iu(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vx(t,e,n,i,s){switch(e){case"focusin":return Mn=Fi(Mn,t,e,n,i,s),!0;case"dragenter":return Rn=Fi(Rn,t,e,n,i,s),!0;case"mouseover":return zn=Fi(zn,t,e,n,i,s),!0;case"pointerover":var l=s.pointerId;return gs.set(l,Fi(gs.get(l)||null,t,e,n,i,s)),!0;case"gotpointercapture":return l=s.pointerId,vs.set(l,Fi(vs.get(l)||null,t,e,n,i,s)),!0}return!1}function Np(t){var e=dr(t.target);if(e!==null){var n=kr(e);if(n!==null){if(e=n.tag,e===13){if(e=hp(n),e!==null){t.blockedOn=e,jp(t.priority,function(){wp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ec(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bc=i,n.target.dispatchEvent(i),bc=null}else return e=zs(n),e!==null&&Iu(e),t.blockedOn=n,!1;e.shift()}return!0}function rf(t,e,n){Oa(t)&&n.delete(e)}function yx(){Pc=!1,Mn!==null&&Oa(Mn)&&(Mn=null),Rn!==null&&Oa(Rn)&&(Rn=null),zn!==null&&Oa(zn)&&(zn=null),gs.forEach(rf),vs.forEach(rf)}function Zi(t,e){t.blockedOn===e&&(t.blockedOn=null,Pc||(Pc=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,yx)))}function ys(t){function e(s){return Zi(s,t)}if(0<ga.length){Zi(ga[0],t);for(var n=1;n<ga.length;n++){var i=ga[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Mn!==null&&Zi(Mn,t),Rn!==null&&Zi(Rn,t),zn!==null&&Zi(zn,t),gs.forEach(e),vs.forEach(e),n=0;n<En.length;n++)i=En[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<En.length&&(n=En[0],n.blockedOn===null);)Np(n),n.blockedOn===null&&En.shift()}var si=vn.ReactCurrentBatchConfig,Va=!0;function xx(t,e,n,i){var s=pe,l=si.transition;si.transition=null;try{pe=1,Au(t,e,n,i)}finally{pe=s,si.transition=l}}function _x(t,e,n,i){var s=pe,l=si.transition;si.transition=null;try{pe=4,Au(t,e,n,i)}finally{pe=s,si.transition=l}}function Au(t,e,n,i){if(Va){var s=Ec(t,e,n,i);if(s===null)Fl(t,e,i,Ga,n),nf(t,i);else if(vx(s,t,e,n,i))i.stopPropagation();else if(nf(t,i),e&4&&-1<gx.indexOf(t)){for(;s!==null;){var l=zs(s);if(l!==null&&_p(l),l=Ec(t,e,n,i),l===null&&Fl(t,e,i,Ga,n),l===s)break;s=l}s!==null&&i.stopPropagation()}else Fl(t,e,i,null,n)}}var Ga=null;function Ec(t,e,n,i){if(Ga=null,t=Tu(i),t=dr(t),t!==null)if(e=kr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ga=t,null}function kp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ox()){case Lu:return 1;case gp:return 4;case qa:case lx:return 16;case vp:return 536870912;default:return 16}default:return 16}}var Ln=null,Mu=null,Ia=null;function Sp(){if(Ia)return Ia;var t,e=Mu,n=e.length,i,s="value"in Ln?Ln.value:Ln.textContent,l=s.length;for(t=0;t<n&&e[t]===s[t];t++);var u=n-t;for(i=1;i<=u&&e[n-i]===s[l-i];i++);return Ia=s.slice(t,1<i?1-i:void 0)}function Aa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function va(){return!0}function sf(){return!1}function wt(t){function e(n,i,s,l,u){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=l,this.target=u,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(n=t[f],this[f]=n?n(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?va:sf,this.isPropagationStopped=sf,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=va)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=va)},persist:function(){},isPersistent:va}),e}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ru=wt(_i),Rs=Se({},_i,{view:0,detail:0}),wx=wt(Rs),Il,Al,Wi,bo=Se({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wi&&(Wi&&t.type==="mousemove"?(Il=t.screenX-Wi.screenX,Al=t.screenY-Wi.screenY):Al=Il=0,Wi=t),Il)},movementY:function(t){return"movementY"in t?t.movementY:Al}}),af=wt(bo),bx=Se({},bo,{dataTransfer:0}),jx=wt(bx),Nx=Se({},Rs,{relatedTarget:0}),Ml=wt(Nx),kx=Se({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),Sx=wt(kx),Px=Se({},_i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ex=wt(Px),Cx=Se({},_i,{data:0}),of=wt(Cx),Tx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ox={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ix(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ox[t])?!!e[t]:!1}function zu(){return Ix}var Ax=Se({},Rs,{key:function(t){if(t.key){var e=Tx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Aa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zu,charCode:function(t){return t.type==="keypress"?Aa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Aa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Mx=wt(Ax),Rx=Se({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lf=wt(Rx),zx=Se({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zu}),Dx=wt(zx),Bx=Se({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ux=wt(Bx),$x=Se({},bo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fx=wt($x),Zx=[9,13,27,32],Du=hn&&"CompositionEvent"in window,rs=null;hn&&"documentMode"in document&&(rs=document.documentMode);var Wx=hn&&"TextEvent"in window&&!rs,Pp=hn&&(!Du||rs&&8<rs&&11>=rs),cf=" ",uf=!1;function Ep(t,e){switch(t){case"keyup":return Zx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hr=!1;function qx(t,e){switch(t){case"compositionend":return Cp(e);case"keypress":return e.which!==32?null:(uf=!0,cf);case"textInput":return t=e.data,t===cf&&uf?null:t;default:return null}}function Hx(t,e){if(Hr)return t==="compositionend"||!Du&&Ep(t,e)?(t=Sp(),Ia=Mu=Ln=null,Hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pp&&e.locale!=="ko"?null:e.data;default:return null}}var Vx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vx[t.type]:e==="textarea"}function Tp(t,e,n,i){op(i),e=Ka(e,"onChange"),0<e.length&&(n=new Ru("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var is=null,xs=null;function Gx(t){$p(t,0)}function jo(t){var e=Kr(t);if(ep(e))return t}function Kx(t,e){if(t==="change")return e}var Lp=!1;if(hn){var Rl;if(hn){var zl="oninput"in document;if(!zl){var hf=document.createElement("div");hf.setAttribute("oninput","return;"),zl=typeof hf.oninput=="function"}Rl=zl}else Rl=!1;Lp=Rl&&(!document.documentMode||9<document.documentMode)}function ff(){is&&(is.detachEvent("onpropertychange",Op),xs=is=null)}function Op(t){if(t.propertyName==="value"&&jo(xs)){var e=[];Tp(e,xs,t,Tu(t)),dp(Gx,e)}}function Jx(t,e,n){t==="focusin"?(ff(),is=e,xs=n,is.attachEvent("onpropertychange",Op)):t==="focusout"&&ff()}function Qx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jo(xs)}function Yx(t,e){if(t==="click")return jo(e)}function Xx(t,e){if(t==="input"||t==="change")return jo(e)}function e_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:e_;function _s(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!uc.call(e,s)||!$t(t[s],e[s]))return!1}return!0}function mf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pf(t,e){var n=mf(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mf(n)}}function Ip(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ip(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ap(){for(var t=window,e=Fa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fa(t.document)}return e}function Bu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function t_(t){var e=Ap(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ip(n.ownerDocument.documentElement,n)){if(i!==null&&Bu(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,l=Math.min(i.start,s);i=i.end===void 0?l:Math.min(i.end,s),!t.extend&&l>i&&(s=i,i=l,l=s),s=pf(n,l);var u=pf(n,i);s&&u&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var n_=hn&&"documentMode"in document&&11>=document.documentMode,Vr=null,Cc=null,ss=null,Tc=!1;function gf(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tc||Vr==null||Vr!==Fa(i)||(i=Vr,"selectionStart"in i&&Bu(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ss&&_s(ss,i)||(ss=i,i=Ka(Cc,"onSelect"),0<i.length&&(e=new Ru("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Vr)))}function ya(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gr={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},Dl={},Mp={};hn&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function No(t){if(Dl[t])return Dl[t];if(!Gr[t])return t;var e=Gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mp)return Dl[t]=e[n];return t}var Rp=No("animationend"),zp=No("animationiteration"),Dp=No("animationstart"),Bp=No("transitionend"),Up=new Map,vf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(t,e){Up.set(t,e),Nr(e,[t])}for(var Bl=0;Bl<vf.length;Bl++){var Ul=vf[Bl],r_=Ul.toLowerCase(),i_=Ul[0].toUpperCase()+Ul.slice(1);Gn(r_,"on"+i_)}Gn(Rp,"onAnimationEnd");Gn(zp,"onAnimationIteration");Gn(Dp,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(Bp,"onTransitionEnd");li("onMouseEnter",["mouseout","mouseover"]);li("onMouseLeave",["mouseout","mouseover"]);li("onPointerEnter",["pointerout","pointerover"]);li("onPointerLeave",["pointerout","pointerover"]);Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function yf(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,rx(i,e,void 0,t),t.currentTarget=null}function $p(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var u=i.length-1;0<=u;u--){var f=i[u],d=f.instance,p=f.currentTarget;if(f=f.listener,d!==l&&s.isPropagationStopped())break e;yf(s,f,p),l=d}else for(u=0;u<i.length;u++){if(f=i[u],d=f.instance,p=f.currentTarget,f=f.listener,d!==l&&s.isPropagationStopped())break e;yf(s,f,p),l=d}}}if(Wa)throw t=kc,Wa=!1,kc=null,t}function _e(t,e){var n=e[Mc];n===void 0&&(n=e[Mc]=new Set);var i=t+"__bubble";n.has(i)||(Fp(e,t,2,!1),n.add(i))}function $l(t,e,n){var i=0;e&&(i|=4),Fp(n,t,i,e)}var xa="_reactListening"+Math.random().toString(36).slice(2);function ws(t){if(!t[xa]){t[xa]=!0,Km.forEach(function(n){n!=="selectionchange"&&(s_.has(n)||$l(n,!1,t),$l(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xa]||(e[xa]=!0,$l("selectionchange",!1,e))}}function Fp(t,e,n,i){switch(kp(e)){case 1:var s=xx;break;case 4:s=_x;break;default:s=Au}n=s.bind(null,e,n,t),s=void 0,!Nc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Fl(t,e,n,i,s){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var f=i.stateNode.containerInfo;if(f===s||f.nodeType===8&&f.parentNode===s)break;if(u===4)for(u=i.return;u!==null;){var d=u.tag;if((d===3||d===4)&&(d=u.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;u=u.return}for(;f!==null;){if(u=dr(f),u===null)return;if(d=u.tag,d===5||d===6){i=l=u;continue e}f=f.parentNode}}i=i.return}dp(function(){var p=l,v=Tu(n),g=[];e:{var _=Up.get(t);if(_!==void 0){var y=Ru,S=t;switch(t){case"keypress":if(Aa(n)===0)break e;case"keydown":case"keyup":y=Mx;break;case"focusin":S="focus",y=Ml;break;case"focusout":S="blur",y=Ml;break;case"beforeblur":case"afterblur":y=Ml;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=af;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=jx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Dx;break;case Rp:case zp:case Dp:y=Sx;break;case Bp:y=Ux;break;case"scroll":y=wx;break;case"wheel":y=Fx;break;case"copy":case"cut":case"paste":y=Ex;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=lf}var w=(e&4)!==0,C=!w&&t==="scroll",N=w?_!==null?_+"Capture":null:_;w=[];for(var j=p,b;j!==null;){b=j;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,N!==null&&(k=ps(j,N),k!=null&&w.push(bs(j,k,b)))),C)break;j=j.return}0<w.length&&(_=new y(_,S,null,n,v),g.push({event:_,listeners:w}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",_&&n!==bc&&(S=n.relatedTarget||n.fromElement)&&(dr(S)||S[fn]))break e;if((y||_)&&(_=v.window===v?v:(_=v.ownerDocument)?_.defaultView||_.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=p,S=S?dr(S):null,S!==null&&(C=kr(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=p),y!==S)){if(w=af,k="onMouseLeave",N="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(w=lf,k="onPointerLeave",N="onPointerEnter",j="pointer"),C=y==null?_:Kr(y),b=S==null?_:Kr(S),_=new w(k,j+"leave",y,n,v),_.target=C,_.relatedTarget=b,k=null,dr(v)===p&&(w=new w(N,j+"enter",S,n,v),w.target=b,w.relatedTarget=C,k=w),C=k,y&&S)t:{for(w=y,N=S,j=0,b=w;b;b=Rr(b))j++;for(b=0,k=N;k;k=Rr(k))b++;for(;0<j-b;)w=Rr(w),j--;for(;0<b-j;)N=Rr(N),b--;for(;j--;){if(w===N||N!==null&&w===N.alternate)break t;w=Rr(w),N=Rr(N)}w=null}else w=null;y!==null&&xf(g,_,y,w,!1),S!==null&&C!==null&&xf(g,C,S,w,!0)}}e:{if(_=p?Kr(p):window,y=_.nodeName&&_.nodeName.toLowerCase(),y==="select"||y==="input"&&_.type==="file")var I=Kx;else if(df(_))if(Lp)I=Xx;else{I=Qx;var T=Jx}else(y=_.nodeName)&&y.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(I=Yx);if(I&&(I=I(t,p))){Tp(g,I,n,v);break e}T&&T(t,_,p),t==="focusout"&&(T=_._wrapperState)&&T.controlled&&_.type==="number"&&vc(_,"number",_.value)}switch(T=p?Kr(p):window,t){case"focusin":(df(T)||T.contentEditable==="true")&&(Vr=T,Cc=p,ss=null);break;case"focusout":ss=Cc=Vr=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,gf(g,n,v);break;case"selectionchange":if(n_)break;case"keydown":case"keyup":gf(g,n,v)}var A;if(Du)e:{switch(t){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Hr?Ep(t,n)&&(z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(Pp&&n.locale!=="ko"&&(Hr||z!=="onCompositionStart"?z==="onCompositionEnd"&&Hr&&(A=Sp()):(Ln=v,Mu="value"in Ln?Ln.value:Ln.textContent,Hr=!0)),T=Ka(p,z),0<T.length&&(z=new of(z,t,null,n,v),g.push({event:z,listeners:T}),A?z.data=A:(A=Cp(n),A!==null&&(z.data=A)))),(A=Wx?qx(t,n):Hx(t,n))&&(p=Ka(p,"onBeforeInput"),0<p.length&&(v=new of("onBeforeInput","beforeinput",null,n,v),g.push({event:v,listeners:p}),v.data=A))}$p(g,e)})}function bs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ka(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=ps(t,n),l!=null&&i.unshift(bs(t,l,s)),l=ps(t,e),l!=null&&i.push(bs(t,l,s))),t=t.return}return i}function Rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xf(t,e,n,i,s){for(var l=e._reactName,u=[];n!==null&&n!==i;){var f=n,d=f.alternate,p=f.stateNode;if(d!==null&&d===i)break;f.tag===5&&p!==null&&(f=p,s?(d=ps(n,l),d!=null&&u.unshift(bs(n,d,f))):s||(d=ps(n,l),d!=null&&u.push(bs(n,d,f)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var a_=/\r\n?/g,o_=/\u0000|\uFFFD/g;function _f(t){return(typeof t=="string"?t:""+t).replace(a_,`
`).replace(o_,"")}function _a(t,e,n){if(e=_f(e),_f(t)!==e&&n)throw Error($(425))}function Ja(){}var Lc=null,Oc=null;function Ic(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ac=typeof setTimeout=="function"?setTimeout:void 0,l_=typeof clearTimeout=="function"?clearTimeout:void 0,wf=typeof Promise=="function"?Promise:void 0,c_=typeof queueMicrotask=="function"?queueMicrotask:typeof wf<"u"?function(t){return wf.resolve(null).then(t).catch(u_)}:Ac;function u_(t){setTimeout(function(){throw t})}function Zl(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),ys(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);ys(e)}function Dn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wi=Math.random().toString(36).slice(2),Gt="__reactFiber$"+wi,js="__reactProps$"+wi,fn="__reactContainer$"+wi,Mc="__reactEvents$"+wi,d_="__reactListeners$"+wi,h_="__reactHandles$"+wi;function dr(t){var e=t[Gt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[Gt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bf(t);t!==null;){if(n=t[Gt])return n;t=bf(t)}return e}t=n,n=t.parentNode}return null}function zs(t){return t=t[Gt]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function ko(t){return t[js]||null}var Rc=[],Jr=-1;function Kn(t){return{current:t}}function we(t){0>Jr||(t.current=Rc[Jr],Rc[Jr]=null,Jr--)}function xe(t,e){Jr++,Rc[Jr]=t.current,t.current=e}var Hn={},Ye=Kn(Hn),ht=Kn(!1),xr=Hn;function ci(t,e){var n=t.type.contextTypes;if(!n)return Hn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ft(t){return t=t.childContextTypes,t!=null}function Qa(){we(ht),we(Ye)}function jf(t,e,n){if(Ye.current!==Hn)throw Error($(168));xe(Ye,e),xe(ht,n)}function Zp(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error($(108,Jy(t)||"Unknown",s));return Se({},n,i)}function Ya(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,xr=Ye.current,xe(Ye,t),xe(ht,ht.current),!0}function Nf(t,e,n){var i=t.stateNode;if(!i)throw Error($(169));n?(t=Zp(t,e,xr),i.__reactInternalMemoizedMergedChildContext=t,we(ht),we(Ye),xe(Ye,t)):we(ht),xe(ht,n)}var ln=null,So=!1,Wl=!1;function Wp(t){ln===null?ln=[t]:ln.push(t)}function f_(t){So=!0,Wp(t)}function Jn(){if(!Wl&&ln!==null){Wl=!0;var t=0,e=pe;try{var n=ln;for(pe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ln=null,So=!1}catch(s){throw ln!==null&&(ln=ln.slice(t+1)),pp(Lu,Jn),s}finally{pe=e,Wl=!1}}return null}var Qr=[],Yr=0,Xa=null,eo=0,kt=[],St=0,_r=null,cn=1,un="";function ar(t,e){Qr[Yr++]=eo,Qr[Yr++]=Xa,Xa=t,eo=e}function qp(t,e,n){kt[St++]=cn,kt[St++]=un,kt[St++]=_r,_r=t;var i=cn;t=un;var s=32-Bt(i)-1;i&=~(1<<s),n+=1;var l=32-Bt(e)+s;if(30<l){var u=s-s%5;l=(i&(1<<u)-1).toString(32),i>>=u,s-=u,cn=1<<32-Bt(e)+s|n<<s|i,un=l+t}else cn=1<<l|n<<s|i,un=t}function Uu(t){t.return!==null&&(ar(t,1),qp(t,1,0))}function $u(t){for(;t===Xa;)Xa=Qr[--Yr],Qr[Yr]=null,eo=Qr[--Yr],Qr[Yr]=null;for(;t===_r;)_r=kt[--St],kt[St]=null,un=kt[--St],kt[St]=null,cn=kt[--St],kt[St]=null}var vt=null,gt=null,be=!1,Dt=null;function Hp(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vt=t,gt=Dn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vt=t,gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_r!==null?{id:cn,overflow:un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vt=t,gt=null,!0):!1;default:return!1}}function zc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dc(t){if(be){var e=gt;if(e){var n=e;if(!kf(t,e)){if(zc(t))throw Error($(418));e=Dn(n.nextSibling);var i=vt;e&&kf(t,e)?Hp(i,n):(t.flags=t.flags&-4097|2,be=!1,vt=t)}}else{if(zc(t))throw Error($(418));t.flags=t.flags&-4097|2,be=!1,vt=t}}}function Sf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vt=t}function wa(t){if(t!==vt)return!1;if(!be)return Sf(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ic(t.type,t.memoizedProps)),e&&(e=gt)){if(zc(t))throw Vp(),Error($(418));for(;e;)Hp(t,e),e=Dn(e.nextSibling)}if(Sf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gt=Dn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gt=null}}else gt=vt?Dn(t.stateNode.nextSibling):null;return!0}function Vp(){for(var t=gt;t;)t=Dn(t.nextSibling)}function ui(){gt=vt=null,be=!1}function Fu(t){Dt===null?Dt=[t]:Dt.push(t)}var m_=vn.ReactCurrentBatchConfig;function qi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,t));var s=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(u){var f=s.refs;u===null?delete f[l]:f[l]=u},e._stringRef=l,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function ba(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pf(t){var e=t._init;return e(t._payload)}function Gp(t){function e(N,j){if(t){var b=N.deletions;b===null?(N.deletions=[j],N.flags|=16):b.push(j)}}function n(N,j){if(!t)return null;for(;j!==null;)e(N,j),j=j.sibling;return null}function i(N,j){for(N=new Map;j!==null;)j.key!==null?N.set(j.key,j):N.set(j.index,j),j=j.sibling;return N}function s(N,j){return N=Fn(N,j),N.index=0,N.sibling=null,N}function l(N,j,b){return N.index=b,t?(b=N.alternate,b!==null?(b=b.index,b<j?(N.flags|=2,j):b):(N.flags|=2,j)):(N.flags|=1048576,j)}function u(N){return t&&N.alternate===null&&(N.flags|=2),N}function f(N,j,b,k){return j===null||j.tag!==6?(j=Ql(b,N.mode,k),j.return=N,j):(j=s(j,b),j.return=N,j)}function d(N,j,b,k){var I=b.type;return I===qr?v(N,j,b.props.children,k,b.key):j!==null&&(j.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Sn&&Pf(I)===j.type)?(k=s(j,b.props),k.ref=qi(N,j,b),k.return=N,k):(k=$a(b.type,b.key,b.props,null,N.mode,k),k.ref=qi(N,j,b),k.return=N,k)}function p(N,j,b,k){return j===null||j.tag!==4||j.stateNode.containerInfo!==b.containerInfo||j.stateNode.implementation!==b.implementation?(j=Yl(b,N.mode,k),j.return=N,j):(j=s(j,b.children||[]),j.return=N,j)}function v(N,j,b,k,I){return j===null||j.tag!==7?(j=gr(b,N.mode,k,I),j.return=N,j):(j=s(j,b),j.return=N,j)}function g(N,j,b){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Ql(""+j,N.mode,b),j.return=N,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case da:return b=$a(j.type,j.key,j.props,null,N.mode,b),b.ref=qi(N,null,j),b.return=N,b;case Wr:return j=Yl(j,N.mode,b),j.return=N,j;case Sn:var k=j._init;return g(N,k(j._payload),b)}if(Ji(j)||Ui(j))return j=gr(j,N.mode,b,null),j.return=N,j;ba(N,j)}return null}function _(N,j,b,k){var I=j!==null?j.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return I!==null?null:f(N,j,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case da:return b.key===I?d(N,j,b,k):null;case Wr:return b.key===I?p(N,j,b,k):null;case Sn:return I=b._init,_(N,j,I(b._payload),k)}if(Ji(b)||Ui(b))return I!==null?null:v(N,j,b,k,null);ba(N,b)}return null}function y(N,j,b,k,I){if(typeof k=="string"&&k!==""||typeof k=="number")return N=N.get(b)||null,f(j,N,""+k,I);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case da:return N=N.get(k.key===null?b:k.key)||null,d(j,N,k,I);case Wr:return N=N.get(k.key===null?b:k.key)||null,p(j,N,k,I);case Sn:var T=k._init;return y(N,j,b,T(k._payload),I)}if(Ji(k)||Ui(k))return N=N.get(b)||null,v(j,N,k,I,null);ba(j,k)}return null}function S(N,j,b,k){for(var I=null,T=null,A=j,z=j=0,R=null;A!==null&&z<b.length;z++){A.index>z?(R=A,A=null):R=A.sibling;var F=_(N,A,b[z],k);if(F===null){A===null&&(A=R);break}t&&A&&F.alternate===null&&e(N,A),j=l(F,j,z),T===null?I=F:T.sibling=F,T=F,A=R}if(z===b.length)return n(N,A),be&&ar(N,z),I;if(A===null){for(;z<b.length;z++)A=g(N,b[z],k),A!==null&&(j=l(A,j,z),T===null?I=A:T.sibling=A,T=A);return be&&ar(N,z),I}for(A=i(N,A);z<b.length;z++)R=y(A,N,z,b[z],k),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?z:R.key),j=l(R,j,z),T===null?I=R:T.sibling=R,T=R);return t&&A.forEach(function(B){return e(N,B)}),be&&ar(N,z),I}function w(N,j,b,k){var I=Ui(b);if(typeof I!="function")throw Error($(150));if(b=I.call(b),b==null)throw Error($(151));for(var T=I=null,A=j,z=j=0,R=null,F=b.next();A!==null&&!F.done;z++,F=b.next()){A.index>z?(R=A,A=null):R=A.sibling;var B=_(N,A,F.value,k);if(B===null){A===null&&(A=R);break}t&&A&&B.alternate===null&&e(N,A),j=l(B,j,z),T===null?I=B:T.sibling=B,T=B,A=R}if(F.done)return n(N,A),be&&ar(N,z),I;if(A===null){for(;!F.done;z++,F=b.next())F=g(N,F.value,k),F!==null&&(j=l(F,j,z),T===null?I=F:T.sibling=F,T=F);return be&&ar(N,z),I}for(A=i(N,A);!F.done;z++,F=b.next())F=y(A,N,z,F.value,k),F!==null&&(t&&F.alternate!==null&&A.delete(F.key===null?z:F.key),j=l(F,j,z),T===null?I=F:T.sibling=F,T=F);return t&&A.forEach(function(W){return e(N,W)}),be&&ar(N,z),I}function C(N,j,b,k){if(typeof b=="object"&&b!==null&&b.type===qr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case da:e:{for(var I=b.key,T=j;T!==null;){if(T.key===I){if(I=b.type,I===qr){if(T.tag===7){n(N,T.sibling),j=s(T,b.props.children),j.return=N,N=j;break e}}else if(T.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Sn&&Pf(I)===T.type){n(N,T.sibling),j=s(T,b.props),j.ref=qi(N,T,b),j.return=N,N=j;break e}n(N,T);break}else e(N,T);T=T.sibling}b.type===qr?(j=gr(b.props.children,N.mode,k,b.key),j.return=N,N=j):(k=$a(b.type,b.key,b.props,null,N.mode,k),k.ref=qi(N,j,b),k.return=N,N=k)}return u(N);case Wr:e:{for(T=b.key;j!==null;){if(j.key===T)if(j.tag===4&&j.stateNode.containerInfo===b.containerInfo&&j.stateNode.implementation===b.implementation){n(N,j.sibling),j=s(j,b.children||[]),j.return=N,N=j;break e}else{n(N,j);break}else e(N,j);j=j.sibling}j=Yl(b,N.mode,k),j.return=N,N=j}return u(N);case Sn:return T=b._init,C(N,j,T(b._payload),k)}if(Ji(b))return S(N,j,b,k);if(Ui(b))return w(N,j,b,k);ba(N,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,j!==null&&j.tag===6?(n(N,j.sibling),j=s(j,b),j.return=N,N=j):(n(N,j),j=Ql(b,N.mode,k),j.return=N,N=j),u(N)):n(N,j)}return C}var di=Gp(!0),Kp=Gp(!1),to=Kn(null),no=null,Xr=null,Zu=null;function Wu(){Zu=Xr=no=null}function qu(t){var e=to.current;we(to),t._currentValue=e}function Bc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ai(t,e){no=t,Zu=Xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Ct(t){var e=t._currentValue;if(Zu!==t)if(t={context:t,memoizedValue:e,next:null},Xr===null){if(no===null)throw Error($(308));Xr=t,no.dependencies={lanes:0,firstContext:t}}else Xr=Xr.next=t;return e}var hr=null;function Hu(t){hr===null?hr=[t]:hr.push(t)}function Jp(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Hu(e)):(n.next=s.next,s.next=n),e.interleaved=n,mn(t,i)}function mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pn=!1;function Vu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ue&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,mn(t,n)}return s=i.interleaved,s===null?(e.next=e,Hu(i)):(e.next=s.next,s.next=e),i.interleaved=e,mn(t,n)}function Ma(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ou(t,n)}}function Ef(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=u:l=l.next=u,n=n.next}while(n!==null);l===null?s=l=e:l=l.next=e}else s=l=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ro(t,e,n,i){var s=t.updateQueue;Pn=!1;var l=s.firstBaseUpdate,u=s.lastBaseUpdate,f=s.shared.pending;if(f!==null){s.shared.pending=null;var d=f,p=d.next;d.next=null,u===null?l=p:u.next=p,u=d;var v=t.alternate;v!==null&&(v=v.updateQueue,f=v.lastBaseUpdate,f!==u&&(f===null?v.firstBaseUpdate=p:f.next=p,v.lastBaseUpdate=d))}if(l!==null){var g=s.baseState;u=0,v=p=d=null,f=l;do{var _=f.lane,y=f.eventTime;if((i&_)===_){v!==null&&(v=v.next={eventTime:y,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var S=t,w=f;switch(_=e,y=n,w.tag){case 1:if(S=w.payload,typeof S=="function"){g=S.call(y,g,_);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=w.payload,_=typeof S=="function"?S.call(y,g,_):S,_==null)break e;g=Se({},g,_);break e;case 2:Pn=!0}}f.callback!==null&&f.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[f]:_.push(f))}else y={eventTime:y,lane:_,tag:f.tag,payload:f.payload,callback:f.callback,next:null},v===null?(p=v=y,d=g):v=v.next=y,u|=_;if(f=f.next,f===null){if(f=s.shared.pending,f===null)break;_=f,f=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(v===null&&(d=g),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do u|=s.lane,s=s.next;while(s!==e)}else l===null&&(s.shared.lanes=0);br|=u,t.lanes=u,t.memoizedState=g}}function Cf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error($(191,s));s.call(i)}}}var Ds={},Qt=Kn(Ds),Ns=Kn(Ds),ks=Kn(Ds);function fr(t){if(t===Ds)throw Error($(174));return t}function Gu(t,e){switch(xe(ks,e),xe(Ns,t),xe(Qt,Ds),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xc(e,t)}we(Qt),xe(Qt,e)}function hi(){we(Qt),we(Ns),we(ks)}function Yp(t){fr(ks.current);var e=fr(Qt.current),n=xc(e,t.type);e!==n&&(xe(Ns,t),xe(Qt,n))}function Ku(t){Ns.current===t&&(we(Qt),we(Ns))}var Ne=Kn(0);function io(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ql=[];function Ju(){for(var t=0;t<ql.length;t++)ql[t]._workInProgressVersionPrimary=null;ql.length=0}var Ra=vn.ReactCurrentDispatcher,Hl=vn.ReactCurrentBatchConfig,wr=0,ke=null,Re=null,Ue=null,so=!1,as=!1,Ss=0,p_=0;function Ge(){throw Error($(321))}function Qu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function Yu(t,e,n,i,s,l){if(wr=l,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ra.current=t===null||t.memoizedState===null?x_:__,t=n(i,s),as){l=0;do{if(as=!1,Ss=0,25<=l)throw Error($(301));l+=1,Ue=Re=null,e.updateQueue=null,Ra.current=w_,t=n(i,s)}while(as)}if(Ra.current=ao,e=Re!==null&&Re.next!==null,wr=0,Ue=Re=ke=null,so=!1,e)throw Error($(300));return t}function Xu(){var t=Ss!==0;return Ss=0,t}function Vt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?ke.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Tt(){if(Re===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Re.next;var e=Ue===null?ke.memoizedState:Ue.next;if(e!==null)Ue=e,Re=t;else{if(t===null)throw Error($(310));Re=t,t={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Ue===null?ke.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Ps(t,e){return typeof e=="function"?e(t):e}function Vl(t){var e=Tt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=Re,s=i.baseQueue,l=n.pending;if(l!==null){if(s!==null){var u=s.next;s.next=l.next,l.next=u}i.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,i=i.baseState;var f=u=null,d=null,p=l;do{var v=p.lane;if((wr&v)===v)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var g={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(f=d=g,u=i):d=d.next=g,ke.lanes|=v,br|=v}p=p.next}while(p!==null&&p!==l);d===null?u=i:d.next=f,$t(i,e.memoizedState)||(dt=!0),e.memoizedState=i,e.baseState=u,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do l=s.lane,ke.lanes|=l,br|=l,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gl(t){var e=Tt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,l=e.memoizedState;if(s!==null){n.pending=null;var u=s=s.next;do l=t(l,u.action),u=u.next;while(u!==s);$t(l,e.memoizedState)||(dt=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function Xp(){}function eg(t,e){var n=ke,i=Tt(),s=e(),l=!$t(i.memoizedState,s);if(l&&(i.memoizedState=s,dt=!0),i=i.queue,ed(rg.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Es(9,ng.bind(null,n,i,s,e),void 0,null),$e===null)throw Error($(349));wr&30||tg(n,e,s)}return s}function tg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ng(t,e,n,i){e.value=n,e.getSnapshot=i,ig(e)&&sg(t)}function rg(t,e,n){return n(function(){ig(e)&&sg(t)})}function ig(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function sg(t){var e=mn(t,1);e!==null&&Ut(e,t,1,-1)}function Tf(t){var e=Vt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:t},e.queue=t,t=t.dispatch=y_.bind(null,ke,t),[e.memoizedState,t]}function Es(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function ag(){return Tt().memoizedState}function za(t,e,n,i){var s=Vt();ke.flags|=t,s.memoizedState=Es(1|e,n,void 0,i===void 0?null:i)}function Po(t,e,n,i){var s=Tt();i=i===void 0?null:i;var l=void 0;if(Re!==null){var u=Re.memoizedState;if(l=u.destroy,i!==null&&Qu(i,u.deps)){s.memoizedState=Es(e,n,l,i);return}}ke.flags|=t,s.memoizedState=Es(1|e,n,l,i)}function Lf(t,e){return za(8390656,8,t,e)}function ed(t,e){return Po(2048,8,t,e)}function og(t,e){return Po(4,2,t,e)}function lg(t,e){return Po(4,4,t,e)}function cg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ug(t,e,n){return n=n!=null?n.concat([t]):null,Po(4,4,cg.bind(null,e,t),n)}function td(){}function dg(t,e){var n=Tt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Qu(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function hg(t,e){var n=Tt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Qu(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function fg(t,e,n){return wr&21?($t(n,e)||(n=yp(),ke.lanes|=n,br|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function g_(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var i=Hl.transition;Hl.transition={};try{t(!1),e()}finally{pe=n,Hl.transition=i}}function mg(){return Tt().memoizedState}function v_(t,e,n){var i=$n(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},pg(t))gg(e,n);else if(n=Jp(t,e,n,i),n!==null){var s=tt();Ut(n,t,i,s),vg(n,e,i)}}function y_(t,e,n){var i=$n(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(pg(t))gg(e,s);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var u=e.lastRenderedState,f=l(u,n);if(s.hasEagerState=!0,s.eagerState=f,$t(f,u)){var d=e.interleaved;d===null?(s.next=s,Hu(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=Jp(t,e,s,i),n!==null&&(s=tt(),Ut(n,t,i,s),vg(n,e,i))}}function pg(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function gg(t,e){as=so=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vg(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ou(t,n)}}var ao={readContext:Ct,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},x_={readContext:Ct,useCallback:function(t,e){return Vt().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:Lf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,za(4194308,4,cg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return za(4194308,4,t,e)},useInsertionEffect:function(t,e){return za(4,2,t,e)},useMemo:function(t,e){var n=Vt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Vt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=v_.bind(null,ke,t),[i.memoizedState,t]},useRef:function(t){var e=Vt();return t={current:t},e.memoizedState=t},useState:Tf,useDebugValue:td,useDeferredValue:function(t){return Vt().memoizedState=t},useTransition:function(){var t=Tf(!1),e=t[0];return t=g_.bind(null,t[1]),Vt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ke,s=Vt();if(be){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),$e===null)throw Error($(349));wr&30||tg(i,e,n)}s.memoizedState=n;var l={value:n,getSnapshot:e};return s.queue=l,Lf(rg.bind(null,i,l,t),[t]),i.flags|=2048,Es(9,ng.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=Vt(),e=$e.identifierPrefix;if(be){var n=un,i=cn;n=(i&~(1<<32-Bt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ss++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=p_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},__={readContext:Ct,useCallback:dg,useContext:Ct,useEffect:ed,useImperativeHandle:ug,useInsertionEffect:og,useLayoutEffect:lg,useMemo:hg,useReducer:Vl,useRef:ag,useState:function(){return Vl(Ps)},useDebugValue:td,useDeferredValue:function(t){var e=Tt();return fg(e,Re.memoizedState,t)},useTransition:function(){var t=Vl(Ps)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:Xp,useSyncExternalStore:eg,useId:mg,unstable_isNewReconciler:!1},w_={readContext:Ct,useCallback:dg,useContext:Ct,useEffect:ed,useImperativeHandle:ug,useInsertionEffect:og,useLayoutEffect:lg,useMemo:hg,useReducer:Gl,useRef:ag,useState:function(){return Gl(Ps)},useDebugValue:td,useDeferredValue:function(t){var e=Tt();return Re===null?e.memoizedState=t:fg(e,Re.memoizedState,t)},useTransition:function(){var t=Gl(Ps)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:Xp,useSyncExternalStore:eg,useId:mg,unstable_isNewReconciler:!1};function Mt(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Uc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eo={isMounted:function(t){return(t=t._reactInternals)?kr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tt(),s=$n(t),l=dn(i,s);l.payload=e,n!=null&&(l.callback=n),e=Bn(t,l,s),e!==null&&(Ut(e,t,s,i),Ma(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tt(),s=$n(t),l=dn(i,s);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=Bn(t,l,s),e!==null&&(Ut(e,t,s,i),Ma(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tt(),i=$n(t),s=dn(n,i);s.tag=2,e!=null&&(s.callback=e),e=Bn(t,s,i),e!==null&&(Ut(e,t,i,n),Ma(e,t,i))}};function Of(t,e,n,i,s,l,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,u):e.prototype&&e.prototype.isPureReactComponent?!_s(n,i)||!_s(s,l):!0}function yg(t,e,n){var i=!1,s=Hn,l=e.contextType;return typeof l=="object"&&l!==null?l=Ct(l):(s=ft(e)?xr:Ye.current,i=e.contextTypes,l=(i=i!=null)?ci(t,s):Hn),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eo,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),e}function If(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Eo.enqueueReplaceState(e,e.state,null)}function $c(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Vu(t);var l=e.contextType;typeof l=="object"&&l!==null?s.context=Ct(l):(l=ft(e)?xr:Ye.current,s.context=ci(t,l)),s.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Uc(t,e,l,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Eo.enqueueReplaceState(s,s.state,null),ro(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fi(t,e){try{var n="",i=e;do n+=Ky(i),i=i.return;while(i);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:s,digest:null}}function Kl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var b_=typeof WeakMap=="function"?WeakMap:Map;function xg(t,e,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){lo||(lo=!0,Yc=i),Fc(t,e)},n}function _g(t,e,n){n=dn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Fc(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Fc(t,e),typeof i!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function Af(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new b_;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=R_.bind(null,t,e,n),e.then(t,t))}function Mf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rf(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dn(-1,1),e.tag=2,Bn(n,e,1))),n.lanes|=1),t)}var j_=vn.ReactCurrentOwner,dt=!1;function et(t,e,n,i){e.child=t===null?Kp(e,null,n,i):di(e,t.child,n,i)}function zf(t,e,n,i,s){n=n.render;var l=e.ref;return ai(e,s),i=Yu(t,e,n,i,l,s),n=Xu(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(be&&n&&Uu(e),e.flags|=1,et(t,e,i,s),e.child)}function Df(t,e,n,i,s){if(t===null){var l=n.type;return typeof l=="function"&&!cd(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,wg(t,e,l,i,s)):(t=$a(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&s)){var u=l.memoizedProps;if(n=n.compare,n=n!==null?n:_s,n(u,i)&&t.ref===e.ref)return pn(t,e,s)}return e.flags|=1,t=Fn(l,i),t.ref=e.ref,t.return=e,e.child=t}function wg(t,e,n,i,s){if(t!==null){var l=t.memoizedProps;if(_s(l,i)&&t.ref===e.ref)if(dt=!1,e.pendingProps=i=l,(t.lanes&s)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,pn(t,e,s)}return Zc(t,e,n,i,s)}function bg(t,e,n){var i=e.pendingProps,s=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(ti,pt),pt|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(ti,pt),pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,xe(ti,pt),pt|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,xe(ti,pt),pt|=i;return et(t,e,s,n),e.child}function jg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zc(t,e,n,i,s){var l=ft(n)?xr:Ye.current;return l=ci(e,l),ai(e,s),n=Yu(t,e,n,i,l,s),i=Xu(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(be&&i&&Uu(e),e.flags|=1,et(t,e,n,s),e.child)}function Bf(t,e,n,i,s){if(ft(n)){var l=!0;Ya(e)}else l=!1;if(ai(e,s),e.stateNode===null)Da(t,e),yg(e,n,i),$c(e,n,i,s),i=!0;else if(t===null){var u=e.stateNode,f=e.memoizedProps;u.props=f;var d=u.context,p=n.contextType;typeof p=="object"&&p!==null?p=Ct(p):(p=ft(n)?xr:Ye.current,p=ci(e,p));var v=n.getDerivedStateFromProps,g=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function";g||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==i||d!==p)&&If(e,u,i,p),Pn=!1;var _=e.memoizedState;u.state=_,ro(e,i,u,s),d=e.memoizedState,f!==i||_!==d||ht.current||Pn?(typeof v=="function"&&(Uc(e,n,v,i),d=e.memoizedState),(f=Pn||Of(e,n,f,i,_,d,p))?(g||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),u.props=i,u.state=d,u.context=p,i=f):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{u=e.stateNode,Qp(t,e),f=e.memoizedProps,p=e.type===e.elementType?f:Mt(e.type,f),u.props=p,g=e.pendingProps,_=u.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ct(d):(d=ft(n)?xr:Ye.current,d=ci(e,d));var y=n.getDerivedStateFromProps;(v=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==g||_!==d)&&If(e,u,i,d),Pn=!1,_=e.memoizedState,u.state=_,ro(e,i,u,s);var S=e.memoizedState;f!==g||_!==S||ht.current||Pn?(typeof y=="function"&&(Uc(e,n,y,i),S=e.memoizedState),(p=Pn||Of(e,n,p,i,_,S,d)||!1)?(v||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,S,d),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,S,d)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=S),u.props=i,u.state=S,u.context=d,i=p):(typeof u.componentDidUpdate!="function"||f===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Wc(t,e,n,i,l,s)}function Wc(t,e,n,i,s,l){jg(t,e);var u=(e.flags&128)!==0;if(!i&&!u)return s&&Nf(e,n,!1),pn(t,e,l);i=e.stateNode,j_.current=e;var f=u&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&u?(e.child=di(e,t.child,null,l),e.child=di(e,null,f,l)):et(t,e,f,l),e.memoizedState=i.state,s&&Nf(e,n,!0),e.child}function Ng(t){var e=t.stateNode;e.pendingContext?jf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jf(t,e.context,!1),Gu(t,e.containerInfo)}function Uf(t,e,n,i,s){return ui(),Fu(s),e.flags|=256,et(t,e,n,i),e.child}var qc={dehydrated:null,treeContext:null,retryLane:0};function Hc(t){return{baseLanes:t,cachePool:null,transitions:null}}function kg(t,e,n){var i=e.pendingProps,s=Ne.current,l=!1,u=(e.flags&128)!==0,f;if((f=u)||(f=t!==null&&t.memoizedState===null?!1:(s&2)!==0),f?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),xe(Ne,s&1),t===null)return Dc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=i.children,t=i.fallback,l?(i=e.mode,l=e.child,u={mode:"hidden",children:u},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=u):l=Lo(u,i,0,null),t=gr(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Hc(n),e.memoizedState=qc,t):nd(e,u));if(s=t.memoizedState,s!==null&&(f=s.dehydrated,f!==null))return N_(t,e,u,i,f,s,n);if(l){l=i.fallback,u=e.mode,s=t.child,f=s.sibling;var d={mode:"hidden",children:i.children};return!(u&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Fn(s,d),i.subtreeFlags=s.subtreeFlags&14680064),f!==null?l=Fn(f,l):(l=gr(l,u,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,u=t.child.memoizedState,u=u===null?Hc(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},l.memoizedState=u,l.childLanes=t.childLanes&~n,e.memoizedState=qc,i}return l=t.child,t=l.sibling,i=Fn(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function nd(t,e){return e=Lo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ja(t,e,n,i){return i!==null&&Fu(i),di(e,t.child,null,n),t=nd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function N_(t,e,n,i,s,l,u){if(n)return e.flags&256?(e.flags&=-257,i=Kl(Error($(422))),ja(t,e,u,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,s=e.mode,i=Lo({mode:"visible",children:i.children},s,0,null),l=gr(l,s,u,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&di(e,t.child,null,u),e.child.memoizedState=Hc(u),e.memoizedState=qc,l);if(!(e.mode&1))return ja(t,e,u,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var f=i.dgst;return i=f,l=Error($(419)),i=Kl(l,i,void 0),ja(t,e,u,i)}if(f=(u&t.childLanes)!==0,dt||f){if(i=$e,i!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|u)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,mn(t,s),Ut(i,t,s,-1))}return ld(),i=Kl(Error($(421))),ja(t,e,u,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=z_.bind(null,t),s._reactRetry=e,null):(t=l.treeContext,gt=Dn(s.nextSibling),vt=e,be=!0,Dt=null,t!==null&&(kt[St++]=cn,kt[St++]=un,kt[St++]=_r,cn=t.id,un=t.overflow,_r=e),e=nd(e,i.children),e.flags|=4096,e)}function $f(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Bc(t.return,e,n)}function Jl(t,e,n,i,s){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=s)}function Sg(t,e,n){var i=e.pendingProps,s=i.revealOrder,l=i.tail;if(et(t,e,i.children,n),i=Ne.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$f(t,n,e);else if(t.tag===19)$f(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(xe(Ne,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&io(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jl(e,!1,s,n,l);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&io(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jl(e,!0,n,null,l);break;case"together":Jl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Da(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),br|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function k_(t,e,n){switch(e.tag){case 3:Ng(e),ui();break;case 5:Yp(e);break;case 1:ft(e.type)&&Ya(e);break;case 4:Gu(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;xe(to,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(xe(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?kg(t,e,n):(xe(Ne,Ne.current&1),t=pn(t,e,n),t!==null?t.sibling:null);xe(Ne,Ne.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Sg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(Ne,Ne.current),i)break;return null;case 22:case 23:return e.lanes=0,bg(t,e,n)}return pn(t,e,n)}var Pg,Vc,Eg,Cg;Pg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vc=function(){};Eg=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,fr(Qt.current);var l=null;switch(n){case"input":s=pc(t,s),i=pc(t,i),l=[];break;case"select":s=Se({},s,{value:void 0}),i=Se({},i,{value:void 0}),l=[];break;case"textarea":s=yc(t,s),i=yc(t,i),l=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ja)}_c(n,i);var u;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var f=s[p];for(u in f)f.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(fs.hasOwnProperty(p)?l||(l=[]):(l=l||[]).push(p,null));for(p in i){var d=i[p];if(f=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==f&&(d!=null||f!=null))if(p==="style")if(f){for(u in f)!f.hasOwnProperty(u)||d&&d.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in d)d.hasOwnProperty(u)&&f[u]!==d[u]&&(n||(n={}),n[u]=d[u])}else n||(l||(l=[]),l.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,f=f?f.__html:void 0,d!=null&&f!==d&&(l=l||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(fs.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&_e("scroll",t),l||f===d||(l=[])):(l=l||[]).push(p,d))}n&&(l=l||[]).push("style",n);var p=l;(e.updateQueue=p)&&(e.flags|=4)}};Cg=function(t,e,n,i){n!==i&&(e.flags|=4)};function Hi(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function S_(t,e,n){var i=e.pendingProps;switch($u(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return ft(e.type)&&Qa(),Ke(e),null;case 3:return i=e.stateNode,hi(),we(ht),we(Ye),Ju(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(wa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dt!==null&&(tu(Dt),Dt=null))),Vc(t,e),Ke(e),null;case 5:Ku(e);var s=fr(ks.current);if(n=e.type,t!==null&&e.stateNode!=null)Eg(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return Ke(e),null}if(t=fr(Qt.current),wa(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[Gt]=e,i[js]=l,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",i),_e("close",i);break;case"iframe":case"object":case"embed":_e("load",i);break;case"video":case"audio":for(s=0;s<Yi.length;s++)_e(Yi[s],i);break;case"source":_e("error",i);break;case"img":case"image":case"link":_e("error",i),_e("load",i);break;case"details":_e("toggle",i);break;case"input":Kh(i,l),_e("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},_e("invalid",i);break;case"textarea":Qh(i,l),_e("invalid",i)}_c(n,l),s=null;for(var u in l)if(l.hasOwnProperty(u)){var f=l[u];u==="children"?typeof f=="string"?i.textContent!==f&&(l.suppressHydrationWarning!==!0&&_a(i.textContent,f,t),s=["children",f]):typeof f=="number"&&i.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&_a(i.textContent,f,t),s=["children",""+f]):fs.hasOwnProperty(u)&&f!=null&&u==="onScroll"&&_e("scroll",i)}switch(n){case"input":ha(i),Jh(i,l,!0);break;case"textarea":ha(i),Yh(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Ja)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=u.createElement(n,{is:i.is}):(t=u.createElement(n),n==="select"&&(u=t,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):t=u.createElementNS(t,n),t[Gt]=e,t[js]=i,Pg(t,e,!1,!1),e.stateNode=t;e:{switch(u=wc(n,i),n){case"dialog":_e("cancel",t),_e("close",t),s=i;break;case"iframe":case"object":case"embed":_e("load",t),s=i;break;case"video":case"audio":for(s=0;s<Yi.length;s++)_e(Yi[s],t);s=i;break;case"source":_e("error",t),s=i;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=i;break;case"details":_e("toggle",t),s=i;break;case"input":Kh(t,i),s=pc(t,i),_e("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Se({},i,{value:void 0}),_e("invalid",t);break;case"textarea":Qh(t,i),s=yc(t,i),_e("invalid",t);break;default:s=i}_c(n,s),f=s;for(l in f)if(f.hasOwnProperty(l)){var d=f[l];l==="style"?ap(t,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&ip(t,d)):l==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&ms(t,d):typeof d=="number"&&ms(t,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fs.hasOwnProperty(l)?d!=null&&l==="onScroll"&&_e("scroll",t):d!=null&&Su(t,l,d,u))}switch(n){case"input":ha(t),Jh(t,i,!1);break;case"textarea":ha(t),Yh(t);break;case"option":i.value!=null&&t.setAttribute("value",""+qn(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?ni(t,!!i.multiple,l,!1):i.defaultValue!=null&&ni(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ja)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)Cg(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(n=fr(ks.current),fr(Qt.current),wa(e)){if(i=e.stateNode,n=e.memoizedProps,i[Gt]=e,(l=i.nodeValue!==n)&&(t=vt,t!==null))switch(t.tag){case 3:_a(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_a(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Gt]=e,e.stateNode=i}return Ke(e),null;case 13:if(we(Ne),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&gt!==null&&e.mode&1&&!(e.flags&128))Vp(),ui(),e.flags|=98560,l=!1;else if(l=wa(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error($(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error($(317));l[Gt]=e}else ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),l=!1}else Dt!==null&&(tu(Dt),Dt=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?ze===0&&(ze=3):ld())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return hi(),Vc(t,e),t===null&&ws(e.stateNode.containerInfo),Ke(e),null;case 10:return qu(e.type._context),Ke(e),null;case 17:return ft(e.type)&&Qa(),Ke(e),null;case 19:if(we(Ne),l=e.memoizedState,l===null)return Ke(e),null;if(i=(e.flags&128)!==0,u=l.rendering,u===null)if(i)Hi(l,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=io(t),u!==null){for(e.flags|=128,Hi(l,!1),i=u.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,u=l.alternate,u===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=u.childLanes,l.lanes=u.lanes,l.child=u.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=u.memoizedProps,l.memoizedState=u.memoizedState,l.updateQueue=u.updateQueue,l.type=u.type,t=u.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Ne,Ne.current&1|2),e.child}t=t.sibling}l.tail!==null&&Te()>mi&&(e.flags|=128,i=!0,Hi(l,!1),e.lanes=4194304)}else{if(!i)if(t=io(u),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!be)return Ke(e),null}else 2*Te()-l.renderingStartTime>mi&&n!==1073741824&&(e.flags|=128,i=!0,Hi(l,!1),e.lanes=4194304);l.isBackwards?(u.sibling=e.child,e.child=u):(n=l.last,n!==null?n.sibling=u:e.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Te(),e.sibling=null,n=Ne.current,xe(Ne,i?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return od(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?pt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function P_(t,e){switch($u(e),e.tag){case 1:return ft(e.type)&&Qa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hi(),we(ht),we(Ye),Ju(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ku(e),null;case 13:if(we(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Ne),null;case 4:return hi(),null;case 10:return qu(e.type._context),null;case 22:case 23:return od(),null;case 24:return null;default:return null}}var Na=!1,Qe=!1,E_=typeof WeakSet=="function"?WeakSet:Set,V=null;function ei(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ee(t,e,i)}else n.current=null}function Gc(t,e,n){try{n()}catch(i){Ee(t,e,i)}}var Ff=!1;function C_(t,e){if(Lc=Va,t=Ap(),Bu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var u=0,f=-1,d=-1,p=0,v=0,g=t,_=null;t:for(;;){for(var y;g!==n||s!==0&&g.nodeType!==3||(f=u+s),g!==l||i!==0&&g.nodeType!==3||(d=u+i),g.nodeType===3&&(u+=g.nodeValue.length),(y=g.firstChild)!==null;)_=g,g=y;for(;;){if(g===t)break t;if(_===n&&++p===s&&(f=u),_===l&&++v===i&&(d=u),(y=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=y}n=f===-1||d===-1?null:{start:f,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oc={focusedElem:t,selectionRange:n},Va=!1,V=e;V!==null;)if(e=V,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,V=t;else for(;V!==null;){e=V;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var w=S.memoizedProps,C=S.memoizedState,N=e.stateNode,j=N.getSnapshotBeforeUpdate(e.elementType===e.type?w:Mt(e.type,w),C);N.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(k){Ee(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,V=t;break}V=e.return}return S=Ff,Ff=!1,S}function os(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var l=s.destroy;s.destroy=void 0,l!==void 0&&Gc(e,n,l)}s=s.next}while(s!==i)}}function Co(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Kc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Tg(t){var e=t.alternate;e!==null&&(t.alternate=null,Tg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gt],delete e[js],delete e[Mc],delete e[d_],delete e[h_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lg(t){return t.tag===5||t.tag===3||t.tag===4}function Zf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ja));else if(i!==4&&(t=t.child,t!==null))for(Jc(t,e,n),t=t.sibling;t!==null;)Jc(t,e,n),t=t.sibling}function Qc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Qc(t,e,n),t=t.sibling;t!==null;)Qc(t,e,n),t=t.sibling}var qe=null,Rt=!1;function jn(t,e,n){for(n=n.child;n!==null;)Og(t,e,n),n=n.sibling}function Og(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(wo,n)}catch{}switch(n.tag){case 5:Qe||ei(n,e);case 6:var i=qe,s=Rt;qe=null,jn(t,e,n),qe=i,Rt=s,qe!==null&&(Rt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Rt?(t=qe,n=n.stateNode,t.nodeType===8?Zl(t.parentNode,n):t.nodeType===1&&Zl(t,n),ys(t)):Zl(qe,n.stateNode));break;case 4:i=qe,s=Rt,qe=n.stateNode.containerInfo,Rt=!0,jn(t,e,n),qe=i,Rt=s;break;case 0:case 11:case 14:case 15:if(!Qe&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var l=s,u=l.destroy;l=l.tag,u!==void 0&&(l&2||l&4)&&Gc(n,e,u),s=s.next}while(s!==i)}jn(t,e,n);break;case 1:if(!Qe&&(ei(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(f){Ee(n,e,f)}jn(t,e,n);break;case 21:jn(t,e,n);break;case 22:n.mode&1?(Qe=(i=Qe)||n.memoizedState!==null,jn(t,e,n),Qe=i):jn(t,e,n);break;default:jn(t,e,n)}}function Wf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new E_),e.forEach(function(i){var s=D_.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function It(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var l=t,u=e,f=u;e:for(;f!==null;){switch(f.tag){case 5:qe=f.stateNode,Rt=!1;break e;case 3:qe=f.stateNode.containerInfo,Rt=!0;break e;case 4:qe=f.stateNode.containerInfo,Rt=!0;break e}f=f.return}if(qe===null)throw Error($(160));Og(l,u,s),qe=null,Rt=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){Ee(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ig(e,t),e=e.sibling}function Ig(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(It(e,t),Ht(t),i&4){try{os(3,t,t.return),Co(3,t)}catch(w){Ee(t,t.return,w)}try{os(5,t,t.return)}catch(w){Ee(t,t.return,w)}}break;case 1:It(e,t),Ht(t),i&512&&n!==null&&ei(n,n.return);break;case 5:if(It(e,t),Ht(t),i&512&&n!==null&&ei(n,n.return),t.flags&32){var s=t.stateNode;try{ms(s,"")}catch(w){Ee(t,t.return,w)}}if(i&4&&(s=t.stateNode,s!=null)){var l=t.memoizedProps,u=n!==null?n.memoizedProps:l,f=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&tp(s,l),wc(f,u);var p=wc(f,l);for(u=0;u<d.length;u+=2){var v=d[u],g=d[u+1];v==="style"?ap(s,g):v==="dangerouslySetInnerHTML"?ip(s,g):v==="children"?ms(s,g):Su(s,v,g,p)}switch(f){case"input":gc(s,l);break;case"textarea":np(s,l);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?ni(s,!!l.multiple,y,!1):_!==!!l.multiple&&(l.defaultValue!=null?ni(s,!!l.multiple,l.defaultValue,!0):ni(s,!!l.multiple,l.multiple?[]:"",!1))}s[js]=l}catch(w){Ee(t,t.return,w)}}break;case 6:if(It(e,t),Ht(t),i&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,l=t.memoizedProps;try{s.nodeValue=l}catch(w){Ee(t,t.return,w)}}break;case 3:if(It(e,t),Ht(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ys(e.containerInfo)}catch(w){Ee(t,t.return,w)}break;case 4:It(e,t),Ht(t);break;case 13:It(e,t),Ht(t),s=t.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(sd=Te())),i&4&&Wf(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Qe=(p=Qe)||v,It(e,t),Qe=p):It(e,t),Ht(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!v&&t.mode&1)for(V=t,v=t.child;v!==null;){for(g=V=v;V!==null;){switch(_=V,y=_.child,_.tag){case 0:case 11:case 14:case 15:os(4,_,_.return);break;case 1:ei(_,_.return);var S=_.stateNode;if(typeof S.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(w){Ee(i,n,w)}}break;case 5:ei(_,_.return);break;case 22:if(_.memoizedState!==null){Hf(g);continue}}y!==null?(y.return=_,V=y):Hf(g)}v=v.sibling}e:for(v=null,g=t;;){if(g.tag===5){if(v===null){v=g;try{s=g.stateNode,p?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=g.stateNode,d=g.memoizedProps.style,u=d!=null&&d.hasOwnProperty("display")?d.display:null,f.style.display=sp("display",u))}catch(w){Ee(t,t.return,w)}}}else if(g.tag===6){if(v===null)try{g.stateNode.nodeValue=p?"":g.memoizedProps}catch(w){Ee(t,t.return,w)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;v===g&&(v=null),g=g.return}v===g&&(v=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:It(e,t),Ht(t),i&4&&Wf(t);break;case 21:break;default:It(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Lg(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ms(s,""),i.flags&=-33);var l=Zf(t);Qc(t,l,s);break;case 3:case 4:var u=i.stateNode.containerInfo,f=Zf(t);Jc(t,f,u);break;default:throw Error($(161))}}catch(d){Ee(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function T_(t,e,n){V=t,Ag(t)}function Ag(t,e,n){for(var i=(t.mode&1)!==0;V!==null;){var s=V,l=s.child;if(s.tag===22&&i){var u=s.memoizedState!==null||Na;if(!u){var f=s.alternate,d=f!==null&&f.memoizedState!==null||Qe;f=Na;var p=Qe;if(Na=u,(Qe=d)&&!p)for(V=s;V!==null;)u=V,d=u.child,u.tag===22&&u.memoizedState!==null?Vf(s):d!==null?(d.return=u,V=d):Vf(s);for(;l!==null;)V=l,Ag(l),l=l.sibling;V=s,Na=f,Qe=p}qf(t)}else s.subtreeFlags&8772&&l!==null?(l.return=s,V=l):qf(t)}}function qf(t){for(;V!==null;){var e=V;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qe||Co(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Qe)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Mt(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Cf(e,l,i);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cf(e,u,n)}break;case 5:var f=e.stateNode;if(n===null&&e.flags&4){n=f;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var g=v.dehydrated;g!==null&&ys(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Qe||e.flags&512&&Kc(e)}catch(_){Ee(e,e.return,_)}}if(e===t){V=null;break}if(n=e.sibling,n!==null){n.return=e.return,V=n;break}V=e.return}}function Hf(t){for(;V!==null;){var e=V;if(e===t){V=null;break}var n=e.sibling;if(n!==null){n.return=e.return,V=n;break}V=e.return}}function Vf(t){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Co(4,e)}catch(d){Ee(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Ee(e,s,d)}}var l=e.return;try{Kc(e)}catch(d){Ee(e,l,d)}break;case 5:var u=e.return;try{Kc(e)}catch(d){Ee(e,u,d)}}}catch(d){Ee(e,e.return,d)}if(e===t){V=null;break}var f=e.sibling;if(f!==null){f.return=e.return,V=f;break}V=e.return}}var L_=Math.ceil,oo=vn.ReactCurrentDispatcher,rd=vn.ReactCurrentOwner,Et=vn.ReactCurrentBatchConfig,ue=0,$e=null,Me=null,He=0,pt=0,ti=Kn(0),ze=0,Cs=null,br=0,To=0,id=0,ls=null,ct=null,sd=0,mi=1/0,sn=null,lo=!1,Yc=null,Un=null,ka=!1,On=null,co=0,cs=0,Xc=null,Ba=-1,Ua=0;function tt(){return ue&6?Te():Ba!==-1?Ba:Ba=Te()}function $n(t){return t.mode&1?ue&2&&He!==0?He&-He:m_.transition!==null?(Ua===0&&(Ua=yp()),Ua):(t=pe,t!==0||(t=window.event,t=t===void 0?16:kp(t.type)),t):1}function Ut(t,e,n,i){if(50<cs)throw cs=0,Xc=null,Error($(185));Ms(t,n,i),(!(ue&2)||t!==$e)&&(t===$e&&(!(ue&2)&&(To|=n),ze===4&&Cn(t,He)),mt(t,i),n===1&&ue===0&&!(e.mode&1)&&(mi=Te()+500,So&&Jn()))}function mt(t,e){var n=t.callbackNode;mx(t,e);var i=Ha(t,t===$e?He:0);if(i===0)n!==null&&tf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&tf(n),e===1)t.tag===0?f_(Gf.bind(null,t)):Wp(Gf.bind(null,t)),c_(function(){!(ue&6)&&Jn()}),n=null;else{switch(xp(i)){case 1:n=Lu;break;case 4:n=gp;break;case 16:n=qa;break;case 536870912:n=vp;break;default:n=qa}n=Fg(n,Mg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Mg(t,e){if(Ba=-1,Ua=0,ue&6)throw Error($(327));var n=t.callbackNode;if(oi()&&t.callbackNode!==n)return null;var i=Ha(t,t===$e?He:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=uo(t,i);else{e=i;var s=ue;ue|=2;var l=zg();($e!==t||He!==e)&&(sn=null,mi=Te()+500,pr(t,e));do try{A_();break}catch(f){Rg(t,f)}while(!0);Wu(),oo.current=l,ue=s,Me!==null?e=0:($e=null,He=0,e=ze)}if(e!==0){if(e===2&&(s=Sc(t),s!==0&&(i=s,e=eu(t,s))),e===1)throw n=Cs,pr(t,0),Cn(t,i),mt(t,Te()),n;if(e===6)Cn(t,i);else{if(s=t.current.alternate,!(i&30)&&!O_(s)&&(e=uo(t,i),e===2&&(l=Sc(t),l!==0&&(i=l,e=eu(t,l))),e===1))throw n=Cs,pr(t,0),Cn(t,i),mt(t,Te()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:or(t,ct,sn);break;case 3:if(Cn(t,i),(i&130023424)===i&&(e=sd+500-Te(),10<e)){if(Ha(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ac(or.bind(null,t,ct,sn),e);break}or(t,ct,sn);break;case 4:if(Cn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var u=31-Bt(i);l=1<<u,u=e[u],u>s&&(s=u),i&=~l}if(i=s,i=Te()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*L_(i/1960))-i,10<i){t.timeoutHandle=Ac(or.bind(null,t,ct,sn),i);break}or(t,ct,sn);break;case 5:or(t,ct,sn);break;default:throw Error($(329))}}}return mt(t,Te()),t.callbackNode===n?Mg.bind(null,t):null}function eu(t,e){var n=ls;return t.current.memoizedState.isDehydrated&&(pr(t,e).flags|=256),t=uo(t,e),t!==2&&(e=ct,ct=n,e!==null&&tu(e)),t}function tu(t){ct===null?ct=t:ct.push.apply(ct,t)}function O_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],l=s.getSnapshot;s=s.value;try{if(!$t(l(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cn(t,e){for(e&=~id,e&=~To,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bt(e),i=1<<n;t[n]=-1,e&=~i}}function Gf(t){if(ue&6)throw Error($(327));oi();var e=Ha(t,0);if(!(e&1))return mt(t,Te()),null;var n=uo(t,e);if(t.tag!==0&&n===2){var i=Sc(t);i!==0&&(e=i,n=eu(t,i))}if(n===1)throw n=Cs,pr(t,0),Cn(t,e),mt(t,Te()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,or(t,ct,sn),mt(t,Te()),null}function ad(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(mi=Te()+500,So&&Jn())}}function jr(t){On!==null&&On.tag===0&&!(ue&6)&&oi();var e=ue;ue|=1;var n=Et.transition,i=pe;try{if(Et.transition=null,pe=1,t)return t()}finally{pe=i,Et.transition=n,ue=e,!(ue&6)&&Jn()}}function od(){pt=ti.current,we(ti)}function pr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,l_(n)),Me!==null)for(n=Me.return;n!==null;){var i=n;switch($u(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Qa();break;case 3:hi(),we(ht),we(Ye),Ju();break;case 5:Ku(i);break;case 4:hi();break;case 13:we(Ne);break;case 19:we(Ne);break;case 10:qu(i.type._context);break;case 22:case 23:od()}n=n.return}if($e=t,Me=t=Fn(t.current,null),He=pt=e,ze=0,Cs=null,id=To=br=0,ct=ls=null,hr!==null){for(e=0;e<hr.length;e++)if(n=hr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,l=n.pending;if(l!==null){var u=l.next;l.next=s,i.next=u}n.pending=i}hr=null}return t}function Rg(t,e){do{var n=Me;try{if(Wu(),Ra.current=ao,so){for(var i=ke.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}so=!1}if(wr=0,Ue=Re=ke=null,as=!1,Ss=0,rd.current=null,n===null||n.return===null){ze=1,Cs=e,Me=null;break}e:{var l=t,u=n.return,f=n,d=e;if(e=He,f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,v=f,g=v.tag;if(!(v.mode&1)&&(g===0||g===11||g===15)){var _=v.alternate;_?(v.updateQueue=_.updateQueue,v.memoizedState=_.memoizedState,v.lanes=_.lanes):(v.updateQueue=null,v.memoizedState=null)}var y=Mf(u);if(y!==null){y.flags&=-257,Rf(y,u,f,l,e),y.mode&1&&Af(l,p,e),e=y,d=p;var S=e.updateQueue;if(S===null){var w=new Set;w.add(d),e.updateQueue=w}else S.add(d);break e}else{if(!(e&1)){Af(l,p,e),ld();break e}d=Error($(426))}}else if(be&&f.mode&1){var C=Mf(u);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Rf(C,u,f,l,e),Fu(fi(d,f));break e}}l=d=fi(d,f),ze!==4&&(ze=2),ls===null?ls=[l]:ls.push(l),l=u;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var N=xg(l,d,e);Ef(l,N);break e;case 1:f=d;var j=l.type,b=l.stateNode;if(!(l.flags&128)&&(typeof j.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Un===null||!Un.has(b)))){l.flags|=65536,e&=-e,l.lanes|=e;var k=_g(l,f,e);Ef(l,k);break e}}l=l.return}while(l!==null)}Bg(n)}catch(I){e=I,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function zg(){var t=oo.current;return oo.current=ao,t===null?ao:t}function ld(){(ze===0||ze===3||ze===2)&&(ze=4),$e===null||!(br&268435455)&&!(To&268435455)||Cn($e,He)}function uo(t,e){var n=ue;ue|=2;var i=zg();($e!==t||He!==e)&&(sn=null,pr(t,e));do try{I_();break}catch(s){Rg(t,s)}while(!0);if(Wu(),ue=n,oo.current=i,Me!==null)throw Error($(261));return $e=null,He=0,ze}function I_(){for(;Me!==null;)Dg(Me)}function A_(){for(;Me!==null&&!sx();)Dg(Me)}function Dg(t){var e=$g(t.alternate,t,pt);t.memoizedProps=t.pendingProps,e===null?Bg(t):Me=e,rd.current=null}function Bg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=P_(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Me=null;return}}else if(n=S_(n,e,pt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);ze===0&&(ze=5)}function or(t,e,n){var i=pe,s=Et.transition;try{Et.transition=null,pe=1,M_(t,e,n,i)}finally{Et.transition=s,pe=i}return null}function M_(t,e,n,i){do oi();while(On!==null);if(ue&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(px(t,l),t===$e&&(Me=$e=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ka||(ka=!0,Fg(qa,function(){return oi(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Et.transition,Et.transition=null;var u=pe;pe=1;var f=ue;ue|=4,rd.current=null,C_(t,n),Ig(n,t),t_(Oc),Va=!!Lc,Oc=Lc=null,t.current=n,T_(n),ax(),ue=f,pe=u,Et.transition=l}else t.current=n;if(ka&&(ka=!1,On=t,co=s),l=t.pendingLanes,l===0&&(Un=null),cx(n.stateNode),mt(t,Te()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(lo)throw lo=!1,t=Yc,Yc=null,t;return co&1&&t.tag!==0&&oi(),l=t.pendingLanes,l&1?t===Xc?cs++:(cs=0,Xc=t):cs=0,Jn(),null}function oi(){if(On!==null){var t=xp(co),e=Et.transition,n=pe;try{if(Et.transition=null,pe=16>t?16:t,On===null)var i=!1;else{if(t=On,On=null,co=0,ue&6)throw Error($(331));var s=ue;for(ue|=4,V=t.current;V!==null;){var l=V,u=l.child;if(V.flags&16){var f=l.deletions;if(f!==null){for(var d=0;d<f.length;d++){var p=f[d];for(V=p;V!==null;){var v=V;switch(v.tag){case 0:case 11:case 15:os(8,v,l)}var g=v.child;if(g!==null)g.return=v,V=g;else for(;V!==null;){v=V;var _=v.sibling,y=v.return;if(Tg(v),v===p){V=null;break}if(_!==null){_.return=y,V=_;break}V=y}}}var S=l.alternate;if(S!==null){var w=S.child;if(w!==null){S.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}V=l}}if(l.subtreeFlags&2064&&u!==null)u.return=l,V=u;else e:for(;V!==null;){if(l=V,l.flags&2048)switch(l.tag){case 0:case 11:case 15:os(9,l,l.return)}var N=l.sibling;if(N!==null){N.return=l.return,V=N;break e}V=l.return}}var j=t.current;for(V=j;V!==null;){u=V;var b=u.child;if(u.subtreeFlags&2064&&b!==null)b.return=u,V=b;else e:for(u=j;V!==null;){if(f=V,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:Co(9,f)}}catch(I){Ee(f,f.return,I)}if(f===u){V=null;break e}var k=f.sibling;if(k!==null){k.return=f.return,V=k;break e}V=f.return}}if(ue=s,Jn(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(wo,t)}catch{}i=!0}return i}finally{pe=n,Et.transition=e}}return!1}function Kf(t,e,n){e=fi(n,e),e=xg(t,e,1),t=Bn(t,e,1),e=tt(),t!==null&&(Ms(t,1,e),mt(t,e))}function Ee(t,e,n){if(t.tag===3)Kf(t,t,n);else for(;e!==null;){if(e.tag===3){Kf(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Un===null||!Un.has(i))){t=fi(n,t),t=_g(e,t,1),e=Bn(e,t,1),t=tt(),e!==null&&(Ms(e,1,t),mt(e,t));break}}e=e.return}}function R_(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=tt(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(He&n)===n&&(ze===4||ze===3&&(He&130023424)===He&&500>Te()-sd?pr(t,0):id|=n),mt(t,e)}function Ug(t,e){e===0&&(t.mode&1?(e=pa,pa<<=1,!(pa&130023424)&&(pa=4194304)):e=1);var n=tt();t=mn(t,e),t!==null&&(Ms(t,e,n),mt(t,n))}function z_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ug(t,n)}function D_(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),Ug(t,n)}var $g;$g=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,k_(t,e,n);dt=!!(t.flags&131072)}else dt=!1,be&&e.flags&1048576&&qp(e,eo,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Da(t,e),t=e.pendingProps;var s=ci(e,Ye.current);ai(e,n),s=Yu(null,e,i,t,s,n);var l=Xu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ft(i)?(l=!0,Ya(e)):l=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vu(e),s.updater=Eo,e.stateNode=s,s._reactInternals=e,$c(e,i,t,n),e=Wc(null,e,i,!0,l,n)):(e.tag=0,be&&l&&Uu(e),et(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Da(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=U_(i),t=Mt(i,t),s){case 0:e=Zc(null,e,i,t,n);break e;case 1:e=Bf(null,e,i,t,n);break e;case 11:e=zf(null,e,i,t,n);break e;case 14:e=Df(null,e,i,Mt(i.type,t),n);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mt(i,s),Zc(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mt(i,s),Bf(t,e,i,s,n);case 3:e:{if(Ng(e),t===null)throw Error($(387));i=e.pendingProps,l=e.memoizedState,s=l.element,Qp(t,e),ro(e,i,null,n);var u=e.memoizedState;if(i=u.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){s=fi(Error($(423)),e),e=Uf(t,e,i,n,s);break e}else if(i!==s){s=fi(Error($(424)),e),e=Uf(t,e,i,n,s);break e}else for(gt=Dn(e.stateNode.containerInfo.firstChild),vt=e,be=!0,Dt=null,n=Kp(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ui(),i===s){e=pn(t,e,n);break e}et(t,e,i,n)}e=e.child}return e;case 5:return Yp(e),t===null&&Dc(e),i=e.type,s=e.pendingProps,l=t!==null?t.memoizedProps:null,u=s.children,Ic(i,s)?u=null:l!==null&&Ic(i,l)&&(e.flags|=32),jg(t,e),et(t,e,u,n),e.child;case 6:return t===null&&Dc(e),null;case 13:return kg(t,e,n);case 4:return Gu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=di(e,null,i,n):et(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mt(i,s),zf(t,e,i,s,n);case 7:return et(t,e,e.pendingProps,n),e.child;case 8:return et(t,e,e.pendingProps.children,n),e.child;case 12:return et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,l=e.memoizedProps,u=s.value,xe(to,i._currentValue),i._currentValue=u,l!==null)if($t(l.value,u)){if(l.children===s.children&&!ht.current){e=pn(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var f=l.dependencies;if(f!==null){u=l.child;for(var d=f.firstContext;d!==null;){if(d.context===i){if(l.tag===1){d=dn(-1,n&-n),d.tag=2;var p=l.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?d.next=d:(d.next=v.next,v.next=d),p.pending=d}}l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),Bc(l.return,n,e),f.lanes|=n;break}d=d.next}}else if(l.tag===10)u=l.type===e.type?null:l.child;else if(l.tag===18){if(u=l.return,u===null)throw Error($(341));u.lanes|=n,f=u.alternate,f!==null&&(f.lanes|=n),Bc(u,n,e),u=l.sibling}else u=l.child;if(u!==null)u.return=l;else for(u=l;u!==null;){if(u===e){u=null;break}if(l=u.sibling,l!==null){l.return=u.return,u=l;break}u=u.return}l=u}et(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ai(e,n),s=Ct(s),i=i(s),e.flags|=1,et(t,e,i,n),e.child;case 14:return i=e.type,s=Mt(i,e.pendingProps),s=Mt(i.type,s),Df(t,e,i,s,n);case 15:return wg(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mt(i,s),Da(t,e),e.tag=1,ft(i)?(t=!0,Ya(e)):t=!1,ai(e,n),yg(e,i,s),$c(e,i,s,n),Wc(null,e,i,!0,t,n);case 19:return Sg(t,e,n);case 22:return bg(t,e,n)}throw Error($(156,e.tag))};function Fg(t,e){return pp(t,e)}function B_(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,i){return new B_(t,e,n,i)}function cd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function U_(t){if(typeof t=="function")return cd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Eu)return 11;if(t===Cu)return 14}return 2}function Fn(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $a(t,e,n,i,s,l){var u=2;if(i=t,typeof t=="function")cd(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case qr:return gr(n.children,s,l,e);case Pu:u=8,s|=8;break;case dc:return t=Pt(12,n,e,s|2),t.elementType=dc,t.lanes=l,t;case hc:return t=Pt(13,n,e,s),t.elementType=hc,t.lanes=l,t;case fc:return t=Pt(19,n,e,s),t.elementType=fc,t.lanes=l,t;case Ym:return Lo(n,s,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jm:u=10;break e;case Qm:u=9;break e;case Eu:u=11;break e;case Cu:u=14;break e;case Sn:u=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Pt(u,n,e,s),e.elementType=t,e.type=i,e.lanes=l,e}function gr(t,e,n,i){return t=Pt(7,t,i,e),t.lanes=n,t}function Lo(t,e,n,i){return t=Pt(22,t,i,e),t.elementType=Ym,t.lanes=n,t.stateNode={isHidden:!1},t}function Ql(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function Yl(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $_(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ol(0),this.expirationTimes=Ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ud(t,e,n,i,s,l,u,f,d){return t=new $_(t,e,n,f,d),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Pt(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vu(l),t}function F_(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Zg(t){if(!t)return Hn;t=t._reactInternals;e:{if(kr(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(ft(n))return Zp(t,n,e)}return e}function Wg(t,e,n,i,s,l,u,f,d){return t=ud(n,i,!0,t,s,l,u,f,d),t.context=Zg(null),n=t.current,i=tt(),s=$n(n),l=dn(i,s),l.callback=e??null,Bn(n,l,s),t.current.lanes=s,Ms(t,s,i),mt(t,i),t}function Oo(t,e,n,i){var s=e.current,l=tt(),u=$n(s);return n=Zg(n),e.context===null?e.context=n:e.pendingContext=n,e=dn(l,u),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Bn(s,e,u),t!==null&&(Ut(t,s,u,l),Ma(t,s,u)),u}function ho(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dd(t,e){Jf(t,e),(t=t.alternate)&&Jf(t,e)}function Z_(){return null}var qg=typeof reportError=="function"?reportError:function(t){console.error(t)};function hd(t){this._internalRoot=t}Io.prototype.render=hd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Oo(t,e,null,null)};Io.prototype.unmount=hd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jr(function(){Oo(null,t,null,null)}),e[fn]=null}};function Io(t){this._internalRoot=t}Io.prototype.unstable_scheduleHydration=function(t){if(t){var e=bp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<En.length&&e!==0&&e<En[n].priority;n++);En.splice(n,0,t),n===0&&Np(t)}};function fd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ao(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qf(){}function W_(t,e,n,i,s){if(s){if(typeof i=="function"){var l=i;i=function(){var p=ho(u);l.call(p)}}var u=Wg(e,i,t,0,null,!1,!1,"",Qf);return t._reactRootContainer=u,t[fn]=u.current,ws(t.nodeType===8?t.parentNode:t),jr(),u}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var f=i;i=function(){var p=ho(d);f.call(p)}}var d=ud(t,0,!1,null,null,!1,!1,"",Qf);return t._reactRootContainer=d,t[fn]=d.current,ws(t.nodeType===8?t.parentNode:t),jr(function(){Oo(e,d,n,i)}),d}function Mo(t,e,n,i,s){var l=n._reactRootContainer;if(l){var u=l;if(typeof s=="function"){var f=s;s=function(){var d=ho(u);f.call(d)}}Oo(e,u,t,s)}else u=W_(n,e,t,s,i);return ho(u)}_p=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qi(e.pendingLanes);n!==0&&(Ou(e,n|1),mt(e,Te()),!(ue&6)&&(mi=Te()+500,Jn()))}break;case 13:jr(function(){var i=mn(t,1);if(i!==null){var s=tt();Ut(i,t,1,s)}}),dd(t,1)}};Iu=function(t){if(t.tag===13){var e=mn(t,134217728);if(e!==null){var n=tt();Ut(e,t,134217728,n)}dd(t,134217728)}};wp=function(t){if(t.tag===13){var e=$n(t),n=mn(t,e);if(n!==null){var i=tt();Ut(n,t,e,i)}dd(t,e)}};bp=function(){return pe};jp=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};jc=function(t,e,n){switch(e){case"input":if(gc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=ko(i);if(!s)throw Error($(90));ep(i),gc(i,s)}}}break;case"textarea":np(t,n);break;case"select":e=n.value,e!=null&&ni(t,!!n.multiple,e,!1)}};cp=ad;up=jr;var q_={usingClientEntryPoint:!1,Events:[zs,Kr,ko,op,lp,ad]},Vi={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H_={bundleType:Vi.bundleType,version:Vi.version,rendererPackageName:Vi.rendererPackageName,rendererConfig:Vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fp(t),t===null?null:t.stateNode},findFiberByHostInstance:Vi.findFiberByHostInstance||Z_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sa.isDisabled&&Sa.supportsFiber)try{wo=Sa.inject(H_),Jt=Sa}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q_;_t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fd(e))throw Error($(200));return F_(t,e,null,n)};_t.createRoot=function(t,e){if(!fd(t))throw Error($(299));var n=!1,i="",s=qg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ud(t,1,!1,null,null,n,!1,i,s),t[fn]=e.current,ws(t.nodeType===8?t.parentNode:t),new hd(e)};_t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=fp(e),t=t===null?null:t.stateNode,t};_t.flushSync=function(t){return jr(t)};_t.hydrate=function(t,e,n){if(!Ao(e))throw Error($(200));return Mo(null,t,e,!0,n)};_t.hydrateRoot=function(t,e,n){if(!fd(t))throw Error($(405));var i=n!=null&&n.hydratedSources||null,s=!1,l="",u=qg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=Wg(e,null,t,1,n??null,s,!1,l,u),t[fn]=e.current,ws(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Io(e)};_t.render=function(t,e,n){if(!Ao(e))throw Error($(200));return Mo(null,t,e,!1,n)};_t.unmountComponentAtNode=function(t){if(!Ao(t))throw Error($(40));return t._reactRootContainer?(jr(function(){Mo(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};_t.unstable_batchedUpdates=ad;_t.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ao(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Mo(t,e,n,!1,i)};_t.version="18.3.1-next-f1338f8080-20240426";function Hg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hg)}catch(t){console.error(t)}}Hg(),Hm.exports=_t;var Vg=Hm.exports,Yf=Vg;cc.createRoot=Yf.createRoot,cc.hydrateRoot=Yf.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ts(){return Ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ts.apply(this,arguments)}var In;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(In||(In={}));const Xf="popstate";function V_(t){t===void 0&&(t={});function e(i,s){let{pathname:l,search:u,hash:f}=i.location;return nu("",{pathname:l,search:u,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:fo(s)}return K_(e,n,null,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function G_(){return Math.random().toString(36).substr(2,8)}function em(t,e){return{usr:t.state,key:t.key,idx:e}}function nu(t,e,n,i){return n===void 0&&(n=null),Ts({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bi(e):e,{state:n,key:e&&e.key||i||G_()})}function fo(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function bi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function K_(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:l=!1}=i,u=s.history,f=In.Pop,d=null,p=v();p==null&&(p=0,u.replaceState(Ts({},u.state,{idx:p}),""));function v(){return(u.state||{idx:null}).idx}function g(){f=In.Pop;let C=v(),N=C==null?null:C-p;p=C,d&&d({action:f,location:w.location,delta:N})}function _(C,N){f=In.Push;let j=nu(w.location,C,N);p=v()+1;let b=em(j,p),k=w.createHref(j);try{u.pushState(b,"",k)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(k)}l&&d&&d({action:f,location:w.location,delta:1})}function y(C,N){f=In.Replace;let j=nu(w.location,C,N);p=v();let b=em(j,p),k=w.createHref(j);u.replaceState(b,"",k),l&&d&&d({action:f,location:w.location,delta:0})}function S(C){let N=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof C=="string"?C:fo(C);return j=j.replace(/ $/,"%20"),Le(N,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,N)}let w={get action(){return f},get location(){return t(s,u)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Xf,g),d=C,()=>{s.removeEventListener(Xf,g),d=null}},createHref(C){return e(s,C)},createURL:S,encodeLocation(C){let N=S(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:_,replace:y,go(C){return u.go(C)}};return w}var tm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tm||(tm={}));function J_(t,e,n){return n===void 0&&(n="/"),Q_(t,e,n)}function Q_(t,e,n,i){let s=typeof e=="string"?bi(e):e,l=md(s.pathname||"/",n);if(l==null)return null;let u=Kg(t);Y_(u);let f=null;for(let d=0;f==null&&d<u.length;++d){let p=uw(l);f=ow(u[d],p)}return f}function Kg(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(l,u,f)=>{let d={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};d.relativePath.startsWith("/")&&(Le(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let p=Zn([i,d.relativePath]),v=n.concat(d);l.children&&l.children.length>0&&(Le(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Kg(l.children,e,v,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:sw(p,l.index),routesMeta:v})};return t.forEach((l,u)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))s(l,u);else for(let d of Jg(l.path))s(l,u,d)}),e}function Jg(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return s?[l,""]:[l];let u=Jg(i.join("/")),f=[];return f.push(...u.map(d=>d===""?l:[l,d].join("/"))),s&&f.push(...u),f.map(d=>t.startsWith("/")&&d===""?"/":d)}function Y_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aw(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const X_=/^:[\w-]+$/,ew=3,tw=2,nw=1,rw=10,iw=-2,nm=t=>t==="*";function sw(t,e){let n=t.split("/"),i=n.length;return n.some(nm)&&(i+=iw),e&&(i+=tw),n.filter(s=>!nm(s)).reduce((s,l)=>s+(X_.test(l)?ew:l===""?nw:rw),i)}function aw(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function ow(t,e,n){let{routesMeta:i}=t,s={},l="/",u=[];for(let f=0;f<i.length;++f){let d=i[f],p=f===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",g=lw({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},v),_=d.route;if(!g)return null;Object.assign(s,g.params),u.push({params:s,pathname:Zn([l,g.pathname]),pathnameBase:mw(Zn([l,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(l=Zn([l,g.pathnameBase]))}return u}function lw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=cw(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:i.reduce((p,v,g)=>{let{paramName:_,isOptional:y}=v;if(_==="*"){let w=f[g]||"";u=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const S=f[g];return y&&!S?p[_]=void 0:p[_]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:t}}function cw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Gg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,d)=>(i.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function uw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function md(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function dw(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?bi(t):t;return{pathname:n?n.startsWith("/")?n:hw(n,e):e,search:pw(i),hash:gw(s)}}function hw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xl(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fw(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pd(t,e){let n=fw(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function gd(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=bi(t):(s=Ts({},t),Le(!s.pathname||!s.pathname.includes("?"),Xl("?","pathname","search",s)),Le(!s.pathname||!s.pathname.includes("#"),Xl("#","pathname","hash",s)),Le(!s.search||!s.search.includes("#"),Xl("#","search","hash",s)));let l=t===""||s.pathname==="",u=l?"/":s.pathname,f;if(u==null)f=n;else{let g=e.length-1;if(!i&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),g-=1;s.pathname=_.join("/")}f=g>=0?e[g]:"/"}let d=dw(s,f),p=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||v)&&(d.pathname+="/"),d}const Zn=t=>t.join("/").replace(/\/\/+/g,"/"),mw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Qg=["post","put","patch","delete"];new Set(Qg);const yw=["get",...Qg];new Set(yw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ls(){return Ls=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ls.apply(this,arguments)}const vd=E.createContext(null),xw=E.createContext(null),Qn=E.createContext(null),Ro=E.createContext(null),yn=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Yg=E.createContext(null);function _w(t,e){let{relative:n}=e===void 0?{}:e;ji()||Le(!1);let{basename:i,navigator:s}=E.useContext(Qn),{hash:l,pathname:u,search:f}=tv(t,{relative:n}),d=u;return i!=="/"&&(d=u==="/"?i:Zn([i,u])),s.createHref({pathname:d,search:f,hash:l})}function ji(){return E.useContext(Ro)!=null}function Bs(){return ji()||Le(!1),E.useContext(Ro).location}function Xg(t){E.useContext(Qn).static||E.useLayoutEffect(t)}function zo(){let{isDataRoute:t}=E.useContext(yn);return t?Iw():ww()}function ww(){ji()||Le(!1);let t=E.useContext(vd),{basename:e,future:n,navigator:i}=E.useContext(Qn),{matches:s}=E.useContext(yn),{pathname:l}=Bs(),u=JSON.stringify(pd(s,n.v7_relativeSplatPath)),f=E.useRef(!1);return Xg(()=>{f.current=!0}),E.useCallback(function(p,v){if(v===void 0&&(v={}),!f.current)return;if(typeof p=="number"){i.go(p);return}let g=gd(p,JSON.parse(u),l,v.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Zn([e,g.pathname])),(v.replace?i.replace:i.push)(g,v.state,v)},[e,i,u,l,t])}function ev(){let{matches:t}=E.useContext(yn),e=t[t.length-1];return e?e.params:{}}function tv(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=E.useContext(Qn),{matches:s}=E.useContext(yn),{pathname:l}=Bs(),u=JSON.stringify(pd(s,i.v7_relativeSplatPath));return E.useMemo(()=>gd(t,JSON.parse(u),l,n==="path"),[t,u,l,n])}function bw(t,e){return jw(t,e)}function jw(t,e,n,i){ji()||Le(!1);let{navigator:s}=E.useContext(Qn),{matches:l}=E.useContext(yn),u=l[l.length-1],f=u?u.params:{};u&&u.pathname;let d=u?u.pathnameBase:"/";u&&u.route;let p=Bs(),v;if(e){var g;let C=typeof e=="string"?bi(e):e;d==="/"||(g=C.pathname)!=null&&g.startsWith(d)||Le(!1),v=C}else v=p;let _=v.pathname||"/",y=_;if(d!=="/"){let C=d.replace(/^\//,"").split("/");y="/"+_.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=J_(t,{pathname:y}),w=Ew(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},f,C.params),pathname:Zn([d,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Zn([d,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,n,i);return e&&w?E.createElement(Ro.Provider,{value:{location:Ls({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:In.Pop}},w):w}function Nw(){let t=Ow(),e=vw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:s},n):null,null)}const kw=E.createElement(Nw,null);class Sw extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(yn.Provider,{value:this.props.routeContext},E.createElement(Yg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pw(t){let{routeContext:e,match:n,children:i}=t,s=E.useContext(vd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(yn.Provider,{value:e},i)}function Ew(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let u=t,f=(s=n)==null?void 0:s.errors;if(f!=null){let v=u.findIndex(g=>g.route.id&&(f==null?void 0:f[g.route.id])!==void 0);v>=0||Le(!1),u=u.slice(0,Math.min(u.length,v+1))}let d=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let v=0;v<u.length;v++){let g=u[v];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=v),g.route.id){let{loaderData:_,errors:y}=n,S=g.route.loader&&_[g.route.id]===void 0&&(!y||y[g.route.id]===void 0);if(g.route.lazy||S){d=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((v,g,_)=>{let y,S=!1,w=null,C=null;n&&(y=f&&g.route.id?f[g.route.id]:void 0,w=g.route.errorElement||kw,d&&(p<0&&_===0?(Aw("route-fallback"),S=!0,C=null):p===_&&(S=!0,C=g.route.hydrateFallbackElement||null)));let N=e.concat(u.slice(0,_+1)),j=()=>{let b;return y?b=w:S?b=C:g.route.Component?b=E.createElement(g.route.Component,null):g.route.element?b=g.route.element:b=v,E.createElement(Pw,{match:g,routeContext:{outlet:v,matches:N,isDataRoute:n!=null},children:b})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?E.createElement(Sw,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:j(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):j()},null)}var nv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nv||{}),rv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rv||{});function Cw(t){let e=E.useContext(vd);return e||Le(!1),e}function Tw(t){let e=E.useContext(xw);return e||Le(!1),e}function Lw(t){let e=E.useContext(yn);return e||Le(!1),e}function iv(t){let e=Lw(),n=e.matches[e.matches.length-1];return n.route.id||Le(!1),n.route.id}function Ow(){var t;let e=E.useContext(Yg),n=Tw(),i=iv();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function Iw(){let{router:t}=Cw(nv.UseNavigateStable),e=iv(rv.UseNavigateStable),n=E.useRef(!1);return Xg(()=>{n.current=!0}),E.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ls({fromRouteId:e},l)))},[t,e])}const rm={};function Aw(t,e,n){rm[t]||(rm[t]=!0)}function Mw(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gn(t){let{to:e,replace:n,state:i,relative:s}=t;ji()||Le(!1);let{future:l,static:u}=E.useContext(Qn),{matches:f}=E.useContext(yn),{pathname:d}=Bs(),p=zo(),v=gd(e,pd(f,l.v7_relativeSplatPath),d,s==="path"),g=JSON.stringify(v);return E.useEffect(()=>p(JSON.parse(g),{replace:n,state:i,relative:s}),[p,g,s,n,i]),null}function ot(t){Le(!1)}function Rw(t){let{basename:e="/",children:n=null,location:i,navigationType:s=In.Pop,navigator:l,static:u=!1,future:f}=t;ji()&&Le(!1);let d=e.replace(/^\/*/,"/"),p=E.useMemo(()=>({basename:d,navigator:l,static:u,future:Ls({v7_relativeSplatPath:!1},f)}),[d,f,l,u]);typeof i=="string"&&(i=bi(i));let{pathname:v="/",search:g="",hash:_="",state:y=null,key:S="default"}=i,w=E.useMemo(()=>{let C=md(v,d);return C==null?null:{location:{pathname:C,search:g,hash:_,state:y,key:S},navigationType:s}},[d,v,g,_,y,S,s]);return w==null?null:E.createElement(Qn.Provider,{value:p},E.createElement(Ro.Provider,{children:n,value:w}))}function zw(t){let{children:e,location:n}=t;return bw(ru(e),n)}new Promise(()=>{});function ru(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(i,s)=>{if(!E.isValidElement(i))return;let l=[...e,s];if(i.type===E.Fragment){n.push.apply(n,ru(i.props.children,l));return}i.type!==ot&&Le(!1),!i.props.index||!i.props.children||Le(!1);let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=ru(i.props.children,l)),n.push(u)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iu(){return iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iu.apply(this,arguments)}function Dw(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,l;for(l=0;l<i.length;l++)s=i[l],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Bw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Uw(t,e){return t.button===0&&(!e||e==="_self")&&!Bw(t)}const $w=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Fw="6";try{window.__reactRouterVersion=Fw}catch{}const Zw="startTransition",im=Ry[Zw];function Ww(t){let{basename:e,children:n,future:i,window:s}=t,l=E.useRef();l.current==null&&(l.current=V_({window:s,v5Compat:!0}));let u=l.current,[f,d]=E.useState({action:u.action,location:u.location}),{v7_startTransition:p}=i||{},v=E.useCallback(g=>{p&&im?im(()=>d(g)):d(g)},[d,p]);return E.useLayoutEffect(()=>u.listen(v),[u,v]),E.useEffect(()=>Mw(i),[i]),E.createElement(Rw,{basename:e,children:n,location:f.location,navigationType:f.action,navigator:u,future:i})}const qw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ce=E.forwardRef(function(e,n){let{onClick:i,relative:s,reloadDocument:l,replace:u,state:f,target:d,to:p,preventScrollReset:v,viewTransition:g}=e,_=Dw(e,$w),{basename:y}=E.useContext(Qn),S,w=!1;if(typeof p=="string"&&Hw.test(p)&&(S=p,qw))try{let b=new URL(window.location.href),k=p.startsWith("//")?new URL(b.protocol+p):new URL(p),I=md(k.pathname,y);k.origin===b.origin&&I!=null?p=I+k.search+k.hash:w=!0}catch{}let C=_w(p,{relative:s}),N=Vw(p,{replace:u,state:f,target:d,preventScrollReset:v,relative:s,viewTransition:g});function j(b){i&&i(b),b.defaultPrevented||N(b)}return E.createElement("a",iu({},_,{href:S||C,onClick:w||l?i:j,ref:n,target:d}))});var sm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sm||(sm={}));var am;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(am||(am={}));function Vw(t,e){let{target:n,replace:i,state:s,preventScrollReset:l,relative:u,viewTransition:f}=e===void 0?{}:e,d=zo(),p=Bs(),v=tv(t,{relative:u});return E.useCallback(g=>{if(Uw(g,n)){g.preventDefault();let _=i!==void 0?i:fo(p)===fo(v);d(t,{replace:_,state:s,preventScrollReset:l,relative:u,viewTransition:f})}},[p,d,v,i,s,n,t,l,u,f])}const Gw="modulepreload",Kw=function(t){return"/"+t},om={},Us=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=Promise.allSettled(n.map(d=>{if(d=Kw(d),d in om)return;om[d]=!0;const p=d.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":Gw,p||(g.as="script"),g.crossOrigin="",g.href=d,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((_,y)=>{g.addEventListener("load",_),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},Jw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Us(async()=>{const{default:i}=await Promise.resolve().then(()=>Ni);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class yd extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class Qw extends yd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lm extends yd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class cm extends yd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var su;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(su||(su={}));var Yw=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(v){try{p(i.next(v))}catch(g){u(g)}}function d(v){try{p(i.throw(v))}catch(g){u(g)}}function p(v){v.done?l(v.value):s(v.value).then(f,d)}p((i=i.apply(t,e||[])).next())})};class Xw{constructor(e,{headers:n={},customFetch:i,region:s=su.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Jw(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return Yw(this,void 0,void 0,function*(){try{const{headers:s,method:l,body:u}=n;let f={},{region:d}=n;d||(d=this.region);const p=new URL(`${this.url}/${e}`);d&&d!=="any"&&(f["x-region"]=d,p.searchParams.set("forceFunctionRegion",d));let v;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)));const g=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),s),body:v}).catch(w=>{throw new Qw(w)}),_=g.headers.get("x-relay-error");if(_&&_==="true")throw new lm(g);if(!g.ok)throw new cm(g);let y=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return y==="application/json"?S=yield g.json():y==="application/octet-stream"?S=yield g.blob():y==="text/event-stream"?S=g:y==="multipart/form-data"?S=yield g.formData():S=yield g.text(),{data:S,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof cm||s instanceof lm?s.context:void 0}}})}}var ut={},xd={},Do={},$s={},Bo={},Uo={},eb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pi=eb();const tb=pi.fetch,sv=pi.fetch.bind(pi),av=pi.Headers,nb=pi.Request,rb=pi.Response,Ni=Object.freeze(Object.defineProperty({__proto__:null,Headers:av,Request:nb,Response:rb,default:sv,fetch:tb},Symbol.toStringTag,{value:"Module"})),ib=_y(Ni);var $o={};Object.defineProperty($o,"__esModule",{value:!0});let sb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};$o.default=sb;var ov=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Uo,"__esModule",{value:!0});const ab=ov(ib),ob=ov($o);let lb=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ab.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let s=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,f,d;let p=null,v=null,g=null,_=l.status,y=l.statusText;if(l.ok){if(this.method!=="HEAD"){const N=await l.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=N:v=JSON.parse(N))}const w=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),C=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");w&&C&&C.length>1&&(g=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(p={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,g=null,_=406,y="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const w=await l.text();try{p=JSON.parse(w),Array.isArray(p)&&l.status===404&&(v=[],p=null,_=200,y="OK")}catch{l.status===404&&w===""?(_=204,y="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((d=p==null?void 0:p.details)===null||d===void 0)&&d.includes("0 rows"))&&(p=null,_=200,y="OK"),p&&this.shouldThrowOnError)throw new ob.default(p)}return{error:p,data:v,count:g,status:_,statusText:y}});return this.shouldThrowOnError||(s=s.catch(l=>{var u,f,d;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(f=l==null?void 0:l.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(d=l==null?void 0:l.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Uo.default=lb;var cb=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bo,"__esModule",{value:!0});const ub=cb(Uo);let db=class extends ub.default{select(e){let n=!1;const i=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:i,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${e}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:i,referencedTable:s=i}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(u,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:i=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var f;const d=[e?"analyze":null,n?"verbose":null,i?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${p}"; options=${d};`,u==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Bo.default=db;var hb=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($s,"__esModule",{value:!0});const fb=hb(Bo);let mb=class extends fb.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const i=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:i,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const u=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${l}fts${u}.${n}`),this}match(e){return Object.entries(e).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(e,n,i){return this.url.searchParams.append(e,`not.${n}.${i}`),this}or(e,{foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,i){return this.url.searchParams.append(e,`${n}.${i}`),this}};$s.default=mb;var pb=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Do,"__esModule",{value:!0});const Gi=pb($s);let gb=class{constructor(e,{headers:n={},schema:i,fetch:s}){this.url=e,this.headers=n,this.schema=i,this.fetch=s}select(e,{head:n=!1,count:i}={}){const s=n?"HEAD":"GET";let l=!1;const u=(e??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),i&&(this.headers.Prefer=`count=${i}`),new Gi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:i=!0}={}){const s="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const u=e.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(u.length>0){const f=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new Gi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:i=!1,count:s,defaultToNull:l=!0}={}){const u="POST",f=[`resolution=${i?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&f.push(this.headers.Prefer),s&&f.push(`count=${s}`),l||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(e)){const d=e.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(d.length>0){const p=[...new Set(d)].map(v=>`"${v}"`);this.url.searchParams.set("columns",p.join(","))}}return new Gi.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const i="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Gi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Gi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Do.default=gb;var Fo={},Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.version=void 0;Zo.version="0.0.0-automated";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.DEFAULT_HEADERS=void 0;const vb=Zo;Fo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${vb.version}`};var lv=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xd,"__esModule",{value:!0});const yb=lv(Do),xb=lv($s),_b=Fo;let wb=class cv{constructor(e,{headers:n={},schema:i,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},_b.DEFAULT_HEADERS),n),this.schemaName=i,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new yb.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new cv(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:s=!1,count:l}={}){let u;const f=new URL(`${this.url}/rpc/${e}`);let d;i||s?(u=i?"HEAD":"GET",Object.entries(n).filter(([v,g])=>g!==void 0).map(([v,g])=>[v,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([v,g])=>{f.searchParams.append(v,g)})):(u="POST",d=n);const p=Object.assign({},this.headers);return l&&(p.Prefer=`count=${l}`),new xb.default({method:u,url:f,headers:p,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};xd.default=wb;var ki=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ut,"__esModule",{value:!0});ut.PostgrestError=ut.PostgrestBuilder=ut.PostgrestTransformBuilder=ut.PostgrestFilterBuilder=ut.PostgrestQueryBuilder=ut.PostgrestClient=void 0;const uv=ki(xd);ut.PostgrestClient=uv.default;const dv=ki(Do);ut.PostgrestQueryBuilder=dv.default;const hv=ki($s);ut.PostgrestFilterBuilder=hv.default;const fv=ki(Bo);ut.PostgrestTransformBuilder=fv.default;const mv=ki(Uo);ut.PostgrestBuilder=mv.default;const pv=ki($o);ut.PostgrestError=pv.default;var bb=ut.default={PostgrestClient:uv.default,PostgrestQueryBuilder:dv.default,PostgrestFilterBuilder:hv.default,PostgrestTransformBuilder:fv.default,PostgrestBuilder:mv.default,PostgrestError:pv.default};const{PostgrestClient:jb,PostgrestQueryBuilder:V2,PostgrestFilterBuilder:G2,PostgrestTransformBuilder:K2,PostgrestBuilder:J2,PostgrestError:Q2}=bb;function Nb(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const kb=Nb(),Sb="2.11.15",Pb=`realtime-js/${Sb}`,Eb="1.0.0",gv=1e4,Cb=1e3;var us;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(us||(us={}));var Je;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Je||(Je={}));var zt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(zt||(zt={}));var au;(function(t){t.websocket="websocket"})(au||(au={}));var cr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(cr||(cr={}));class Tb{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const s=n.getUint8(1),l=n.getUint8(2);let u=this.HEADER_LENGTH+2;const f=i.decode(e.slice(u,u+s));u=u+s;const d=i.decode(e.slice(u,u+l));u=u+l;const p=JSON.parse(i.decode(e.slice(u,e.byteLength)));return{ref:null,topic:f,event:d,payload:p}}}class vv{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ye||(ye={}));const um=(t,e,n={})=>{var i;const s=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,u)=>(l[u]=Lb(u,t,e,s),l),{})},Lb=(t,e,n,i)=>{const s=e.find(f=>f.name===t),l=s==null?void 0:s.type,u=n[t];return l&&!i.includes(l)?yv(l,u):ou(u)},yv=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Mb(e,n)}switch(t){case ye.bool:return Ob(e);case ye.float4:case ye.float8:case ye.int2:case ye.int4:case ye.int8:case ye.numeric:case ye.oid:return Ib(e);case ye.json:case ye.jsonb:return Ab(e);case ye.timestamp:return Rb(e);case ye.abstime:case ye.date:case ye.daterange:case ye.int4range:case ye.int8range:case ye.money:case ye.reltime:case ye.text:case ye.time:case ye.timestamptz:case ye.timetz:case ye.tsrange:case ye.tstzrange:return ou(e);default:return ou(e)}},ou=t=>t,Ob=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ib=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ab=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Mb=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let l;const u=t.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>yv(e,f))}return t},Rb=t=>typeof t=="string"?t.replace(" ","T"):t,xv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ec{constructor(e,n,i={},s=gv){this.channel=e,this.event=n,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dm||(dm={}));class ds{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ds.syncState(this.state,s,l,u),this.pendingDiffs.forEach(d=>{this.state=ds.syncDiff(this.state,d,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},s=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ds.syncDiff(this.state,s,l,u),f())}),this.onJoin((s,l,u)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:l,newPresences:u})}),this.onLeave((s,l,u)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,s){const l=this.cloneDeep(e),u=this.transformState(n),f={},d={};return this.map(l,(p,v)=>{u[p]||(d[p]=v)}),this.map(u,(p,v)=>{const g=l[p];if(g){const _=v.map(C=>C.presence_ref),y=g.map(C=>C.presence_ref),S=v.filter(C=>y.indexOf(C.presence_ref)<0),w=g.filter(C=>_.indexOf(C.presence_ref)<0);S.length>0&&(f[p]=S),w.length>0&&(d[p]=w)}else f[p]=v}),this.syncDiff(l,{joins:f,leaves:d},i,s)}static syncDiff(e,n,i,s){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(l,(f,d)=>{var p;const v=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(d),v.length>0){const g=e[f].map(y=>y.presence_ref),_=v.filter(y=>g.indexOf(y.presence_ref)<0);e[f].unshift(..._)}i(f,v,d)}),this.map(u,(f,d)=>{let p=e[f];if(!p)return;const v=d.map(g=>g.presence_ref);p=p.filter(g=>v.indexOf(g.presence_ref)<0),e[f]=p,s(f,p,d),p.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const s=e[i];return"metas"in s?n[i]=s.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hm||(hm={}));var fm;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fm||(fm={}));var an;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(an||(an={}));class _d{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ec(this,zt.join,this.params,this.timeout),this.rejoinTimer=new vv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Je.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zt.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new ds(this),this.broadcastEndpointURL=xv(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Je.closed){const{config:{broadcast:l,presence:u,private:f}}=this.params;this._onError(v=>e==null?void 0:e(an.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(an.CLOSED));const d={},p={broadcast:l,presence:u,postgres_changes:(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(v=>v.filter))!==null&&s!==void 0?s:[],private:f};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var g;if(this.socket.setAuth(),v===void 0){e==null||e(an.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,y=(g=_==null?void 0:_.length)!==null&&g!==void 0?g:0,S=[];for(let w=0;w<y;w++){const C=_[w],{filter:{event:N,schema:j,table:b,filter:k}}=C,I=v&&v[w];if(I&&I.event===N&&I.schema===j&&I.table===b&&I.filter===k)S.push(Object.assign(Object.assign({},C),{id:I.id}));else{this.unsubscribe(),this.state=Je.errored,e==null||e(an.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(an.SUBSCRIBED);return}}).receive("error",v=>{this.state=Je.errored,e==null||e(an.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(an.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this._on(e,n,i)}async send(e,n={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=p.body)===null||s===void 0?void 0:s.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,d;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||d===void 0)&&d.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Je.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new ec(this,zt.leave,{},e),i.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,i){const s=new AbortController,l=setTimeout(()=>s.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(l),u}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ec(this,e,n,i);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var s,l;const u=e.toLocaleLowerCase(),{close:f,error:d,leave:p,join:v}=zt;if(i&&[f,d,p,v].indexOf(u)>=0&&i!==this._joinRef())return;let _=this._onMessage(u,n,i);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var S,w,C;return((S=y.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(w=y.filter)===null||w===void 0?void 0:w.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(y=>y.callback(_,i)):(l=this.bindings[u])===null||l===void 0||l.filter(y=>{var S,w,C,N,j,b;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in y){const k=y.id,I=(S=y.filter)===null||S===void 0?void 0:S.event;return k&&((w=n.ids)===null||w===void 0?void 0:w.includes(k))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const k=(j=(N=y==null?void 0:y.filter)===null||N===void 0?void 0:N.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return k==="*"||k===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===u}).map(y=>{if(typeof _=="object"&&"ids"in _){const S=_.data,{schema:w,table:C,commit_timestamp:N,type:j,errors:b}=S;_=Object.assign(Object.assign({},{schema:w,table:C,commit_timestamp:N,eventType:j,new:{},old:{},errors:b}),this._getPayloadRecords(S))}y.callback(_,i)})}_isClosed(){return this.state===Je.closed}_isJoined(){return this.state===Je.joined}_isJoining(){return this.state===Je.joining}_isLeaving(){return this.state===Je.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const s=e.toLocaleLowerCase(),l={type:s,filter:n,callback:i};return this.bindings[s]?this.bindings[s].push(l):this.bindings[s]=[l],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(s=>{var l;return!(((l=s.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&_d.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zt.close,{},e)}_onError(e){this._on(zt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Je.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=um(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=um(e.columns,e.old_record)),n}}const mm=()=>{},zb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Db{constructor(e,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gv,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mm,this.ref=0,this.logger=mm,this.conn=null,this.sendBuffer=[],this.serializer=new Tb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...f)=>Us(async()=>{const{default:d}=await Promise.resolve().then(()=>Ni);return{default:d}},void 0).then(({default:d})=>d(...f)):u=fetch,(...f)=>u(...f)},this.endPoint=`${e}/${au.websocket}`,this.httpEndpoint=xv(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(i=n==null?void 0:n.params)===null||i===void 0?void 0:i.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(l,u)=>u(JSON.stringify(l)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new vv(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=kb),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Eb}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case us.connecting:return cr.Connecting;case us.open:return cr.Open;case us.closing:return cr.Closing;default:return cr.Closed}}isConnected(){return this.connectionState()===cr.Open}channel(e,n={config:{}}){const i=`realtime:${e}`,s=this.getChannels().find(l=>l.topic===i);if(s)return s;{const l=new _d(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:i,payload:s,ref:l}=e,u=()=>{this.encode(e,f=>{var d;(d=this.conn)===null||d===void 0||d.send(f)})};this.log("push",`${n} ${i} (${l})`,s),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:Pb};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(zt.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Cb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:i,event:s,payload:l,ref:u}=n;i==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${i} ${s} ${u&&"("+u+")"||""}`,l),Array.from(this.channels).filter(f=>f._isMember(i)).forEach(f=>f._trigger(s,l,u)),this.stateChangeCallbacks.message.forEach(f=>f(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(zt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${i}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([zb],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class wd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Be(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Bb extends wd{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lu extends wd{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Ub=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(v){try{p(i.next(v))}catch(g){u(g)}}function d(v){try{p(i.throw(v))}catch(g){u(g)}}function p(v){v.done?l(v.value):s(v.value).then(f,d)}p((i=i.apply(t,e||[])).next())})};const _v=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Us(async()=>{const{default:i}=await Promise.resolve().then(()=>Ni);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},$b=()=>Ub(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Us(()=>Promise.resolve().then(()=>Ni),void 0)).Response:Response}),cu=t=>{if(Array.isArray(t))return t.map(n=>cu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const s=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[s]=cu(i)}),e},Fb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Sr=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(v){try{p(i.next(v))}catch(g){u(g)}}function d(v){try{p(i.throw(v))}catch(g){u(g)}}function p(v){v.done?l(v.value):s(v.value).then(f,d)}p((i=i.apply(t,e||[])).next())})};const tc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zb=(t,e,n)=>Sr(void 0,void 0,void 0,function*(){const i=yield $b();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const l=t.status||500,u=(s==null?void 0:s.statusCode)||l+"";e(new Bb(tc(s),l,u))}).catch(s=>{e(new lu(tc(s),s))}):e(new lu(tc(t),t))}),Wb=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?s:(Fb(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,Object.assign(Object.assign({},s),n))};function Fs(t,e,n,i,s,l){return Sr(this,void 0,void 0,function*(){return new Promise((u,f)=>{t(n,Wb(e,i,s,l)).then(d=>{if(!d.ok)throw d;return i!=null&&i.noResolveJson?d:d.json()}).then(d=>u(d)).catch(d=>Zb(d,f,i))})})}function mo(t,e,n,i){return Sr(this,void 0,void 0,function*(){return Fs(t,"GET",e,n,i)})}function on(t,e,n,i,s){return Sr(this,void 0,void 0,function*(){return Fs(t,"POST",e,i,s,n)})}function uu(t,e,n,i,s){return Sr(this,void 0,void 0,function*(){return Fs(t,"PUT",e,i,s,n)})}function qb(t,e,n,i){return Sr(this,void 0,void 0,function*(){return Fs(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function wv(t,e,n,i,s){return Sr(this,void 0,void 0,function*(){return Fs(t,"DELETE",e,i,s,n)})}var at=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(v){try{p(i.next(v))}catch(g){u(g)}}function d(v){try{p(i.throw(v))}catch(g){u(g)}}function p(v){v.done?l(v.value):s(v.value).then(f,d)}p((i=i.apply(t,e||[])).next())})};const Hb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vb{constructor(e,n={},i,s){this.url=e,this.headers=n,this.bucketId=i,this.fetch=_v(s)}uploadOrUpdate(e,n,i,s){return at(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},pm),s);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const d=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),d&&l.append("metadata",this.encodeMetadata(d)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",u.cacheControl),d&&l.append("metadata",this.encodeMetadata(d))):(l=i,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,d&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(f=Object.assign(Object.assign({},f),s.headers));const p=this._removeEmptyFolders(n),v=this._getFinalPath(p),g=yield(e=="PUT"?uu:on)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:f},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:g.Id,fullPath:g.Key},error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}})}upload(e,n,i){return at(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,s){return at(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",n);try{let d;const p=Object.assign({upsert:pm.upsert},s),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",p.cacheControl)):(d=i,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const g=yield uu(this.fetch,f.toString(),d,{headers:v});return{data:{path:l,fullPath:g.Key},error:null}}catch(d){if(Be(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return at(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const l=yield on(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:s}),u=new URL(this.url+l.url),f=u.searchParams.get("token");if(!f)throw new wd("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:f},error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}})}update(e,n,i){return at(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return at(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}copy(e,n,i){return at(this,void 0,void 0,function*(){try{return{data:{path:(yield on(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,i){return at(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),l=yield on(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,i){return at(this,void 0,void 0,function*(){try{const s=yield on(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:s.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}download(e,n){return at(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=l?`?${l}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield mo(this.fetch,`${this.url}/${s}/${f}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(Be(f))return{data:null,error:f};throw f}})}info(e){return at(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield mo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:cu(i),error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}})}exists(e){return at(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield qb(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Be(i)&&i instanceof lu){const s=i.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),s=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&s.push(l);const f=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&s.push(d);let p=s.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${p}`)}}}remove(e){return at(this,void 0,void 0,function*(){try{return{data:yield wv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}list(e,n,i){return at(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Hb),n),{prefix:e||""});return{data:yield on(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Gb="2.10.4",Kb={"X-Client-Info":`storage-js/${Gb}`};var zr=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(v){try{p(i.next(v))}catch(g){u(g)}}function d(v){try{p(i.throw(v))}catch(g){u(g)}}function p(v){v.done?l(v.value):s(v.value).then(f,d)}p((i=i.apply(t,e||[])).next())})};class Jb{constructor(e,n={},i,s){const l=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},Kb),n),this.fetch=_v(i)}listBuckets(){return zr(this,void 0,void 0,function*(){try{return{data:yield mo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Be(e))return{data:null,error:e};throw e}})}getBucket(e){return zr(this,void 0,void 0,function*(){try{return{data:yield mo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return zr(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return zr(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}})}emptyBucket(e){return zr(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}deleteBucket(e){return zr(this,void 0,void 0,function*(){try{return{data:yield wv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}}class Qb extends Jb{constructor(e,n={},i,s){super(e,n,i,s)}from(e){return new Vb(this.url,this.headers,e,this.fetch)}}const Yb="2.53.0";let Xi="";typeof Deno<"u"?Xi="deno":typeof document<"u"?Xi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xi="react-native":Xi="node";const Xb={"X-Client-Info":`supabase-js-${Xi}/${Yb}`},e1={headers:Xb},t1={schema:"public"},n1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},r1={};var i1=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(v){try{p(i.next(v))}catch(g){u(g)}}function d(v){try{p(i.throw(v))}catch(g){u(g)}}function p(v){v.done?l(v.value):s(v.value).then(f,d)}p((i=i.apply(t,e||[])).next())})};const s1=t=>{let e;return t?e=t:typeof fetch>"u"?e=sv:e=fetch,(...n)=>e(...n)},a1=()=>typeof Headers>"u"?av:Headers,o1=(t,e,n)=>{const i=s1(n),s=a1();return(l,u)=>i1(void 0,void 0,void 0,function*(){var f;const d=(f=yield e())!==null&&f!==void 0?f:t;let p=new s(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${d}`),i(l,Object.assign(Object.assign({},u),{headers:p}))})};var l1=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(v){try{p(i.next(v))}catch(g){u(g)}}function d(v){try{p(i.throw(v))}catch(g){u(g)}}function p(v){v.done?l(v.value):s(v.value).then(f,d)}p((i=i.apply(t,e||[])).next())})};function c1(t){return t.endsWith("/")?t:t+"/"}function u1(t,e){var n,i;const{db:s,auth:l,realtime:u,global:f}=t,{db:d,auth:p,realtime:v,global:g}=e,_={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},g),f),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(i=f==null?void 0:f.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>l1(this,void 0,void 0,function*(){return""})};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}const bv="2.71.1",Fr=30*1e3,du=3,nc=du*Fr,d1="http://localhost:9999",h1="supabase.auth.token",f1={"X-Client-Info":`gotrue-js/${bv}`},hu="X-Supabase-Api-Version",jv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},m1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,p1=10*60*1e3;class bd extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class g1 extends bd{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function v1(t){return re(t)&&t.name==="AuthApiError"}class Nv extends bd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Yn extends bd{constructor(e,n,i,s){super(e,i,s),this.name=n,this.status=i}}class kn extends Yn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y1(t){return re(t)&&t.name==="AuthSessionMissingError"}class Pa extends Yn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ea extends Yn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ca extends Yn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function x1(t){return re(t)&&t.name==="AuthImplicitGrantRedirectError"}class gm extends Yn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fu extends Yn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function rc(t){return re(t)&&t.name==="AuthRetryableFetchError"}class vm extends Yn{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class mu extends Yn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const po="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ym=` 	
\r=`.split(""),_1=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ym.length;e+=1)t[ym[e].charCodeAt(0)]=-2;for(let e=0;e<po.length;e+=1)t[po[e].charCodeAt(0)]=e;return t})();function xm(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(po[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(po[i]),e.queuedBits-=6}}function kv(t,e,n){const i=_1[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function _m(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},l=u=>{j1(u,i,n)};for(let u=0;u<t.length;u+=1)kv(t.charCodeAt(u),s,l);return e.join("")}function w1(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function b1(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}w1(i,e)}}function j1(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function N1(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)kv(t.charCodeAt(s),n,i);return new Uint8Array(e)}function k1(t){const e=[];return b1(t,n=>e.push(n)),new Uint8Array(e)}function S1(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};return t.forEach(s=>xm(s,n,i)),xm(null,n,i),e.join("")}function P1(t){return Math.round(Date.now()/1e3)+t}function E1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const At=()=>typeof window<"u"&&typeof document<"u",ir={tested:!1,writable:!1},Sv=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ir.tested)return ir.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ir.tested=!0,ir.writable=!0}catch{ir.tested=!0,ir.writable=!1}return ir.writable};function C1(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,l)=>{e[l]=s})}catch{}return n.searchParams.forEach((i,s)=>{e[s]=i}),e}const Pv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Us(async()=>{const{default:i}=await Promise.resolve().then(()=>Ni);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},T1=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Zr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},sr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Nn=async(t,e)=>{await t.removeItem(e)};class Wo{constructor(){this.promise=new Wo.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Wo.promiseConstructor=Promise;function ic(t){const e=t.split(".");if(e.length!==3)throw new mu("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!m1.test(e[i]))throw new mu("JWT not in base64url format");return{header:JSON.parse(_m(e[0])),payload:JSON.parse(_m(e[1])),signature:N1(e[2]),raw:{header:e[0],payload:e[1]}}}async function L1(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function O1(t,e){return new Promise((i,s)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){i(u);return}}catch(u){if(!e(l,u)){s(u);return}}})()})}function I1(t){return("0"+t.toString(16)).substr(-2)}function A1(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let s="";for(let l=0;l<56;l++)s+=n.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(e),Array.from(e,I1).join("")}async function M1(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(i);return Array.from(s).map(l=>String.fromCharCode(l)).join("")}async function R1(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await M1(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dr(t,e,n=!1){const i=A1();let s=i;n&&(s+="/PASSWORD_RECOVERY"),await Zr(t,`${e}-code-verifier`,s);const l=await R1(i);return[l,i===l?"plain":"s256"]}const z1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function D1(t){const e=t.headers.get(hu);if(!e||!e.match(z1))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function B1(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function U1(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Br(t){if(!$1.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wm(t){return JSON.parse(JSON.stringify(t))}var F1=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const lr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Z1=[502,503,504];async function bm(t){var e;if(!T1(t))throw new fu(lr(t),0);if(Z1.includes(t.status))throw new fu(lr(t),t.status);let n;try{n=await t.json()}catch(l){throw new Nv(lr(l),l)}let i;const s=D1(t);if(s&&s.getTime()>=jv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new vm(lr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new kn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new vm(lr(n),t.status,n.weak_password.reasons);throw new g1(lr(n),t.status||500,i)}const W1=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),n))};async function ae(t,e,n,i){var s;const l=Object.assign({},i==null?void 0:i.headers);l[hu]||(l[hu]=jv["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(s=i==null?void 0:i.query)!==null&&s!==void 0?s:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",d=await q1(t,e,n+f,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(d):{data:Object.assign({},d),error:null}}async function q1(t,e,n,i,s,l){const u=W1(e,i,s,l);let f;try{f=await t(n,Object.assign({},u))}catch(d){throw console.error(d),new fu(lr(d),0)}if(f.ok||await bm(f),i!=null&&i.noResolveJson)return f;try{return await f.json()}catch(d){await bm(d)}}function rn(t){var e;let n=null;K1(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=P1(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function jm(t){const e=rn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Tn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function H1(t){return{data:t,error:null}}function V1(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:l}=t,u=F1(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:l},d=Object.assign({},u);return{data:{properties:f,user:d},error:null}}function G1(t){return t}function K1(t){return t.access_token&&t.refresh_token&&t.expires_in}const ac=["global","local","others"];var J1=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class Q1{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=Pv(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=ac[0]){if(ac.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ac.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(re(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Tn})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=J1(e,["options"]),s=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(s.new_email=i==null?void 0:i.newEmail,delete s.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:V1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Tn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,s,l,u,f,d;try{const p={nextPage:null,lastPage:0,total:0},v=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:""},xform:G1});if(v.error)throw v.error;const g=await v.json(),_=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(d=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(S=>{const w=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);p[`${C}Page`]=w}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(re(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Br(e);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Tn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Br(e);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Tn})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){Br(e);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Tn})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Br(e.userId);try{const{data:n,error:i}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:i}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Br(e.userId),Br(e.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}}function Nm(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Y1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ur={debug:!!(globalThis&&Sv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ev extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class X1 extends Ev{}async function ej(t,e,n){Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new X1(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ur.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Y1();const tj={url:d1,storageKey:h1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:f1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function km(t,e,n){return await n()}const $r={};class Os{constructor(e){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Os.nextInstanceID,Os.nextInstanceID+=1,this.instanceID>0&&At()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},tj),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Q1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Pv(s.fetch),this.lock=s.lock||km,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:At()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ej:this.lock=km,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Sv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Nm(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Nm(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=$r[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){$r[this.storageKey]=Object.assign(Object.assign({},$r[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=$r[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){$r[this.storageKey]=Object.assign(Object.assign({},$r[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=C1(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),At()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),x1(l)){const d=(e=l.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:f}=s;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return re(n)?{error:n}:{error:new Nv("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,s;try{const l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:rn}),{data:u,error:f}=l;if(f||!u)return{data:{user:null,session:null},error:f};const d=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(l){if(re(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,i,s;try{let l;if("email"in e){const{email:v,password:g,options:_}=e;let y=null,S=null;this.flowType==="pkce"&&([y,S]=await Dr(this.storage,this.storageKey)),l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:v,password:g,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:y,code_challenge_method:S},xform:rn})}else if("phone"in e){const{phone:v,password:g,options:_}=e;l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(i=_==null?void 0:_.data)!==null&&i!==void 0?i:{},channel:(s=_==null?void 0:_.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:rn})}else throw new Ea("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return{data:{user:null,session:null},error:f};const d=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(l){if(re(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:f}=e;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:jm})}else if("phone"in e){const{phone:l,password:u,options:f}=e;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:jm})}else throw new Ea("You must provide either an email or phone number and a password");const{data:i,error:s}=n;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Pa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,s,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,i,s,l,u,f,d,p,v,g,_,y;let S,w;if("message"in e)S=e.message,w=e.signature;else{const{chain:C,wallet:N,statement:j,options:b}=e;let k;if(At())if(typeof N=="object")k=N;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))k=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=N}const I=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const T=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),j?{statement:j}:null));let A;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")A=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)A=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)S=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),w=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${I.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(s=(i=b==null?void 0:b.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((f=b==null?void 0:b.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((p=b==null?void 0:b.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((g=(v=b==null?void 0:b.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...b.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const T=await k.signMessage(new TextEncoder().encode(S),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=T}}try{const{data:C,error:N}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:S1(w)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:rn});if(N)throw N;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Pa}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:N})}catch(C){if(re(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const n=await sr(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(n??"").split("/");try{const{data:l,error:u}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:rn});if(await Nn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Pa}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:s??null}),error:u})}catch(l){if(re(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:i,token:s,access_token:l,nonce:u}=e,f=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:rn}),{data:d,error:p}=f;return p?{data:{user:null,session:null},error:p}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Pa}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:p})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,s,l,u;try{if("email"in e){const{email:f,options:d}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Dr(this.storage,this.storageKey));const{error:g}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:f,options:d}=e,{data:p,error:v}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(l=d==null?void 0:d.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(u=d==null?void 0:d.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v}}throw new Ea("You must provide either an email or phone number.")}catch(f){if(re(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var n,i;try{let s,l;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:f}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:s,xform:rn});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const d=u.session,p=u.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,i,s;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await Dr(this.storage,this.storageKey)),await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:H1})}catch(l){if(re(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new kn;const{error:s}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:s,options:l}=e,{error:u}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:i,type:s,options:l}=e,{data:u,error:f}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new Ea("You must provide either an email or phone number and a type")}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await sr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<nc:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await sr(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=sc()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,p,v)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,p,v))})}return{data:{session:e},error:null}}const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Tn}):await this._useSession(async n=>{var i,s,l;const{data:u,error:f}=n;if(f)throw f;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kn}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0,xform:Tn})})}catch(n){if(re(n))return y1(n)&&(await this._removeSession(),await Nn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:s,error:l}=i;if(l)throw l;if(!s.session)throw new kn;const u=s.session;let f=null,d=null;this.flowType==="pkce"&&e.email!=null&&([f,d]=await Dr(this.storage,this.storageKey));const{data:p,error:v}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:d}),jwt:u.access_token,xform:Tn});if(v)throw v;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kn;const n=Date.now()/1e3;let i=n,s=!0,l=null;const{payload:u}=ic(e.access_token);if(u.exp&&(i=u.exp,s=i<=n),s){const{session:f,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:d}=await this._getUser(e.access_token);if(d)throw d;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:u,error:f}=n;if(f)throw f;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new kn;const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!At())throw new Ca("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ca(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new gm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ca("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gm("No code detected.");const{data:j,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:l,refresh_token:u,expires_in:f,expires_at:d,token_type:p}=e;if(!l||!f||!u||!p)throw new Ca("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(f);let _=v+g;d&&(_=parseInt(d));const y=_-v;y*1e3<=Fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${g}s`);const S=_-g;v-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,_,v):v-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,_,v);const{data:w,error:C}=await this._getUser(l);if(C)throw C;const N={provider_token:i,provider_refresh_token:s,access_token:l,expires_in:g,expires_at:_,refresh_token:u,token_type:p,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(i){if(re(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await sr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:s,error:l}=n;if(l)return{error:l};const u=(i=s.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:f}=await this.admin.signOut(u,e);if(f&&!(v1(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await Nn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=E1(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,s;try{const{data:{session:l},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await Dr(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(re(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:s}=await this._useSession(async l=>{var u,f,d,p,v;const{data:g,error:_}=l;if(_)throw _;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",y,{headers:this.headers,jwt:(v=(p=g.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(s)throw s;return At()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(re(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,s;const{data:l,error:u}=n;if(u)throw u;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await O1(async s=>(s>0&&await L1(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rn})),(s,l)=>{const u=200*Math.pow(2,s);return l&&rc(l)&&Date.now()+u-i<Fr})}catch(i){if(this._debug(n,"error",i),re(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),At()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await sr(this.storage,this.storageKey);if(s&&this.userStorage){let u=await sr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:s.user},await Zr(this.userStorage,this.storageKey+"-user",u)),s.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:sc()}else if(s&&!s.user&&!s.user){const u=await sr(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(s.user=u.user,await Nn(this.storage,this.storageKey+"-user"),await Zr(this.storage,this.storageKey,s)):s.user=sc()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const l=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<nc;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${nc}s`),l){if(this.autoRefreshToken&&s.refresh_token){const{error:u}=await this._callRefreshToken(s.refresh_token);u&&(console.error(u),rc(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(s.access_token);!f&&(u!=null&&u.user)?(s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new kn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Wo;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new kn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={session:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(s,"error",l),re(l)){const u={session:null,error:l};return rc(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,i=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(d){l.push(d)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Zr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const l=wm(s);await Zr(this.storage,this.storageKey,l)}else{const s=wm(n);await Zr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Nn(this.storage,this.storageKey),await Nn(this.storage,this.storageKey+"-code-verifier"),await Nn(this.storage,this.storageKey+"-user"),this.userStorage&&await Nn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&At()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-e)/Fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Fr}ms, refresh threshold is ${du} ticks`),s<=du&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ev)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const s=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await Dr(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});s.push(f.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);s.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:s,error:l}=n;return l?{data:null,error:l}:await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,s;const{data:l,error:u}=n;if(u)return{data:null,error:u};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:p}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:l}=n;if(l)return{data:null,error:l};const{data:u,error:f}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(n){if(re(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:l}=n;return l?{data:null,error:l}:await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(e==null?void 0:e.factors)||[],s=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:s,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:s},error:l}=e;if(l)return{data:null,error:l};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=ic(s.access_token);let f=null;u.aal&&(f=u.aal);let d=f;((i=(n=s.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const v=u.amr||[];return{data:{currentLevel:f,nextLevel:d,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(f=>f.kid===e);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+p1>s)return i;const{data:l,error:u}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=s,i=l.keys.find(f=>f.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:y,error:S}=await this.getSession();if(S||!y.session)return{data:null,error:S};i=y.session.access_token}const{header:s,payload:l,signature:u,raw:{header:f,payload:d}}=ic(i);n!=null&&n.allowExpired||B1(l.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:y}=await this.getUser(i);if(y)throw y;return{data:{claims:l,header:s,signature:u},error:null}}const v=U1(s.alg),g=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,u,k1(`${f}.${d}`)))throw new mu("Invalid JWT signature");return{data:{claims:l,header:s,signature:u},error:null}}catch(i){if(re(i))return{data:null,error:i};throw i}}}Os.nextInstanceID=0;const nj=Os;class rj extends nj{constructor(e){super(e)}}var ij=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(v){try{p(i.next(v))}catch(g){u(g)}}function d(v){try{p(i.throw(v))}catch(g){u(g)}}function p(v){v.done?l(v.value):s(v.value).then(f,d)}p((i=i.apply(t,e||[])).next())})};class sj{constructor(e,n,i){var s,l,u;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const f=c1(e),d=new URL(f);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const p=`sb-${d.hostname.split(".")[0]}-auth-token`,v={db:t1,realtime:r1,auth:Object.assign(Object.assign({},n1),{storageKey:p}),global:e1},g=u1(i??{},v);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(l=g.global.headers)!==null&&l!==void 0?l:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(_,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=o1(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new jb(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Qb(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Xw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return ij(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,storageKey:l,flowType:u,lock:f,debug:d},p,v){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rj({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),p),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,flowType:u,lock:f,debug:d,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Db(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const aj=(t,e,n)=>new sj(t,e,n);function oj(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}oj()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lj="https://vxmpifukfohjafrbiqvw.supabase.co",cj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ4bXBpZnVrZm9oamFmcmJpcXZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4MDUwNDYsImV4cCI6MjA2OTM4MTA0Nn0.JPwFO4UL-LileKVD6JDVZc2RrfCFsK5KgKlS5CFkUPc",G=aj(lj,cj,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",storage:{getItem:t=>{try{return localStorage.getItem(t)}catch(e){return console.error("Error getting item from localStorage:",e),null}},setItem:(t,e)=>{try{localStorage.setItem(t,e)}catch(n){console.error("Error setting item in localStorage:",n)}},removeItem:t=>{try{localStorage.removeItem(t)}catch(e){console.error("Error removing item from localStorage:",e)}}}},global:{headers:{Accept:"application/json","Content-Type":"application/json"}},db:{schema:"public"}});G.auth.onAuthStateChange((t,e)=>{t==="TOKEN_REFRESHED"&&!e&&(console.warn("Token refresh failed, clearing storage"),localStorage.clear(),sessionStorage.clear())});const hs=()=>{try{Object.keys(localStorage).filter(n=>n.startsWith("supabase.auth.token")||n.startsWith("sb-")||n.includes("auth")).forEach(n=>{localStorage.removeItem(n)}),Object.keys(sessionStorage).filter(n=>n.startsWith("supabase.auth.token")||n.startsWith("sb-")||n.includes("auth")).forEach(n=>{sessionStorage.removeItem(n)}),console.log("Auth storage cleared successfully")}catch(t){console.error("Error clearing auth storage:",t)}},uj=t=>{var i,s;if(!t)return!1;const e=((i=t.message)==null?void 0:i.toLowerCase())||"",n=((s=t.code)==null?void 0:s.toString())||"";return e.includes("refresh")||e.includes("token")||e.includes("invalid")||e.includes("expired")||n==="400"||n==="401"||n==="403"},Sm=async(t,e)=>{if(uj(t)){console.warn("Auth token error detected, cleaning up:",t),hs();try{await e.auth.signOut()}catch(n){console.error("Error during sign out:",n)}}},Cv=E.createContext(void 0);function dj({children:t}){const[e,n]=E.useState(null),[i,s]=E.useState(null),[l,u]=E.useState(!0),[f,d]=E.useState(!1),[p,v]=E.useState(!1),[g,_]=E.useState(null),[y,S]=E.useState(null);E.useEffect(()=>{(async()=>{try{const{data:{session:z},error:R}=await G.auth.getSession();R?(console.error("Error getting session:",R),await Sm(R,G),s(null),n(null)):(s(z),n((z==null?void 0:z.user)??null),z!=null&&z.user&&w(z.user.id))}catch(z){console.error("Error initializing auth:",z),await Sm(z,G),s(null),n(null)}finally{u(!1)}})();const{data:{subscription:A}}=G.auth.onAuthStateChange(async(z,R)=>{var F;console.log("Auth state changed:",z,(F=R==null?void 0:R.user)==null?void 0:F.id),z==="TOKEN_REFRESHED"&&!R&&hs(),s(R),n((R==null?void 0:R.user)??null),R!=null&&R.user?w(R.user.id):(_(null),S(null),d(!1),v(!1)),u(!1)});return()=>A.unsubscribe()},[]);const w=async T=>{try{const{data:A,error:z}=await G.from("user_profiles").select("*").eq("id",T).maybeSingle();if(z){console.error("Error loading user profile:",z),_(null),d(!1),v(!1);return}if(A){if(_(A),d(A.role==="admin"),v(A.role==="agent"),A.role==="agent")try{const{data:R,error:F}=await G.from("agents").select("*").eq("id",T).maybeSingle();!F&&R&&S(R)}catch(R){console.error("Error loading agent profile:",R)}}else console.log("No profile found, creating one..."),await C(T)}catch(A){console.error("Error loading user profile:",A),_(null),d(!1),v(!1)}},C=async T=>{var A,z,R,F;try{const{data:B}=await G.auth.getUser();if(B!=null&&B.user){const{error:W}=await G.from("user_profiles").insert({id:T,email:B.user.email,full_name:((A=B.user.user_metadata)==null?void 0:A.full_name)||((z=B.user.email)==null?void 0:z.split("@")[0])||"Usuario",first_name:((R=B.user.user_metadata)==null?void 0:R.first_name)||"Usuario",last_name:((F=B.user.user_metadata)==null?void 0:F.last_name)||"",role:"buyer"});W||(console.log("Profile created successfully"),await w(T))}}catch(B){console.error("Error creating missing profile:",B)}},I={user:e,session:i,loading:l,signIn:async(T,A)=>{const{error:z}=await G.auth.signInWithPassword({email:T,password:A});return{error:z}},signUp:async(T,A,z,R,F)=>{const{data:B,error:W}=await G.auth.signUp({email:T,password:A,options:{data:{full_name:z,first_name:R,last_name:F}}});return!W&&B.user&&await G.from("user_profiles").insert({id:B.user.id,email:B.user.email,full_name:z,first_name:R,last_name:F,role:"buyer"}),{error:W}},signOut:async()=>{await G.auth.signOut(),d(!1),v(!1),_(null),S(null)},isAdmin:f,isAgent:p,userProfile:g,agentProfile:y,refreshProfile:async()=>{e!=null&&e.id&&await w(e.id)}};return o.jsx(Cv.Provider,{value:I,children:t})}function xn(){const t=E.useContext(Cv);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),X=(t,e)=>{const n=E.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:f="",children:d,...p},v)=>E.createElement("svg",{ref:v,...hj,width:s,height:s,stroke:i,strokeWidth:u?Number(l)*24/Number(s):l,className:["lucide",`lucide-${fj(t)}`,f].join(" "),...p},[...e.map(([g,_])=>E.createElement(g,_)),...Array.isArray(d)?d:[d]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=X("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=X("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=X("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=X("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=X("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=X("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=X("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=X("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=X("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=X("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=X("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=X("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=X("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=X("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=X("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=X("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=X("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=X("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=X("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=X("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=X("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=X("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Lj(){const{user:t,signOut:e,isAdmin:n,isAgent:i}=xn(),s=async()=>{await e()};return o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsxs(ce,{to:"/",className:"flex items-center space-x-2",children:[o.jsx(yr,{className:"h-8 w-8 text-primary-600"}),o.jsx("span",{className:"font-bold text-xl text-gray-900",children:"PropFinder"})]}),o.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[o.jsx(ce,{to:"/",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Inicio"}),o.jsx(ce,{to:"/properties",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Propiedades"}),o.jsx(ce,{to:"/properties?transaction_type=sale",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Comprar"}),o.jsx(ce,{to:"/properties?transaction_type=rent",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Rentar"})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{className:"p-2 text-gray-600 hover:text-primary-600 transition-colors",children:o.jsx(kd,{className:"h-5 w-5"})}),t?o.jsxs("div",{className:"flex items-center space-x-3",children:[n&&o.jsxs(ce,{to:"/admin",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Sd,{className:"h-4 w-4 mr-1"}),"Admin"]}),i&&o.jsxs(ce,{to:"/agent-dashboard",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[o.jsx(vr,{className:"h-4 w-4 mr-1"}),"Agente"]}),!i&&!n&&o.jsxs(ce,{to:"/become-agent",className:"inline-flex items-center px-3 py-2 border border-green-300 text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[o.jsx(vr,{className:"h-4 w-4 mr-1"}),"Ser Agente"]}),o.jsx("span",{className:"text-sm text-gray-700",children:t.email}),o.jsx("button",{onClick:s,className:"p-2 text-gray-600 hover:text-red-600 transition-colors",title:"Cerrar sesión",children:o.jsx(Lv,{className:"h-5 w-5"})})]}):o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ce,{to:"/register",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"Registrarse"}),o.jsxs(ce,{to:"/login",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(yi,{className:"h-4 w-4 mr-1"}),"Iniciar Sesión"]})]}),o.jsx("button",{className:"btn-primary hidden md:block",children:"Publicar Propiedad"}),o.jsx("button",{className:"md:hidden p-2 text-gray-600 hover:text-primary-600 transition-colors",children:o.jsx(jj,{className:"h-5 w-5"})})]})]})})})}function Oj(){return o.jsx("footer",{className:"bg-gray-900 text-white",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"col-span-1 md:col-span-2",children:[o.jsxs(ce,{to:"/",className:"flex items-center space-x-2 mb-4",children:[o.jsx(yr,{className:"h-8 w-8 text-primary-400"}),o.jsx("span",{className:"font-bold text-xl",children:"PropFinder"})]}),o.jsx("p",{className:"text-gray-300 mb-4",children:"La plataforma líder en bienes raíces para encontrar, comprar y vender propiedades en toda la República Mexicana. Conectamos compradores, vendedores y arrendadores de manera fácil y segura."}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:o.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:o.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.566-1.35 2.14-2.21z"})})}),o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:o.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Enlaces Rápidos"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(ce,{to:"/properties",className:"text-gray-300 hover:text-white transition-colors",children:"Todas las Propiedades"})}),o.jsx("li",{children:o.jsx(ce,{to:"/properties?transaction_type=sale",className:"text-gray-300 hover:text-white transition-colors",children:"Comprar"})}),o.jsx("li",{children:o.jsx(ce,{to:"/properties?transaction_type=rent",className:"text-gray-300 hover:text-white transition-colors",children:"Rentar"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Vender"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Sobre Nosotros"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Contacto"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(qo,{className:"h-4 w-4 text-primary-400"}),o.jsx("span",{className:"text-gray-300",children:"contacto@propfinder.com"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Ho,{className:"h-4 w-4 text-primary-400"}),o.jsx("span",{className:"text-gray-300",children:"+52 55 1234 5678"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Yt,{className:"h-4 w-4 text-primary-400"}),o.jsx("span",{className:"text-gray-300",children:"Ciudad de México, México"})]})]})]})]}),o.jsx("hr",{className:"border-gray-700 my-8"}),o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[o.jsx("p",{className:"text-gray-400 text-sm",children:"© 2024 PropFinder. Todos los derechos reservados."}),o.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Términos de Servicio"}),o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Política de Privacidad"}),o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Cookies"})]})]})]})})}function Ij(){const[t,e]=E.useState([]),[n,i]=E.useState([]),[s,l]=E.useState([]),[u,f]=E.useState(!0),[d,p]=E.useState({location:"",transaction_type:"",property_type:"",min_price:"",max_price:""});E.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:y}=await G.from("properties").select("*").eq("status","published").eq("is_featured",!0).order("created_at",{ascending:!1}).limit(6),{data:S}=await G.from("properties").select("*").eq("status","published").eq("is_urgent",!0).order("created_at",{ascending:!1}).limit(4),{data:w}=await G.from("properties").select("*").eq("status","published").order("created_at",{ascending:!1}).limit(8);e(y||[]),i(S||[]),l(w||[])}catch(y){console.error("Error loading home data:",y)}finally{f(!1)}},g=()=>{const y=new URLSearchParams;Object.entries(d).forEach(([S,w])=>{w&&y.append(S,w)}),window.location.href=`/properties?${y.toString()}`},_=({property:y})=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[o.jsxs("div",{className:"relative h-48",children:[y.images.length>0?o.jsx("img",{src:y.images[0],alt:y.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:o.jsx(yr,{className:"h-12 w-12 text-gray-400"})}),o.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-1",children:[y.is_featured&&o.jsxs("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded text-xs font-medium",children:[o.jsx(Vn,{className:"inline h-3 w-3 mr-1"}),"Destacada"]}),y.is_urgent&&o.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-xs font-medium",children:"⚡ Urgente"})]}),o.jsx("div",{className:"absolute bottom-3 left-3",children:o.jsxs("span",{className:"bg-black bg-opacity-75 text-white px-3 py-1 rounded-full text-sm font-bold",children:[y.currency," ",y.price.toLocaleString()]})}),o.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 text-white text-xs",children:[o.jsxs("div",{className:"flex items-center bg-black bg-opacity-50 px-2 py-1 rounded",children:[o.jsx(vi,{className:"h-3 w-3 mr-1"}),y.views_count]}),o.jsxs("div",{className:"flex items-center bg-black bg-opacity-50 px-2 py-1 rounded",children:[o.jsx(vo,{className:"h-3 w-3 mr-1"}),y.favorites_count]})]})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:y.title}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[o.jsx(Yt,{className:"h-4 w-4 mr-1"}),o.jsxs("span",{className:"truncate",children:[y.neighborhood,", ",y.city]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3 space-x-4",children:[y.bedrooms&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(Nd,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:y.bedrooms})]}),y.bathrooms&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(jd,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:y.bathrooms})]}),y.area_total&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(Pd,{className:"h-4 w-4 mr-1"}),o.jsxs("span",{children:[y.area_total,"m²"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-xs text-gray-500 capitalize",children:[y.property_type," • ",y.transaction_type]}),o.jsx(ce,{to:`/properties/${y.id}`,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Ver detalles"})]})]})]});return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsxs("section",{className:"relative bg-gradient-to-r from-blue-700 to-blue-900 text-white",children:[o.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),o.jsx("div",{className:"relative bg-cover bg-center py-24",style:{backgroundImage:"url('https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80')"},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Encuentra tu hogar ideal en Ecuador"}),o.jsx("p",{className:"text-xl md:text-2xl mb-8 text-blue-100",children:"Miles de propiedades verificadas por agentes profesionales"})]}),o.jsx("div",{className:"bg-white rounded-xl p-6 shadow-2xl max-w-5xl mx-auto",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Yt,{className:"inline h-4 w-4 mr-1"}),"Ubicación"]}),o.jsx("input",{type:"text",placeholder:"Ciudad, barrio o dirección",value:d.location,onChange:y=>p(S=>({...S,location:y.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operación"}),o.jsxs("select",{value:d.transaction_type,onChange:y=>p(S=>({...S,transaction_type:y.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",children:[o.jsx("option",{value:"",children:"Cualquiera"}),o.jsx("option",{value:"venta",children:"Venta"}),o.jsx("option",{value:"alquiler",children:"Alquiler"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),o.jsxs("select",{value:d.property_type,onChange:y=>p(S=>({...S,property_type:y.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",children:[o.jsx("option",{value:"",children:"Cualquiera"}),o.jsx("option",{value:"casa",children:"Casa"}),o.jsx("option",{value:"departamento",children:"Departamento"}),o.jsx("option",{value:"oficina",children:"Oficina"}),o.jsx("option",{value:"local_comercial",children:"Local Comercial"}),o.jsx("option",{value:"terreno",children:"Terreno"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(yj,{className:"inline h-4 w-4 mr-1"}),"Búsqueda"]}),o.jsxs("button",{onClick:g,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium",children:[o.jsx(kd,{className:"inline h-4 w-4 mr-2"}),"Buscar"]})]})]})})]})})]}),u?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 space-y-16",children:[n.length>0&&o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:"⚡ Oportunidades Urgentes"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Propiedades que requieren decisión rápida"})]}),o.jsxs(ce,{to:"/properties?is_urgent=true",className:"flex items-center text-blue-600 hover:text-blue-700 font-medium",children:["Ver todas ",o.jsx(oc,{className:"h-4 w-4 ml-1"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(y=>o.jsx(_,{property:y},y.id))})]}),t.length>0&&o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[o.jsx(Vn,{className:"h-8 w-8 text-yellow-500 mr-2"}),"Propiedades Destacadas"]}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Selección especial de nuestros mejores inmuebles"})]}),o.jsxs(ce,{to:"/properties?is_featured=true",className:"flex items-center text-blue-600 hover:text-blue-700 font-medium",children:["Ver todas ",o.jsx(oc,{className:"h-4 w-4 ml-1"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(y=>o.jsx(_,{property:y},y.id))})]}),o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Últimas Propiedades"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Recién publicadas por nuestros agentes"})]}),o.jsxs(ce,{to:"/properties",className:"flex items-center text-blue-600 hover:text-blue-700 font-medium",children:["Ver todas ",o.jsx(oc,{className:"h-4 w-4 ml-1"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map(y=>o.jsx(_,{property:y},y.id))})]}),o.jsxs("section",{className:"bg-gradient-to-r from-blue-600 to-blue-800 rounded-2xl p-8 md:p-12 text-white text-center",children:[o.jsx(vr,{className:"h-16 w-16 mx-auto mb-6 text-blue-200"}),o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"¿Eres agente inmobiliario?"}),o.jsx("p",{className:"text-xl text-blue-100 mb-8 max-w-2xl mx-auto",children:"Únete a nuestra plataforma y llega a miles de compradores potenciales. Gestiona tus propiedades de forma profesional."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsx(ce,{to:"/become-agent",className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-blue-50 transition-colors",children:"Ser Agente"}),o.jsx(ce,{to:"/properties",className:"border border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors",children:"Explorar Propiedades"})]})]}),o.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[o.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:[s.length+t.length,"+"]}),o.jsx("div",{className:"text-gray-600",children:"Propiedades Activas"})]}),o.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md",children:[o.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:"50+"}),o.jsx("div",{className:"text-gray-600",children:"Agentes Verificados"})]}),o.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md",children:[o.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:"200+"}),o.jsx("div",{className:"text-gray-600",children:"Clientes Satisfechos"})]})]})]})]})}const Aj=()=>{const[t,e]=E.useState(!1),[n,i]=E.useState(null),s=E.useCallback(async d=>{var p,v,g,_,y;e(!0),i(null);try{const S=encodeURIComponent(d),w=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${S}&limit=1&addressdetails=1`,{headers:{"User-Agent":"PropFinder/1.0 (Real Estate App)"}});if(!w.ok)throw new Error("Error en el servicio de geocodificación");const C=await w.json();if(C&&C.length>0){const N=C[0];return{latitude:parseFloat(N.lat),longitude:parseFloat(N.lon),address:N.display_name,city:((p=N.address)==null?void 0:p.city)||((v=N.address)==null?void 0:v.town)||((g=N.address)==null?void 0:g.village),state:(_=N.address)==null?void 0:_.state,country:(y=N.address)==null?void 0:y.country}}throw new Error("No se encontraron resultados para la dirección")}catch(S){const w=S instanceof Error?S.message:"Error desconocido";return i(w),null}finally{e(!1)}},[]),l=E.useCallback(async(d,p)=>{var v,g,_,y,S;e(!0),i(null);try{const w=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${d}&lon=${p}&addressdetails=1`,{headers:{"User-Agent":"PropFinder/1.0 (Real Estate App)"}});if(!w.ok)throw new Error("Error en el servicio de geocodificación inversa");const C=await w.json();if(C)return{address:C.display_name,city:((v=C.address)==null?void 0:v.city)||((g=C.address)==null?void 0:g.town)||((_=C.address)==null?void 0:_.village),state:(y=C.address)==null?void 0:y.state,country:(S=C.address)==null?void 0:S.country};throw new Error("No se pudo obtener la dirección")}catch(w){const C=w instanceof Error?w.message:"Error desconocido";return i(C),null}finally{e(!1)}},[]),u=E.useCallback(async()=>{e(!0),i(null);try{if(!navigator.geolocation)throw new Error("La geolocalización no está soportada en este navegador");const d=await new Promise((_,y)=>{navigator.geolocation.getCurrentPosition(_,y,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),{latitude:p,longitude:v}=d.coords,g=await l(p,v);return{latitude:p,longitude:v,address:(g==null?void 0:g.address)||`${p}, ${v}`,city:g==null?void 0:g.city,state:g==null?void 0:g.state,country:g==null?void 0:g.country}}catch(d){let p="Error obteniendo ubicación";if(d instanceof GeolocationPositionError)switch(d.code){case d.PERMISSION_DENIED:p="Permisos de ubicación denegados";break;case d.POSITION_UNAVAILABLE:p="Información de ubicación no disponible";break;case d.TIMEOUT:p="Tiempo de espera agotado obteniendo ubicación";break}else d instanceof Error&&(p=d.message);return i(p),null}finally{e(!1)}},[l]),f=E.useCallback((d,p,v,g)=>{const y=(v-d)*Math.PI/180,S=(g-p)*Math.PI/180,w=Math.sin(y/2)*Math.sin(y/2)+Math.cos(d*Math.PI/180)*Math.cos(v*Math.PI/180)*Math.sin(S/2)*Math.sin(S/2);return 6371*(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)))},[]);return{loading:t,error:n,geocodeAddress:s,reverseGeocode:l,getCurrentLocation:u,calculateDistance:f}},Mj=({onLocationSearch:t,onClearLocation:e,isLoading:n=!1,className:i=""})=>{const[s,l]=E.useState(""),[u,f]=E.useState(5),[d,p]=E.useState(null),{loading:v,error:g,geocodeAddress:_,getCurrentLocation:y}=Aj(),S=[{value:1,label:"1 km"},{value:2,label:"2 km"},{value:5,label:"5 km"},{value:10,label:"10 km"},{value:25,label:"25 km"},{value:50,label:"50 km"}],w=async()=>{if(!s.trim())return;const k=await _(s);k&&(p({lat:k.latitude,lng:k.longitude,address:k.address}),t(k.latitude,k.longitude,u,k.address))},C=async()=>{const k=await y();k&&(p({lat:k.latitude,lng:k.longitude,address:k.address}),l(k.city||k.address.split(",")[0]||""),t(k.latitude,k.longitude,u,k.address))},N=k=>{f(k),d&&t(d.lat,d.lng,k,d.address)},j=()=>{l(""),p(null),e()},b=v||n;return o.jsx("div",{className:`bg-white rounded-lg border shadow-sm p-4 ${i}`,children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[o.jsx(Yt,{className:"h-5 w-5 mr-2"}),"Búsqueda por Ubicación"]}),d&&o.jsx("button",{onClick:j,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Limpiar"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",placeholder:"Buscar por dirección, ciudad o código postal...",value:s,onChange:k=>l(k.target.value),onKeyPress:k=>k.key==="Enter"&&w(),className:"input-field w-full",disabled:b})}),o.jsx("button",{onClick:w,disabled:!s.trim()||b,className:"btn-primary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:b?o.jsx(Pm,{className:"h-5 w-5 animate-spin"}):o.jsx(kd,{className:"h-5 w-5"})}),o.jsx("button",{onClick:C,disabled:b,className:"btn-secondary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Usar mi ubicación actual",children:b?o.jsx(Pm,{className:"h-5 w-5 animate-spin"}):o.jsx(Ov,{className:"h-5 w-5"})})]}),g&&o.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded border border-red-200",children:g}),d&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx(Yt,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Ubicación seleccionada:"}),o.jsx("p",{className:"text-sm text-blue-700 truncate",children:d.address}),o.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[d.lat.toFixed(4),", ",d.lng.toFixed(4)]})]})]})}),d&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Radio de búsqueda:"}),o.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2",children:S.map(k=>o.jsx("button",{onClick:()=>N(k.value),className:`px-3 py-2 text-sm rounded border transition-colors ${u===k.value?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:k.label},k.value))}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Se mostrarán propiedades dentro de ",u," km de la ubicación seleccionada"]})]})]})})},Rj=()=>{const[t,e]=E.useState([]),[n,i]=E.useState(!1),[s,l]=E.useState(null),[u,f]=E.useState(0),d=E.useCallback((g,_,y,S)=>{const C=(y-g)*Math.PI/180,N=(S-_)*Math.PI/180,j=Math.sin(C/2)*Math.sin(C/2)+Math.cos(g*Math.PI/180)*Math.cos(y*Math.PI/180)*Math.sin(N/2)*Math.sin(N/2);return 6371*(2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j)))},[]),p=E.useCallback(async g=>{i(!0),l(null);try{let _=G.from("properties").select("*").eq("status","published").order("created_at",{ascending:!1});g.property_type&&(_=_.eq("property_type",g.property_type)),g.transaction_type&&(_=_.eq("transaction_type",g.transaction_type)),g.city&&(_=_.ilike("city",`%${g.city}%`)),g.min_price&&(_=_.gte("price",g.min_price)),g.max_price&&(_=_.lte("price",g.max_price)),g.bedrooms&&(_=_.eq("bedrooms",g.bedrooms));const{data:y,error:S}=await _;if(S)throw S;let w=y||[];g.latitude&&g.longitude&&g.radius&&(w=w.map(C=>{if(!C.latitude||!C.longitude)return null;const N=d(g.latitude,g.longitude,C.latitude,C.longitude);return N<=g.radius?{...C,distance:N}:null}).filter(C=>C!==null).sort((C,N)=>(C.distance||0)-(N.distance||0))),e(w),f(w.length)}catch(_){const y=_ instanceof Error?_.message:"Error en la búsqueda";l(y),console.error("Error searching properties:",_)}finally{i(!1)}},[d]),v=E.useCallback(()=>{e([]),f(0),l(null)},[]);return{properties:t,loading:n,error:s,totalFound:u,searchProperties:p,clearSearch:v}};function zj(){const[t,e]=E.useState([]),[n,i]=E.useState(!0),[s,l]=E.useState("grid"),[u,f]=E.useState("traditional"),[d,p]=E.useState({property_type:"",transaction_type:"",city:"",min_price:"",max_price:"",bedrooms:""}),{properties:v,loading:g,error:_,totalFound:y,searchProperties:S,clearSearch:w}=Rj(),C=u==="geospatial"?v:t,N=u==="geospatial"?g:n,j=u==="geospatial"?y:t.length;E.useEffect(()=>{b()},[d]);const b=async()=>{i(!0);try{let R=G.from("properties").select("*").eq("status","published").order("created_at",{ascending:!1});d.property_type&&(R=R.eq("property_type",d.property_type)),d.transaction_type&&(R=R.eq("transaction_type",d.transaction_type)),d.city&&(R=R.ilike("city",`%${d.city}%`)),d.min_price&&(R=R.gte("price",parseFloat(d.min_price))),d.max_price&&(R=R.lte("price",parseFloat(d.max_price))),d.bedrooms&&(R=R.eq("bedrooms",parseInt(d.bedrooms)));const{data:F,error:B}=await R;if(B)throw B;e(F||[])}catch(R){console.error("Error fetching properties:",R)}i(!1)},k=(R,F)=>{p(B=>({...B,[R]:F}))},I=async(R,F,B,W)=>{f("geospatial");const ee={latitude:R,longitude:F,radius:B,property_type:d.property_type||void 0,transaction_type:d.transaction_type||void 0,min_price:d.min_price?parseFloat(d.min_price):void 0,max_price:d.max_price?parseFloat(d.max_price):void 0,bedrooms:d.bedrooms?parseInt(d.bedrooms):void 0,city:d.city||void 0};await S(ee)},T=()=>{f("traditional"),w(),b()},A=(R,F)=>{const B=new Intl.NumberFormat("es-MX",{style:"currency",currency:"USD"});return F==="alquiler"?`${B.format(R)}/mes`:B.format(R)},z=R=>({casa:"Casa",departamento:"Departamento",oficina:"Oficina",local_comercial:"Local Comercial",terreno:"Terreno",bodega:"Bodega",quinta:"Quinta",penthouse:"Penthouse"})[R]||R;return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white border-b",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx(Mj,{onLocationSearch:I,onClearLocation:T,isLoading:g}),_&&o.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-2 rounded border border-red-200",children:_})]}),o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de operación"}),o.jsxs("select",{className:"input-field",value:d.transaction_type,onChange:R=>k("transaction_type",R.target.value),children:[o.jsx("option",{value:"",children:"Cualquiera"}),o.jsx("option",{value:"venta",children:"Comprar"}),o.jsx("option",{value:"alquiler",children:"Rentar"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de propiedad"}),o.jsxs("select",{className:"input-field",value:d.property_type,onChange:R=>k("property_type",R.target.value),children:[o.jsx("option",{value:"",children:"Cualquiera"}),o.jsx("option",{value:"casa",children:"Casa"}),o.jsx("option",{value:"departamento",children:"Departamento"}),o.jsx("option",{value:"oficina",children:"Oficina"}),o.jsx("option",{value:"local_comercial",children:"Local Comercial"}),o.jsx("option",{value:"terreno",children:"Terreno"}),o.jsx("option",{value:"bodega",children:"Bodega"}),o.jsx("option",{value:"quinta",children:"Quinta"}),o.jsx("option",{value:"penthouse",children:"Penthouse"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),o.jsx("input",{type:"text",placeholder:"Cualquier ciudad",className:"input-field",value:d.city,onChange:R=>k("city",R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio mínimo"}),o.jsx("input",{type:"number",placeholder:"$ Min",className:"input-field",value:d.min_price,onChange:R=>k("min_price",R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio máximo"}),o.jsx("input",{type:"number",placeholder:"$ Max",className:"input-field",value:d.max_price,onChange:R=>k("max_price",R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Habitaciones"}),o.jsxs("select",{className:"input-field",value:d.bedrooms,onChange:R=>k("bedrooms",R.target.value),children:[o.jsx("option",{value:"",children:"Cualquiera"}),o.jsx("option",{value:"1",children:"1+"}),o.jsx("option",{value:"2",children:"2+"}),o.jsx("option",{value:"3",children:"3+"}),o.jsx("option",{value:"4",children:"4+"})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{className:`p-2 rounded ${s==="grid"?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100"}`,onClick:()=>l("grid"),children:o.jsx(_j,{className:"h-5 w-5"})}),o.jsx("button",{className:`p-2 rounded ${s==="list"?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100"}`,onClick:()=>l("list"),children:o.jsx(wj,{className:"h-5 w-5"})})]})]})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[j," propiedades encontradas"]}),u==="geospatial"&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Resultados ordenados por distancia"})]})}),N?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsx("div",{className:`${s==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6"}`,children:C.map(R=>o.jsxs("div",{className:`card ${s==="list"?"flex":""}`,children:[o.jsxs("div",{className:`relative ${s==="list"?"w-80 flex-shrink-0":""}`,children:[o.jsx("img",{src:R.images[0]||"/placeholder-property.jpg",alt:R.title,className:`${s==="list"?"w-full h-64 object-cover":"w-full h-48 object-cover"}`}),o.jsx("div",{className:"absolute top-4 left-4 bg-primary-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:R.transaction_type==="venta"?"Venta":"Alquiler"})]}),o.jsxs("div",{className:`p-6 ${s==="list"?"flex-1":""}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:R.title}),o.jsx("span",{className:"text-sm bg-gray-100 text-gray-700 px-2 py-1 rounded",children:z(R.property_type)})]}),o.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[o.jsx(Yt,{className:"h-4 w-4 mr-1"}),o.jsxs("span",{className:"text-sm",children:[R.city,", ",R.province]}),u==="geospatial"&&R.distance&&o.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:[R.distance.toFixed(1)," km"]})]}),o.jsx("p",{className:`text-gray-600 mb-4 ${s==="list"?"line-clamp-2":"line-clamp-3"}`,children:R.description}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("span",{className:"text-2xl font-bold text-primary-600",children:A(R.price,R.transaction_type)}),R.bedrooms&&o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[o.jsxs("span",{children:[R.bedrooms," hab"]}),R.bathrooms&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"•"}),o.jsxs("span",{children:[R.bathrooms," baños"]})]}),R.area_total&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"•"}),o.jsxs("span",{children:[R.area_total,"m²"]})]})]})]}),o.jsx(ce,{to:`/properties/${R.id}`,className:"btn-primary w-full text-center block",children:"Ver Detalles"})]})]},R.id))}),!N&&C.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-500 text-lg",children:u==="geospatial"?"No se encontraron propiedades en el área seleccionada":"No se encontraron propiedades con los filtros seleccionados"}),o.jsxs("div",{className:"mt-4 space-x-2",children:[o.jsx("button",{onClick:()=>p({property_type:"",transaction_type:"",city:"",min_price:"",max_price:"",bedrooms:""}),className:"btn-secondary",children:"Limpiar Filtros"}),u==="geospatial"&&o.jsx("button",{onClick:T,className:"btn-secondary",children:"Quitar Búsqueda por Ubicación"})]})]})]})]})}const ur=class ur{constructor(){ca(this,"sessions",new Map)}static getInstance(){return ur.instance||(ur.instance=new ur),ur.instance}async startTracking(e,n="direct"){const i=crypto.randomUUID(),{data:{user:s}}=await G.auth.getUser(),l=await this.checkIfAgentView(e,s==null?void 0:s.id),u={sessionId:i,propertyId:e,userId:s==null?void 0:s.id,startTime:Date.now(),isAgentView:l,hasTrackedView:!1,hasTrackedContact:!1};return this.sessions.set(i,u),l||await this.trackView(i,n),i}async checkIfAgentView(e,n){if(!n)return!1;try{const{data:i,error:s}=await G.from("properties").select("agent_id").eq("id",e).single();return s||!i?!1:i.agent_id===n}catch{return!1}}async trackView(e,n){const i=this.sessions.get(e);if(!(!i||i.hasTrackedView||i.isAgentView))try{const s=new Date().toISOString().split("T")[0],{data:l}=await G.from("tracking_events").select("id").eq("property_id",i.propertyId).eq("event_type","view").gte("created_at",`${s}T00:00:00.000Z`).lt("created_at",`${s}T23:59:59.999Z`),u=!l||l.length===0;await G.from("tracking_events").insert({property_id:i.propertyId,user_id:i.userId||null,session_id:e,event_type:"view",source:n,user_agent:navigator.userAgent,ip_address:null,is_unique_view:u,additional_data:{viewport:{width:window.innerWidth,height:window.innerHeight},timestamp:Date.now()}}),i.hasTrackedView=!0}catch(s){console.error("Error tracking view:",s)}}async trackContact(e){const n=this.sessions.get(e);if(!(!n||n.hasTrackedContact||n.isAgentView))try{await G.from("tracking_events").insert({property_id:n.propertyId,user_id:n.userId||null,session_id:e,event_type:"contact",source:"property_detail",user_agent:navigator.userAgent,additional_data:{contact_method:"chat",timestamp:Date.now()}}),n.hasTrackedContact=!0}catch(i){console.error("Error tracking contact:",i)}}async trackAction(e,n,i){const s=this.sessions.get(e);if(!(!s||s.isAgentView))try{await G.from("tracking_events").insert({property_id:s.propertyId,user_id:s.userId||null,session_id:e,event_type:n,source:"property_detail",user_agent:navigator.userAgent,additional_data:{...i,timestamp:Date.now()}})}catch(l){console.error(`Error tracking action ${n}:`,l)}}async endTracking(e){const n=this.sessions.get(e);if(!n||n.isAgentView)return;const i=Math.floor((Date.now()-n.startTime)/1e3);if(i>=10)try{await G.from("tracking_events").insert({property_id:n.propertyId,user_id:n.userId||null,session_id:e,event_type:"exit",source:"property_detail",user_agent:navigator.userAgent,duration:i,additional_data:{valid_session:!0,timestamp:Date.now()}})}catch(s){console.error("Error tracking exit:",s)}this.sessions.delete(e)}cleanupOldSessions(){const e=Date.now(),n=30*60*1e3;for(const[i,s]of this.sessions.entries())e-s.startTime>n&&this.sessions.delete(i)}};ca(ur,"instance");let vu=ur;function Dj(t,e="direct"){const n=vu.getInstance();let i=null;return{startTracking:async()=>(i=await n.startTracking(t,e),i),trackContact:async()=>{i&&await n.trackContact(i)},trackAction:async(d,p)=>{i&&await n.trackAction(i,d,p)},endTracking:async()=>{i&&(await n.endTracking(i),i=null)}}}function Av(t,e){const n=E.useRef(e);E.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Bj=1;function Uj(t){return Object.freeze({__version:Bj,map:t})}function $j(t,e){return Object.freeze({...t,...e})}const Mv=E.createContext(null),Rv=Mv.Provider;function zv(){const t=E.useContext(Mv);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Fj(t){function e(n,i){const{instance:s,context:l}=t(n).current;return E.useImperativeHandle(i,()=>s),n.children==null?null:Kt.createElement(Rv,{value:l},n.children)}return E.forwardRef(e)}function Zj(t){function e(n,i){const[s,l]=E.useState(!1),{instance:u}=t(n,l).current;E.useImperativeHandle(i,()=>u),E.useEffect(function(){s&&u.update()},[u,s,n.children]);const f=u._contentNode;return f?Vg.createPortal(n.children,f):null}return E.forwardRef(e)}function Wj(t){function e(n,i){const{instance:s}=t(n).current;return E.useImperativeHandle(i,()=>s),null}return E.forwardRef(e)}function Dv(t,e){const n=E.useRef();E.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Cd(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function qj(t,e){return function(i,s){const l=zv(),u=t(Cd(i,l),l);return Av(l.map,i.attribution),Dv(u.current,i.eventHandlers),e(u.current,l,i,s),u}}var yu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(yt,function(n){var i="1.9.4";function s(r){var a,c,h,m;for(c=1,h=arguments.length;c<h;c++){m=arguments[c];for(a in m)r[a]=m[a]}return r}var l=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function u(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var h=c.call(arguments,2);return function(){return r.apply(a,h.length?h.concat(c.call(arguments)):arguments)}}var f=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++f),r._leaflet_id}function p(r,a,c){var h,m,x,P;return P=function(){h=!1,m&&(x.apply(c,m),m=!1)},x=function(){h?m=arguments:(r.apply(c,arguments),setTimeout(P,a),h=!0)},x}function v(r,a,c){var h=a[1],m=a[0],x=h-m;return r===h&&c?r:((r-m)%x+x)%x+m}function g(){return!1}function _(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function y(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function S(r){return y(r).split(/\s+/)}function w(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?l(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function C(r,a,c){var h=[];for(var m in r)h.push(encodeURIComponent(c?m.toUpperCase():m)+"="+encodeURIComponent(r[m]));return(!a||a.indexOf("?")===-1?"?":"&")+h.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function j(r,a){return r.replace(N,function(c,h){var m=a[h];if(m===void 0)throw new Error("No value provided for variable "+c);return typeof m=="function"&&(m=m(a)),m})}var b=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function k(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var I="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function T(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var A=0;function z(r){var a=+new Date,c=Math.max(0,16-(a-A));return A=a+c,window.setTimeout(r,c)}var R=window.requestAnimationFrame||T("RequestAnimationFrame")||z,F=window.cancelAnimationFrame||T("CancelAnimationFrame")||T("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function B(r,a,c){if(c&&R===z)r.call(a);else return R.call(window,u(r,a))}function W(r){r&&F.call(window,r)}var ee={__proto__:null,extend:s,create:l,bind:u,get lastId(){return f},stamp:d,throttle:p,wrapNum:v,falseFn:g,formatNum:_,trim:y,splitWords:S,setOptions:w,getParamString:C,template:j,isArray:b,indexOf:k,emptyImageUrl:I,requestFn:R,cancelFn:F,requestAnimFrame:B,cancelAnimFrame:W};function de(){}de.extend=function(r){var a=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,h=l(c);h.constructor=a,a.prototype=h;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(a[m]=this[m]);return r.statics&&s(a,r.statics),r.includes&&(Fe(r.includes),s.apply(null,[h].concat(r.includes))),s(h,r),delete h.statics,delete h.includes,h.options&&(h.options=c.options?l(c.options):{},s(h.options,r.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,P=h._initHooks.length;x<P;x++)h._initHooks[x].call(this)}},a},de.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},de.mergeOptions=function(r){return s(this.prototype.options,r),this},de.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Fe(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=b(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var me={on:function(r,a,c){if(typeof r=="object")for(var h in r)this._on(h,r[h],a);else{r=S(r);for(var m=0,x=r.length;m<x;m++)this._on(r[m],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var h in r)this._off(h,r[h],a);else{r=S(r);for(var m=arguments.length===1,x=0,P=r.length;x<P;x++)m?this._off(r[x]):this._off(r[x],a,c)}return this},_on:function(r,a,c,h){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var m={fn:a,ctx:c};h&&(m.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(m)}},_off:function(r,a,c){var h,m,x;if(this._events&&(h=this._events[r],!!h)){if(arguments.length===1){if(this._firingCount)for(m=0,x=h.length;m<x;m++)h[m].fn=g;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var P=this._listens(r,a,c);if(P!==!1){var O=h[P];this._firingCount&&(O.fn=g,this._events[r]=h=h.slice()),h.splice(P,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var h=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var m=this._events[r];if(m){this._firingCount=this._firingCount+1||1;for(var x=0,P=m.length;x<P;x++){var O=m[x],M=O.fn;O.once&&this.off(r,M,O.ctx),M.call(O.ctx||this,h)}this._firingCount--}}return c&&this._propagateEvent(h),this},listens:function(r,a,c,h){typeof r!="string"&&console.warn('"string" type argument expected');var m=a;typeof a!="function"&&(h=!!a,m=void 0,c=void 0);var x=this._events&&this._events[r];if(x&&x.length&&this._listens(r,m,c)!==!1)return!0;if(h){for(var P in this._eventParents)if(this._eventParents[P].listens(r,a,c,h))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var h=this._events[r]||[];if(!a)return!!h.length;c===this&&(c=void 0);for(var m=0,x=h.length;m<x;m++)if(h[m].fn===a&&h[m].ctx===c)return m;return!1},once:function(r,a,c){if(typeof r=="object")for(var h in r)this._on(h,r[h],a,!0);else{r=S(r);for(var m=0,x=r.length;m<x;m++)this._on(r[m],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};me.addEventListener=me.on,me.removeEventListener=me.clearAllEventListeners=me.off,me.addOneTimeEventListener=me.once,me.fireEvent=me.fire,me.hasEventListeners=me.listens;var Ze=de.extend(me);function D(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var K=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(r){return this.clone()._add(Z(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(Z(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new D(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new D(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(r){r=Z(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=Z(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=Z(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function Z(r,a,c){return r instanceof D?r:b(r)?new D(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new D(r.x,r.y):new D(r,a,c)}function Y(r,a){if(r)for(var c=a?[r,a]:r,h=0,m=c.length;h<m;h++)this.extend(c[h])}Y.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof D||typeof r[0]=="number"||"x"in r)a=c=Z(r);else if(r=H(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof D?r=Z(r):r=H(r),r instanceof Y?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=H(r);var a=this.min,c=this.max,h=r.min,m=r.max,x=m.x>=a.x&&h.x<=c.x,P=m.y>=a.y&&h.y<=c.y;return x&&P},overlaps:function(r){r=H(r);var a=this.min,c=this.max,h=r.min,m=r.max,x=m.x>a.x&&h.x<c.x,P=m.y>a.y&&h.y<c.y;return x&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,h=Math.abs(a.x-c.x)*r,m=Math.abs(a.y-c.y)*r;return H(Z(a.x-h,a.y-m),Z(c.x+h,c.y+m))},equals:function(r){return r?(r=H(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function H(r,a){return!r||r instanceof Y?r:new Y(r,a)}function Pe(r,a){if(r)for(var c=a?[r,a]:r,h=0,m=c.length;h<m;h++)this.extend(c[h])}Pe.prototype={extend:function(r){var a=this._southWest,c=this._northEast,h,m;if(r instanceof he)h=r,m=r;else if(r instanceof Pe){if(h=r._southWest,m=r._northEast,!h||!m)return this}else return r?this.extend(te(r)||ge(r)):this;return!a&&!c?(this._southWest=new he(h.lat,h.lng),this._northEast=new he(m.lat,m.lng)):(a.lat=Math.min(h.lat,a.lat),a.lng=Math.min(h.lng,a.lng),c.lat=Math.max(m.lat,c.lat),c.lng=Math.max(m.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,h=Math.abs(a.lat-c.lat)*r,m=Math.abs(a.lng-c.lng)*r;return new Pe(new he(a.lat-h,a.lng-m),new he(c.lat+h,c.lng+m))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof he||"lat"in r?r=te(r):r=ge(r);var a=this._southWest,c=this._northEast,h,m;return r instanceof Pe?(h=r.getSouthWest(),m=r.getNorthEast()):h=m=r,h.lat>=a.lat&&m.lat<=c.lat&&h.lng>=a.lng&&m.lng<=c.lng},intersects:function(r){r=ge(r);var a=this._southWest,c=this._northEast,h=r.getSouthWest(),m=r.getNorthEast(),x=m.lat>=a.lat&&h.lat<=c.lat,P=m.lng>=a.lng&&h.lng<=c.lng;return x&&P},overlaps:function(r){r=ge(r);var a=this._southWest,c=this._northEast,h=r.getSouthWest(),m=r.getNorthEast(),x=m.lat>a.lat&&h.lat<c.lat,P=m.lng>a.lng&&h.lng<c.lng;return x&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=ge(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ge(r,a){return r instanceof Pe?r:new Pe(r,a)}function he(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}he.prototype={equals:function(r,a){if(!r)return!1;r=te(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+_(this.lat,r)+", "+_(this.lng,r)+")"},distanceTo:function(r){return _n.distance(this,te(r))},wrap:function(){return _n.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return ge([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function te(r,a,c){return r instanceof he?r:b(r)&&typeof r[0]!="object"?r.length===3?new he(r[0],r[1],r[2]):r.length===2?new he(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new he(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new he(r,a,c)}var it={latLngToPoint:function(r,a){var c=this.projection.project(r),h=this.scale(a);return this.transformation._transform(c,h)},pointToLatLng:function(r,a){var c=this.scale(a),h=this.transformation.untransform(r,c);return this.projection.unproject(h)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),h=this.transformation.transform(a.min,c),m=this.transformation.transform(a.max,c);return new Y(h,m)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,h=r.alt;return new he(c,a,h)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),h=a.lat-c.lat,m=a.lng-c.lng;if(h===0&&m===0)return r;var x=r.getSouthWest(),P=r.getNorthEast(),O=new he(x.lat-h,x.lng-m),M=new he(P.lat-h,P.lng-m);return new Pe(O,M)}},_n=s({},it,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,h=r.lat*c,m=a.lat*c,x=Math.sin((a.lat-r.lat)*c/2),P=Math.sin((a.lng-r.lng)*c/2),O=x*x+Math.cos(h)*Math.cos(m)*P*P,M=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*M}}),Id=6378137,Vo={R:Id,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,h=Math.max(Math.min(c,r.lat),-c),m=Math.sin(h*a);return new D(this.R*r.lng*a,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(r){var a=180/Math.PI;return new he((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=Id*Math.PI;return new Y([-r,-r],[r,r])}()};function Go(r,a,c,h){if(b(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=h}Go.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new D((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Si(r,a,c,h){return new Go(r,a,c,h)}var Ko=s({},_n,{code:"EPSG:3857",projection:Vo,transformation:function(){var r=.5/(Math.PI*Vo.R);return Si(r,.5,-r,.5)}()}),Vv=s({},Ko,{code:"EPSG:900913"});function Ad(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Md(r,a){var c="",h,m,x,P,O,M;for(h=0,x=r.length;h<x;h++){for(O=r[h],m=0,P=O.length;m<P;m++)M=O[m],c+=(m?"L":"M")+M.x+" "+M.y;c+=a?J.svg?"z":"x":""}return c||"M0 0"}var Jo=document.documentElement.style,Ws="ActiveXObject"in window,Gv=Ws&&!document.addEventListener,Rd="msLaunchUri"in navigator&&!("documentMode"in document),Qo=Ft("webkit"),zd=Ft("android"),Dd=Ft("android 2")||Ft("android 3"),Kv=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Jv=zd&&Ft("Google")&&Kv<537&&!("AudioNode"in window),Yo=!!window.opera,Bd=!Rd&&Ft("chrome"),Ud=Ft("gecko")&&!Qo&&!Yo&&!Ws,Qv=!Bd&&Ft("safari"),$d=Ft("phantom"),Fd="OTransition"in Jo,Yv=navigator.platform.indexOf("Win")===0,Zd=Ws&&"transition"in Jo,Xo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Dd,Wd="MozPerspective"in Jo,Xv=!window.L_DISABLE_3D&&(Zd||Xo||Wd)&&!Fd&&!$d,Pi=typeof orientation<"u"||Ft("mobile"),e0=Pi&&Qo,t0=Pi&&Xo,qd=!window.PointerEvent&&window.MSPointerEvent,Hd=!!(window.PointerEvent||qd),Vd="ontouchstart"in window||!!window.TouchEvent,n0=!window.L_NO_TOUCH&&(Vd||Hd),r0=Pi&&Yo,i0=Pi&&Ud,s0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,a0=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",g,a),window.removeEventListener("testPassiveEventSupport",g,a)}catch{}return r}(),o0=function(){return!!document.createElement("canvas").getContext}(),el=!!(document.createElementNS&&Ad("svg").createSVGRect),l0=!!el&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),c0=!el&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),u0=navigator.platform.indexOf("Mac")===0,d0=navigator.platform.indexOf("Linux")===0;function Ft(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var J={ie:Ws,ielt9:Gv,edge:Rd,webkit:Qo,android:zd,android23:Dd,androidStock:Jv,opera:Yo,chrome:Bd,gecko:Ud,safari:Qv,phantom:$d,opera12:Fd,win:Yv,ie3d:Zd,webkit3d:Xo,gecko3d:Wd,any3d:Xv,mobile:Pi,mobileWebkit:e0,mobileWebkit3d:t0,msPointer:qd,pointer:Hd,touch:n0,touchNative:Vd,mobileOpera:r0,mobileGecko:i0,retina:s0,passiveEvents:a0,canvas:o0,svg:el,vml:c0,inlineSvg:l0,mac:u0,linux:d0},Gd=J.msPointer?"MSPointerDown":"pointerdown",Kd=J.msPointer?"MSPointerMove":"pointermove",Jd=J.msPointer?"MSPointerUp":"pointerup",Qd=J.msPointer?"MSPointerCancel":"pointercancel",tl={touchstart:Gd,touchmove:Kd,touchend:Jd,touchcancel:Qd},Yd={touchstart:v0,touchmove:qs,touchend:qs,touchcancel:qs},Pr={},Xd=!1;function h0(r,a,c){return a==="touchstart"&&g0(),Yd[a]?(c=Yd[a].bind(this,c),r.addEventListener(tl[a],c,!1),c):(console.warn("wrong event specified:",a),g)}function f0(r,a,c){if(!tl[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(tl[a],c,!1)}function m0(r){Pr[r.pointerId]=r}function p0(r){Pr[r.pointerId]&&(Pr[r.pointerId]=r)}function eh(r){delete Pr[r.pointerId]}function g0(){Xd||(document.addEventListener(Gd,m0,!0),document.addEventListener(Kd,p0,!0),document.addEventListener(Jd,eh,!0),document.addEventListener(Qd,eh,!0),Xd=!0)}function qs(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Pr)a.touches.push(Pr[c]);a.changedTouches=[a],r(a)}}function v0(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&We(a),qs(r,a)}function y0(r){var a={},c,h;for(h in r)c=r[h],a[h]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var x0=200;function _0(r,a){r.addEventListener("dblclick",a);var c=0,h;function m(x){if(x.detail!==1){h=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var P=sh(x);if(!(P.some(function(M){return M instanceof HTMLLabelElement&&M.attributes.for})&&!P.some(function(M){return M instanceof HTMLInputElement||M instanceof HTMLSelectElement}))){var O=Date.now();O-c<=x0?(h++,h===2&&a(y0(x))):h=1,c=O}}}return r.addEventListener("click",m),{dblclick:a,simDblclick:m}}function w0(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var nl=Gs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ei=Gs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),th=Ei==="webkitTransition"||Ei==="OTransition"?Ei+"End":"transitionend";function nh(r){return typeof r=="string"?document.getElementById(r):r}function Ci(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(r,null);c=h?h[a]:null}return c==="auto"?null:c}function fe(r,a,c){var h=document.createElement(r);return h.className=a||"",c&&c.appendChild(h),h}function je(r){var a=r.parentNode;a&&a.removeChild(r)}function Hs(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Er(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function Cr(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function rl(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=Vs(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ie(r,a){if(r.classList!==void 0)for(var c=S(a),h=0,m=c.length;h<m;h++)r.classList.add(c[h]);else if(!rl(r,a)){var x=Vs(r);il(r,(x?x+" ":"")+a)}}function Ce(r,a){r.classList!==void 0?r.classList.remove(a):il(r,y((" "+Vs(r)+" ").replace(" "+a+" "," ")))}function il(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function Vs(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function bt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&b0(r,a)}function b0(r,a){var c=!1,h="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(h)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+h+"(opacity="+a+")"}function Gs(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Xn(r,a,c){var h=a||new D(0,0);r.style[nl]=(J.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(c?" scale("+c+")":"")}function Oe(r,a){r._leaflet_pos=a,J.any3d?Xn(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function er(r){return r._leaflet_pos||new D(0,0)}var Ti,Li,sl;if("onselectstart"in document)Ti=function(){ne(window,"selectstart",We)},Li=function(){ve(window,"selectstart",We)};else{var Oi=Gs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ti=function(){if(Oi){var r=document.documentElement.style;sl=r[Oi],r[Oi]="none"}},Li=function(){Oi&&(document.documentElement.style[Oi]=sl,sl=void 0)}}function al(){ne(window,"dragstart",We)}function ol(){ve(window,"dragstart",We)}var Ks,ll;function cl(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Js(),Ks=r,ll=r.style.outlineStyle,r.style.outlineStyle="none",ne(window,"keydown",Js))}function Js(){Ks&&(Ks.style.outlineStyle=ll,Ks=void 0,ll=void 0,ve(window,"keydown",Js))}function rh(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function ul(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var j0={__proto__:null,TRANSFORM:nl,TRANSITION:Ei,TRANSITION_END:th,get:nh,getStyle:Ci,create:fe,remove:je,empty:Hs,toFront:Er,toBack:Cr,hasClass:rl,addClass:ie,removeClass:Ce,setClass:il,getClass:Vs,setOpacity:bt,testProp:Gs,setTransform:Xn,setPosition:Oe,getPosition:er,get disableTextSelection(){return Ti},get enableTextSelection(){return Li},disableImageDrag:al,enableImageDrag:ol,preventOutline:cl,restoreOutline:Js,getSizedParentNode:rh,getScale:ul};function ne(r,a,c,h){if(a&&typeof a=="object")for(var m in a)hl(r,m,a[m],c);else{a=S(a);for(var x=0,P=a.length;x<P;x++)hl(r,a[x],c,h)}return this}var Zt="_leaflet_events";function ve(r,a,c,h){if(arguments.length===1)ih(r),delete r[Zt];else if(a&&typeof a=="object")for(var m in a)fl(r,m,a[m],c);else if(a=S(a),arguments.length===2)ih(r,function(O){return k(a,O)!==-1});else for(var x=0,P=a.length;x<P;x++)fl(r,a[x],c,h);return this}function ih(r,a){for(var c in r[Zt]){var h=c.split(/\d/)[0];(!a||a(h))&&fl(r,h,null,null,c)}}var dl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hl(r,a,c,h){var m=a+d(c)+(h?"_"+d(h):"");if(r[Zt]&&r[Zt][m])return this;var x=function(O){return c.call(h||r,O||window.event)},P=x;!J.touchNative&&J.pointer&&a.indexOf("touch")===0?x=h0(r,a,x):J.touch&&a==="dblclick"?x=_0(r,x):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(dl[a]||a,x,J.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(x=function(O){O=O||window.event,pl(r,O)&&P(O)},r.addEventListener(dl[a],x,!1)):r.addEventListener(a,P,!1):r.attachEvent("on"+a,x),r[Zt]=r[Zt]||{},r[Zt][m]=x}function fl(r,a,c,h,m){m=m||a+d(c)+(h?"_"+d(h):"");var x=r[Zt]&&r[Zt][m];if(!x)return this;!J.touchNative&&J.pointer&&a.indexOf("touch")===0?f0(r,a,x):J.touch&&a==="dblclick"?w0(r,x):"removeEventListener"in r?r.removeEventListener(dl[a]||a,x,!1):r.detachEvent("on"+a,x),r[Zt][m]=null}function tr(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function ml(r){return hl(r,"wheel",tr),this}function Ii(r){return ne(r,"mousedown touchstart dblclick contextmenu",tr),r._leaflet_disable_click=!0,this}function We(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function nr(r){return We(r),tr(r),this}function sh(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function ah(r,a){if(!a)return new D(r.clientX,r.clientY);var c=ul(a),h=c.boundingClientRect;return new D((r.clientX-h.left)/c.x-a.clientLeft,(r.clientY-h.top)/c.y-a.clientTop)}var N0=J.linux&&J.chrome?window.devicePixelRatio:J.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function oh(r){return J.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/N0:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function pl(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var k0={__proto__:null,on:ne,off:ve,stopPropagation:tr,disableScrollPropagation:ml,disableClickPropagation:Ii,preventDefault:We,stop:nr,getPropagationPath:sh,getMousePosition:ah,getWheelDelta:oh,isExternalTarget:pl,addListener:ne,removeListener:ve},lh=Ze.extend({run:function(r,a,c,h){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=er(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),Oe(this._el,c),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),le=Ze.extend({options:{crs:Ko,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=w(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(te(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ei&&J.any3d&&!J.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ne(this._proxy,th,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(te(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var h=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(J.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(J.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var h=this.getZoomScale(a),m=this.getSize().divideBy(2),x=r instanceof D?r:this.latLngToContainerPoint(r),P=x.subtract(m).multiplyBy(1-1/h),O=this.containerPointToLatLng(m.add(P));return this.setView(O,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():ge(r);var c=Z(a.paddingTopLeft||a.padding||[0,0]),h=Z(a.paddingBottomRight||a.padding||[0,0]),m=this.getBoundsZoom(r,!1,c.add(h));if(m=typeof a.maxZoom=="number"?Math.min(a.maxZoom,m):m,m===1/0)return{center:r.getCenter(),zoom:m};var x=h.subtract(c).divideBy(2),P=this.project(r.getSouthWest(),m),O=this.project(r.getNorthEast(),m),M=this.unproject(P.add(O).divideBy(2).add(x),m);return{center:M,zoom:m}},fitBounds:function(r,a){if(r=ge(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=Z(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new lh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ie(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!J.any3d)return this.setView(r,a,c);this._stop();var h=this.project(this.getCenter()),m=this.project(r),x=this.getSize(),P=this._zoom;r=te(r),a=a===void 0?P:a;var O=Math.max(x.x,x.y),M=O*this.getZoomScale(P,a),U=m.distanceTo(h)||1,q=1.42,Q=q*q;function se(Ie){var la=Ie?-1:1,fy=Ie?M:O,my=M*M-O*O+la*Q*Q*U*U,py=2*fy*Q*U,Sl=my/py,Fh=Math.sqrt(Sl*Sl+1)-Sl,gy=Fh<1e-9?-18:Math.log(Fh);return gy}function Xe(Ie){return(Math.exp(Ie)-Math.exp(-Ie))/2}function De(Ie){return(Math.exp(Ie)+Math.exp(-Ie))/2}function Nt(Ie){return Xe(Ie)/De(Ie)}var st=se(0);function Mr(Ie){return O*(De(st)/De(st+q*Ie))}function cy(Ie){return O*(De(st)*Nt(st+q*Ie)-Xe(st))/Q}function uy(Ie){return 1-Math.pow(1-Ie,1.5)}var dy=Date.now(),Uh=(se(1)-st)/q,hy=c.duration?1e3*c.duration:1e3*Uh*.8;function $h(){var Ie=(Date.now()-dy)/hy,la=uy(Ie)*Uh;Ie<=1?(this._flyToFrame=B($h,this),this._move(this.unproject(h.add(m.subtract(h).multiplyBy(cy(la)/U)),P),this.getScaleZoom(O/Mr(la),P),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),$h.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=ge(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),h=this._limitCenter(c,this._zoom,ge(r));return c.equals(h)||this.panTo(h,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=Z(a.paddingTopLeft||a.padding||[0,0]),h=Z(a.paddingBottomRight||a.padding||[0,0]),m=this.project(this.getCenter()),x=this.project(r),P=this.getPixelBounds(),O=H([P.min.add(c),P.max.subtract(h)]),M=O.getSize();if(!O.contains(x)){this._enforcingBounds=!0;var U=x.subtract(O.getCenter()),q=O.extend(x).getSize().subtract(M);m.x+=U.x<0?-q.x:q.x,m.y+=U.y<0?-q.y:q.y,this.panTo(this.unproject(m),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),h=a.divideBy(2).round(),m=c.divideBy(2).round(),x=h.subtract(m);return!x.x&&!x.y?this:(r.animate&&r.pan?this.panBy(x):(r.pan&&this._rawPanBy(x),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=u(this._handleGeolocationResponse,this),c=u(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,h=new he(a,c),m=h.toBounds(r.coords.accuracy*2),x=this._locateOptions;if(x.setView){var P=this.getBoundsZoom(m);this.setView(h,x.maxZoom?Math.min(P,x.maxZoom):P)}var O={latlng:h,bounds:m,timestamp:r.timestamp};for(var M in r.coords)typeof r.coords[M]=="number"&&(O[M]=r.coords[M]);this.fire("locationfound",O)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)je(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),h=fe("div",c,a||this._mapPane);return r&&(this._panes[r]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Pe(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=ge(r),c=Z(c||[0,0]);var h=this.getZoom()||0,m=this.getMinZoom(),x=this.getMaxZoom(),P=r.getNorthWest(),O=r.getSouthEast(),M=this.getSize().subtract(c),U=H(this.project(O,h),this.project(P,h)).getSize(),q=J.any3d?this.options.zoomSnap:1,Q=M.x/U.x,se=M.y/U.y,Xe=a?Math.max(Q,se):Math.min(Q,se);return h=this.getScaleZoom(Xe,h),q&&(h=Math.round(h/(q/100))*(q/100),h=a?Math.ceil(h/q)*q:Math.floor(h/q)*q),Math.max(m,Math.min(x,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new Y(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var h=c.zoom(r*c.scale(a));return isNaN(h)?1/0:h},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(te(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(Z(r),a)},layerPointToLatLng:function(r){var a=Z(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(te(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(te(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ge(r))},distance:function(r,a){return this.options.crs.distance(te(r),te(a))},containerPointToLayerPoint:function(r){return Z(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return Z(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(Z(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(te(r)))},mouseEventToContainerPoint:function(r){return ah(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=nh(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ne(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&J.any3d,ie(r,"leaflet-container"+(J.touch?" leaflet-touch":"")+(J.retina?" leaflet-retina":"")+(J.ielt9?" leaflet-oldie":"")+(J.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Ci(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Oe(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ie(r.markerPane,"leaflet-zoom-hide"),ie(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){Oe(this._mapPane,new D(0,0));var h=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var m=this._zoom!==a;this._moveStart(m,c)._move(r,a)._moveEnd(m),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,h){a===void 0&&(a=this._zoom);var m=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),h?c&&c.pinch&&this.fire("zoom",c):((m||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Oe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?ve:ne;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),J.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],h,m=a==="mouseout"||a==="mouseover",x=r.target||r.srcElement,P=!1;x;){if(h=this._targets[d(x)],h&&(a==="click"||a==="preclick")&&this._draggableMoved(h)){P=!0;break}if(h&&h.listens(a,!0)&&(m&&!pl(x,r)||(c.push(h),m))||x===this._container)break;x=x.parentNode}return!c.length&&!P&&!m&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&cl(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var h=s({},r);h.type="preclick",this._fireDOMEvent(h,h.type,c)}var m=this._findEventTargets(r,a);if(c){for(var x=[],P=0;P<c.length;P++)c[P].listens(a,!0)&&x.push(c[P]);m=x.concat(m)}if(m.length){a==="contextmenu"&&We(r);var O=m[0],M={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var U=O.getLatLng&&(!O._radius||O._radius<=10);M.containerPoint=U?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(r),M.layerPoint=this.containerPointToLayerPoint(M.containerPoint),M.latlng=U?O.getLatLng():this.layerPointToLatLng(M.layerPoint)}for(P=0;P<m.length;P++)if(m[P].fire(a,M,!0),M.originalEvent._stopped||m[P].options.bubblingMouseEvents===!1&&k(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return er(this._mapPane)||new D(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var h=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(h)},_latLngBoundsToNewLayerBounds:function(r,a,c){var h=this._getNewPixelOrigin(c,a);return H([this.project(r.getSouthWest(),a)._subtract(h),this.project(r.getNorthWest(),a)._subtract(h),this.project(r.getSouthEast(),a)._subtract(h),this.project(r.getNorthEast(),a)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var h=this.project(r,a),m=this.getSize().divideBy(2),x=new Y(h.subtract(m),h.add(m)),P=this._getBoundsOffset(x,c,a);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?r:this.unproject(h.add(P),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),h=new Y(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(h,a))},_getBoundsOffset:function(r,a,c){var h=H(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),m=h.min.subtract(r.min),x=h.max.subtract(r.max),P=this._rebound(m.x,-x.x),O=this._rebound(m.y,-x.y);return new D(P,O)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),h=J.any3d?this.options.zoomSnap:1;return h&&(r=Math.round(r/h)*h),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=fe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=nl,h=this._proxy.style[c];Xn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),h===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Xn(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(a),m=this._getCenterOffset(r)._divideBy(1-1/h);return c.animate!==!0&&!this.getSize().contains(m)?!1:(B(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,h){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function S0(r,a){return new le(r,a)}var Lt=de.extend({options:{position:"topright"},initialize:function(r){w(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),h=r._controlCorners[c];return ie(a,"leaflet-control"),c.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Ai=function(r){return new Lt(r)};le.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=fe("div",a+"control-container",this._container);function h(m,x){var P=a+m+" "+a+x;r[m+x]=fe("div",P,c)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)je(this._controlCorners[r]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ch=Lt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,h){return c<h?-1:h<c?1:0}},initialize:function(r,a,c){w(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in r)this._addLayer(r[h],h);for(h in a)this._addLayer(a[h],h,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Lt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=fe("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Ii(a),ml(a);var h=this._section=fe("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ne(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=fe("a",r+"-toggle",a);m.href="#",m.title="Layers",m.setAttribute("role","button"),ne(m,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){We(x),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=fe("div",r+"-base",h),this._separator=fe("div",r+"-separator",h),this._overlaysList=fe("div",r+"-overlays",h),a.appendChild(h)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(u(function(h,m){return this.options.sortFunction(h.layer,m.layer,h.name,m.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hs(this._baseLayersList),Hs(this._overlaysList),this._layerControlInputs=[];var r,a,c,h,m=0;for(c=0;c<this._layers.length;c++)h=this._layers[c],this._addItem(h),a=a||h.overlay,r=r||!h.overlay,m+=h.overlay?0:1;return this.options.hideSingleBase&&(r=r&&m>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=c,h.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),h;r.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=c):h=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(h),h.layerId=d(r.layer),ne(h,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+r.name;var x=document.createElement("span");a.appendChild(x),x.appendChild(h),x.appendChild(m);var P=r.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,h=[],m=[];this._handlingClick=!0;for(var x=r.length-1;x>=0;x--)a=r[x],c=this._getLayer(a.layerId).layer,a.checked?h.push(c):a.checked||m.push(c);for(x=0;x<m.length;x++)this._map.hasLayer(m[x])&&this._map.removeLayer(m[x]);for(x=0;x<h.length;x++)this._map.hasLayer(h[x])||this._map.addLayer(h[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,h=this._map.getZoom(),m=r.length-1;m>=0;m--)a=r[m],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&h<c.options.minZoom||c.options.maxZoom!==void 0&&h>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ne(r,"click",We),this.expand();var a=this;setTimeout(function(){ve(r,"click",We),a._preventClick=!1})}}),P0=function(r,a,c){return new ch(r,a,c)},gl=Lt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=fe("div",a+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,h,m){var x=fe("a",c,h);return x.innerHTML=r,x.href="#",x.title=a,x.setAttribute("role","button"),x.setAttribute("aria-label",a),Ii(x),ne(x,"click",nr),ne(x,"click",m,this),ne(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Ce(this._zoomInButton,a),Ce(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(ie(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(ie(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});le.mergeOptions({zoomControl:!0}),le.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new gl,this.addControl(this.zoomControl))});var E0=function(r){return new gl(r)},uh=Lt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=fe("div",a),h=this.options;return this._addScales(h,a+"-line",c),r.on(h.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=fe("div",a,c)),r.imperial&&(this._iScale=fe("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,h,m;a>5280?(c=a/5280,h=this._getRoundNum(c),this._updateScale(this._iScale,h+" mi",h/c)):(m=this._getRoundNum(a),this._updateScale(this._iScale,m+" ft",m/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),C0=function(r){return new uh(r)},T0='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',vl=Lt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(J.inlineSvg?T0+" ":"")+"Leaflet</a>"},initialize:function(r){w(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=fe("div","leaflet-control-attribution"),Ii(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});le.mergeOptions({attributionControl:!0}),le.addInitHook(function(){this.options.attributionControl&&new vl().addTo(this)});var L0=function(r){return new vl(r)};Lt.Layers=ch,Lt.Zoom=gl,Lt.Scale=uh,Lt.Attribution=vl,Ai.layers=P0,Ai.zoom=E0,Ai.scale=C0,Ai.attribution=L0;var Wt=de.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wt.addTo=function(r,a){return r.addHandler(a,this),this};var O0={Events:me},dh=J.touch?"touchstart mousedown":"mousedown",wn=Ze.extend({options:{clickTolerance:3},initialize:function(r,a,c,h){w(this,h),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(ne(this._dragStartTarget,dh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(wn._dragging===this&&this.finishDrag(!0),ve(this._dragStartTarget,dh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!rl(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){wn._dragging===this&&this.finishDrag();return}if(!(wn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(wn._dragging=this,this._preventOutline&&cl(this._element),al(),Ti(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=rh(this._element);this._startPoint=new D(a.clientX,a.clientY),this._startPos=er(this._element),this._parentScale=ul(c);var h=r.type==="mousedown";ne(document,h?"mousemove":"touchmove",this._onMove,this),ne(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new D(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,We(r),this._moved||(this.fire("dragstart"),this._moved=!0,ie(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Oe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Ce(document.body,"leaflet-dragging"),this._lastTarget&&(Ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ve(document,"mousemove touchmove",this._onMove,this),ve(document,"mouseup touchend touchcancel",this._onUp,this),ol(),Li();var a=this._moved&&this._moving;this._moving=!1,wn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function hh(r,a,c){var h,m=[1,4,2,8],x,P,O,M,U,q,Q,se;for(x=0,q=r.length;x<q;x++)r[x]._code=rr(r[x],a);for(O=0;O<4;O++){for(Q=m[O],h=[],x=0,q=r.length,P=q-1;x<q;P=x++)M=r[x],U=r[P],M._code&Q?U._code&Q||(se=Qs(U,M,Q,a,c),se._code=rr(se,a),h.push(se)):(U._code&Q&&(se=Qs(U,M,Q,a,c),se._code=rr(se,a),h.push(se)),h.push(M));r=h}return r}function fh(r,a){var c,h,m,x,P,O,M,U,q;if(!r||r.length===0)throw new Error("latlngs not passed");jt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Q=te([0,0]),se=ge(r),Xe=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());Xe<1700&&(Q=yl(r));var De=r.length,Nt=[];for(c=0;c<De;c++){var st=te(r[c]);Nt.push(a.project(te([st.lat-Q.lat,st.lng-Q.lng])))}for(O=M=U=0,c=0,h=De-1;c<De;h=c++)m=Nt[c],x=Nt[h],P=m.y*x.x-x.y*m.x,M+=(m.x+x.x)*P,U+=(m.y+x.y)*P,O+=P*3;O===0?q=Nt[0]:q=[M/O,U/O];var Mr=a.unproject(Z(q));return te([Mr.lat+Q.lat,Mr.lng+Q.lng])}function yl(r){for(var a=0,c=0,h=0,m=0;m<r.length;m++){var x=te(r[m]);a+=x.lat,c+=x.lng,h++}return te([a/h,c/h])}var I0={__proto__:null,clipPolygon:hh,polygonCenter:fh,centroid:yl};function mh(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=R0(r,c),r=M0(r,c),r}function ph(r,a,c){return Math.sqrt(Mi(r,a,c,!0))}function A0(r,a,c){return Mi(r,a,c)}function M0(r,a){var c=r.length,h=typeof Uint8Array<"u"?Uint8Array:Array,m=new h(c);m[0]=m[c-1]=1,xl(r,m,a,0,c-1);var x,P=[];for(x=0;x<c;x++)m[x]&&P.push(r[x]);return P}function xl(r,a,c,h,m){var x=0,P,O,M;for(O=h+1;O<=m-1;O++)M=Mi(r[O],r[h],r[m],!0),M>x&&(P=O,x=M);x>c&&(a[P]=1,xl(r,a,c,h,P),xl(r,a,c,P,m))}function R0(r,a){for(var c=[r[0]],h=1,m=0,x=r.length;h<x;h++)z0(r[h],r[m])>a&&(c.push(r[h]),m=h);return m<x-1&&c.push(r[x-1]),c}var gh;function vh(r,a,c,h,m){var x=h?gh:rr(r,c),P=rr(a,c),O,M,U;for(gh=P;;){if(!(x|P))return[r,a];if(x&P)return!1;O=x||P,M=Qs(r,a,O,c,m),U=rr(M,c),O===x?(r=M,x=U):(a=M,P=U)}}function Qs(r,a,c,h,m){var x=a.x-r.x,P=a.y-r.y,O=h.min,M=h.max,U,q;return c&8?(U=r.x+x*(M.y-r.y)/P,q=M.y):c&4?(U=r.x+x*(O.y-r.y)/P,q=O.y):c&2?(U=M.x,q=r.y+P*(M.x-r.x)/x):c&1&&(U=O.x,q=r.y+P*(O.x-r.x)/x),new D(U,q,m)}function rr(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function z0(r,a){var c=a.x-r.x,h=a.y-r.y;return c*c+h*h}function Mi(r,a,c,h){var m=a.x,x=a.y,P=c.x-m,O=c.y-x,M=P*P+O*O,U;return M>0&&(U=((r.x-m)*P+(r.y-x)*O)/M,U>1?(m=c.x,x=c.y):U>0&&(m+=P*U,x+=O*U)),P=r.x-m,O=r.y-x,h?P*P+O*O:new D(m,x)}function jt(r){return!b(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function yh(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),jt(r)}function xh(r,a){var c,h,m,x,P,O,M,U;if(!r||r.length===0)throw new Error("latlngs not passed");jt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var q=te([0,0]),Q=ge(r),se=Q.getNorthWest().distanceTo(Q.getSouthWest())*Q.getNorthEast().distanceTo(Q.getNorthWest());se<1700&&(q=yl(r));var Xe=r.length,De=[];for(c=0;c<Xe;c++){var Nt=te(r[c]);De.push(a.project(te([Nt.lat-q.lat,Nt.lng-q.lng])))}for(c=0,h=0;c<Xe-1;c++)h+=De[c].distanceTo(De[c+1])/2;if(h===0)U=De[0];else for(c=0,x=0;c<Xe-1;c++)if(P=De[c],O=De[c+1],m=P.distanceTo(O),x+=m,x>h){M=(x-h)/m,U=[O.x-M*(O.x-P.x),O.y-M*(O.y-P.y)];break}var st=a.unproject(Z(U));return te([st.lat+q.lat,st.lng+q.lng])}var D0={__proto__:null,simplify:mh,pointToSegmentDistance:ph,closestPointOnSegment:A0,clipSegment:vh,_getEdgeIntersection:Qs,_getBitCode:rr,_sqClosestPointOnSegment:Mi,isFlat:jt,_flat:yh,polylineCenter:xh},_l={project:function(r){return new D(r.lng,r.lat)},unproject:function(r){return new he(r.y,r.x)},bounds:new Y([-180,-90],[180,90])},wl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Y([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,h=r.lat*a,m=this.R_MINOR/c,x=Math.sqrt(1-m*m),P=x*Math.sin(h),O=Math.tan(Math.PI/4-h/2)/Math.pow((1-P)/(1+P),x/2);return h=-c*Math.log(Math.max(O,1e-10)),new D(r.lng*a*c,h)},unproject:function(r){for(var a=180/Math.PI,c=this.R,h=this.R_MINOR/c,m=Math.sqrt(1-h*h),x=Math.exp(-r.y/c),P=Math.PI/2-2*Math.atan(x),O=0,M=.1,U;O<15&&Math.abs(M)>1e-7;O++)U=m*Math.sin(P),U=Math.pow((1-U)/(1+U),m/2),M=Math.PI/2-2*Math.atan(x*U)-P,P+=M;return new he(P*a,r.x*a/c)}},B0={__proto__:null,LonLat:_l,Mercator:wl,SphericalMercator:Vo},U0=s({},_n,{code:"EPSG:3395",projection:wl,transformation:function(){var r=.5/(Math.PI*wl.R);return Si(r,.5,-r,.5)}()}),_h=s({},_n,{code:"EPSG:4326",projection:_l,transformation:Si(1/180,1,-1/180,.5)}),$0=s({},it,{projection:_l,transformation:Si(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,h=a.lat-r.lat;return Math.sqrt(c*c+h*h)},infinite:!0});it.Earth=_n,it.EPSG3395=U0,it.EPSG3857=Ko,it.EPSG900913=Vv,it.EPSG4326=_h,it.Simple=$0;var Ot=Ze.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});le.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?b(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var h in this._zoomBoundLayers){var m=this._zoomBoundLayers[h].options;r=m.minZoom===void 0?r:Math.min(r,m.minZoom),a=m.maxZoom===void 0?a:Math.max(a,m.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Tr=Ot.extend({initialize:function(r,a){w(this,a),this._layers={};var c,h;if(r)for(c=0,h=r.length;c<h;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,h;for(c in this._layers)h=this._layers[c],h[r]&&h[r].apply(h,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),F0=function(r,a){return new Tr(r,a)},Xt=Tr.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Tr.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Tr.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Pe;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),Z0=function(r,a){return new Xt(r,a)},Lr=de.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){w(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(h,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(r,a){var c=this.options,h=c[a+"Size"];typeof h=="number"&&(h=[h,h]);var m=Z(h),x=Z(a==="shadow"&&c.shadowAnchor||c.iconAnchor||m&&m.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),x&&(r.style.marginLeft=-x.x+"px",r.style.marginTop=-x.y+"px"),m&&(r.style.width=m.x+"px",r.style.height=m.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return J.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function W0(r){return new Lr(r)}var Ri=Lr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Ri.imagePath!="string"&&(Ri.imagePath=this._detectIconPath()),(this.options.imagePath||Ri.imagePath)+Lr.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,h,m){var x=h.exec(c);return x&&x[m]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=fe("div","leaflet-default-icon-path",document.body),a=Ci(r,"background-image")||Ci(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),wh=Wt.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new wn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ie(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,h=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,x=er(a._icon),P=c.getPixelBounds(),O=c.getPixelOrigin(),M=H(P.min._subtract(O).add(m),P.max._subtract(O).subtract(m));if(!M.contains(x)){var U=Z((Math.max(M.max.x,x.x)-M.max.x)/(P.max.x-M.max.x)-(Math.min(M.min.x,x.x)-M.min.x)/(P.min.x-M.min.x),(Math.max(M.max.y,x.y)-M.max.y)/(P.max.y-M.max.y)-(Math.min(M.min.y,x.y)-M.min.y)/(P.min.y-M.min.y)).multiplyBy(h);c.panBy(U,{animate:!1}),this._draggable._newPos._add(U),this._draggable._startPos._add(U),Oe(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=B(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,h=er(a._icon),m=a._map.layerPointToLatLng(h);c&&Oe(c,h),a._latlng=m,r.latlng=m,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Ys=Ot.extend({options:{icon:new Ri,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){w(this,a),this._latlng=te(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=te(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),h=!1;c!==this._icon&&(this._icon&&this._removeIcon(),h=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),ie(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ne(c,"focus",this._panOnFocus,this);var m=r.icon.createShadow(this._shadow),x=!1;m!==this._shadow&&(this._removeShadow(),x=!0),m&&(ie(m,a),m.alt=""),this._shadow=m,r.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&x&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Oe(this._icon,r),this._shadow&&Oe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wh)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wh(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&bt(this._icon,r),this._shadow&&bt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?Z(a.iconSize):Z(0,0),h=a.iconAnchor?Z(a.iconAnchor):Z(0,0);r.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:c.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function q0(r,a){return new Ys(r,a)}var bn=Ot.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return w(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xs=bn.extend({options:{fill:!0,radius:10},initialize:function(r,a){w(this,a),this._latlng=te(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=te(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return bn.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),h=[r+c,a+c];this._pxBounds=new Y(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function H0(r,a){return new Xs(r,a)}var bl=Xs.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),w(this,a),this._latlng=te(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:bn.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,h=c.options.crs;if(h.distance===_n.distance){var m=Math.PI/180,x=this._mRadius/_n.R/m,P=c.project([a+x,r]),O=c.project([a-x,r]),M=P.add(O).divideBy(2),U=c.unproject(M).lat,q=Math.acos((Math.cos(x*m)-Math.sin(a*m)*Math.sin(U*m))/(Math.cos(a*m)*Math.cos(U*m)))/m;(isNaN(q)||q===0)&&(q=x/Math.cos(Math.PI/180*a)),this._point=M.subtract(c.getPixelOrigin()),this._radius=isNaN(q)?0:M.x-c.project([U,r-q]).x,this._radiusY=M.y-P.y}else{var Q=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(Q).x}this._updateBounds()}});function V0(r,a,c){return new bl(r,a,c)}var en=bn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){w(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,h=Mi,m,x,P=0,O=this._parts.length;P<O;P++)for(var M=this._parts[P],U=1,q=M.length;U<q;U++){m=M[U-1],x=M[U];var Q=h(r,m,x,!0);Q<a&&(a=Q,c=h(r,m,x))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=te(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Pe,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return jt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=jt(r),h=0,m=r.length;h<m;h++)c?(a[h]=te(r[h]),this._bounds.extend(a[h])):a[h]=this._convertLatLngs(r[h]);return a},_project:function(){var r=new Y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new D(r,r);this._rawPxBounds&&(this._pxBounds=new Y([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var h=r[0]instanceof he,m=r.length,x,P;if(h){for(P=[],x=0;x<m;x++)P[x]=this._map.latLngToLayerPoint(r[x]),c.extend(P[x]);a.push(P)}else for(x=0;x<m;x++)this._projectLatlngs(r[x],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,h,m,x,P,O,M;for(c=0,m=0,x=this._rings.length;c<x;c++)for(M=this._rings[c],h=0,P=M.length;h<P-1;h++)O=vh(M[h],M[h+1],r,h,!0),O&&(a[m]=a[m]||[],a[m].push(O[0]),(O[1]!==M[h+1]||h===P-2)&&(a[m].push(O[1]),m++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,h=r.length;c<h;c++)r[c]=mh(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,h,m,x,P,O,M=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,x=this._parts.length;c<x;c++)for(O=this._parts[c],h=0,P=O.length,m=P-1;h<P;m=h++)if(!(!a&&h===0)&&ph(r,O[m],O[h])<=M)return!0;return!1}});function G0(r,a){return new en(r,a)}en._flat=yh;var Or=en.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=en.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof he&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){en.prototype._setLatLngs.call(this,r),jt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return jt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new D(a,a);if(r=new Y(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,m=this._rings.length,x;h<m;h++)x=hh(this._rings[h],r,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,h,m,x,P,O,M,U;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(x=0,M=this._parts.length;x<M;x++)for(c=this._parts[x],P=0,U=c.length,O=U-1;P<U;O=P++)h=c[P],m=c[O],h.y>r.y!=m.y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(a=!a);return a||en.prototype._containsPoint.call(this,r,!0)}});function K0(r,a){return new Or(r,a)}var tn=Xt.extend({initialize:function(r,a){w(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=b(r)?r:r.features,c,h,m;if(a){for(c=0,h=a.length;c<h;c++)m=a[c],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var x=this.options;if(x.filter&&!x.filter(r))return this;var P=ea(r,x);return P?(P.feature=ra(r),P.defaultOptions=P.options,this.resetStyle(P),x.onEachFeature&&x.onEachFeature(r,P),this.addLayer(P)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function ea(r,a){var c=r.type==="Feature"?r.geometry:r,h=c?c.coordinates:null,m=[],x=a&&a.pointToLayer,P=a&&a.coordsToLatLng||jl,O,M,U,q;if(!h&&!c)return null;switch(c.type){case"Point":return O=P(h),bh(x,r,O,a);case"MultiPoint":for(U=0,q=h.length;U<q;U++)O=P(h[U]),m.push(bh(x,r,O,a));return new Xt(m);case"LineString":case"MultiLineString":return M=ta(h,c.type==="LineString"?0:1,P),new en(M,a);case"Polygon":case"MultiPolygon":return M=ta(h,c.type==="Polygon"?1:2,P),new Or(M,a);case"GeometryCollection":for(U=0,q=c.geometries.length;U<q;U++){var Q=ea({geometry:c.geometries[U],type:"Feature",properties:r.properties},a);Q&&m.push(Q)}return new Xt(m);case"FeatureCollection":for(U=0,q=c.features.length;U<q;U++){var se=ea(c.features[U],a);se&&m.push(se)}return new Xt(m);default:throw new Error("Invalid GeoJSON object.")}}function bh(r,a,c,h){return r?r(a,c):new Ys(c,h&&h.markersInheritOptions&&h)}function jl(r){return new he(r[1],r[0],r[2])}function ta(r,a,c){for(var h=[],m=0,x=r.length,P;m<x;m++)P=a?ta(r[m],a-1,c):(c||jl)(r[m]),h.push(P);return h}function Nl(r,a){return r=te(r),r.alt!==void 0?[_(r.lng,a),_(r.lat,a),_(r.alt,a)]:[_(r.lng,a),_(r.lat,a)]}function na(r,a,c,h){for(var m=[],x=0,P=r.length;x<P;x++)m.push(a?na(r[x],jt(r[x])?0:a-1,c,h):Nl(r[x],h));return!a&&c&&m.length>0&&m.push(m[0].slice()),m}function Ir(r,a){return r.feature?s({},r.feature,{geometry:a}):ra(a)}function ra(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var kl={toGeoJSON:function(r){return Ir(this,{type:"Point",coordinates:Nl(this.getLatLng(),r)})}};Ys.include(kl),bl.include(kl),Xs.include(kl),en.include({toGeoJSON:function(r){var a=!jt(this._latlngs),c=na(this._latlngs,a?1:0,!1,r);return Ir(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),Or.include({toGeoJSON:function(r){var a=!jt(this._latlngs),c=a&&!jt(this._latlngs[0]),h=na(this._latlngs,c?2:a?1:0,!0,r);return a||(h=[h]),Ir(this,{type:(c?"Multi":"")+"Polygon",coordinates:h})}}),Tr.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),Ir(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",h=[];return this.eachLayer(function(m){if(m.toGeoJSON){var x=m.toGeoJSON(r);if(c)h.push(x.geometry);else{var P=ra(x);P.type==="FeatureCollection"?h.push.apply(h,P.features):h.push(P)}}}),c?Ir(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function jh(r,a){return new tn(r,a)}var J0=jh,ia=Ot.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=ge(a),w(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Er(this._image),this},bringToBack:function(){return this._map&&Cr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ge(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:fe("img");if(ie(a,"leaflet-image-layer"),this._zoomAnimated&&ie(a,"leaflet-zoom-animated"),this.options.className&&ie(a,this.options.className),a.onselectstart=g,a.onmousemove=g,a.onload=u(this.fire,this,"load"),a.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Xn(this._image,c,a)},_reset:function(){var r=this._image,a=new Y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();Oe(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){bt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),Q0=function(r,a,c){return new ia(r,a,c)},Nh=ia.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:fe("video");if(ie(a,"leaflet-image-layer"),this._zoomAnimated&&ie(a,"leaflet-zoom-animated"),this.options.className&&ie(a,this.options.className),a.onselectstart=g,a.onmousemove=g,a.onloadeddata=u(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),h=[],m=0;m<c.length;m++)h.push(c[m].src);this._url=c.length>0?h:[a.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var P=fe("source");P.src=this._url[x],a.appendChild(P)}}});function Y0(r,a,c){return new Nh(r,a,c)}var kh=ia.extend({_initImage:function(){var r=this._image=this._url;ie(r,"leaflet-image-layer"),this._zoomAnimated&&ie(r,"leaflet-zoom-animated"),this.options.className&&ie(r,this.options.className),r.onselectstart=g,r.onmousemove=g}});function X0(r,a,c){return new kh(r,a,c)}var qt=Ot.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof he||b(r))?(this._latlng=te(r),w(this,a)):(w(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&bt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&bt(this._container,1),this.bringToFront(),this.options.interactive&&(ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(bt(this._container,0),this._removeTimeout=setTimeout(u(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(Ce(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=te(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Er(this._container),this},bringToBack:function(){return this._map&&Cr(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Xt){a=null;var c=this._source._layers;for(var h in c)if(c[h]._map){a=c[h];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=Z(this.options.offset),c=this._getAnchor();this._zoomAnimated?Oe(this._container,r.add(c)):a=a.add(r).add(c);var h=this._containerBottom=-a.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=h+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});le.include({_initOverlay:function(r,a,c,h){var m=a;return m instanceof r||(m=new r(h).setContent(a)),c&&m.setLatLng(c),m}}),Ot.include({_initOverlay:function(r,a,c,h){var m=c;return m instanceof r?(w(m,h),m._source=this):(m=a&&!h?a:new r(h,this),m.setContent(c)),m}});var sa=qt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,qt.prototype.openOn.call(this,r)},onAdd:function(r){qt.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bn||this._source.on("preclick",tr))},onRemove:function(r){qt.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bn||this._source.off("preclick",tr))},getEvents:function(){var r=qt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=fe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=fe("div",r+"-content-wrapper",a);if(this._contentNode=fe("div",r+"-content",c),Ii(a),ml(this._contentNode),ne(a,"contextmenu",tr),this._tipContainer=fe("div",r+"-tip-container",a),this._tip=fe("div",r+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=fe("a",r+"-close-button",a);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',ne(h,"click",function(m){We(m),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var h=r.offsetHeight,m=this.options.maxHeight,x="leaflet-popup-scrolled";m&&h>m?(a.height=m+"px",ie(r,x)):Ce(r,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Oe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Ci(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,h=this._containerWidth,m=new D(this._containerLeft,-c-this._containerBottom);m._add(er(this._container));var x=r.layerPointToContainerPoint(m),P=Z(this.options.autoPanPadding),O=Z(this.options.autoPanPaddingTopLeft||P),M=Z(this.options.autoPanPaddingBottomRight||P),U=r.getSize(),q=0,Q=0;x.x+h+M.x>U.x&&(q=x.x+h-U.x+M.x),x.x-q-O.x<0&&(q=x.x-O.x),x.y+c+M.y>U.y&&(Q=x.y+c-U.y+M.y),x.y-Q-O.y<0&&(Q=x.y-O.y),(q||Q)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([q,Q]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ey=function(r,a){return new sa(r,a)};le.mergeOptions({closePopupOnClick:!0}),le.include({openPopup:function(r,a,c){return this._initOverlay(sa,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Ot.include({bindPopup:function(r,a){return this._popup=this._initOverlay(sa,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Xt||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){nr(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof bn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var aa=qt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){qt.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){qt.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=qt.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,h=this._map,m=this._container,x=h.latLngToContainerPoint(h.getCenter()),P=h.layerPointToContainerPoint(r),O=this.options.direction,M=m.offsetWidth,U=m.offsetHeight,q=Z(this.options.offset),Q=this._getAnchor();O==="top"?(a=M/2,c=U):O==="bottom"?(a=M/2,c=0):O==="center"?(a=M/2,c=U/2):O==="right"?(a=0,c=U/2):O==="left"?(a=M,c=U/2):P.x<x.x?(O="right",a=0,c=U/2):(O="left",a=M+(q.x+Q.x)*2,c=U/2),r=r.subtract(Z(a,c,!0)).add(q).add(Q),Ce(m,"leaflet-tooltip-right"),Ce(m,"leaflet-tooltip-left"),Ce(m,"leaflet-tooltip-top"),Ce(m,"leaflet-tooltip-bottom"),ie(m,"leaflet-tooltip-"+O),Oe(m,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&bt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ty=function(r,a){return new aa(r,a)};le.include({openTooltip:function(r,a,c){return this._initOverlay(aa,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Ot.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(aa,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Xt||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(ne(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ne(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,h;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),h=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(a)}});var Sh=Lr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Hs(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var h=Z(c.bgPos);a.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function ny(r){return new Sh(r)}Lr.Default=Ri;var zi=Ot.extend({options:{tileSize:256,opacity:1,updateWhenIdle:J.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){w(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),je(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Er(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Cr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof D?r:new D(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),h=0,m=a.length,x;h<m;h++)x=a[h].style.zIndex,a[h]!==this._container&&x&&(c=r(c,+x));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J.ielt9){bt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var h in this._tiles){var m=this._tiles[h];if(!(!m.current||!m.loaded)){var x=Math.min(1,(r-m.loaded)/200);bt(m.el,x),x<1?a=!0:(m.active?c=!0:this._onOpaqueTile(m),m.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(W(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=fe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(je(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var h=this._levels[r],m=this._map;return h||(h=this._levels[r]={},h.el=fe("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=a,h.origin=m.project(m.unproject(m.getPixelOrigin()),r).round(),h.zoom=r,this._setZoomTransform(h,m.getCenter(),m.getZoom()),g(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var h=a.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)je(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,h){var m=Math.floor(r/2),x=Math.floor(a/2),P=c-1,O=new D(+m,+x);O.z=+P;var M=this._tileCoordsToKey(O),U=this._tiles[M];return U&&U.active?(U.retain=!0,!0):(U&&U.loaded&&(U.retain=!0),P>h?this._retainParent(m,x,P,h):!1)},_retainChildren:function(r,a,c,h){for(var m=2*r;m<2*r+2;m++)for(var x=2*a;x<2*a+2;x++){var P=new D(m,x);P.z=c+1;var O=this._tileCoordsToKey(P),M=this._tiles[O];if(M&&M.active){M.retain=!0;continue}else M&&M.loaded&&(M.retain=!0);c+1<h&&this._retainChildren(m,x,c+1,h)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,h){var m=Math.round(a);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var x=this.options.updateWhenZooming&&m!==this._tileZoom;(!h||x)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var h=this._map.getZoomScale(c,r.zoom),m=r.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(a,c)).round();J.any3d?Xn(r.el,m,h):Oe(r.el,m)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),h=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],h).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],h).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],h).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],h).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),h=a.getZoomScale(c,this._tileZoom),m=a.project(r,this._tileZoom).floor(),x=a.getSize().divideBy(h*2);return new Y(m.subtract(x),m.add(x))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(r),m=this._pxBoundsToTileRange(h),x=m.getCenter(),P=[],O=this.options.keepBuffer,M=new Y(m.getBottomLeft().subtract([O,-O]),m.getTopRight().add([O,-O]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var U in this._tiles){var q=this._tiles[U].coords;(q.z!==this._tileZoom||!M.contains(new D(q.x,q.y)))&&(this._tiles[U].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var Q=m.min.y;Q<=m.max.y;Q++)for(var se=m.min.x;se<=m.max.x;se++){var Xe=new D(se,Q);if(Xe.z=this._tileZoom,!!this._isValidTile(Xe)){var De=this._tiles[this._tileCoordsToKey(Xe)];De?De.current=!0:P.push(Xe)}}if(P.sort(function(st,Mr){return st.distanceTo(x)-Mr.distanceTo(x)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Nt=document.createDocumentFragment();for(se=0;se<P.length;se++)this._addTile(P[se],Nt);this._level.el.appendChild(Nt)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(r);return ge(this.options.bounds).overlaps(h)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),h=r.scaleBy(c),m=h.add(c),x=a.unproject(h,r.z),P=a.unproject(m,r.z);return[x,P]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Pe(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new D(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(je(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){ie(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=g,r.onmousemove=g,J.ielt9&&this.options.opacity<1&&bt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),h=this._tileCoordsToKey(r),m=this.createTile(this._wrapCoords(r),u(this._tileReady,this,r));this._initTile(m),this.createTile.length<2&&B(u(this._tileReady,this,r,null,m)),Oe(m,c),this._tiles[h]={el:m,coords:r,current:!0},a.appendChild(m),this.fire("tileloadstart",{tile:m,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var h=this._tileCoordsToKey(r);c=this._tiles[h],c&&(c.loaded=+new Date,this._map._fadeAnimated?(bt(c.el,0),W(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ie(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new D(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new Y(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function ry(r){return new zi(r)}var Ar=zi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=w(this,a),a.detectRetina&&J.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return ne(c,"load",u(this._tileOnLoad,this,a,c)),ne(c,"error",u(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:J.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return j(this._url,s(a,this.options))},_tileOnLoad:function(r,a){J.ielt9?setTimeout(u(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var h=this.options.errorTileUrl;h&&a.getAttribute("src")!==h&&(a.src=h),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,h=this.options.zoomOffset;return c&&(r=a-r),r+h},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=g,a.onerror=g,!a.complete)){a.src=I;var c=this._tiles[r].coords;je(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",I),zi.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===I))return zi.prototype._tileReady.call(this,r,a,c)}});function Ph(r,a){return new Ar(r,a)}var Eh=Ar.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var h in a)h in this.options||(c[h]=a[h]);a=w(this,a);var m=a.detectRetina&&J.retina?2:1,x=this.getTileSize();c.width=x.x*m,c.height=x.y*m,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Ar.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,h=H(c.project(a[0]),c.project(a[1])),m=h.min,x=h.max,P=(this._wmsVersion>=1.3&&this._crs===_h?[m.y,m.x,x.y,x.x]:[m.x,m.y,x.x,x.y]).join(","),O=Ar.prototype.getTileUrl.call(this,r);return O+C(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function iy(r,a){return new Eh(r,a)}Ar.WMS=Eh,Ph.wms=iy;var nn=Ot.extend({options:{padding:.1},initialize:function(r){w(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,a),x=h.multiplyBy(-c).add(m).subtract(this._map._getNewPixelOrigin(r,a));J.any3d?Xn(this._container,x,c):Oe(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new Y(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ch=nn.extend({options:{tolerance:0},getEvents:function(){var r=nn.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){nn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ne(r,"mousemove",this._onMouseMove,this),ne(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ne(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,je(this._container),ve(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){nn.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),h=J.retina?2:1;Oe(a,r.min),a.width=h*c.x,a.height=h*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",J.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){nn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,h=a.prev;c?c.prev=h:this._drawLast=h,h?h.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],h,m;for(m=0;m<a.length;m++){if(h=Number(a[m]),isNaN(h))return;c.push(h)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Y,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)r=h.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,h,m,x,P=r._parts,O=P.length,M=this._ctx;if(O){for(M.beginPath(),c=0;c<O;c++){for(h=0,m=P[c].length;h<m;h++)x=P[c][h],M[h?"lineTo":"moveTo"](x.x,x.y);a&&M.closePath()}this._fillStroke(M,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,h=Math.max(Math.round(r._radius),1),m=(Math.max(Math.round(r._radiusY),1)||h)/h;m!==1&&(c.save(),c.scale(1,m)),c.beginPath(),c.arc(a.x,a.y/m,h,0,Math.PI*2,!1),m!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,h,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(h=c);this._fireEvent(h?[h]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Ce(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,h,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(a)&&(h=c);h!==this._hoveredLayer&&(this._handleMouseOut(r),h&&(ie(this._container,"leaflet-interactive"),this._fireEvent([h],r,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,h=a.prev;if(c)c.prev=h;else return;h?h.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,h=a.prev;if(h)h.next=c;else return;c?c.prev=h:h&&(this._drawLast=h),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Th(r){return J.canvas?new Ch(r):null}var Di=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),sy={_initContainer:function(){this._container=fe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(nn.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Di("shape");ie(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Di("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;je(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,h=r.options,m=r._container;m.stroked=!!h.stroke,m.filled=!!h.fill,h.stroke?(a||(a=r._stroke=Di("stroke")),m.appendChild(a),a.weight=h.weight+"px",a.color=h.color,a.opacity=h.opacity,h.dashArray?a.dashStyle=b(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=h.lineCap.replace("butt","flat"),a.joinstyle=h.lineJoin):a&&(m.removeChild(a),r._stroke=null),h.fill?(c||(c=r._fill=Di("fill")),m.appendChild(c),c.color=h.fillColor||h.color,c.opacity=h.fillOpacity):c&&(m.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),h=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+h+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){Er(r._container)},_bringToBack:function(r){Cr(r._container)}},oa=J.vml?Di:Ad,Bi=nn.extend({_initContainer:function(){this._container=oa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=oa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),ve(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){nn.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),Oe(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=oa("path");r.options.className&&ie(a,r.options.className),r.options.interactive&&ie(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){je(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,Md(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),h=Math.max(Math.round(r._radiusY),1)||c,m="a"+c+","+h+" 0 1,0 ",x=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+m+c*2+",0 "+m+-c*2+",0 ";this._setPath(r,x)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){Er(r._path)},_bringToBack:function(r){Cr(r._path)}});J.vml&&Bi.include(sy);function Lh(r){return J.svg||J.vml?new Bi(r):null}le.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Th(r)||Lh(r)}});var Oh=Or.extend({initialize:function(r,a){Or.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ge(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function ay(r,a){return new Oh(r,a)}Bi.create=oa,Bi.pointsToPath=Md,tn.geometryToLayer=ea,tn.coordsToLatLng=jl,tn.coordsToLatLngs=ta,tn.latLngToCoords=Nl,tn.latLngsToCoords=na,tn.getFeature=Ir,tn.asFeature=ra,le.mergeOptions({boxZoom:!0});var Ih=Wt.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ti(),al(),this._startPoint=this._map.mouseEventToContainerPoint(r),ne(document,{contextmenu:nr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=fe("div","leaflet-zoom-box",this._container),ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new Y(this._point,this._startPoint),c=a.getSize();Oe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(je(this._box),Ce(this._container,"leaflet-crosshair")),Li(),ol(),ve(document,{contextmenu:nr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var a=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});le.addInitHook("addHandler","boxZoom",Ih),le.mergeOptions({doubleClickZoom:!0});var Ah=Wt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),h=a.options.zoomDelta,m=r.originalEvent.shiftKey?c-h:c+h;a.options.doubleClickZoom==="center"?a.setZoom(m):a.setZoomAround(r.containerPoint,m)}});le.addInitHook("addHandler","doubleClickZoom",Ah),le.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Mh=Wt.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new wn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ce(this._map._container,"leaflet-grab"),Ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=ge(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,h=this._draggable._newPos.x,m=(h-a+c)%r+a-c,x=(h+a+c)%r-a-c,P=Math.abs(m+c)<Math.abs(x+c)?m:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(r){var a=this._map,c=a.options,h=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),h)a.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,P=c.easeLinearity,O=m.multiplyBy(P/x),M=O.distanceTo([0,0]),U=Math.min(c.inertiaMaxSpeed,M),q=O.multiplyBy(U/M),Q=U/(c.inertiaDeceleration*P),se=q.multiplyBy(-Q/2).round();!se.x&&!se.y?a.fire("moveend"):(se=a._limitOffset(se,a.options.maxBounds),B(function(){a.panBy(se,{duration:Q,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});le.addInitHook("addHandler","dragging",Mh),le.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Rh=Wt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ne(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ve(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,h=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(h,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,h,m;for(h=0,m=c.left.length;h<m;h++)a[c.left[h]]=[-1*r,0];for(h=0,m=c.right.length;h<m;h++)a[c.right[h]]=[r,0];for(h=0,m=c.down.length;h<m;h++)a[c.down[h]]=[0,r];for(h=0,m=c.up.length;h<m;h++)a[c.up[h]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,h,m;for(h=0,m=c.zoomIn.length;h<m;h++)a[c.zoomIn[h]]=r;for(h=0,m=c.zoomOut.length;h<m;h++)a[c.zoomOut[h]]=-r},_addHooks:function(){ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,h;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(h=this._panKeys[a],r.shiftKey&&(h=Z(h).multiplyBy(3)),c.options.maxBounds&&(h=c._limitOffset(Z(h),c.options.maxBounds)),c.options.worldCopyJump){var m=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(h)));c.panTo(m)}else c.panBy(h)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;nr(r)}}});le.addInitHook("addHandler","keyboard",Rh),le.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var zh=Wt.extend({addHooks:function(){ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=oh(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var h=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),h),nr(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,x=c?Math.ceil(m/c)*c:m,P=r._limitZoom(a+(this._delta>0?x:-x))-a;this._delta=0,this._startTime=null,P&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+P):r.setZoomAround(this._lastMousePos,a+P))}});le.addInitHook("addHandler","scrollWheelZoom",zh);var oy=600;le.mergeOptions({tapHold:J.touchNative&&J.safari&&J.mobile,tapTolerance:15});var Dh=Wt.extend({addHooks:function(){ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new D(a.clientX,a.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(ne(document,"touchend",We),ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),oy),ne(document,"touchend touchcancel contextmenu",this._cancel,this),ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){ve(document,"touchend",We),ve(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new D(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});le.addInitHook("addHandler","tapHold",Dh),le.mergeOptions({touchZoom:J.touch,bounceAtZoomLimits:!0});var Bh=Wt.extend({addHooks:function(){ie(this._map._container,"leaflet-touch-zoom"),ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ce(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),h=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(h)._divideBy(2))),this._startDist=c.distanceTo(h),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ne(document,"touchmove",this._onTouchMove,this),ne(document,"touchend touchcancel",this._onTouchEnd,this),We(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),h=a.mouseEventToContainerPoint(r.touches[1]),m=c.distanceTo(h)/this._startDist;if(this._zoom=a.getScaleZoom(m,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&m<1||this._zoom>a.getMaxZoom()&&m>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var x=c._add(h)._divideBy(2)._subtract(this._centerPoint);if(m===1&&x.x===0&&x.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var P=u(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(P,this,!0),We(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});le.addInitHook("addHandler","touchZoom",Bh),le.BoxZoom=Ih,le.DoubleClickZoom=Ah,le.Drag=Mh,le.Keyboard=Rh,le.ScrollWheelZoom=zh,le.TapHold=Dh,le.TouchZoom=Bh,n.Bounds=Y,n.Browser=J,n.CRS=it,n.Canvas=Ch,n.Circle=bl,n.CircleMarker=Xs,n.Class=de,n.Control=Lt,n.DivIcon=Sh,n.DivOverlay=qt,n.DomEvent=k0,n.DomUtil=j0,n.Draggable=wn,n.Evented=Ze,n.FeatureGroup=Xt,n.GeoJSON=tn,n.GridLayer=zi,n.Handler=Wt,n.Icon=Lr,n.ImageOverlay=ia,n.LatLng=he,n.LatLngBounds=Pe,n.Layer=Ot,n.LayerGroup=Tr,n.LineUtil=D0,n.Map=le,n.Marker=Ys,n.Mixin=O0,n.Path=bn,n.Point=D,n.PolyUtil=I0,n.Polygon=Or,n.Polyline=en,n.Popup=sa,n.PosAnimation=lh,n.Projection=B0,n.Rectangle=Oh,n.Renderer=nn,n.SVG=Bi,n.SVGOverlay=kh,n.TileLayer=Ar,n.Tooltip=aa,n.Transformation=Go,n.Util=ee,n.VideoOverlay=Nh,n.bind=u,n.bounds=H,n.canvas=Th,n.circle=V0,n.circleMarker=H0,n.control=Ai,n.divIcon=ny,n.extend=s,n.featureGroup=Z0,n.geoJSON=jh,n.geoJson=J0,n.gridLayer=ry,n.icon=W0,n.imageOverlay=Q0,n.latLng=te,n.latLngBounds=ge,n.layerGroup=F0,n.map=S0,n.marker=q0,n.point=Z,n.polygon=K0,n.polyline=G0,n.popup=ey,n.rectangle=ay,n.setOptions=w,n.stamp=d,n.svg=Lh,n.svgOverlay=X0,n.tileLayer=Ph,n.tooltip=ty,n.transformation=Si,n.version=i,n.videoOverlay=Y0;var ly=window.L;n.noConflict=function(){return window.L=ly,this},window.L=n})})(yu,yu.exports);var Zs=yu.exports;const Bv=Am(Zs);function Td(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Ld(t,e){return e==null?function(i,s){const l=E.useRef();return l.current||(l.current=t(i,s)),l}:function(i,s){const l=E.useRef();l.current||(l.current=t(i,s));const u=E.useRef(i),{instance:f}=l.current;return E.useEffect(function(){u.current!==i&&(e(f,i,u.current),u.current=i)},[f,i,s]),l}}function Hj(t,e){E.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var l;(l=e.layerContainer)==null||l.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Uv(t){return function(n){const i=zv(),s=t(Cd(n,i),i);return Av(i.map,n.attribution),Dv(s.current,n.eventHandlers),Hj(s.current,i),s}}function Vj(t,e){const n=Ld(t,e),i=Uv(n);return Fj(i)}function Gj(t,e){const n=Ld(t),i=qj(n,e);return Zj(i)}function Kj(t,e){const n=Ld(t,e),i=Uv(n);return Wj(i)}function Jj(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function xu(){return xu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xu.apply(this,arguments)}function Qj({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:l,placeholder:u,style:f,whenReady:d,zoom:p,...v},g){const[_]=E.useState({className:s,id:l,style:f}),[y,S]=E.useState(null);E.useImperativeHandle(g,()=>(y==null?void 0:y.map)??null,[y]);const w=E.useCallback(N=>{if(N!==null&&y===null){const j=new Zs.Map(N,v);n!=null&&p!=null?j.setView(n,p):t!=null&&j.fitBounds(t,e),d!=null&&j.whenReady(d),S(Uj(j))}},[]);E.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const C=y?Kt.createElement(Rv,{value:y},i):u??null;return Kt.createElement("div",xu({},_,{ref:w}),C)}const Yj=E.forwardRef(Qj),Xj=Vj(function({position:e,...n},i){const s=new Zs.Marker(e,n);return Td(s,$j(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),e2=Gj(function(e,n){const i=new Zs.Popup(e,n.overlayContainer);return Td(i,n)},function(e,n,{position:i},s){E.useEffect(function(){const{instance:u}=e;function f(p){p.popup===u&&(u.update(),s(!0))}function d(p){p.popup===u&&s(!1)}return n.map.on({popupopen:f,popupclose:d}),n.overlayContainer==null?(i!=null&&u.setLatLng(i),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){var v;n.map.off({popupopen:f,popupclose:d}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(u)}},[e,n,s,i])}),t2=Kj(function({url:e,...n},i){const s=new Zs.TileLayer(e,Cd(n,i));return Td(s,i)},function(e,n,i){Jj(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)});delete Bv.Icon.Default.prototype._getIconUrl;Bv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const n2=({latitude:t,longitude:e,title:n="Ubicación de la propiedad",address:i,height:s="300px",zoom:l=15,showMarker:u=!0,className:f=""})=>{const d=19.432608,p=-99.133209,v=t||d,g=e||p,_=t&&e;return o.jsxs("div",{className:`relative ${f}`,children:[o.jsxs(Yj,{center:[v,g],zoom:l,style:{height:s,width:"100%"},className:"rounded-lg",children:[o.jsx(t2,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u&&_&&o.jsx(Xj,{position:[v,g],children:o.jsx(e2,{children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:n}),i&&o.jsx("p",{className:"text-sm text-gray-600",children:i}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Lat: ",v.toFixed(6),", Lng: ",g.toFixed(6)]})]})})})]}),!_&&o.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-75 flex items-center justify-center rounded-lg",children:o.jsxs("div",{className:"text-center p-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsxs("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),o.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Ubicación no disponible"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"La propiedad no tiene coordenadas de ubicación"})]})})]})};function r2(){const{id:t}=ev(),[e,n]=E.useState(null),[i,s]=E.useState(!0),[l,u]=E.useState(0),[f,d]=E.useState(!1),{startTracking:p,trackContact:v,trackAction:g,endTracking:_}=Dj(t||"","direct"),y=E.useRef(null);E.useEffect(()=>(t&&(w(t),S()),()=>{y.current&&_()}),[t]);const S=async()=>{y.current=await p()},w=async b=>{s(!0);try{const{data:k,error:I}=await G.from("properties").select("*").eq("id",b).single();if(I)throw I;if(k){const{data:T}=await G.from("user_profiles").select("full_name, phone, email").eq("id",k.agent_id).single();n({...k,agents:T})}}catch(k){console.error("Error fetching property:",k),n(null)}s(!1)},C=(b,k)=>{const I=new Intl.NumberFormat("es-MX",{style:"currency",currency:"USD"});return k==="alquiler"?`${I.format(b)}/mes`:I.format(b)},N=b=>({casa:"Casa",departamento:"Departamento",oficina:"Oficina",local_comercial:"Local Comercial",terreno:"Terreno",bodega:"Bodega",quinta:"Quinta",penthouse:"Penthouse"})[b]||b,j=b=>({draft:"Borrador",active:"Activa",paused:"Pausada",expired:"Expirada",sold:"Vendida",rented:"Alquilada"})[b]||b;return i?o.jsx("div",{className:"min-h-screen flex justify-center items-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e?o.jsxs("div",{className:"min-h-screen bg-white",children:[o.jsx("div",{className:"bg-white border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ce,{to:"/properties",className:"flex items-center space-x-2 text-primary-600 hover:text-primary-700 transition-colors",children:[o.jsx(mj,{className:"h-5 w-5"}),o.jsx("span",{children:"Volver a propiedades"})]}),o.jsx("button",{onClick:()=>{const b=!f;d(b),g(b?"favorite":"unfavorite",{action:b?"add":"remove"})},className:`p-2 rounded-full transition-colors ${f?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:o.jsx(vo,{className:`h-6 w-6 ${f?"fill-current":""}`})})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"mb-8 p-6 bg-green-50 border-2 border-green-200 rounded-lg",children:[o.jsx("h2",{className:"text-lg font-bold text-green-800 mb-2",children:"✅ SISTEMA DE IMÁGENES FUNCIONANDO"}),o.jsx("p",{className:"text-green-700",children:"El problema de las imágenes ha sido resuelto. Ahora puedes:"}),o.jsxs("ul",{className:"text-green-700 mt-2 ml-4 list-disc",children:[o.jsx("li",{children:'Subir imágenes desde "Agregar Propiedad" sin errores'}),o.jsx("li",{children:"Ver las imágenes correctamente en los listados"}),o.jsx("li",{children:"Disfrutar de un sistema de storage optimizado"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:e.images&&e.images.length>0?e.images[l]:"https://via.placeholder.com/800x400/f3f4f6/9ca3af?text=Sin+Imagen",alt:e.title,className:"w-full h-96 object-cover rounded-lg",onError:b=>{console.log("Error loading image:",e.images[l]),b.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzljYTNhZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkVycm9yIGNhcmdhbmRvIGltYWdlbjwvdGV4dD48L3N2Zz4=",b.currentTarget.onerror=null}}),e.images&&e.images.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>u(l>0?l-1:e.images.length-1),className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:"←"}),o.jsx("button",{onClick:()=>u(l<e.images.length-1?l+1:0),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:"→"})]})]}),e.images&&e.images.length>1&&o.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:e.images.map((b,k)=>o.jsx("button",{onClick:()=>u(k),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${k===l?"border-primary-600":"border-gray-200 hover:border-gray-300"}`,children:o.jsx("img",{src:b,alt:`${e.title} - imagen ${k+1}`,className:"w-full h-full object-cover",onError:I=>{console.log("Error loading thumbnail:",b),I.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5FcnJvcjwvdGV4dD48L3N2Zz4=",I.currentTarget.onerror=null}})},k))})]}),o.jsxs("div",{className:"mt-8 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e.title}),o.jsx("span",{className:"text-sm bg-gray-100 text-gray-700 px-3 py-1 rounded-full",children:N(e.property_type)})]}),e.status&&e.status!=="active"&&o.jsx("div",{className:"mb-4 p-3 rounded-lg border-l-4 border-yellow-400 bg-yellow-50",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("span",{className:"text-yellow-600",children:"⚠️"})}),o.jsx("div",{className:"ml-2",children:o.jsxs("p",{className:"text-sm text-yellow-700",children:["Esta propiedad está en estado:"," ",o.jsx("strong",{children:j(e.status)}),e.status==="draft"&&" - No es visible para el público",e.status==="paused"&&" - Temporalmente oculta",e.status==="expired"&&" - El período de publicación ha expirado",e.status==="sold"&&" - Ya ha sido vendida",e.status==="rented"&&" - Ya ha sido alquilada"]})})]})}),o.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[o.jsx(Yt,{className:"h-5 w-5 mr-2"}),o.jsxs("span",{children:[e.address,", ",e.city,e.state?`, ${e.state}`:""]})]}),o.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-6",children:C(e.price,e.transaction_type)})]}),(e.bedrooms||e.bathrooms||e.area_total||e.parking_spaces&&e.parking_spaces>0)&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Características"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.bedrooms&&e.bedrooms>0&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Nd,{className:"h-5 w-5 text-gray-600"}),o.jsxs("span",{className:"text-gray-700",children:[e.bedrooms," habitaciones"]})]}),e.bathrooms&&e.bathrooms>0&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(jd,{className:"h-5 w-5 text-gray-600"}),o.jsxs("span",{className:"text-gray-700",children:[e.bathrooms," baños"]})]}),e.area_total&&e.area_total>0&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Pd,{className:"h-5 w-5 text-gray-600"}),o.jsxs("span",{className:"text-gray-700",children:[e.area_total," m²"]})]}),e.parking_spaces&&e.parking_spaces>0&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Tv,{className:"h-5 w-5 text-gray-600"}),o.jsxs("span",{className:"text-gray-700",children:[e.parking_spaces," estacionamientos"]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Descripción"}),o.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:e.description})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información de la propiedad"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Tipo de operación:"}),o.jsx("p",{className:"font-medium",children:e.transaction_type==="venta"?"Venta":"Alquiler"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Estado:"}),o.jsx("p",{className:"font-medium",children:e.status==="published"?"Disponible":"No disponible"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Publicado:"}),o.jsx("p",{className:"font-medium",children:new Date(e.created_at).toLocaleDateString("es-MX")})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Actualizado:"}),o.jsx("p",{className:"font-medium",children:new Date(e.updated_at).toLocaleDateString("es-MX")})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ubicación"}),e.latitude&&e.longitude&&o.jsxs("button",{onClick:()=>{const b=`https://www.google.com/maps/dir/?api=1&destination=${e.latitude},${e.longitude}`;window.open(b,"_blank"),g("directions_request",{method:"google_maps",destination:`${e.latitude},${e.longitude}`})},className:"flex items-center space-x-1 text-primary-600 hover:text-primary-700 text-sm font-medium transition-colors",children:[o.jsx(Ov,{className:"h-4 w-4"}),o.jsx("span",{children:"Cómo llegar"})]})]}),o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-start space-x-2 text-gray-600",children:[o.jsx(Yt,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm",children:e.address}),o.jsxs("p",{className:"text-sm",children:[e.city,e.state?`, ${e.state}`:"",e.country?`, ${e.country}`:""]}),e.postal_code&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["CP: ",e.postal_code]})]})]})}),o.jsx(n2,{latitude:e.latitude,longitude:e.longitude,title:e.title,address:e.address,height:"400px",zoom:16,className:"mt-4"}),e.latitude&&e.longitude&&o.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[o.jsxs("span",{children:["Coordenadas: ",e.latitude.toFixed(6),", ",e.longitude.toFixed(6)]}),o.jsx("span",{children:"Mapa interactivo - Arrastra para explorar"})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contactar al agente"}),o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-primary-600 text-white rounded-full flex items-center justify-center",children:o.jsx(yi,{className:"h-6 w-6"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Agente PropFinder"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Agente certificado"})]})]}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[o.jsx(Ho,{className:"h-4 w-4"}),o.jsx("span",{className:"text-sm",children:"+52 55 1234 5678"})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[o.jsx(qo,{className:"h-4 w-4"}),o.jsx("span",{className:"text-sm",children:"contacto@propfinder.com"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{className:"btn-primary w-full",onClick:()=>{v(),g("phone_contact",{method:"call"})},children:"Llamar ahora"}),o.jsx("button",{className:"btn-secondary w-full",onClick:()=>{v(),g("message_contact",{method:"message"})},children:"Enviar mensaje"}),o.jsx("button",{className:"btn-secondary w-full",onClick:()=>{g("visit_request",{method:"schedule"})},children:"Agendar visita"})]})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Calculadora de hipoteca"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enganche (%)"}),o.jsx("input",{type:"number",defaultValue:"20",className:"input-field",min:"0",max:"100"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plazo (años)"}),o.jsx("input",{type:"number",defaultValue:"20",className:"input-field",min:"1",max:"30"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tasa de interés (%)"}),o.jsx("input",{type:"number",defaultValue:"8.5",step:"0.1",className:"input-field"})]}),o.jsx("button",{className:"btn-secondary w-full",children:"Calcular mensualidad"})]})]})})]})]})]})]}):o.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Propiedad no encontrada"}),o.jsx(ce,{to:"/properties",className:"btn-primary",children:"Ver todas las propiedades"})]})}function i2(){const[t,e]=E.useState(""),[n,i]=E.useState(""),[s,l]=E.useState(!1),[u,f]=E.useState(""),{signIn:d,user:p,isAdmin:v,loading:g}=xn();if(g)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(p&&v)return o.jsx(gn,{to:"/admin",replace:!0});if(p&&!v)return o.jsx(gn,{to:"/",replace:!0});const _=async y=>{y.preventDefault(),l(!0),f("");try{const{error:S}=await d(t,n);S&&f(S.message||"Error al iniciar sesión")}catch{f("Error inesperado al iniciar sesión")}finally{l(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:o.jsx(bj,{className:"h-6 w-6 text-blue-600"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Iniciar Sesión - Admin"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Acceso exclusivo para administradores"})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:_,children:[u&&o.jsx("div",{className:"rounded-md bg-red-50 p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(go,{className:"h-5 w-5 text-red-400"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error de autenticación"}),o.jsx("div",{className:"mt-2 text-sm text-red-700",children:u})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(yi,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email del administrador",value:t,onChange:y=>e(y.target.value)})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(pu,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:n,onChange:y=>i(y.target.value)})]})]})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Iniciando sesión..."]}):"Iniciar Sesión"})})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"Demo: admin@propfinder.com / admin123"})})]})})}function s2(){const[t,e]=E.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[n,i]=E.useState(!1),[s,l]=E.useState(""),[u,f]=E.useState(!1),{signUp:d,user:p}=xn();if(p)return o.jsx(gn,{to:"/",replace:!0});const v=_=>{e({...t,[_.target.name]:_.target.value})},g=async _=>{if(_.preventDefault(),i(!0),l(""),!t.firstName.trim()||!t.lastName.trim()){l("El nombre y apellido son obligatorios"),i(!1);return}if(t.password!==t.confirmPassword){l("Las contraseñas no coinciden"),i(!1);return}if(t.password.length<6){l("La contraseña debe tener al menos 6 caracteres"),i(!1);return}try{const y=`${t.firstName.trim()} ${t.lastName.trim()}`,{error:S}=await d(t.email,t.password,y,t.firstName.trim(),t.lastName.trim());S?l(S.message||"Error al crear la cuenta"):f(!0)}catch{l("Error inesperado al crear la cuenta")}finally{i(!1)}};return u?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"max-w-md w-full space-y-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-green-100",children:o.jsx(An,{className:"h-6 w-6 text-green-600"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"¡Cuenta Creada Exitosamente!"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Tu cuenta ha sido creada como comprador. Revisa tu email para confirmar tu cuenta."}),o.jsx("div",{className:"mt-6",children:o.jsx(ce,{to:"/login",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Iniciar Sesión"})})]})})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:o.jsx(Cj,{className:"h-6 w-6 text-blue-600"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear Cuenta"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Únete a PropFinder como comprador"})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[s&&o.jsx("div",{className:"rounded-md bg-red-50 p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(go,{className:"h-5 w-5 text-red-400"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),o.jsx("div",{className:"mt-2 text-sm text-red-700",children:s})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"sr-only",children:"Nombre"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(yi,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nombre",value:t.firstName,onChange:v})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"sr-only",children:"Apellido"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(yi,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Apellido",value:t.lastName,onChange:v})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(qo,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email",value:t.email,onChange:v})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(pu,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:t.password,onChange:v})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirmar contraseña"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(pu,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-lg relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirmar contraseña",value:t.confirmPassword,onChange:v})]})]})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creando cuenta..."]}):"Crear Cuenta"})}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["¿Ya tienes cuenta?"," ",o.jsx(ce,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Iniciar sesión"})]})})]})]})})}function a2(){const{user:t,signOut:e,isAdmin:n,loading:i}=xn(),[s,l]=E.useState([]),[u,f]=E.useState(!0),[d,p]=E.useState(null),[v,g]=E.useState(""),[_,y]=E.useState(null),S=async()=>{try{f(!0);const{data:I,error:T}=await G.from("agents").select("*").order("applied_at",{ascending:!1});if(T){console.error("Error cargando aplicaciones:",T);return}l(I||[])}catch(I){console.error("Error cargando aplicaciones:",I)}finally{f(!1)}},w=async(I,T)=>{try{y(I);const{error:A}=await G.from("agents").update({approval_status:T,approval_notes:v,approved_by:t==null?void 0:t.id,publicaciones_disponibles:T==="approved"?2:0,is_verified:T==="approved"}).eq("id",I);if(A)throw A;if(T==="approved"){const{error:z}=await G.from("user_profiles").update({role:"agent"}).eq("id",I);if(z)throw z}await S(),p(null),g("")}catch(A){console.error("Error procesando aplicación:",A),alert("Error al procesar la aplicación")}finally{y(null)}};if(E.useEffect(()=>{t&&n&&S()},[t,n]),i)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!t||!n)return o.jsx(gn,{to:"/login",replace:!0});const C=async()=>{await e()},N=s.filter(I=>I.approval_status==="pending"),j=s.filter(I=>I.approval_status==="approved"),b=s.filter(I=>I.approval_status==="rejected"),k=I=>{switch(I){case"pending":return o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pendiente"});case"approved":return o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Aprobado"});case"rejected":return o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Rechazado"});default:return o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Desconocido"})}};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(yi,{className:"h-8 w-8 text-blue-600 mr-3"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Panel de Administrador"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Gestión de Aplicaciones de Agentes"})]})]}),o.jsxs("button",{onClick:C,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[o.jsx(Lv,{className:"h-4 w-4 mr-2"}),"Cerrar Sesión"]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(gi,{className:"h-8 w-8 text-yellow-600"})}),o.jsxs("div",{className:"ml-5",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pendientes"}),o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:N.length})]})]})})}),o.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(An,{className:"h-8 w-8 text-green-600"})}),o.jsxs("div",{className:"ml-5",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Aprobados"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:j.length})]})]})})}),o.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Ed,{className:"h-8 w-8 text-red-600"})}),o.jsxs("div",{className:"ml-5",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Rechazados"}),o.jsx("p",{className:"text-2xl font-bold text-red-600",children:b.length})]})]})})}),o.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(lc,{className:"h-8 w-8 text-blue-600"})}),o.jsxs("div",{className:"ml-5",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Total"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.length})]})]})})})]}),o.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Aplicaciones de Agentes"})}),u?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(lc,{className:"mx-auto h-12 w-12 text-gray-400"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay aplicaciones"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No se han enviado aplicaciones para ser agente aún."})]}):o.jsx("ul",{className:"divide-y divide-gray-200",children:s.map(I=>o.jsx("li",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(lc,{className:"h-10 w-10 text-gray-400"})}),o.jsxs("div",{className:"ml-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:I.full_name||I.email}),o.jsx("div",{className:"ml-2",children:k(I.approval_status)})]}),o.jsx("p",{className:"text-sm text-gray-500",children:I.email}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Aplicado:"," ",new Date(I.applied_at).toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("button",{onClick:()=>p(I),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(vi,{className:"h-4 w-4 mr-1"}),"Ver Detalles"]}),I.approval_status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>{p(I),g("Aplicación aprobada. Bienvenido al equipo de agentes.")},disabled:_===I.id,className:"inline-flex items-center px-3 py-1 border border-transparent rounded-md text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:_===I.id?"Procesando...":"Aprobar"}),o.jsx("button",{onClick:()=>{p(I),g("Aplicación rechazada. Por favor revisa los requisitos.")},disabled:_===I.id,className:"inline-flex items-center px-3 py-1 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:_===I.id?"Procesando...":"Rechazar"})]})]})]})},I.id))})]})]}),d&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:o.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles de la Aplicación"}),o.jsx("button",{onClick:()=>{p(null),g("")},className:"text-gray-400 hover:text-gray-600",children:o.jsx(Tj,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.full_name||"No especificado"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.phone||"No especificado"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Número de Licencia"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.license_number||"No especificado"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Empresa"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.company_name||"No especificado"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sitio Web"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.website_url||"No especificado"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripción"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.description||"No especificado"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),o.jsx("div",{className:"mt-1",children:k(d.approval_status)})]}),d.approval_status==="pending"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notas de Aprobación"}),o.jsx("textarea",{value:v,onChange:I=>g(I.target.value),rows:3,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingresa notas para el aplicante..."})]}),d.approval_notes&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notas del Administrador"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d.approval_notes})]})]}),d.approval_status==="pending"&&o.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>w(d.id,"rejected"),disabled:_===d.id,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:_===d.id?"Procesando...":"Rechazar"}),o.jsx("button",{onClick:()=>w(d.id,"approved"),disabled:_===d.id,className:"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:_===d.id?"Procesando...":"Aprobar"})]})]})})]})}function o2(){const{user:t,isAgent:e,userProfile:n,refreshProfile:i}=xn(),[s,l]=E.useState({phone:"",licenseNumber:"",companyName:"",websiteUrl:"",description:""}),[u,f]=E.useState(!1),[d,p]=E.useState(""),[v,g]=E.useState(!1),[_,y]=E.useState(null),[S,w]=E.useState(!0);if(E.useEffect(()=>{(async()=>{if(t)try{const{data:b,error:k}=await G.from("agents").select("id, approval_status, approval_notes").eq("id",t.id).single();!k&&b&&y(b)}catch{}finally{w(!1)}})()},[t]),!t)return o.jsx(gn,{to:"/login",replace:!0});if(e||(_==null?void 0:_.approval_status)==="approved")return o.jsx(gn,{to:"/agent-dashboard",replace:!0});if(S)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if((_==null?void 0:_.approval_status)==="pending")return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"max-w-md w-full space-y-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-yellow-100",children:o.jsx(gi,{className:"h-8 w-8 text-yellow-600"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Aplicación Pendiente"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Tu solicitud para ser agente está siendo revisada por un administrador."}),o.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(go,{className:"h-5 w-5 text-yellow-400"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"¿Qué sigue?"}),o.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Un administrador revisará tu aplicación"}),o.jsx("li",{children:"Recibirás una notificación cuando sea aprobada"}),o.jsx("li",{children:"Una vez aprobada, tendrás acceso completo como agente"})]})})]})]})}),o.jsx("button",{onClick:()=>window.location.href="/",className:"mt-6 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al Inicio"})]})})});if((_==null?void 0:_.approval_status)==="rejected")return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"max-w-md w-full space-y-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-red-100",children:o.jsx(Ed,{className:"h-8 w-8 text-red-600"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Aplicación Rechazada"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Tu solicitud para ser agente fue rechazada."}),_.approval_notes&&o.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:o.jsxs("p",{className:"text-sm text-red-700",children:[o.jsx("strong",{children:"Motivo:"})," ",_.approval_notes]})}),o.jsxs("div",{className:"mt-6 space-y-3",children:[o.jsx("button",{onClick:()=>{y(null),p("")},className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Aplicar Nuevamente"}),o.jsx("button",{onClick:()=>window.location.href="/",className:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al Inicio"})]})]})})});const C=j=>{l({...s,[j.target.name]:j.target.value})},N=async j=>{var b,k,I,T,A;j.preventDefault(),f(!0),p("");try{const{data:z}=await G.from("agents").select("id, approval_status, approval_notes").eq("id",t.id).single();if(z){if(z.approval_status==="pending"){p("Ya tienes una aplicación pendiente de aprobación. Espera la respuesta del administrador."),f(!1);return}else if(z.approval_status==="approved"){p("Ya eres un agente aprobado."),f(!1);return}else if(z.approval_status==="rejected"){p(`Tu aplicación fue rechazada. Motivo: ${z.approval_notes||"Contacta al administrador"}`),f(!1);return}}const R=(n==null?void 0:n.full_name)||`${(n==null?void 0:n.first_name)||""} ${(n==null?void 0:n.last_name)||""}`.trim()||((b=t.user_metadata)==null?void 0:b.full_name)||((k=t.user_metadata)==null?void 0:k.name)||((I=t.email)==null?void 0:I.split("@")[0])||"Usuario",{error:F}=await G.from("agents").insert({id:t.id,full_name:R,first_name:(n==null?void 0:n.first_name)||((T=t.user_metadata)==null?void 0:T.first_name)||"",last_name:(n==null?void 0:n.last_name)||((A=t.user_metadata)==null?void 0:A.last_name)||"",email:t.email,phone:s.phone,license_number:s.licenseNumber||null,company_name:s.companyName||null,website_url:s.websiteUrl||null,description:s.description||null,publicaciones_disponibles:0,is_verified:!1,rating:0,total_ratings:0,approval_status:"pending",applied_at:new Date().toISOString()});if(F)throw F;const{error:B}=await G.from("user_profiles").update({phone:s.phone,updated_at:new Date().toISOString()}).eq("id",t.id);if(B)throw B;await i(),g(!0)}catch(z){z.code==="23505"?p("Ya tienes una aplicación registrada. Contacta al administrador."):p(z.message||"Error al enviar aplicación")}finally{f(!1)}};return v?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"max-w-md w-full space-y-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-yellow-100",children:o.jsx(An,{className:"h-8 w-8 text-yellow-600"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"¡Aplicación Enviada!"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Tu solicitud para ser agente ha sido enviada y está pendiente de aprobación"}),o.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Vn,{className:"h-5 w-5 text-yellow-400"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"¿Qué sigue?"}),o.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:o.jsxs("ul",{className:"list-disc space-y-1 ml-5",children:[o.jsx("li",{children:"Un administrador revisará tu aplicación"}),o.jsx("li",{children:"Recibirás una notificación cuando sea aprobada"}),o.jsx("li",{children:"Una vez aprobada, tendrás acceso completo como agente"}),o.jsx("li",{children:"Incluirá 2 publicaciones iniciales para subir propiedades"})]})})]})]})}),o.jsx("div",{className:"mt-6",children:o.jsx("button",{onClick:()=>window.location.href="/",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al Inicio"})})]})})}):o.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"max-w-2xl mx-auto",children:o.jsx("div",{className:"bg-white shadow rounded-lg",children:o.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Sd,{className:"h-8 w-8 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Convertirse en Agente"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Completa tu perfil para comenzar a vender propiedades"})]})]}),d&&o.jsx("div",{className:"mb-6 rounded-md bg-red-50 p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(go,{className:"h-5 w-5 text-red-400"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),o.jsx("div",{className:"mt-2 text-sm text-red-700",children:d})]})]})}),o.jsxs("form",{onSubmit:N,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Teléfono *"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Ho,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"tel",name:"phone",id:"phone",required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ej: +57 300 123 4567",value:s.phone,onChange:C})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"licenseNumber",className:"block text-sm font-medium text-gray-700",children:"Número de Licencia"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(vj,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",name:"licenseNumber",id:"licenseNumber",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ej: LIC-2024-001",value:s.licenseNumber,onChange:C})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700",children:"Empresa/Inmobiliaria"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(vr,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",name:"companyName",id:"companyName",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ej: Inmobiliaria XYZ",value:s.companyName,onChange:C})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"websiteUrl",className:"block text-sm font-medium text-gray-700",children:"Sitio Web"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{type:"url",name:"websiteUrl",id:"websiteUrl",className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"https://mi-sitio-web.com",value:s.websiteUrl,onChange:C})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descripción Profesional"}),o.jsx("div",{className:"mt-1",children:o.jsx("textarea",{name:"description",id:"description",rows:4,className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Describe tu experiencia, especialización y qué te hace único como agente inmobiliario...",value:s.description,onChange:C})})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Vn,{className:"h-5 w-5 text-blue-400"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Beneficios de ser agente"}),o.jsx("div",{className:"mt-2 text-sm text-blue-700",children:o.jsxs("ul",{className:"list-disc space-y-1 ml-5",children:[o.jsx("li",{children:"2 publicaciones iniciales gratuitas"}),o.jsx("li",{children:"Publica propiedades ilimitadas"}),o.jsx("li",{children:"Panel de control personalizado"}),o.jsx("li",{children:"Gestión de leads y contactos"}),o.jsx("li",{children:"Estadísticas de rendimiento"})]})})]})]})}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:u,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Procesando..."]}):"Convertirse en Agente"})]})]})]})})})})}function l2(t){const[e,n]=E.useState([]),[i,s]=E.useState(!0),[l,u]=E.useState(null);E.useEffect(()=>{if(!t){s(!1);return}f()},[t]);const f=async()=>{try{s(!0),u(null);const{data:p,error:v}=await G.from("properties").select("*").eq("agent_id",t).eq("status","active").order("published_at",{ascending:!1});if(v)throw v;n(p||[])}catch(p){console.error("Error loading active properties:",p),u(p instanceof Error?p.message:"Error desconocido")}finally{s(!1)}},d=()=>{t&&f()};return{activeProperties:e,activePropertiesCount:e.length,loading:i,error:l,refreshActiveProperties:d}}function Em(){var d;const{user:t,isAgent:e,agentProfile:n,userProfile:i,loading:s}=xn(),{activePropertiesCount:l,loading:u}=l2(t==null?void 0:t.id);if(s)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!t||!e)return o.jsx(gn,{to:"/become-agent",replace:!0});const f=[{name:"Propiedades Activas",value:u?"...":l.toString(),icon:vr,color:"bg-blue-500"},{name:"Créditos Disponibles",value:(n==null?void 0:n.credits)||"0",icon:gu,color:"bg-green-500"},{name:"Publicaciones Gratuitas",value:`${(n==null?void 0:n.free_publications_used)||0}/2`,icon:es,color:"bg-blue-500"},{name:"Rating Promedio",value:((d=n==null?void 0:n.rating)==null?void 0:d.toFixed(1))||"0.0",icon:Vn,color:"bg-yellow-500"},{name:"Vistas Totales",value:"0",icon:vi,color:"bg-purple-500"}];return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(vr,{className:"h-8 w-8 text-blue-600 mr-3"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Panel de Agente"}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Bienvenido, ",i==null?void 0:i.full_name]})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[n!=null&&n.is_verified?o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✓ Verificado"}):o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"⏳ Pendiente de verificación"}),o.jsxs(ce,{to:"/add-property",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(yo,{className:"h-4 w-4 mr-2"}),"Nueva Propiedad"]}),o.jsxs(ce,{to:"/payment-plans",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[o.jsx(es,{className:"h-4 w-4 mr-2"}),"Comprar Planes"]})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(n==null?void 0:n.publicaciones_disponibles)>0&&(n==null?void 0:n.credits)===0&&o.jsx("div",{className:"mb-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(es,{className:"h-5 w-5 text-blue-400"})}),o.jsx("div",{className:"ml-3",children:o.jsxs("p",{className:"text-sm text-blue-700",children:[o.jsx("strong",{children:"📢 Nuevo Sistema de Pagos Implementado:"}),'Ahora usamos PayPal para comprar créditos. Las publicaciones mostradas son datos de prueba. Usa el botón "Comprar Créditos" para acceder al nuevo sistema PayPal.',(n==null?void 0:n.is_new_agent)&&o.jsx("span",{className:"block mt-1 font-medium",children:"🎁 Como agente nuevo, tienes 2 publicaciones gratuitas disponibles."})]})})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:f.map(p=>o.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:`h-8 w-8 rounded-md ${p.color} flex items-center justify-center`,children:o.jsx(p.icon,{className:"h-4 w-4 text-white"})})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:p.name}),o.jsx("dd",{className:"text-lg font-medium text-gray-900",children:p.value})]})})]})})},p.name))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"bg-white shadow rounded-lg",children:o.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información del Agente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Información Personal"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[o.jsx(qo,{className:"h-4 w-4 text-gray-400 mr-2"}),i==null?void 0:i.email]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[o.jsx(Ho,{className:"h-4 w-4 text-gray-400 mr-2"}),(i==null?void 0:i.phone)||"No especificado"]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Información Profesional"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"text-sm text-gray-900",children:[o.jsx("span",{className:"font-medium",children:"Empresa:"})," ",(n==null?void 0:n.company_name)||"No especificada"]}),o.jsxs("div",{className:"text-sm text-gray-900",children:[o.jsx("span",{className:"font-medium",children:"Licencia:"})," ",(n==null?void 0:n.license_number)||"No especificada"]}),(n==null?void 0:n.website_url)&&o.jsxs("div",{className:"text-sm text-gray-900",children:[o.jsx("span",{className:"font-medium",children:"Web:"})," ",o.jsx("a",{href:n.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-500",children:n.website_url})]})]})]})]}),(n==null?void 0:n.description)&&o.jsxs("div",{className:"mt-6",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Descripción"}),o.jsx("p",{className:"text-sm text-gray-900",children:n.description})]}),o.jsxs("div",{className:"mt-6 flex space-x-3",children:[o.jsxs(ce,{to:"/my-properties",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(vr,{className:"h-4 w-4 mr-2"}),"Mis Propiedades"]}),o.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Pj,{className:"h-4 w-4 mr-2"}),"Editar Perfil"]})]})]})})}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-white shadow rounded-lg",children:o.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado de Verificación"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full mr-3"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Cuenta creada"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full mr-3"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Información completada"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"h-2 w-2 bg-yellow-500 rounded-full mr-3"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Verificación pendiente"})]})]})]})}),o.jsx("div",{className:"bg-white shadow rounded-lg",children:o.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sistema de Créditos"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Créditos Disponibles"}),o.jsx("span",{className:"font-medium text-green-600",children:(n==null?void 0:n.credits)||0})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Créditos Usados"}),o.jsx("span",{className:"font-medium text-gray-900",children:(n==null?void 0:n.total_credits_used)||0})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Publicaciones Gratuitas"}),o.jsxs("span",{className:"font-medium text-blue-600",children:[(n==null?void 0:n.free_publications_used)||0,"/2 usadas"]})]}),o.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[o.jsxs(ce,{to:"/add-property",className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mb-2",children:[o.jsx(yo,{className:"h-4 w-4 mr-2"}),"Nueva Propiedad"]}),o.jsxs(ce,{to:"/payment-plans",className:"w-full inline-flex justify-center items-center px-4 py-2 border border-green-300 text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[o.jsx(es,{className:"h-4 w-4 mr-2"}),"Comprar Créditos"]})]})]})]})}),o.jsx("div",{className:"bg-white shadow rounded-lg",children:o.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Actividad Reciente"}),o.jsxs("div",{className:"text-center py-6",children:[o.jsx(Iv,{className:"mx-auto h-8 w-8 text-gray-400"}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No hay actividad reciente"}),o.jsx("p",{className:"text-xs text-gray-400",children:"Publica tu primera propiedad para comenzar"})]})]})})]})]})]})]})}async function c2({file:t,userId:e,bucketName:n="property-images"}){try{if(!t.type.startsWith("image/"))throw new Error("El archivo debe ser una imagen");const i=["image/jpeg","image/png","image/webp"];if(!i.includes(t.type))throw new Error(`Tipo de archivo no permitido. Usa: ${i.join(", ")}`);const s=n==="property-images"?10*1024*1024:5*1024*1024;if(t.size>s){const S=s/1048576;throw new Error(`El archivo es demasiado grande. Máximo: ${S}MB`)}const l=t.name.split(".").pop(),u=`${e}/${Date.now()}-${Math.random().toString(36).substring(2)}.${l}`,f="https://vxmpifukfohjafrbiqvw.supabase.co",d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ4bXBpZnVrZm9oamFmcmJpcXZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4MDUwNDYsImV4cCI6MjA2OTM4MTA0Nn0.JPwFO4UL-LileKVD6JDVZc2RrfCFsK5KgKlS5CFkUPc",p=new FormData;p.append("file",t,u);const v={Authorization:`Bearer ${d}`,"x-upsert":"false"},g=`${f}/storage/v1/object/${n}/${u}`,_=await fetch(g,{method:"POST",headers:v,body:p});if(!_.ok){const S=await _.text();throw console.error("❌ Error response:",S),new Error(`Upload failed: ${_.status} - ${S}`)}const{data:y}=G.storage.from(n).getPublicUrl(u);return{url:y.publicUrl,path:u}}catch(i){return console.error(`💥 Error en uploadImageDirect (${n}):`,i),{url:"",path:"",error:i instanceof Error?i.message:"Error desconocido"}}}async function u2({file:t,userId:e}){return c2({file:t,userId:e,bucketName:"property-images"})}const d2=[{value:"casa",label:"Casa"},{value:"departamento",label:"Departamento"},{value:"oficina",label:"Oficina"},{value:"local_comercial",label:"Local Comercial"},{value:"terreno",label:"Terreno"},{value:"bodega",label:"Bodega"},{value:"quinta",label:"Quinta"},{value:"penthouse",label:"Penthouse"}],h2=["Piscina","Gimnasio","Seguridad 24h","Ascensor","Balcón","Terraza","Jardín","BBQ","Salón comunal","Cancha deportiva","Área de juegos","Portero"],f2=[{key:"amueblado",label:"Amueblado"},{key:"mascotas_permitidas",label:"Mascotas Permitidas"},{key:"aire_acondicionado",label:"Aire Acondicionado"},{key:"calefaccion",label:"Calefacción"},{key:"internet_incluido",label:"Internet Incluido"},{key:"servicios_incluidos",label:"Servicios Incluidos"},{key:"cocina_equipada",label:"Cocina Equipada"},{key:"lavanderia",label:"Lavandería"}];function m2(){const{user:t,agentProfile:e,refreshProfile:n}=xn(),i=zo(),s=E.useRef(null),[l,u]=E.useState(!1),[f,d]=E.useState(!1),[p,v]=E.useState([]),[g,_]=E.useState([]),[y,S]=E.useState({title:"",description:"",price:"",currency:"USD",property_type:"casa",transaction_type:"venta",bedrooms:"",bathrooms:"",area_total:"",area_constructed:"",parking_spaces:"0",floor_number:"",total_floors:"",year_built:"",address:"",neighborhood:"",city:"",province:"",postal_code:"",latitude:"",longitude:"",amenities:[],features:{},is_featured:!1,is_urgent:!1});if(!t||(e==null?void 0:e.approval_status)!=="approved")return o.jsx(gn,{to:"/dashboard",replace:!0});const w=T=>{const{name:A,value:z,type:R}=T.target;if(R==="checkbox"){const F=T.target.checked;S(B=>({...B,[A]:F}))}else S(F=>({...F,[A]:z}))},C=T=>{S(A=>({...A,amenities:A.amenities.includes(T)?A.amenities.filter(z=>z!==T):[...A.amenities,T]}))},N=T=>{S(A=>({...A,features:{...A.features,[T]:!A.features[T]}}))},j=T=>{const A=Array.from(T.target.files||[]);if(A.length===0)return;const z=10,R=p.length,F=z-R,B=A.slice(0,F);v(W=>[...W,...B]),B.forEach(W=>{const ee=new FileReader;ee.onload=de=>{_(Fe=>{var me;return[...Fe,(me=de.target)==null?void 0:me.result]})},ee.readAsDataURL(W)})},b=T=>{v(A=>A.filter((z,R)=>R!==T)),_(A=>A.filter((z,R)=>R!==T))},k=async()=>{if(p.length===0)return[];d(!0);try{const T=p.map(async R=>{try{const F=await u2({file:R,userId:t.id});return F.error?(console.error("Error subiendo imagen:",F.error),null):F.url}catch(F){return console.error("Error inesperado subiendo imagen:",F),null}}),z=(await Promise.all(T)).filter(R=>R!==null);if(z.length===0)throw new Error("No se pudo subir ninguna imagen");return z}catch(T){throw console.error("Error uploading images:",T),T}finally{d(!1)}},I=async(T,A="draft")=>{T.preventDefault(),u(!0);try{if(A==="published"&&(e==null?void 0:e.publicaciones_disponibles)<=0){alert("No tienes publicaciones disponibles");return}const z=await k(),R={agent_id:t.id,title:y.title,description:y.description,price:parseFloat(y.price),currency:y.currency,property_type:y.property_type,transaction_type:y.transaction_type,bedrooms:y.bedrooms?parseInt(y.bedrooms):null,bathrooms:y.bathrooms?parseFloat(y.bathrooms):null,area_total:y.area_total?parseFloat(y.area_total):null,area_constructed:y.area_constructed?parseFloat(y.area_constructed):null,parking_spaces:parseInt(y.parking_spaces),floor_number:y.floor_number?parseInt(y.floor_number):null,total_floors:y.total_floors?parseInt(y.total_floors):null,year_built:y.year_built?parseInt(y.year_built):null,address:y.address,neighborhood:y.neighborhood||null,city:y.city,province:y.province,country:"Ecuador",postal_code:y.postal_code||null,latitude:y.latitude?parseFloat(y.latitude):null,longitude:y.longitude?parseFloat(y.longitude):null,amenities:y.amenities,features:y.features,images:z,status:A,is_featured:y.is_featured,is_urgent:y.is_urgent,published_at:A==="published"?new Date().toISOString():null},{data:F,error:B}=await G.from("properties").insert(R).select().single();if(B)throw B;if(A==="published"){const{data:W,error:ee}=await G.rpc("consume_publication",{agent_uuid:t.id});if(ee||!W)throw console.error("Error consumiendo publicación:",ee),await G.from("properties").delete().eq("id",F.id),new Error("No tienes créditos suficientes para publicar esta propiedad");alert("¡Propiedad publicada exitosamente!"),await n()}alert(A==="published"?"¡Propiedad publicada exitosamente!":"¡Propiedad guardada como borrador!"),i("/dashboard")}catch(z){console.error("Error creating property:",z),alert("Error al crear la propiedad: "+z.message)}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Agregar Nueva Propiedad"}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(xo,{className:"h-4 w-4 mr-1"}),o.jsxs("span",{children:["Publicaciones disponibles:"," ",e==null?void 0:e.publicaciones_disponibles]})]})]}),o.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsx("h2",{className:"text-lg font-semibold text-blue-800 mb-2",children:"ℹ️ Información sobre Publicaciones"}),o.jsxs("p",{className:"text-blue-700 text-sm",children:['Si aparece "0 publicaciones disponibles", ejecuta el script SQL'," ",o.jsx("code",{children:"fix-publicaciones-disponibles.sql"})," en Supabase para restablecer tus publicaciones.",o.jsx("br",{}),o.jsx("strong",{children:"Verificación temporal deshabilitada"})," - Puedes crear propiedades normalmente."]})]}),o.jsxs("form",{onSubmit:T=>I(T,"published"),className:"space-y-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[o.jsx(yr,{className:"h-5 w-5 mr-2"}),"Información Básica"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Título de la Propiedad *"}),o.jsx("input",{type:"text",name:"title",value:y.title,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Casa moderna con piscina en La Kennedy"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),o.jsx("textarea",{name:"description",value:y.description,onChange:w,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe las características principales de la propiedad..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Propiedad *"}),o.jsx("select",{name:"property_type",value:y.property_type,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:d2.map(T=>o.jsx("option",{value:T.value,children:T.label},T.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Transacción *"}),o.jsxs("select",{name:"transaction_type",value:y.transaction_type,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"venta",children:"Venta"}),o.jsx("option",{value:"alquiler",children:"Alquiler"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio *"}),o.jsxs("div",{className:"flex",children:[o.jsxs("select",{name:"currency",value:y.currency,onChange:w,className:"px-3 py-2 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"USD",children:"USD"}),o.jsx("option",{value:"EUR",children:"EUR"})]}),o.jsx("input",{type:"number",name:"price",value:y.price,onChange:w,required:!0,min:"0",step:"0.01",className:"flex-1 px-4 py-2 border border-gray-300 rounded-r-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"150000"})]})]}),o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",name:"is_featured",checked:y.is_featured,onChange:w,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsxs("span",{className:"ml-2 text-sm text-gray-700 flex items-center",children:[o.jsx(Vn,{className:"h-4 w-4 mr-1"}),"Destacar"]})]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",name:"is_urgent",checked:y.is_urgent,onChange:w,className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),o.jsxs("span",{className:"ml-2 text-sm text-gray-700 flex items-center",children:[o.jsx(xo,{className:"h-4 w-4 mr-1"}),"Urgente"]})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[o.jsx(Pd,{className:"h-5 w-5 mr-2"}),"Características"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Nd,{className:"inline h-4 w-4 mr-1"}),"Dormitorios"]}),o.jsx("input",{type:"number",name:"bedrooms",value:y.bedrooms,onChange:w,min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(jd,{className:"inline h-4 w-4 mr-1"}),"Baños"]}),o.jsx("input",{type:"number",name:"bathrooms",value:y.bathrooms,onChange:w,min:"0",step:"0.5",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Tv,{className:"inline h-4 w-4 mr-1"}),"Estacionamientos"]}),o.jsx("input",{type:"number",name:"parking_spaces",value:y.parking_spaces,onChange:w,min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Área Total (m²)"}),o.jsx("input",{type:"number",name:"area_total",value:y.area_total,onChange:w,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Área Construida (m²)"}),o.jsx("input",{type:"number",name:"area_constructed",value:y.area_constructed,onChange:w,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(pj,{className:"inline h-4 w-4 mr-1"}),"Año de Construcción"]}),o.jsx("input",{type:"number",name:"year_built",value:y.year_built,onChange:w,min:"1900",max:new Date().getFullYear(),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Piso"}),o.jsx("input",{type:"number",name:"floor_number",value:y.floor_number,onChange:w,min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total de Pisos"}),o.jsx("input",{type:"number",name:"total_floors",value:y.total_floors,onChange:w,min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[o.jsx(Yt,{className:"h-5 w-5 mr-2"}),"Ubicación"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección Completa *"}),o.jsx("input",{type:"text",name:"address",value:y.address,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Av. 9 de Octubre y Malecón"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barrio/Sector"}),o.jsx("input",{type:"text",name:"neighborhood",value:y.neighborhood,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: La Kennedy"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad *"}),o.jsx("input",{type:"text",name:"city",value:y.city,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Guayaquil"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provincia *"}),o.jsx("input",{type:"text",name:"province",value:y.province,onChange:w,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Guayas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código Postal"}),o.jsx("input",{type:"text",name:"postal_code",value:y.postal_code,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"090150"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitud"}),o.jsx("input",{type:"number",name:"latitude",value:y.latitude,onChange:w,step:"any",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"-2.1709"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitud"}),o.jsx("input",{type:"number",name:"longitude",value:y.longitude,onChange:w,step:"any",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"-79.9224"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Amenidades"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h2.map(T=>o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:y.amenities.includes(T),onChange:()=>C(T),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("span",{className:"ml-2 text-sm text-gray-700",children:T})]},T))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Características Adicionales"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f2.map(T=>o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:y.features[T.key]||!1,onChange:()=>N(T.key),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("span",{className:"ml-2 text-sm text-gray-700",children:T.label})]},T.key))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[o.jsx(gu,{className:"h-5 w-5 mr-2"}),"Imágenes de la Propiedad"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("input",{ref:s,type:"file",multiple:!0,accept:"image/*",onChange:j,className:"hidden"}),o.jsxs("button",{type:"button",onClick:()=>{var T;return(T=s.current)==null?void 0:T.click()},disabled:p.length>=10,className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(gu,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-sm text-gray-600",children:p.length>=10?"Máximo 10 imágenes alcanzado":"Haz clic para subir imágenes (máximo 10)"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Formatos: JPG, PNG, WebP"})]})]}),g.length>0&&o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g.map((T,A)=>o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:T,alt:`Preview ${A+1}`,className:"w-full h-32 object-cover rounded-lg"}),o.jsx("button",{type:"button",onClick:()=>b(A),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},A))})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[o.jsx("button",{type:"button",onClick:T=>I(T,"draft"),disabled:l||f,className:"flex items-center justify-center px-6 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:l?o.jsxs(o.Fragment,{children:[o.jsx(gi,{className:"animate-spin h-4 w-4 mr-2"}),"Guardando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Sj,{className:"h-4 w-4 mr-2"}),"Guardar Borrador"]})}),o.jsx("button",{type:"submit",disabled:l||f||!y.title||!y.price||!y.address,className:"flex items-center justify-center px-6 py-3 border border-transparent rounded-lg text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?o.jsxs(o.Fragment,{children:[o.jsx(gi,{className:"animate-spin h-4 w-4 mr-2"}),f?"Subiendo imágenes...":"Publicando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(vi,{className:"h-4 w-4 mr-2"}),"Publicar Propiedad"]})})]})]})]})})}function p2(){const{user:t,agentProfile:e,refreshProfile:n}=xn(),[i,s]=E.useState([]),[l,u]=E.useState(!0),[f,d]=E.useState("all");if(!t||(e==null?void 0:e.approval_status)!=="approved")return o.jsx(gn,{to:"/dashboard",replace:!0});E.useEffect(()=>{p()},[f]);const p=async()=>{try{let y=G.from("properties").select("*").eq("agent_id",t.id).order("created_at",{ascending:!1});f!=="all"&&(y=y.eq("status",f));const{data:S,error:w}=await y;if(w)throw w;s(S||[])}catch(y){console.error("Error loading properties:",y)}finally{u(!1)}},v=async y=>{if(confirm("¿Estás seguro de eliminar esta propiedad?"))try{const{error:S}=await G.from("properties").delete().eq("id",y);if(S)throw S;s(w=>w.filter(C=>C.id!==y)),alert("Propiedad eliminada exitosamente")}catch(S){console.error("Error deleting property:",S),alert("Error al eliminar la propiedad")}},g=async(y,S)=>{try{const w=i.find(j=>j.id===y);if(!w)return;if(S==="published"&&w.status==="draft"&&(e==null?void 0:e.publicaciones_disponibles)<=0){alert("No tienes publicaciones disponibles");return}const C={status:S,updated_at:new Date().toISOString()};S==="published"&&w.status==="draft"&&(C.published_at=new Date().toISOString());const{error:N}=await G.from("properties").update(C).eq("id",y);if(N)throw N;if(S==="published"&&w.status==="draft"){const{data:j,error:b}=await G.rpc("consume_publication",{agent_uuid:t.id});if(b||!j){console.error("Error consumiendo publicación:",b),await G.from("properties").update({status:"draft",published_at:null}).eq("id",y),alert("No tienes créditos suficientes para publicar esta propiedad");return}await n()}p(),alert(`Propiedad ${S==="published"?"publicada":"suspendida"} exitosamente`)}catch(w){console.error("Error updating property status:",w),alert("Error al cambiar el estado de la propiedad")}},_=(y,S,w)=>{const C=[];switch(y){case"published":C.push(o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(An,{className:"h-3 w-3 mr-1"}),"Publicada"]},"published"));break;case"draft":C.push(o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[o.jsx(gi,{className:"h-3 w-3 mr-1"}),"Borrador"]},"draft"));break;case"sold":C.push(o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(An,{className:"h-3 w-3 mr-1"}),"Vendida"]},"sold"));break;case"rented":C.push(o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[o.jsx(An,{className:"h-3 w-3 mr-1"}),"Alquilada"]},"rented"));break;case"suspended":C.push(o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[o.jsx(Ed,{className:"h-3 w-3 mr-1"}),"Suspendida"]},"suspended"));break}return w&&C.push(o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[o.jsx(Vn,{className:"h-3 w-3 mr-1"}),"Destacada"]},"featured")),S&&C.push(o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[o.jsx(xo,{className:"h-3 w-3 mr-1"}),"Urgente"]},"urgent")),o.jsx("div",{className:"flex flex-wrap gap-1",children:C})};return l?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando propiedades..."})]})}):o.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Propiedades"}),o.jsx("p",{className:"text-gray-600",children:"Gestiona tus propiedades publicadas"})]}),o.jsx("div",{className:"mt-4 sm:mt-0",children:o.jsxs(ce,{to:"/add-property",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[o.jsx(yo,{className:"h-4 w-4 mr-2"}),"Nueva Propiedad"]})})]}),o.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(yr,{className:"h-6 w-6 text-gray-400"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Propiedades"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900",children:i.length})]})})]})})}),o.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(An,{className:"h-6 w-6 text-green-400"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Publicadas"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900",children:i.filter(y=>y.status==="published").length})]})})]})})}),o.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(vi,{className:"h-6 w-6 text-blue-400"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Vistas"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900",children:i.reduce((y,S)=>y+S.views_count,0)})]})})]})})}),o.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(vo,{className:"h-6 w-6 text-red-400"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Favoritos"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900",children:i.reduce((y,S)=>y+S.favorites_count,0)})]})})]})})})]})]}),o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"all",label:"Todas",count:i.length},{key:"published",label:"Publicadas",count:i.filter(y=>y.status==="published").length},{key:"draft",label:"Borradores",count:i.filter(y=>y.status==="draft").length},{key:"sold",label:"Vendidas",count:i.filter(y=>y.status==="sold").length},{key:"rented",label:"Alquiladas",count:i.filter(y=>y.status==="rented").length}].map(y=>o.jsxs("button",{onClick:()=>d(y.key),className:`${f===y.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`,children:[y.label," (",y.count,")"]},y.key))})})}),i.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(yr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay propiedades"}),o.jsx("p",{className:"text-gray-600 mb-6",children:f==="all"?"Aún no has creado ninguna propiedad.":`No tienes propiedades con estado "${f}".`}),o.jsxs(ce,{to:"/add-property",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[o.jsx(yo,{className:"h-4 w-4 mr-2"}),"Crear Primera Propiedad"]})]}):o.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:i.map(y=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"relative h-48 bg-gray-200",children:[y.images.length>0?o.jsx("img",{src:y.images[0],alt:y.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:o.jsx(yr,{className:"h-12 w-12 text-gray-400"})}),o.jsx("div",{className:"absolute top-3 left-3",children:_(y.status,y.is_urgent,y.is_featured)}),o.jsx("div",{className:"absolute bottom-3 left-3",children:o.jsxs("span",{className:"bg-black bg-opacity-75 text-white px-2 py-1 rounded text-sm font-medium",children:[y.currency," ",y.price.toLocaleString()]})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"flex justify-between items-start mb-2",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:y.title})}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[o.jsx(Yt,{className:"h-4 w-4 mr-1"}),o.jsxs("span",{className:"truncate",children:[y.city,", ",y.province]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3 space-x-4",children:[y.bedrooms&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-medium",children:y.bedrooms}),o.jsx("span",{className:"ml-1",children:"hab"})]}),y.bathrooms&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-medium",children:y.bathrooms}),o.jsx("span",{className:"ml-1",children:"baños"})]}),y.area_total&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-medium",children:y.area_total}),o.jsx("span",{className:"ml-1",children:"m²"})]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4 space-x-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(vi,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:y.views_count})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(vo,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:y.favorites_count})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Nj,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:y.inquiries_count})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ce,{to:`/edit-property/${y.id}`,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar",children:o.jsx(kj,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>v(y.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Eliminar",children:o.jsx(Ej,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[y.status==="published"&&o.jsx("button",{onClick:()=>g(y.id,"suspended"),className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-full hover:bg-red-200",children:"Suspender"}),(y.status==="draft"||y.status==="suspended")&&o.jsx("button",{onClick:()=>g(y.id,"published"),disabled:y.status==="draft"&&(e==null?void 0:e.publicaciones_disponibles)<=0,className:"px-3 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed",title:y.status==="draft"&&(e==null?void 0:e.publicaciones_disponibles)<=0?"Sin publicaciones disponibles":"",children:"Publicar"})]})]})]})]},y.id))})]})})}const g2=()=>{const{id:t}=ev(),e=zo(),{user:n}=xn(),[i,s]=E.useState(!0),[l,u]=E.useState(!1),[f,d]=E.useState(null),[p,v]=E.useState([]),[g,_]=E.useState([]),[y,S]=E.useState([]),[w,C]=E.useState({title:"",description:"",price:"",currency:"USD",property_type:"casa",transaction_type:"venta",bedrooms:"",bathrooms:"",area_total:"",area_constructed:"",parking_spaces:"",floor_number:"",total_floors:"",year_built:"",address:"",neighborhood:"",city:"",province:"",country:"Ecuador",postal_code:"",latitude:"",longitude:"",amenities:[],features:{},virtual_tour_url:"",video_url:"",status:"published",is_featured:!1,is_urgent:!1});E.useEffect(()=>{t&&N()},[t]);const N=async()=>{var B,W,ee,de,Fe,me,Ze,D,K,Z,Y;try{const{data:H,error:Pe}=await G.from("properties").select("*").eq("id",t).eq("agent_id",n==null?void 0:n.id).single();if(Pe)throw Pe;H&&(d(H),_(H.images||[]),C({title:H.title||"",description:H.description||"",price:((B=H.price)==null?void 0:B.toString())||"",currency:H.currency||"USD",property_type:H.property_type||"casa",transaction_type:H.transaction_type||"venta",bedrooms:((W=H.bedrooms)==null?void 0:W.toString())||"",bathrooms:((ee=H.bathrooms)==null?void 0:ee.toString())||"",area_total:((de=H.area_total)==null?void 0:de.toString())||"",area_constructed:((Fe=H.area_constructed)==null?void 0:Fe.toString())||"",parking_spaces:((me=H.parking_spaces)==null?void 0:me.toString())||"",floor_number:((Ze=H.floor_number)==null?void 0:Ze.toString())||"",total_floors:((D=H.total_floors)==null?void 0:D.toString())||"",year_built:((K=H.year_built)==null?void 0:K.toString())||"",address:H.address||"",neighborhood:H.neighborhood||"",city:H.city||"",province:H.province||"",country:H.country||"Ecuador",postal_code:H.postal_code||"",latitude:((Z=H.latitude)==null?void 0:Z.toString())||"",longitude:((Y=H.longitude)==null?void 0:Y.toString())||"",amenities:H.amenities||[],features:H.features||{},virtual_tour_url:H.virtual_tour_url||"",video_url:H.video_url||"",status:H.status||"published",is_featured:H.is_featured||!1,is_urgent:H.is_urgent||!1}))}catch(H){console.error("Error fetching property:",H),alert("Error al cargar la propiedad"),e("/my-properties")}finally{s(!1)}},j=B=>{const{name:W,value:ee,type:de}=B.target;C(Fe=>({...Fe,[W]:de==="checkbox"?B.target.checked:ee}))},b=B=>{if(B.target.files){const W=Array.from(B.target.files);v(ee=>[...ee,...W])}},k=B=>{v(W=>W.filter((ee,de)=>de!==B))},I=B=>{_(W=>W.filter(ee=>ee!==B)),S(W=>[...W,B])},T=async()=>{const B=[];for(const W of p){const ee=W.name.split(".").pop(),de=`${Date.now()}-${Math.random().toString(36).substring(2)}.${ee}`,Fe=`${n==null?void 0:n.id}/${de}`,{error:me}=await G.storage.from("property-images").upload(Fe,W,{contentType:W.type||`image/${ee}`,cacheControl:"3600",upsert:!1});if(me)throw me;const{data:{publicUrl:Ze}}=G.storage.from("property-images").getPublicUrl(Fe);B.push(Ze)}return B},A=async B=>{for(const W of B){const ee=W.split("/").slice(-2).join("/");await G.storage.from("property-images").remove([ee])}},z=async B=>{B.preventDefault(),u(!0);try{const W=await T();y.length>0&&await A(y);const ee=[...g,...W],{error:de}=await G.from("properties").update({title:w.title,description:w.description,price:parseFloat(w.price),currency:w.currency,property_type:w.property_type,transaction_type:w.transaction_type,bedrooms:w.bedrooms?parseInt(w.bedrooms):null,bathrooms:w.bathrooms?parseFloat(w.bathrooms):null,area_total:w.area_total?parseFloat(w.area_total):null,area_constructed:w.area_constructed?parseFloat(w.area_constructed):null,parking_spaces:w.parking_spaces?parseInt(w.parking_spaces):0,floor_number:w.floor_number?parseInt(w.floor_number):null,total_floors:w.total_floors?parseInt(w.total_floors):null,year_built:w.year_built?parseInt(w.year_built):null,address:w.address,neighborhood:w.neighborhood,city:w.city,province:w.province,country:w.country,postal_code:w.postal_code,latitude:w.latitude?parseFloat(w.latitude):null,longitude:w.longitude?parseFloat(w.longitude):null,amenities:w.amenities,features:w.features,images:ee,virtual_tour_url:w.virtual_tour_url,video_url:w.video_url,status:w.status,is_featured:w.is_featured,is_urgent:w.is_urgent,updated_at:new Date().toISOString()}).eq("id",t);if(de)throw de;alert("Propiedad actualizada exitosamente"),e("/my-properties")}catch(W){console.error("Error updating property:",W),alert("Error al actualizar la propiedad")}finally{u(!1)}},R=B=>{C(W=>({...W,amenities:W.amenities.includes(B)?W.amenities.filter(ee=>ee!==B):[...W.amenities,B]}))},F=["piscina","gimnasio","seguridad_24h","ascensor","terraza","balcon","jardin","garage","aire_acondicionado","calefaccion","chimenea","lavanderia","deposito","portero","salon_eventos"];return i?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando propiedad..."})]})}):f?o.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Propiedad"}),o.jsx("button",{onClick:()=>e("/my-properties"),className:"text-gray-600 hover:text-gray-800",children:"← Volver"})]}),o.jsxs("form",{onSubmit:z,className:"space-y-6",children:[o.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Información Básica"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),o.jsx("input",{type:"text",name:"title",value:w.title,onChange:j,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Casa moderna en excelente ubicación"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio *"}),o.jsxs("div",{className:"flex",children:[o.jsxs("select",{name:"currency",value:w.currency,onChange:j,className:"border border-gray-300 rounded-l-lg px-3 py-2 bg-gray-50",children:[o.jsx("option",{value:"USD",children:"USD"}),o.jsx("option",{value:"EUR",children:"EUR"})]}),o.jsx("input",{type:"number",name:"price",value:w.price,onChange:j,required:!0,className:"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0",step:"0.01"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Propiedad *"}),o.jsxs("select",{name:"property_type",value:w.property_type,onChange:j,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"casa",children:"Casa"}),o.jsx("option",{value:"departamento",children:"Departamento"}),o.jsx("option",{value:"oficina",children:"Oficina"}),o.jsx("option",{value:"local_comercial",children:"Local Comercial"}),o.jsx("option",{value:"terreno",children:"Terreno"}),o.jsx("option",{value:"bodega",children:"Bodega"}),o.jsx("option",{value:"quinta",children:"Quinta"}),o.jsx("option",{value:"penthouse",children:"Penthouse"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Transacción *"}),o.jsxs("select",{name:"transaction_type",value:w.transaction_type,onChange:j,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"venta",children:"Venta"}),o.jsx("option",{value:"alquiler",children:"Alquiler"})]})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),o.jsx("textarea",{name:"description",value:w.description,onChange:j,rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe las características principales de la propiedad..."})]})]}),o.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Características"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dormitorios"}),o.jsx("input",{type:"number",name:"bedrooms",value:w.bedrooms,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Baños"}),o.jsx("input",{type:"number",name:"bathrooms",value:w.bathrooms,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.5"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Área Total (m²)"}),o.jsx("input",{type:"number",name:"area_total",value:w.area_total,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Área Construida (m²)"}),o.jsx("input",{type:"number",name:"area_constructed",value:w.area_constructed,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estacionamientos"}),o.jsx("input",{type:"number",name:"parking_spaces",value:w.parking_spaces,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Piso"}),o.jsx("input",{type:"number",name:"floor_number",value:w.floor_number,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Pisos"}),o.jsx("input",{type:"number",name:"total_floors",value:w.total_floors,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Año de Construcción"}),o.jsx("input",{type:"number",name:"year_built",value:w.year_built,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1900",max:new Date().getFullYear()})]})]})]}),o.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Ubicación"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección *"}),o.jsx("input",{type:"text",name:"address",value:w.address,onChange:j,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Dirección completa"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sector/Barrio"}),o.jsx("input",{type:"text",name:"neighborhood",value:w.neighborhood,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad *"}),o.jsx("input",{type:"text",name:"city",value:w.city,onChange:j,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provincia *"}),o.jsx("input",{type:"text",name:"province",value:w.province,onChange:j,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"País"}),o.jsx("input",{type:"text",name:"country",value:w.country,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitud"}),o.jsx("input",{type:"number",name:"latitude",value:w.latitude,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",step:"any"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud"}),o.jsx("input",{type:"number",name:"longitude",value:w.longitude,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",step:"any"})]})]})]}),o.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Imágenes"}),g.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Imágenes actuales:"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:g.map((B,W)=>o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:B,alt:`Imagen ${W+1}`,className:"w-full h-32 object-cover rounded-lg"}),o.jsx("button",{type:"button",onClick:()=>I(B),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"×"})]},W))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agregar nuevas imágenes"}),o.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),p.length>0&&o.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:p.map((B,W)=>o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:URL.createObjectURL(B),alt:`Nueva imagen ${W+1}`,className:"w-full h-32 object-cover rounded-lg"}),o.jsx("button",{type:"button",onClick:()=>k(W),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"×"})]},W))})]})]}),o.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Amenidades"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:F.map(B=>o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:w.amenities.includes(B),onChange:()=>R(B),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700 capitalize",children:B.replace("_"," ")})]},B))})]}),o.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Estado y Opciones"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),o.jsxs("select",{name:"status",value:w.status,onChange:j,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"draft",children:"Borrador"}),o.jsx("option",{value:"published",children:"Publicada"}),o.jsx("option",{value:"suspended",children:"Suspendida"})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",name:"is_featured",checked:w.is_featured,onChange:j,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Destacada"})]}),o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",name:"is_urgent",checked:w.is_urgent,onChange:j,className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Urgente"})]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx("button",{type:"button",onClick:()=>e("/my-properties"),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:l?"Guardando...":"Actualizar Propiedad"})]})]})]})})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Propiedad no encontrada"}),o.jsx("button",{onClick:()=>e("/my-properties"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Volver a Mis Propiedades"})]})})};/*!
 * react-paypal-js v8.8.3 (2025-04-11T19:50:46.506Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t.INITIAL="initial",t.PENDING="pending",t.REJECTED="rejected",t.RESOLVED="resolved"})(lt||(lt={}));var Wn;(function(t){t.LOADING_STATUS="setLoadingStatus",t.RESET_OPTIONS="resetOptions",t.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Wn||(Wn={}));var Cm;(function(t){t.NUMBER="number",t.CVV="cvv",t.EXPIRATION_DATE="expirationDate",t.EXPIRATION_MONTH="expirationMonth",t.EXPIRATION_YEAR="expirationYear",t.POSTAL_CODE="postalCode"})(Cm||(Cm={}));var Ae=function(){return Ae=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Ae.apply(this,arguments)};function $v(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function Tm(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,l;i<s;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return t.concat(l||Array.prototype.slice.call(e))}var Is="data-react-paypal-script-id",mr={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},v2="Failed to load the PayPal JS SDK script.",Fv="paypal",y2="usePayPalScriptReducer must be used within a PayPalScriptProvider";function x2(t){return t===void 0&&(t=Fv),window[t]}function _2(t){for(var e="",n=0;n<t.length;n++){var i=t[n].charCodeAt(0)*n;t[n+1]&&(i+=t[n+1].charCodeAt(0)*(n-1)),e+=String.fromCharCode(97+Math.abs(i)%26)}return e}function w2(t){var e=t.reactComponentName,n=t.sdkComponentKey,i=t.sdkRequestedComponents,s=i===void 0?"":i,l=t.sdkDataNamespace,u=l===void 0?Fv:l,f=n.charAt(0).toUpperCase().concat(n.substring(1)),d="Unable to render <".concat(e," /> because window.").concat(u,".").concat(f," is undefined."),p=typeof s=="string"?s:s.join(",");if(!p.includes(n)){var v=[p,n].filter(Boolean).join();d+=`
To fix the issue, add '`.concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(v,"'}}>`.")}return d}function Zv(t){var e=t,n=Is;e[n];var i=$v(e,[n+""]);return"react-paypal-js-".concat(_2(JSON.stringify(i)))}function b2(t){var e=self.document.querySelector("script[".concat(Is,'="').concat(t,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function j2(t,e){var n,i;switch(e.type){case Wn.LOADING_STATUS:return typeof e.value=="object"?Ae(Ae({},t),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):Ae(Ae({},t),{loadingStatus:e.value});case Wn.RESET_OPTIONS:return b2(t.options[Is]),Ae(Ae({},t),{loadingStatus:lt.PENDING,options:Ae(Ae((n={},n[mr.DATA_SDK_INTEGRATION_SOURCE]=mr.DATA_LIBRARY_VALUE,n),e.value),(i={},i[Is]="".concat(Zv(e.value)),i))});case Wn.SET_BRAINTREE_INSTANCE:return Ae(Ae({},t),{braintreePayPalCheckoutInstance:e.value});default:return t}}var Wv=E.createContext(null);function N2(t){if(typeof(t==null?void 0:t.dispatch)=="function"&&t.dispatch.length!==0)return t;throw new Error(y2)}function k2(){var t=N2(E.useContext(Wv)),e=Ae(Ae({},t),{isInitial:t.loadingStatus===lt.INITIAL,isPending:t.loadingStatus===lt.PENDING,isResolved:t.loadingStatus===lt.RESOLVED,isRejected:t.loadingStatus===lt.REJECTED});return[e,t.dispatch]}E.createContext({});function S2(t){var e=E.useRef(new Proxy({},{get:function(n,i,s){return typeof n[i]=="function"?function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return n[i].apply(n,l)}:Reflect.get(n,i,s)}}));return e.current=Object.assign(e.current,t),e.current}var Od=function(t){var e,n=t.className,i=n===void 0?"":n,s=t.disabled,l=s===void 0?!1:s,u=t.children,f=t.forceReRender,d=f===void 0?[]:f,p=$v(t,["className","disabled","children","forceReRender"]),v=l?{opacity:.38}:{},g="".concat(i," ").concat(l?"paypal-buttons-disabled":"").trim(),_=E.useRef(null),y=E.useRef(null),S=S2(p),w=k2()[0],C=w.isResolved,N=w.options,j=E.useState(null),b=j[0],k=j[1],I=E.useState(!0),T=I[0],A=I[1],z=E.useState(null),R=z[1];function F(){y.current!==null&&y.current.close().catch(function(){})}return!((e=y.current)===null||e===void 0)&&e.updateProps&&y.current.updateProps({message:p.message}),E.useEffect(function(){if(C===!1)return F;var B=x2(N.dataNamespace);if(B===void 0||B.Buttons===void 0)return R(function(){throw new Error(w2({reactComponentName:Od.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:N.components,sdkDataNamespace:N[mr.DATA_NAMESPACE]}))}),F;var W=function(ee,de){k(de),typeof p.onInit=="function"&&p.onInit(ee,de)};try{y.current=B.Buttons(Ae(Ae({},S),{onInit:W}))}catch(ee){return R(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(ee))})}return y.current.isEligible()===!1?(A(!1),F):(_.current&&y.current.render(_.current).catch(function(ee){_.current===null||_.current.children.length===0||R(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(ee))})}),F)},Tm(Tm([C],d,!0),[p.fundingSource],!1)),E.useEffect(function(){b!==null&&(l===!0?b.disable().catch(function(){}):b.enable().catch(function(){}))},[l,b]),Kt.createElement(Kt.Fragment,null,T?Kt.createElement("div",{ref:_,style:v,className:g}):u)};Od.displayName="PayPalButtons";function P2(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function E2(t,e){var n=document.querySelector('script[src="'.concat(t,'"]'));if(n===null)return null;var i=qv(t,e),s=n.cloneNode();if(delete s.dataset.uidAuto,Object.keys(s.dataset).length!==Object.keys(i.dataset).length)return null;var l=!0;return Object.keys(s.dataset).forEach(function(u){s.dataset[u]!==i.dataset[u]&&(l=!1)}),l?n:null}function C2(t){var e=t.url,n=t.attributes,i=t.onSuccess,s=t.onError,l=qv(e,n);l.onerror=s,l.onload=i,document.head.insertBefore(l,document.head.firstElementChild)}function T2(t){var e=t.sdkBaseUrl,n=t.environment,i=P2(t,["sdkBaseUrl","environment"]),s=e||I2(n),l=i,u=Object.keys(l).filter(function(p){return typeof l[p]<"u"&&l[p]!==null&&l[p]!==""}).reduce(function(p,v){var g=l[v].toString();return v=L2(v),v.substring(0,4)==="data"||v==="crossorigin"?p.attributes[v]=g:p.queryParams[v]=g,p},{queryParams:{},attributes:{}}),f=u.queryParams,d=u.attributes;return f["merchant-id"]&&f["merchant-id"].indexOf(",")!==-1&&(d["data-merchant-id"]=f["merchant-id"],f["merchant-id"]="*"),{url:"".concat(s,"?").concat(O2(f)),attributes:d}}function L2(t){var e=function(n,i){return(i?"-":"")+n.toLowerCase()};return t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function O2(t){var e="";return Object.keys(t).forEach(function(n){e.length!==0&&(e+="&"),e+=n+"="+t[n]}),e}function I2(t){return t==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function qv(t,e){e===void 0&&(e={});var n=document.createElement("script");return n.src=t,Object.keys(e).forEach(function(i){n.setAttribute(i,e[i]),i==="data-csp-nonce"&&n.setAttribute("nonce",e["data-csp-nonce"])}),n}function A2(t,e){if(e===void 0&&(e=Promise),Hv(t,e),typeof document>"u")return e.resolve(null);var n=T2(t),i=n.url,s=n.attributes,l=s["data-namespace"]||"paypal",u=Lm(l);return s["data-js-sdk-library"]||(s["data-js-sdk-library"]="paypal-js"),E2(i,s)&&u?e.resolve(u):M2({url:i,attributes:s},e).then(function(){var f=Lm(l);if(f)return f;throw new Error("The window.".concat(l," global variable is not available."))})}function M2(t,e){e===void 0&&(e=Promise),Hv(t,e);var n=t.url,i=t.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof i<"u"&&typeof i!="object")throw new Error("Expected attributes to be an object.");return new e(function(s,l){if(typeof document>"u")return s();C2({url:n,attributes:i,onSuccess:function(){return s()},onError:function(){var u=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return l(u)}})})}function Lm(t){return window[t]}function Hv(t,e){if(typeof t!="object"||t===null)throw new Error("Expected an options object.");var n=t.environment;if(n&&n!=="production"&&n!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var R2=function(t){var e,n=t.options,i=n===void 0?{clientId:"test"}:n,s=t.children,l=t.deferLoading,u=l===void 0?!1:l,f=E.useReducer(j2,{options:Ae(Ae({},i),(e={},e[mr.DATA_JS_SDK_LIBRARY]=mr.DATA_LIBRARY_VALUE,e[mr.DATA_SDK_INTEGRATION_SOURCE]=mr.DATA_LIBRARY_VALUE,e[Is]="".concat(Zv(i)),e)),loadingStatus:u?lt.INITIAL:lt.PENDING}),d=f[0],p=f[1];return E.useEffect(function(){if(u===!1&&d.loadingStatus===lt.INITIAL)return p({type:Wn.LOADING_STATUS,value:lt.PENDING});if(d.loadingStatus===lt.PENDING){var v=!0;return A2(d.options).then(function(){v&&p({type:Wn.LOADING_STATUS,value:lt.RESOLVED})}).catch(function(g){console.error("".concat(v2," ").concat(g)),v&&p({type:Wn.LOADING_STATUS,value:{state:lt.REJECTED,message:String(g)}})}),function(){v=!1}}},[d.options,u,d.loadingStatus]),Kt.createElement(Wv.Provider,{value:Ae(Ae({},d),{dispatch:p})},s)};function Om(){}E.createContext({cardFieldsForm:null,fields:{},registerField:Om,unregisterField:Om});const Im=[{id:"starter",name:"Starter",price:10,credits:5,duration:90,features:["5 propiedades","90 días de duración c/u","Analytics básicos","Chat con compradores"]},{id:"professional",name:"Professional",price:18,credits:10,duration:90,features:["10 propiedades","90 días de duración c/u","Analytics avanzados","Chat prioritario","Soporte por email"],popular:!0},{id:"premium",name:"Premium",price:30,credits:20,duration:120,features:["20 propiedades","120 días de duración c/u","Analytics completos","Chat prioritario","Soporte telefónico","Destacar propiedades"]},{id:"enterprise",name:"Enterprise",price:50,credits:50,duration:120,features:["50 propiedades","120 días de duración c/u","Analytics premium","Gerente de cuenta","API personalizada","Branding personalizado"]}],z2="AbYKlb2RXOBy0HDMyt1cB76UTSN3cX8_28MZpLYEaqnATydf3zLrB8Ig550fQDB1aUFeo_Uz3f-s4Us5";function D2({onPurchaseComplete:t}){var j,b;const[e,n]=E.useState(null),[i,s]=E.useState(null),[l,u]=E.useState(!0),[f,d]=E.useState(null),[p,v]=E.useState(0),[g,_]=E.useState(!1),[y,S]=E.useState(null);E.useEffect(()=>{w()},[]);const w=async()=>{try{const{data:{user:k}}=await G.auth.getUser();if(!k){window.location.href="/login";return}n(k);const{data:I,error:T}=await G.from("user_profiles").select("*").eq("id",k.id).maybeSingle();T&&console.error("Error loading user profile:",T);let{data:A,error:z}=await G.from("agents").select("*").eq("id",k.id).maybeSingle();if(!A&&!z){console.log("Creating agent record for user:",k.id);const{data:R,error:F}=await G.from("agents").insert({id:k.id,credits:0,total_credits_used:0,free_publications_used:0,is_new_agent:!0,is_verified:!1,publicaciones_disponibles:0}).select().single();!F&&R&&(A=R)}if(A){const R={...I,agents:A};s(R);const{data:F}=await G.rpc("can_use_free_publication",{agent_uuid:k.id});_(F||!1),v(A.free_publications_used||0)}}catch(k){console.error("Error loading user data:",k)}finally{u(!1)}},C=async(k,I)=>{var T,A,z,R,F,B;d(I);try{const W=Im.find(K=>K.id===I);if(!W)throw new Error("Plan no encontrado");const{data:ee,error:de}=await G.from("user_profiles").select("id, role").eq("id",e.id).maybeSingle();if(de&&console.error("Error checking user profile:",de),ee)ee.role!=="agent"&&await G.from("user_profiles").update({role:"agent",updated_at:new Date().toISOString()}).eq("id",e.id);else{const{error:K}=await G.from("user_profiles").insert({id:e.id,email:e.email,full_name:((T=e.user_metadata)==null?void 0:T.full_name)||e.email,role:"agent",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(K)throw console.error("Error creating user profile:",K),new Error("Error creando perfil de usuario")}try{const{error:K}=await G.from("payments").insert({agent_id:e.id,plan:I,amount:W.price,credits_awarded:W.credits,payment_method:"paypal",transaction_id:k.id,status:"completed",paypal_details:k});K&&console.warn("Tabla payments no existe o error:",K)}catch(K){console.warn("Error registrando pago, continuando:",K)}console.log("🔄 Actualizando créditos para usuario:",e.id),console.log("💰 Créditos actuales:",((A=i==null?void 0:i.agents)==null?void 0:A.credits)||0),console.log("➕ Créditos a añadir:",W.credits);const{error:Fe}=await G.from("agents").upsert({id:e.id,credits:(((z=i==null?void 0:i.agents)==null?void 0:z.credits)||0)+W.credits,total_credits_used:((R=i==null?void 0:i.agents)==null?void 0:R.total_credits_used)||0,is_verified:!0,publicaciones_disponibles:(((F=i==null?void 0:i.agents)==null?void 0:F.publicaciones_disponibles)||0)+W.credits,updated_at:new Date().toISOString()},{onConflict:"id"});if(Fe)throw console.error("❌ Error updating agent credits:",Fe),new Error(`Error actualizando créditos: ${Fe.message}`);console.log("✅ Créditos actualizados exitosamente en la base de datos");const me=((B=i==null?void 0:i.agents)==null?void 0:B.credits)||0,Ze=me+W.credits,D=`🎉 ¡Pago exitoso!

📊 Resumen:
• Plan: ${W.name}
• Créditos añadidos: ${W.credits}
• Créditos antes: ${me}
• Créditos ahora: ${Ze}

Los créditos ya están disponibles en tu cuenta. ¡Puedes empezar a publicar!`;S(D),setTimeout(()=>{S(null)},8e3),i!=null&&i.agents&&s({...i,agents:{...i.agents,credits:Ze,publicaciones_disponibles:(i.agents.publicaciones_disponibles||0)+W.credits,is_verified:!0}}),setTimeout(async()=>{console.log("Recargando datos desde la base de datos..."),await w()},2e3),t==null||t()}catch(W){console.error("Error processing payment:",W),alert("Error al procesar el pago. Contacta soporte.")}finally{d(null)}},N=k=>{console.error("PayPal Error:",k),alert("Error en el pago con PayPal. Intenta nuevamente."),d(null)};return l?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o.jsx(R2,{options:{clientId:z2,currency:"USD",intent:"capture"},children:o.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y&&o.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(An,{className:"h-5 w-5 text-green-400"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("pre",{className:"text-sm text-green-800 whitespace-pre-wrap",children:y}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{onClick:()=>S(null),className:"text-xs text-green-600 hover:text-green-800 underline",children:"Cerrar"})})]})]})})}),o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Planes de Publicación"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Elige el plan perfecto para publicar tus propiedades y hacer crecer tu negocio inmobiliario"})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tu cuenta"}),o.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[o.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg",children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Créditos disponibles"}),o.jsx("p",{className:"text-2xl font-bold text-blue-800",children:((j=i==null?void 0:i.agents)==null?void 0:j.credits)||0})]}),o.jsxs("div",{className:"bg-gray-50 px-4 py-2 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Publicaciones totales"}),o.jsx("p",{className:"text-lg font-semibold text-gray-800",children:((b=i==null?void 0:i.agents)==null?void 0:b.publicaciones_disponibles)||0})]})]})]}),o.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[o.jsxs("button",{onClick:()=>{u(!0),w()},disabled:l,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:[l?"⟳":"🔄"," Actualizar"]}),g&&p<2&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(xj,{className:"h-4 w-4 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-800",children:"¡Publicaciones Gratis!"}),o.jsxs("p",{className:"text-xs text-green-600",children:["Te quedan ",2-p," de 60 días"]})]})]})})]})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:Im.map(k=>o.jsxs("div",{className:`relative bg-white rounded-2xl shadow-lg overflow-hidden transition-transform hover:scale-105 ${k.popular?"ring-2 ring-blue-500":""}`,children:[k.popular&&o.jsx("div",{className:"absolute top-0 left-0 right-0 bg-blue-500 text-white text-center py-2",children:o.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[o.jsx(Vn,{className:"h-4 w-4 fill-current"}),o.jsx("span",{className:"text-sm font-medium",children:"Más Popular"})]})}),o.jsxs("div",{className:`p-6 ${k.popular?"pt-16":""}`,children:[o.jsxs("div",{className:"mb-4",children:[k.id==="starter"&&o.jsx(xo,{className:"h-8 w-8 text-blue-600"}),k.id==="professional"&&o.jsx(Iv,{className:"h-8 w-8 text-blue-600"}),k.id==="premium"&&o.jsx(Sd,{className:"h-8 w-8 text-blue-600"}),k.id==="enterprise"&&o.jsx(es,{className:"h-8 w-8 text-blue-600"})]}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:k.name}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["$",k.price]}),o.jsx("span",{className:"text-gray-600 ml-1",children:"USD"})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-6",children:[o.jsx(gi,{className:"h-4 w-4 mr-1"}),o.jsxs("span",{children:[k.duration," días por propiedad"]})]}),o.jsx("ul",{className:"space-y-3 mb-8",children:k.features.map((I,T)=>o.jsxs("li",{className:"flex items-center text-sm",children:[o.jsx(gj,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),o.jsx("span",{className:"text-gray-700",children:I})]},T))}),o.jsx("div",{className:"w-full",children:f===k.id?o.jsxs("div",{className:"w-full bg-gray-100 rounded-lg py-3 flex items-center justify-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-2"}),o.jsx("span",{className:"text-gray-700",children:"Procesando..."})]}):o.jsx(Od,{style:{layout:"vertical",color:"blue",shape:"rect"},createOrder:(I,T)=>T.order.create({intent:"CAPTURE",purchase_units:[{amount:{value:k.price.toString(),currency_code:"USD"},description:`PropFinder - Plan ${k.name} (${k.credits} créditos)`}],application_context:{brand_name:"PropFinder",landing_page:"BILLING",user_action:"PAY_NOW"}}),onApprove:async(I,T)=>{if(T.order){const A=await T.order.capture();await C(A,k.id)}},onError:N,onCancel:()=>{console.log("PayPal payment cancelled"),d(null)}})})]})]},k.id))}),o.jsxs("div",{className:"mt-12 bg-blue-50 rounded-lg p-8",children:[o.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"¿Cómo funcionan los créditos?"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:o.jsx("span",{className:"text-blue-600 font-bold",children:"1"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-blue-900",children:"Compra créditos"}),o.jsx("p",{className:"text-sm text-blue-700",children:"Elige el plan que mejor se adapte a tus necesidades"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:o.jsx("span",{className:"text-blue-600 font-bold",children:"2"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-blue-900",children:"Publica propiedades"}),o.jsx("p",{className:"text-sm text-blue-700",children:"Usa 1 crédito por cada propiedad que publiques"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:o.jsx("span",{className:"text-blue-600 font-bold",children:"3"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-blue-900",children:"Recibe leads"}),o.jsx("p",{className:"text-sm text-blue-700",children:"Conecta con compradores interesados en tus propiedades"})]})]})]})]})]})})})}class B2 extends Kt.Component{constructor(n){super(n);ca(this,"handleRetry",()=>{hs(),window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){var i,s,l;return(i=n.message)!=null&&i.includes("refresh")||(s=n.message)!=null&&s.includes("token")||(l=n.message)!=null&&l.includes("auth")?(hs(),{hasError:!0,error:n}):{hasError:!1,error:null}}componentDidCatch(n,i){var s,l,u;((s=n.message)!=null&&s.includes("refresh")||(l=n.message)!=null&&l.includes("token")||(u=n.message)!=null&&u.includes("auth"))&&(console.error("Auth error caught:",n,i),hs())}render(){return this.state.hasError&&this.state.error?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:o.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),o.jsxs("div",{className:"mt-3 text-center",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Error de Sesión"}),o.jsx("div",{className:"mt-2",children:o.jsx("p",{className:"text-sm text-gray-500",children:"Tu sesión ha expirado. Por favor, recarga la página para continuar."})}),o.jsx("div",{className:"mt-6",children:o.jsx("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:this.handleRetry,children:"Recargar Página"})})]})]})}):this.props.children}}function U2(){return o.jsx(B2,{children:o.jsx(dj,{children:o.jsx(Ww,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[o.jsx(Lj,{}),o.jsx("main",{className:"flex-1",children:o.jsxs(zw,{children:[o.jsx(ot,{path:"/",element:o.jsx(Ij,{})}),o.jsx(ot,{path:"/properties",element:o.jsx(zj,{})}),o.jsx(ot,{path:"/properties/:id",element:o.jsx(r2,{})}),o.jsx(ot,{path:"/login",element:o.jsx(i2,{})}),o.jsx(ot,{path:"/register",element:o.jsx(s2,{})}),o.jsx(ot,{path:"/admin",element:o.jsx(a2,{})}),o.jsx(ot,{path:"/become-agent",element:o.jsx(o2,{})}),o.jsx(ot,{path:"/dashboard",element:o.jsx(Em,{})}),o.jsx(ot,{path:"/agent-dashboard",element:o.jsx(Em,{})}),o.jsx(ot,{path:"/add-property",element:o.jsx(m2,{})}),o.jsx(ot,{path:"/my-properties",element:o.jsx(p2,{})}),o.jsx(ot,{path:"/edit-property/:id",element:o.jsx(g2,{})}),o.jsx(ot,{path:"/payment-plans",element:o.jsx(D2,{})})]})}),o.jsx(Oj,{})]})})})})}cc.createRoot(document.getElementById("root")).render(o.jsx(Kt.StrictMode,{children:o.jsx(U2,{})}));
//# sourceMappingURL=index-Co-rZrbQ.js.map
